<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='ä¸€ã€Schema æ¦‚å¿µç†è§£\r1.1 ä»€ä¹ˆæ˜¯ Schemaï¼Ÿ\rSchema æ˜¯é›†åˆï¼ˆCollectionï¼‰çš„å…ƒæ•°æ®å®šä¹‰ï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„å®šä¹‰ã€‚\nMilvus æ¦‚å¿µ å…³ç³»å‹æ•°æ®åº“æ¦‚å¿µ è¯´æ˜ Schema Table Schema å®šä¹‰æ•°æ®ç»“æ„çš„å…ƒæ•°æ® Field Column å­—æ®µ/åˆ—å®šä¹‰ DataType Data Type æ•°æ®ç±»å‹ï¼ˆVARCHAR, INT, FLOATç­‰ï¼‰ Primary Key Primary Key ä¸»é”®å­—æ®µ Vector Field - Milvus ç‰¹æœ‰çš„å‘é‡å­—æ®µ Dynamic Field - åŠ¨æ€å­—æ®µï¼Œç±»ä¼¼ MongoDB çš„çµæ´» Schema 1.2 åˆ›å»º Schema\rfrom pymilvus import MilvusClient, DataType # åˆ›å»º Schema schema = client.create_schema( enable_dynamic_field=True # å¯ç”¨åŠ¨æ€å­—æ®µ ) # å¯¹æ¯” MySQL # CREATE TABLE products ( # ... # ); äºŒã€å­—æ®µç±»å‹è¯¦è§£\r2.1 å­—æ®µåˆ†ç±»\rå­—æ®µç±»å‹\râ”œâ”€â”€ æ ‡é‡å­—æ®µï¼ˆScalar Fieldsï¼‰\râ”‚ â”œâ”€â”€ å­—ç¬¦ä¸²ï¼ˆVARCHARï¼‰\râ”‚ â”œâ”€â”€ æ•°å­—ï¼ˆINT8/INT16/INT32/INT64/FLOAT/DOUBLE/BOOLï¼‰\râ”‚ â”œâ”€â”€ JSON\râ”‚ â”œâ”€â”€ æ•°ç»„ï¼ˆARRAYï¼‰\râ”‚ â”œâ”€â”€ æ—¶é—´æˆ³ï¼ˆTIMESTAMPTZï¼‰\râ”‚ â”œâ”€â”€ ç»“æ„ä½“æ•°ç»„ï¼ˆARRAY of STRUCTï¼‰\râ”‚ â””â”€â”€ å‡ ä½•å­—æ®µï¼ˆGEOMETRYï¼‰\râ””â”€â”€ å‘é‡å­—æ®µï¼ˆVector Fieldsï¼‰\râ”œâ”€â”€ å¯†é›†å‘é‡ï¼ˆFLOAT_VECTOR/FLOAT16_VECTOR/BFLOAT16_VECTOR/INT8_VECTORï¼‰\râ”œâ”€â”€ ç¨€ç–å‘é‡ï¼ˆSPARSE_FLOAT_VECTORï¼‰\râ””â”€â”€ äºŒè¿›åˆ¶å‘é‡ï¼ˆBINARY_VECTORï¼‰ ä¸‰ã€ä¸»é”®å­—æ®µ\r3.1 ä¸»é”®ç±»å‹å¯¹æ¯”\ræ•°æ®ç±»å‹ è¯´æ˜ å¯¹æ¯” MySQL INT64 64ä½æ•´æ•°ï¼Œæ¨èä½¿ç”¨ ç±»ä¼¼ BIGINT AUTO_INCREMENT VARCHAR å¯å˜é•¿åº¦å­—ç¬¦ä¸² ç±»ä¼¼ VARCHAR(n) PRIMARY KEY 3.2 è‡ªåŠ¨ ID vs æ‰‹åŠ¨ ID\ræ¨¡å¼ è¯´æ˜ ä½¿ç”¨åœºæ™¯ å¯¹æ¯” MySQL è‡ªåŠ¨ ID Milvus è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€æ ‡è¯†ç¬¦ å¤§å¤šæ•°æƒ…å†µ AUTO_INCREMENT æ‰‹åŠ¨ ID ç”¨æˆ·æä¾›å”¯ä¸€ ID ID éœ€è¦ä¸å¤–éƒ¨ç³»ç»Ÿä¿æŒä¸€è‡´ æ‰‹åŠ¨æ’å…¥ä¸»é”®å€¼ 3.3 ä¸»é”®å­—æ®µç¤ºä¾‹\r# è‡ªåŠ¨ ID ä¸»é”® schema.add_field( field_name="product_id", datatype=DataType.INT64, is_primary=True, # æ ‡è®°ä¸ºä¸»é”® auto_id=True # è‡ªåŠ¨ç”Ÿæˆ ID ) # å¯¹æ¯” MySQL # product_id BIGINT AUTO_INCREMENT PRIMARY KEY # æ‰‹åŠ¨ ID ä¸»é”®ï¼ˆä½¿ç”¨å­—ç¬¦ä¸²ï¼‰ schema.add_field( field_name="sku_code", datatype=DataType.VARCHAR, max_length=50, is_primary=True, auto_id=False # æ‰‹åŠ¨æä¾› ID ) # å¯¹æ¯” MySQL # sku_code VARCHAR(50) PRIMARY KEY å››ã€æ ‡é‡å­—æ®µè¯¦è§£\r4.1 å­—ç¬¦ä¸²å­—æ®µï¼ˆVARCHARï¼‰\rå±æ€§ è¯´æ˜ å–å€¼èŒƒå›´ å¯¹æ¯” MySQL datatype æ•°æ®ç±»å‹ DataType.VARCHAR VARCHAR max_length æœ€å¤§é•¿åº¦ 1-65535 VARCHAR(n) ä¸­çš„ n nullable æ˜¯å¦å¯ä¸ºç©º True/False NULL/NOT NULL default_value é»˜è®¤å€¼ å­—ç¬¦ä¸² DEFAULT &lsquo;value&rsquo; # å­—ç¬¦ä¸²å­—æ®µç¤ºä¾‹ schema.add_field( field_name="product_name", datatype=DataType.VARCHAR, max_length=255, nullable=False, default_value="æœªå‘½åå•†å“" ) # å¯¹æ¯” MySQL # product_name VARCHAR(255) NOT NULL DEFAULT &#39;æœªå‘½åå•†å“&#39; 4.2 æ•°å­—å­—æ®µ\rMilvus ç±»å‹ è¯´æ˜ å–å€¼èŒƒå›´ å¯¹æ¯” MySQL BOOL å¸ƒå°”å€¼ True/False BOOLEAN INT8 8ä½æ•´æ•° -128 ~ 127 TINYINT INT16 16ä½æ•´æ•° -32768 ~ 32767 SMALLINT INT32 32ä½æ•´æ•° -2^31 ~ 2^31-1 INT INT64 64ä½æ•´æ•° -2^63 ~ 2^63-1 BIGINT FLOAT 32ä½æµ®ç‚¹æ•° - FLOAT DOUBLE 64ä½æµ®ç‚¹æ•° - DOUBLE # æ•´æ•°å­—æ®µ schema.add_field( field_name="stock_quantity", datatype=DataType.INT32, nullable=False, default_value=0 ) # æµ®ç‚¹æ•°å­—æ®µ schema.add_field( field_name="product_price", datatype=DataType.FLOAT, nullable=False ) # å¸ƒå°”å­—æ®µ schema.add_field( field_name="is_available", datatype=DataType.BOOL, default_value=True ) # å¯¹æ¯” MySQL # stock_quantity INT NOT NULL DEFAULT 0, # product_price FLOAT NOT NULL, # is_available BOOLEAN DEFAULT TRUE 4.3 JSON å­—æ®µ\rJSON å­—æ®µ vs åŠ¨æ€å­—æ®µå¯¹æ¯”\rç‰¹å¾ JSON å­—æ®µ åŠ¨æ€å­—æ®µ å¯¹æ¯” MySQL Schema å®šä¹‰ å¿…é¡»æ˜¾å¼å£°æ˜ éšè—å­—æ®µ $meta JSON åˆ— vs æ— å¯¹åº”æ¦‚å¿µ ä½¿ç”¨åœºæ™¯ ç»“æ„åŒ–ã€å·²çŸ¥çš„æ•°æ® çµæ´»ã€åŠç»“æ„åŒ–æ•°æ® JSON åˆ— vs NoSQL ç‰¹æ€§ æ§åˆ¶ ç”¨æˆ·æ§åˆ¶å­—æ®µåå’Œç»“æ„ ç³»ç»Ÿè‡ªåŠ¨ç®¡ç† - æŸ¥è¯¢æ–¹å¼ metadata["key"] dynamic_key æˆ– $meta["key"] JSON_EXTRACT() # JSON å­—æ®µç¤ºä¾‹ schema.add_field( field_name="product_detail", datatype=DataType.JSON ) # æ’å…¥æ•°æ®ç¤ºä¾‹ data = { "product_id": 1, "product_detail": { "brand": "Apple", "model": "iPhone 15", "specs": { "cpu": "A17 Pro", "ram": "8GB" } } } # å¯¹æ¯” MySQL # product_detail JSON # æŸ¥è¯¢: SELECT JSON_EXTRACT(product_detail, &#39;$.brand&#39;) FROM products; JSON ç´¢å¼•\rJSON ç´¢å¼•é€‚ç”¨åœºæ™¯ï¼š\n'><title>Milvus Schemaæ¨¡å¼è¯¦è§£ - å­—æ®µç±»å‹ä¸æ•°æ®å»ºæ¨¡æŒ‡å—</title><link rel=canonical href=https://zg-dd.github.io/stu/milvus-stu-schema/><link rel=stylesheet href=/scss/style.min.ff560f1cad7a040e336f2dd6880b9ee1ad344d6e3d8f5411e5a1aaa8b23bbdd0.css><meta property='og:title' content="Milvus Schemaæ¨¡å¼è¯¦è§£ - å­—æ®µç±»å‹ä¸æ•°æ®å»ºæ¨¡æŒ‡å—"><meta property='og:description' content='ä¸€ã€Schema æ¦‚å¿µç†è§£\r1.1 ä»€ä¹ˆæ˜¯ Schemaï¼Ÿ\rSchema æ˜¯é›†åˆï¼ˆCollectionï¼‰çš„å…ƒæ•°æ®å®šä¹‰ï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„å®šä¹‰ã€‚\nMilvus æ¦‚å¿µ å…³ç³»å‹æ•°æ®åº“æ¦‚å¿µ è¯´æ˜ Schema Table Schema å®šä¹‰æ•°æ®ç»“æ„çš„å…ƒæ•°æ® Field Column å­—æ®µ/åˆ—å®šä¹‰ DataType Data Type æ•°æ®ç±»å‹ï¼ˆVARCHAR, INT, FLOATç­‰ï¼‰ Primary Key Primary Key ä¸»é”®å­—æ®µ Vector Field - Milvus ç‰¹æœ‰çš„å‘é‡å­—æ®µ Dynamic Field - åŠ¨æ€å­—æ®µï¼Œç±»ä¼¼ MongoDB çš„çµæ´» Schema 1.2 åˆ›å»º Schema\rfrom pymilvus import MilvusClient, DataType # åˆ›å»º Schema schema = client.create_schema( enable_dynamic_field=True # å¯ç”¨åŠ¨æ€å­—æ®µ ) # å¯¹æ¯” MySQL # CREATE TABLE products ( # ... # ); äºŒã€å­—æ®µç±»å‹è¯¦è§£\r2.1 å­—æ®µåˆ†ç±»\rå­—æ®µç±»å‹\râ”œâ”€â”€ æ ‡é‡å­—æ®µï¼ˆScalar Fieldsï¼‰\râ”‚ â”œâ”€â”€ å­—ç¬¦ä¸²ï¼ˆVARCHARï¼‰\râ”‚ â”œâ”€â”€ æ•°å­—ï¼ˆINT8/INT16/INT32/INT64/FLOAT/DOUBLE/BOOLï¼‰\râ”‚ â”œâ”€â”€ JSON\râ”‚ â”œâ”€â”€ æ•°ç»„ï¼ˆARRAYï¼‰\râ”‚ â”œâ”€â”€ æ—¶é—´æˆ³ï¼ˆTIMESTAMPTZï¼‰\râ”‚ â”œâ”€â”€ ç»“æ„ä½“æ•°ç»„ï¼ˆARRAY of STRUCTï¼‰\râ”‚ â””â”€â”€ å‡ ä½•å­—æ®µï¼ˆGEOMETRYï¼‰\râ””â”€â”€ å‘é‡å­—æ®µï¼ˆVector Fieldsï¼‰\râ”œâ”€â”€ å¯†é›†å‘é‡ï¼ˆFLOAT_VECTOR/FLOAT16_VECTOR/BFLOAT16_VECTOR/INT8_VECTORï¼‰\râ”œâ”€â”€ ç¨€ç–å‘é‡ï¼ˆSPARSE_FLOAT_VECTORï¼‰\râ””â”€â”€ äºŒè¿›åˆ¶å‘é‡ï¼ˆBINARY_VECTORï¼‰ ä¸‰ã€ä¸»é”®å­—æ®µ\r3.1 ä¸»é”®ç±»å‹å¯¹æ¯”\ræ•°æ®ç±»å‹ è¯´æ˜ å¯¹æ¯” MySQL INT64 64ä½æ•´æ•°ï¼Œæ¨èä½¿ç”¨ ç±»ä¼¼ BIGINT AUTO_INCREMENT VARCHAR å¯å˜é•¿åº¦å­—ç¬¦ä¸² ç±»ä¼¼ VARCHAR(n) PRIMARY KEY 3.2 è‡ªåŠ¨ ID vs æ‰‹åŠ¨ ID\ræ¨¡å¼ è¯´æ˜ ä½¿ç”¨åœºæ™¯ å¯¹æ¯” MySQL è‡ªåŠ¨ ID Milvus è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€æ ‡è¯†ç¬¦ å¤§å¤šæ•°æƒ…å†µ AUTO_INCREMENT æ‰‹åŠ¨ ID ç”¨æˆ·æä¾›å”¯ä¸€ ID ID éœ€è¦ä¸å¤–éƒ¨ç³»ç»Ÿä¿æŒä¸€è‡´ æ‰‹åŠ¨æ’å…¥ä¸»é”®å€¼ 3.3 ä¸»é”®å­—æ®µç¤ºä¾‹\r# è‡ªåŠ¨ ID ä¸»é”® schema.add_field( field_name="product_id", datatype=DataType.INT64, is_primary=True, # æ ‡è®°ä¸ºä¸»é”® auto_id=True # è‡ªåŠ¨ç”Ÿæˆ ID ) # å¯¹æ¯” MySQL # product_id BIGINT AUTO_INCREMENT PRIMARY KEY # æ‰‹åŠ¨ ID ä¸»é”®ï¼ˆä½¿ç”¨å­—ç¬¦ä¸²ï¼‰ schema.add_field( field_name="sku_code", datatype=DataType.VARCHAR, max_length=50, is_primary=True, auto_id=False # æ‰‹åŠ¨æä¾› ID ) # å¯¹æ¯” MySQL # sku_code VARCHAR(50) PRIMARY KEY å››ã€æ ‡é‡å­—æ®µè¯¦è§£\r4.1 å­—ç¬¦ä¸²å­—æ®µï¼ˆVARCHARï¼‰\rå±æ€§ è¯´æ˜ å–å€¼èŒƒå›´ å¯¹æ¯” MySQL datatype æ•°æ®ç±»å‹ DataType.VARCHAR VARCHAR max_length æœ€å¤§é•¿åº¦ 1-65535 VARCHAR(n) ä¸­çš„ n nullable æ˜¯å¦å¯ä¸ºç©º True/False NULL/NOT NULL default_value é»˜è®¤å€¼ å­—ç¬¦ä¸² DEFAULT &lsquo;value&rsquo; # å­—ç¬¦ä¸²å­—æ®µç¤ºä¾‹ schema.add_field( field_name="product_name", datatype=DataType.VARCHAR, max_length=255, nullable=False, default_value="æœªå‘½åå•†å“" ) # å¯¹æ¯” MySQL # product_name VARCHAR(255) NOT NULL DEFAULT &#39;æœªå‘½åå•†å“&#39; 4.2 æ•°å­—å­—æ®µ\rMilvus ç±»å‹ è¯´æ˜ å–å€¼èŒƒå›´ å¯¹æ¯” MySQL BOOL å¸ƒå°”å€¼ True/False BOOLEAN INT8 8ä½æ•´æ•° -128 ~ 127 TINYINT INT16 16ä½æ•´æ•° -32768 ~ 32767 SMALLINT INT32 32ä½æ•´æ•° -2^31 ~ 2^31-1 INT INT64 64ä½æ•´æ•° -2^63 ~ 2^63-1 BIGINT FLOAT 32ä½æµ®ç‚¹æ•° - FLOAT DOUBLE 64ä½æµ®ç‚¹æ•° - DOUBLE # æ•´æ•°å­—æ®µ schema.add_field( field_name="stock_quantity", datatype=DataType.INT32, nullable=False, default_value=0 ) # æµ®ç‚¹æ•°å­—æ®µ schema.add_field( field_name="product_price", datatype=DataType.FLOAT, nullable=False ) # å¸ƒå°”å­—æ®µ schema.add_field( field_name="is_available", datatype=DataType.BOOL, default_value=True ) # å¯¹æ¯” MySQL # stock_quantity INT NOT NULL DEFAULT 0, # product_price FLOAT NOT NULL, # is_available BOOLEAN DEFAULT TRUE 4.3 JSON å­—æ®µ\rJSON å­—æ®µ vs åŠ¨æ€å­—æ®µå¯¹æ¯”\rç‰¹å¾ JSON å­—æ®µ åŠ¨æ€å­—æ®µ å¯¹æ¯” MySQL Schema å®šä¹‰ å¿…é¡»æ˜¾å¼å£°æ˜ éšè—å­—æ®µ $meta JSON åˆ— vs æ— å¯¹åº”æ¦‚å¿µ ä½¿ç”¨åœºæ™¯ ç»“æ„åŒ–ã€å·²çŸ¥çš„æ•°æ® çµæ´»ã€åŠç»“æ„åŒ–æ•°æ® JSON åˆ— vs NoSQL ç‰¹æ€§ æ§åˆ¶ ç”¨æˆ·æ§åˆ¶å­—æ®µåå’Œç»“æ„ ç³»ç»Ÿè‡ªåŠ¨ç®¡ç† - æŸ¥è¯¢æ–¹å¼ metadata["key"] dynamic_key æˆ– $meta["key"] JSON_EXTRACT() # JSON å­—æ®µç¤ºä¾‹ schema.add_field( field_name="product_detail", datatype=DataType.JSON ) # æ’å…¥æ•°æ®ç¤ºä¾‹ data = { "product_id": 1, "product_detail": { "brand": "Apple", "model": "iPhone 15", "specs": { "cpu": "A17 Pro", "ram": "8GB" } } } # å¯¹æ¯” MySQL # product_detail JSON # æŸ¥è¯¢: SELECT JSON_EXTRACT(product_detail, &#39;$.brand&#39;) FROM products; JSON ç´¢å¼•\rJSON ç´¢å¼•é€‚ç”¨åœºæ™¯ï¼š\n'><meta property='og:url' content='https://zg-dd.github.io/stu/milvus-stu-schema/'><meta property='og:site_name' content='å°å··çš„éšç¬”'><meta property='og:type' content='article'><meta property='article:section' content='Stu'><meta property='article:tag' content='Milvus'><meta property='article:tag' content='Schema'><meta property='article:published_time' content='2026-02-26T18:51:45+08:00'><meta property='article:modified_time' content='2026-02-26T18:51:45+08:00'><meta name=twitter:title content="Milvus Schemaæ¨¡å¼è¯¦è§£ - å­—æ®µç±»å‹ä¸æ•°æ®å»ºæ¨¡æŒ‡å—"><meta name=twitter:description content='ä¸€ã€Schema æ¦‚å¿µç†è§£\r1.1 ä»€ä¹ˆæ˜¯ Schemaï¼Ÿ\rSchema æ˜¯é›†åˆï¼ˆCollectionï¼‰çš„å…ƒæ•°æ®å®šä¹‰ï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„å®šä¹‰ã€‚\nMilvus æ¦‚å¿µ å…³ç³»å‹æ•°æ®åº“æ¦‚å¿µ è¯´æ˜ Schema Table Schema å®šä¹‰æ•°æ®ç»“æ„çš„å…ƒæ•°æ® Field Column å­—æ®µ/åˆ—å®šä¹‰ DataType Data Type æ•°æ®ç±»å‹ï¼ˆVARCHAR, INT, FLOATç­‰ï¼‰ Primary Key Primary Key ä¸»é”®å­—æ®µ Vector Field - Milvus ç‰¹æœ‰çš„å‘é‡å­—æ®µ Dynamic Field - åŠ¨æ€å­—æ®µï¼Œç±»ä¼¼ MongoDB çš„çµæ´» Schema 1.2 åˆ›å»º Schema\rfrom pymilvus import MilvusClient, DataType # åˆ›å»º Schema schema = client.create_schema( enable_dynamic_field=True # å¯ç”¨åŠ¨æ€å­—æ®µ ) # å¯¹æ¯” MySQL # CREATE TABLE products ( # ... # ); äºŒã€å­—æ®µç±»å‹è¯¦è§£\r2.1 å­—æ®µåˆ†ç±»\rå­—æ®µç±»å‹\râ”œâ”€â”€ æ ‡é‡å­—æ®µï¼ˆScalar Fieldsï¼‰\râ”‚ â”œâ”€â”€ å­—ç¬¦ä¸²ï¼ˆVARCHARï¼‰\râ”‚ â”œâ”€â”€ æ•°å­—ï¼ˆINT8/INT16/INT32/INT64/FLOAT/DOUBLE/BOOLï¼‰\râ”‚ â”œâ”€â”€ JSON\râ”‚ â”œâ”€â”€ æ•°ç»„ï¼ˆARRAYï¼‰\râ”‚ â”œâ”€â”€ æ—¶é—´æˆ³ï¼ˆTIMESTAMPTZï¼‰\râ”‚ â”œâ”€â”€ ç»“æ„ä½“æ•°ç»„ï¼ˆARRAY of STRUCTï¼‰\râ”‚ â””â”€â”€ å‡ ä½•å­—æ®µï¼ˆGEOMETRYï¼‰\râ””â”€â”€ å‘é‡å­—æ®µï¼ˆVector Fieldsï¼‰\râ”œâ”€â”€ å¯†é›†å‘é‡ï¼ˆFLOAT_VECTOR/FLOAT16_VECTOR/BFLOAT16_VECTOR/INT8_VECTORï¼‰\râ”œâ”€â”€ ç¨€ç–å‘é‡ï¼ˆSPARSE_FLOAT_VECTORï¼‰\râ””â”€â”€ äºŒè¿›åˆ¶å‘é‡ï¼ˆBINARY_VECTORï¼‰ ä¸‰ã€ä¸»é”®å­—æ®µ\r3.1 ä¸»é”®ç±»å‹å¯¹æ¯”\ræ•°æ®ç±»å‹ è¯´æ˜ å¯¹æ¯” MySQL INT64 64ä½æ•´æ•°ï¼Œæ¨èä½¿ç”¨ ç±»ä¼¼ BIGINT AUTO_INCREMENT VARCHAR å¯å˜é•¿åº¦å­—ç¬¦ä¸² ç±»ä¼¼ VARCHAR(n) PRIMARY KEY 3.2 è‡ªåŠ¨ ID vs æ‰‹åŠ¨ ID\ræ¨¡å¼ è¯´æ˜ ä½¿ç”¨åœºæ™¯ å¯¹æ¯” MySQL è‡ªåŠ¨ ID Milvus è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€æ ‡è¯†ç¬¦ å¤§å¤šæ•°æƒ…å†µ AUTO_INCREMENT æ‰‹åŠ¨ ID ç”¨æˆ·æä¾›å”¯ä¸€ ID ID éœ€è¦ä¸å¤–éƒ¨ç³»ç»Ÿä¿æŒä¸€è‡´ æ‰‹åŠ¨æ’å…¥ä¸»é”®å€¼ 3.3 ä¸»é”®å­—æ®µç¤ºä¾‹\r# è‡ªåŠ¨ ID ä¸»é”® schema.add_field( field_name="product_id", datatype=DataType.INT64, is_primary=True, # æ ‡è®°ä¸ºä¸»é”® auto_id=True # è‡ªåŠ¨ç”Ÿæˆ ID ) # å¯¹æ¯” MySQL # product_id BIGINT AUTO_INCREMENT PRIMARY KEY # æ‰‹åŠ¨ ID ä¸»é”®ï¼ˆä½¿ç”¨å­—ç¬¦ä¸²ï¼‰ schema.add_field( field_name="sku_code", datatype=DataType.VARCHAR, max_length=50, is_primary=True, auto_id=False # æ‰‹åŠ¨æä¾› ID ) # å¯¹æ¯” MySQL # sku_code VARCHAR(50) PRIMARY KEY å››ã€æ ‡é‡å­—æ®µè¯¦è§£\r4.1 å­—ç¬¦ä¸²å­—æ®µï¼ˆVARCHARï¼‰\rå±æ€§ è¯´æ˜ å–å€¼èŒƒå›´ å¯¹æ¯” MySQL datatype æ•°æ®ç±»å‹ DataType.VARCHAR VARCHAR max_length æœ€å¤§é•¿åº¦ 1-65535 VARCHAR(n) ä¸­çš„ n nullable æ˜¯å¦å¯ä¸ºç©º True/False NULL/NOT NULL default_value é»˜è®¤å€¼ å­—ç¬¦ä¸² DEFAULT &lsquo;value&rsquo; # å­—ç¬¦ä¸²å­—æ®µç¤ºä¾‹ schema.add_field( field_name="product_name", datatype=DataType.VARCHAR, max_length=255, nullable=False, default_value="æœªå‘½åå•†å“" ) # å¯¹æ¯” MySQL # product_name VARCHAR(255) NOT NULL DEFAULT &#39;æœªå‘½åå•†å“&#39; 4.2 æ•°å­—å­—æ®µ\rMilvus ç±»å‹ è¯´æ˜ å–å€¼èŒƒå›´ å¯¹æ¯” MySQL BOOL å¸ƒå°”å€¼ True/False BOOLEAN INT8 8ä½æ•´æ•° -128 ~ 127 TINYINT INT16 16ä½æ•´æ•° -32768 ~ 32767 SMALLINT INT32 32ä½æ•´æ•° -2^31 ~ 2^31-1 INT INT64 64ä½æ•´æ•° -2^63 ~ 2^63-1 BIGINT FLOAT 32ä½æµ®ç‚¹æ•° - FLOAT DOUBLE 64ä½æµ®ç‚¹æ•° - DOUBLE # æ•´æ•°å­—æ®µ schema.add_field( field_name="stock_quantity", datatype=DataType.INT32, nullable=False, default_value=0 ) # æµ®ç‚¹æ•°å­—æ®µ schema.add_field( field_name="product_price", datatype=DataType.FLOAT, nullable=False ) # å¸ƒå°”å­—æ®µ schema.add_field( field_name="is_available", datatype=DataType.BOOL, default_value=True ) # å¯¹æ¯” MySQL # stock_quantity INT NOT NULL DEFAULT 0, # product_price FLOAT NOT NULL, # is_available BOOLEAN DEFAULT TRUE 4.3 JSON å­—æ®µ\rJSON å­—æ®µ vs åŠ¨æ€å­—æ®µå¯¹æ¯”\rç‰¹å¾ JSON å­—æ®µ åŠ¨æ€å­—æ®µ å¯¹æ¯” MySQL Schema å®šä¹‰ å¿…é¡»æ˜¾å¼å£°æ˜ éšè—å­—æ®µ $meta JSON åˆ— vs æ— å¯¹åº”æ¦‚å¿µ ä½¿ç”¨åœºæ™¯ ç»“æ„åŒ–ã€å·²çŸ¥çš„æ•°æ® çµæ´»ã€åŠç»“æ„åŒ–æ•°æ® JSON åˆ— vs NoSQL ç‰¹æ€§ æ§åˆ¶ ç”¨æˆ·æ§åˆ¶å­—æ®µåå’Œç»“æ„ ç³»ç»Ÿè‡ªåŠ¨ç®¡ç† - æŸ¥è¯¢æ–¹å¼ metadata["key"] dynamic_key æˆ– $meta["key"] JSON_EXTRACT() # JSON å­—æ®µç¤ºä¾‹ schema.add_field( field_name="product_detail", datatype=DataType.JSON ) # æ’å…¥æ•°æ®ç¤ºä¾‹ data = { "product_id": 1, "product_detail": { "brand": "Apple", "model": "iPhone 15", "specs": { "cpu": "A17 Pro", "ram": "8GB" } } } # å¯¹æ¯” MySQL # product_detail JSON # æŸ¥è¯¢: SELECT JSON_EXTRACT(product_detail, &#39;$.brand&#39;) FROM products; JSON ç´¢å¼•\rJSON ç´¢å¼•é€‚ç”¨åœºæ™¯ï¼š\n'></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_a0cc1cf57968b27d.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸŒ±</span></figure><div class=site-meta><h1 class=site-name><a href=/>å°å··çš„éšç¬”</a></h1><h2 class=site-description>è®°å½•ï¼Œä¸æ˜¯ä¸ºäº†è¯æ˜è‡ªå·±ï¼›è€Œæ˜¯æŠŠâ€œè§£å†³é—®é¢˜ â†’ æ€è€ƒ â†’ æ²‰æ·€â€å½¢æˆä¹ æƒ¯ã€‚</h2></div></header><ol class=menu id=main-menu><li class=current><a href=/stu/><span>å­¦ä¹ ç¬”è®°</span></a></li><li><a href=/blog/><span>éšç¬”æ€è€ƒ</span></a></li><li><a href=/life/><span>ç”Ÿæ´»è®°å½•</span></a></li><li><a href=/categories/><span>åˆ†ç±»</span></a></li><li><a href=/tags/><span>æ ‡ç­¾</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://zg-dd.github.io/ selected>ç®€ä½“ä¸­æ–‡</option><option value=https://zg-dd.github.io/en/>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#ä¸€schema-æ¦‚å¿µç†è§£>ä¸€ã€Schema æ¦‚å¿µç†è§£</a><ul><li><a href=#11-ä»€ä¹ˆæ˜¯-schema>1.1 ä»€ä¹ˆæ˜¯ Schemaï¼Ÿ</a></li><li><a href=#12-åˆ›å»º-schema>1.2 åˆ›å»º Schema</a></li></ul></li><li><a href=#äºŒå­—æ®µç±»å‹è¯¦è§£>äºŒã€å­—æ®µç±»å‹è¯¦è§£</a><ul><li><a href=#21-å­—æ®µåˆ†ç±»>2.1 å­—æ®µåˆ†ç±»</a></li></ul></li><li><a href=#ä¸‰ä¸»é”®å­—æ®µ>ä¸‰ã€ä¸»é”®å­—æ®µ</a><ul><li><a href=#31-ä¸»é”®ç±»å‹å¯¹æ¯”>3.1 ä¸»é”®ç±»å‹å¯¹æ¯”</a></li><li><a href=#32-è‡ªåŠ¨-id-vs-æ‰‹åŠ¨-id>3.2 è‡ªåŠ¨ ID vs æ‰‹åŠ¨ ID</a></li><li><a href=#33-ä¸»é”®å­—æ®µç¤ºä¾‹>3.3 ä¸»é”®å­—æ®µç¤ºä¾‹</a></li></ul></li><li><a href=#å››æ ‡é‡å­—æ®µè¯¦è§£>å››ã€æ ‡é‡å­—æ®µè¯¦è§£</a><ul><li><a href=#41-å­—ç¬¦ä¸²å­—æ®µvarchar>4.1 å­—ç¬¦ä¸²å­—æ®µï¼ˆVARCHARï¼‰</a></li><li><a href=#42-æ•°å­—å­—æ®µ>4.2 æ•°å­—å­—æ®µ</a></li><li><a href=#43-json-å­—æ®µ>4.3 JSON å­—æ®µ</a></li><li><a href=#44-æ•°ç»„å­—æ®µarray>4.4 æ•°ç»„å­—æ®µï¼ˆARRAYï¼‰</a></li><li><a href=#45-æ—¶é—´æˆ³å­—æ®µtimestamptz>4.5 æ—¶é—´æˆ³å­—æ®µï¼ˆTIMESTAMPTZï¼‰</a></li><li><a href=#46-ç»“æ„ä½“æ•°ç»„array-of-struct>4.6 ç»“æ„ä½“æ•°ç»„ï¼ˆARRAY of STRUCTï¼‰</a></li><li><a href=#47-å‡ ä½•å­—æ®µgeometry>4.7 å‡ ä½•å­—æ®µï¼ˆGEOMETRYï¼‰</a></li></ul></li><li><a href=#äº”å‘é‡å­—æ®µè¯¦è§£>äº”ã€å‘é‡å­—æ®µè¯¦è§£</a><ul><li><a href=#51-å‘é‡ç±»å‹å¯¹æ¯”>5.1 å‘é‡ç±»å‹å¯¹æ¯”</a></li><li><a href=#52-å¯†é›†å‘é‡ç¤ºä¾‹>5.2 å¯†é›†å‘é‡ç¤ºä¾‹</a></li><li><a href=#53-ç¨€ç–å‘é‡ç¤ºä¾‹>5.3 ç¨€ç–å‘é‡ç¤ºä¾‹</a></li></ul></li></ul><ul><li><ul><li><a href=#62-åŠ¨æ€å­—æ®µæ”¯æŒçš„ç±»å‹>6.2 åŠ¨æ€å­—æ®µæ”¯æŒçš„ç±»å‹</a></li><li><a href=#63-æŸ¥è¯¢åŠ¨æ€å­—æ®µ>6.3 æŸ¥è¯¢åŠ¨æ€å­—æ®µ</a></li></ul></li><li><a href=#ä¸ƒå®Œæ•´-schema-ç¤ºä¾‹>ä¸ƒã€å®Œæ•´ Schema ç¤ºä¾‹</a></li><li><a href=#å…«schema-ä¸-mysql-å¯¹æ¯”æ€»ç»“>å…«ã€Schema ä¸ MySQL å¯¹æ¯”æ€»ç»“</a></li><li><a href=#ä¹æœ€ä½³å®è·µ>ä¹ã€æœ€ä½³å®è·µ</a><ul><li><a href=#91-å­—æ®µå‘½åè§„èŒƒ>9.1 å­—æ®µå‘½åè§„èŒƒ</a></li><li><a href=#92-å‘é‡ç»´åº¦é€‰æ‹©>9.2 å‘é‡ç»´åº¦é€‰æ‹©</a></li><li><a href=#93-ç´¢å¼•ç­–ç•¥>9.3 ç´¢å¼•ç­–ç•¥</a></li></ul></li><li><a href=#åå…³é”®è¦ç‚¹æ€»ç»“>åã€å…³é”®è¦ç‚¹æ€»ç»“</a></li></ul></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/>å‘é‡æ•°æ®åº“</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/stu/milvus-stu-schema/>Milvus Schemaæ¨¡å¼è¯¦è§£ - å­—æ®µç±»å‹ä¸æ•°æ®å»ºæ¨¡æŒ‡å—</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2026-02-26T18:51:45+08:00>Feb 26, 2026</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 7 åˆ†é’Ÿ</time></div></footer><footer class=article-translations><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://zg-dd.github.io/en/stu/milvus-stu-schema/ class=link>English</a></div></footer></div></header><section class=article-content><h2 id=ä¸€schema-æ¦‚å¿µç†è§£>ä¸€ã€Schema æ¦‚å¿µç†è§£</h2><h3 id=11-ä»€ä¹ˆæ˜¯-schema>1.1 ä»€ä¹ˆæ˜¯ Schemaï¼Ÿ</h3><p>Schema æ˜¯é›†åˆï¼ˆCollectionï¼‰çš„å…ƒæ•°æ®å®šä¹‰ï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„å®šä¹‰ã€‚</p><div class=table-wrapper><table><thead><tr><th>Milvus æ¦‚å¿µ</th><th>å…³ç³»å‹æ•°æ®åº“æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Schema</td><td>Table Schema</td><td>å®šä¹‰æ•°æ®ç»“æ„çš„å…ƒæ•°æ®</td></tr><tr><td>Field</td><td>Column</td><td>å­—æ®µ/åˆ—å®šä¹‰</td></tr><tr><td>DataType</td><td>Data Type</td><td>æ•°æ®ç±»å‹ï¼ˆVARCHAR, INT, FLOATç­‰ï¼‰</td></tr><tr><td>Primary Key</td><td>Primary Key</td><td>ä¸»é”®å­—æ®µ</td></tr><tr><td>Vector Field</td><td>-</td><td>Milvus ç‰¹æœ‰çš„å‘é‡å­—æ®µ</td></tr><tr><td>Dynamic Field</td><td>-</td><td>åŠ¨æ€å­—æ®µï¼Œç±»ä¼¼ MongoDB çš„çµæ´» Schema</td></tr></tbody></table></div><h3 id=12-åˆ›å»º-schema>1.2 åˆ›å»º Schema</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pymilvus <span style=color:#f92672>import</span> MilvusClient, DataType
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># åˆ›å»º Schema</span>
</span></span><span style=display:flex><span>schema <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>create_schema(
</span></span><span style=display:flex><span>    enable_dynamic_field<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>  <span style=color:#75715e># å¯ç”¨åŠ¨æ€å­—æ®µ</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># CREATE TABLE products (</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     ...</span>
</span></span><span style=display:flex><span><span style=color:#75715e># );</span>
</span></span></code></pre></div><h2 id=äºŒå­—æ®µç±»å‹è¯¦è§£>äºŒã€å­—æ®µç±»å‹è¯¦è§£</h2><h3 id=21-å­—æ®µåˆ†ç±»>2.1 å­—æ®µåˆ†ç±»</h3><pre tabindex=0><code>å­—æ®µç±»å‹
â”œâ”€â”€ æ ‡é‡å­—æ®µï¼ˆScalar Fieldsï¼‰
â”‚   â”œâ”€â”€ å­—ç¬¦ä¸²ï¼ˆVARCHARï¼‰
â”‚   â”œâ”€â”€ æ•°å­—ï¼ˆINT8/INT16/INT32/INT64/FLOAT/DOUBLE/BOOLï¼‰
â”‚   â”œâ”€â”€ JSON
â”‚   â”œâ”€â”€ æ•°ç»„ï¼ˆARRAYï¼‰
â”‚   â”œâ”€â”€ æ—¶é—´æˆ³ï¼ˆTIMESTAMPTZï¼‰
â”‚   â”œâ”€â”€ ç»“æ„ä½“æ•°ç»„ï¼ˆARRAY of STRUCTï¼‰
â”‚   â””â”€â”€ å‡ ä½•å­—æ®µï¼ˆGEOMETRYï¼‰
â””â”€â”€ å‘é‡å­—æ®µï¼ˆVector Fieldsï¼‰
    â”œâ”€â”€ å¯†é›†å‘é‡ï¼ˆFLOAT_VECTOR/FLOAT16_VECTOR/BFLOAT16_VECTOR/INT8_VECTORï¼‰
    â”œâ”€â”€ ç¨€ç–å‘é‡ï¼ˆSPARSE_FLOAT_VECTORï¼‰
    â””â”€â”€ äºŒè¿›åˆ¶å‘é‡ï¼ˆBINARY_VECTORï¼‰
</code></pre><h2 id=ä¸‰ä¸»é”®å­—æ®µ>ä¸‰ã€ä¸»é”®å­—æ®µ</h2><h3 id=31-ä¸»é”®ç±»å‹å¯¹æ¯”>3.1 ä¸»é”®ç±»å‹å¯¹æ¯”</h3><div class=table-wrapper><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>è¯´æ˜</th><th>å¯¹æ¯” MySQL</th></tr></thead><tbody><tr><td>INT64</td><td>64ä½æ•´æ•°ï¼Œæ¨èä½¿ç”¨</td><td>ç±»ä¼¼ <code>BIGINT AUTO_INCREMENT</code></td></tr><tr><td>VARCHAR</td><td>å¯å˜é•¿åº¦å­—ç¬¦ä¸²</td><td>ç±»ä¼¼ <code>VARCHAR(n) PRIMARY KEY</code></td></tr></tbody></table></div><h3 id=32-è‡ªåŠ¨-id-vs-æ‰‹åŠ¨-id>3.2 è‡ªåŠ¨ ID vs æ‰‹åŠ¨ ID</h3><div class=table-wrapper><table><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th><th>å¯¹æ¯” MySQL</th></tr></thead><tbody><tr><td>è‡ªåŠ¨ ID</td><td>Milvus è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€æ ‡è¯†ç¬¦</td><td>å¤§å¤šæ•°æƒ…å†µ</td><td><code>AUTO_INCREMENT</code></td></tr><tr><td>æ‰‹åŠ¨ ID</td><td>ç”¨æˆ·æä¾›å”¯ä¸€ ID</td><td>ID éœ€è¦ä¸å¤–éƒ¨ç³»ç»Ÿä¿æŒä¸€è‡´</td><td>æ‰‹åŠ¨æ’å…¥ä¸»é”®å€¼</td></tr></tbody></table></div><h3 id=33-ä¸»é”®å­—æ®µç¤ºä¾‹>3.3 ä¸»é”®å­—æ®µç¤ºä¾‹</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># è‡ªåŠ¨ ID ä¸»é”®</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;product_id&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>INT64,
</span></span><span style=display:flex><span>    is_primary<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>,    <span style=color:#75715e># æ ‡è®°ä¸ºä¸»é”®</span>
</span></span><span style=display:flex><span>    auto_id<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>        <span style=color:#75715e># è‡ªåŠ¨ç”Ÿæˆ ID</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># product_id BIGINT AUTO_INCREMENT PRIMARY KEY</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ‰‹åŠ¨ ID ä¸»é”®ï¼ˆä½¿ç”¨å­—ç¬¦ä¸²ï¼‰</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sku_code&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>    max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>,
</span></span><span style=display:flex><span>    is_primary<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>    auto_id<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>       <span style=color:#75715e># æ‰‹åŠ¨æä¾› ID</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># sku_code VARCHAR(50) PRIMARY KEY</span>
</span></span></code></pre></div><h2 id=å››æ ‡é‡å­—æ®µè¯¦è§£>å››ã€æ ‡é‡å­—æ®µè¯¦è§£</h2><h3 id=41-å­—ç¬¦ä¸²å­—æ®µvarchar>4.1 å­—ç¬¦ä¸²å­—æ®µï¼ˆVARCHARï¼‰</h3><div class=table-wrapper><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>å–å€¼èŒƒå›´</th><th>å¯¹æ¯” MySQL</th></tr></thead><tbody><tr><td>datatype</td><td>æ•°æ®ç±»å‹</td><td>DataType.VARCHAR</td><td>VARCHAR</td></tr><tr><td>max_length</td><td>æœ€å¤§é•¿åº¦</td><td>1-65535</td><td>VARCHAR(n) ä¸­çš„ n</td></tr><tr><td>nullable</td><td>æ˜¯å¦å¯ä¸ºç©º</td><td>True/False</td><td>NULL/NOT NULL</td></tr><tr><td>default_value</td><td>é»˜è®¤å€¼</td><td>å­—ç¬¦ä¸²</td><td>DEFAULT &lsquo;value&rsquo;</td></tr></tbody></table></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># å­—ç¬¦ä¸²å­—æ®µç¤ºä¾‹</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;product_name&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>    max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>255</span>,
</span></span><span style=display:flex><span>    nullable<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>,
</span></span><span style=display:flex><span>    default_value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;æœªå‘½åå•†å“&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># product_name VARCHAR(255) NOT NULL DEFAULT &#39;æœªå‘½åå•†å“&#39;</span>
</span></span></code></pre></div><h3 id=42-æ•°å­—å­—æ®µ>4.2 æ•°å­—å­—æ®µ</h3><div class=table-wrapper><table><thead><tr><th>Milvus ç±»å‹</th><th>è¯´æ˜</th><th>å–å€¼èŒƒå›´</th><th>å¯¹æ¯” MySQL</th></tr></thead><tbody><tr><td>BOOL</td><td>å¸ƒå°”å€¼</td><td>True/False</td><td>BOOLEAN</td></tr><tr><td>INT8</td><td>8ä½æ•´æ•°</td><td>-128 ~ 127</td><td>TINYINT</td></tr><tr><td>INT16</td><td>16ä½æ•´æ•°</td><td>-32768 ~ 32767</td><td>SMALLINT</td></tr><tr><td>INT32</td><td>32ä½æ•´æ•°</td><td>-2^31 ~ 2^31-1</td><td>INT</td></tr><tr><td>INT64</td><td>64ä½æ•´æ•°</td><td>-2^63 ~ 2^63-1</td><td>BIGINT</td></tr><tr><td>FLOAT</td><td>32ä½æµ®ç‚¹æ•°</td><td>-</td><td>FLOAT</td></tr><tr><td>DOUBLE</td><td>64ä½æµ®ç‚¹æ•°</td><td>-</td><td>DOUBLE</td></tr></tbody></table></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># æ•´æ•°å­—æ®µ</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stock_quantity&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>INT32,
</span></span><span style=display:flex><span>    nullable<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>,
</span></span><span style=display:flex><span>    default_value<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æµ®ç‚¹æ•°å­—æ®µ</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;product_price&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>FLOAT,
</span></span><span style=display:flex><span>    nullable<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¸ƒå°”å­—æ®µ</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;is_available&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>BOOL,
</span></span><span style=display:flex><span>    default_value<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># stock_quantity INT NOT NULL DEFAULT 0,</span>
</span></span><span style=display:flex><span><span style=color:#75715e># product_price FLOAT NOT NULL,</span>
</span></span><span style=display:flex><span><span style=color:#75715e># is_available BOOLEAN DEFAULT TRUE</span>
</span></span></code></pre></div><h3 id=43-json-å­—æ®µ>4.3 JSON å­—æ®µ</h3><h4 id=json-å­—æ®µ-vs-åŠ¨æ€å­—æ®µå¯¹æ¯”>JSON å­—æ®µ vs åŠ¨æ€å­—æ®µå¯¹æ¯”</h4><div class=table-wrapper><table><thead><tr><th>ç‰¹å¾</th><th>JSON å­—æ®µ</th><th>åŠ¨æ€å­—æ®µ</th><th>å¯¹æ¯” MySQL</th></tr></thead><tbody><tr><td>Schema å®šä¹‰</td><td>å¿…é¡»æ˜¾å¼å£°æ˜</td><td>éšè—å­—æ®µ <code>$meta</code></td><td>JSON åˆ— vs æ— å¯¹åº”æ¦‚å¿µ</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>ç»“æ„åŒ–ã€å·²çŸ¥çš„æ•°æ®</td><td>çµæ´»ã€åŠç»“æ„åŒ–æ•°æ®</td><td>JSON åˆ— vs NoSQL ç‰¹æ€§</td></tr><tr><td>æ§åˆ¶</td><td>ç”¨æˆ·æ§åˆ¶å­—æ®µåå’Œç»“æ„</td><td>ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†</td><td>-</td></tr><tr><td>æŸ¥è¯¢æ–¹å¼</td><td><code>metadata["key"]</code></td><td><code>dynamic_key</code> æˆ– <code>$meta["key"]</code></td><td><code>JSON_EXTRACT()</code></td></tr></tbody></table></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># JSON å­—æ®µç¤ºä¾‹</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;product_detail&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>JSON
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ’å…¥æ•°æ®ç¤ºä¾‹</span>
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;product_id&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;product_detail&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;brand&#34;</span>: <span style=color:#e6db74>&#34;Apple&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;model&#34;</span>: <span style=color:#e6db74>&#34;iPhone 15&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;specs&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;cpu&#34;</span>: <span style=color:#e6db74>&#34;A17 Pro&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;ram&#34;</span>: <span style=color:#e6db74>&#34;8GB&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># product_detail JSON</span>
</span></span><span style=display:flex><span><span style=color:#75715e># æŸ¥è¯¢: SELECT JSON_EXTRACT(product_detail, &#39;$.brand&#39;) FROM products;</span>
</span></span></code></pre></div><h4 id=json-ç´¢å¼•>JSON ç´¢å¼•</h4><p>JSON ç´¢å¼•é€‚ç”¨åœºæ™¯ï¼š</p><ol><li>å…·æœ‰ä¸€è‡´ã€å·²çŸ¥é”®çš„ç»“æ„åŒ– Schema</li><li>ç‰¹å®š JSON è·¯å¾„ä¸Šçš„ç­‰ä»·å’ŒèŒƒå›´æŸ¥è¯¢</li><li>éœ€è¦ç²¾ç¡®æ§åˆ¶ç´¢å¼•é”®çš„æƒ…å†µ</li><li>å¯¹ç›®æ ‡æŸ¥è¯¢è¿›è¡Œé«˜æ•ˆå­˜å‚¨åŠ é€Ÿ</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># åˆ›å»º JSON ç´¢å¼•</span>
</span></span><span style=display:flex><span>index_params <span style=color:#f92672>=</span> MilvusClient<span style=color:#f92672>.</span>prepare_index_params()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>index_params<span style=color:#f92672>.</span>add_index(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;product_detail&#34;</span>,        <span style=color:#75715e># JSON å­—æ®µå</span>
</span></span><span style=display:flex><span>    index_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;AUTOINDEX&#34;</span>,             <span style=color:#75715e># å¿…é¡»æ˜¯ AUTOINDEX æˆ– INVERTED</span>
</span></span><span style=display:flex><span>    index_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;idx_product_brand&#34;</span>,     <span style=color:#75715e># ç´¢å¼•åç§°</span>
</span></span><span style=display:flex><span>    params<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;json_path&#34;</span>: <span style=color:#e6db74>&#39;product_detail[&#34;brand&#34;]&#39;</span>,  <span style=color:#75715e># é¡¶çº§é”®</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;json_cast_type&#34;</span>: <span style=color:#e6db74>&#34;VARCHAR&#34;</span>              <span style=color:#75715e># æ•°æ®ç±»å‹</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># åµŒå¥—é”®ç´¢å¼•</span>
</span></span><span style=display:flex><span>index_params<span style=color:#f92672>.</span>add_index(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;product_detail&#34;</span>,
</span></span><span style=display:flex><span>    index_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;AUTOINDEX&#34;</span>,
</span></span><span style=display:flex><span>    index_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;idx_product_cpu&#34;</span>,
</span></span><span style=display:flex><span>    params<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;json_path&#34;</span>: <span style=color:#e6db74>&#39;product_detail[&#34;specs&#34;][&#34;cpu&#34;]&#39;</span>,  <span style=color:#75715e># åµŒå¥—é”®</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;json_cast_type&#34;</span>: <span style=color:#e6db74>&#34;VARCHAR&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL 8.0+</span>
</span></span><span style=display:flex><span><span style=color:#75715e># CREATE INDEX idx_product_brand ON products((JSON_EXTRACT(product_detail, &#39;$.brand&#39;)));</span>
</span></span></code></pre></div><h4 id=json-åˆ‡ç¢shreddingä¼˜åŒ–>JSON åˆ‡ç¢ï¼ˆShreddingï¼‰ä¼˜åŒ–</h4><p>JSON åˆ‡ç¢é€šè¿‡å°†åŸºäºè¡Œçš„å­˜å‚¨è½¬æ¢ä¸ºåˆ—å¼å­˜å‚¨æ¥åŠ é€ŸæŸ¥è¯¢ã€‚</p><div class=table-wrapper><table><thead><tr><th>å‚æ•°åç§°</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th><th>è°ƒæ•´å»ºè®®</th></tr></thead><tbody><tr><td><code>common.enabledJSONShredding</code></td><td>æ˜¯å¦å¯ç”¨ JSON åˆ‡ç¢</td><td>false</td><td>è®¾ä¸º true æ¿€æ´»åŠŸèƒ½</td></tr><tr><td><code>common.usingJSONShreddingForQuery</code></td><td>æ˜¯å¦ä½¿ç”¨åˆ‡ç¢æ•°æ®åŠ é€Ÿ</td><td>true</td><td>æŸ¥è¯¢å¤±è´¥æ—¶è®¾ä¸º false æ¢å¤</td></tr><tr><td><code>queryNode.mmap.jsonShredding</code></td><td>åŠ è½½æ—¶æ˜¯å¦ä½¿ç”¨ mmap</td><td>true</td><td>ç‰¹æ®Šå†…å­˜éœ€æ±‚æ—¶è°ƒæ•´</td></tr><tr><td><code>dataCoord.jsonShreddingMaxColumns</code></td><td>æœ€å¤§åˆ‡ç¢åˆ—æ•°</td><td>1024</td><td>é¢‘ç¹é”®è¶…é™æ—¶å¢åŠ </td></tr><tr><td><code>dataCoord.jsonShreddingRatioThreshold</code></td><td>æœ€å°å‡ºç°ç‡é˜ˆå€¼</td><td>0.3</td><td>è°ƒæ•´åˆ‡ç¢æ ‡å‡†</td></tr></tbody></table></div><pre tabindex=0><code># milvus.yaml é…ç½®ç¤ºä¾‹
common:
  enabledJSONShredding: true
  usingJSONShreddingForQuery: true

queryNode:
  mmap:
    jsonShredding: true

dataCoord:
  jsonShreddingMaxColumns: 1024
  jsonShreddingRatioThreshold: 0.3
</code></pre><h3 id=44-æ•°ç»„å­—æ®µarray>4.4 æ•°ç»„å­—æ®µï¼ˆARRAYï¼‰</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># å­—ç¬¦ä¸²æ•°ç»„</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;product_tags&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>ARRAY,
</span></span><span style=display:flex><span>    element_type<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>    max_capacity<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>,           <span style=color:#75715e># æœ€å¤š10ä¸ªå…ƒç´ </span>
</span></span><span style=display:flex><span>    max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>              <span style=color:#75715e># æ¯ä¸ªå­—ç¬¦ä¸²æœ€é•¿50å­—ç¬¦</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ•´æ•°æ•°ç»„</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;related_product_ids&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>ARRAY,
</span></span><span style=display:flex><span>    element_type<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>INT64,
</span></span><span style=display:flex><span>    max_capacity<span style=color:#f92672>=</span><span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ’å…¥æ•°æ®ç¤ºä¾‹</span>
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;product_id&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;product_tags&#34;</span>: [<span style=color:#e6db74>&#34;ç”µå­äº§å“&#34;</span>, <span style=color:#e6db74>&#34;æ‰‹æœº&#34;</span>, <span style=color:#e6db74>&#34;5G&#34;</span>, <span style=color:#e6db74>&#34;æ™ºèƒ½&#34;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;related_product_ids&#34;</span>: [<span style=color:#ae81ff>101</span>, <span style=color:#ae81ff>102</span>, <span style=color:#ae81ff>103</span>]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL 8.0+</span>
</span></span><span style=display:flex><span><span style=color:#75715e># product_tags JSON  -- MySQL ç”¨ JSON æ•°ç»„å®ç°</span>
</span></span><span style=display:flex><span><span style=color:#75715e># æˆ–ä½¿ç”¨å…³è”è¡¨å®ç°å¤šå¯¹å¤šå…³ç³»</span>
</span></span></code></pre></div><h3 id=45-æ—¶é—´æˆ³å­—æ®µtimestamptz>4.5 æ—¶é—´æˆ³å­—æ®µï¼ˆTIMESTAMPTZï¼‰</h3><p>TIMESTAMPTZ æ˜¯æ—¶åŒºæ„ŸçŸ¥çš„æ—¶é—´æˆ³ç±»å‹ã€‚</p><div class=table-wrapper><table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th><th>å¯¹æ¯” MySQL</th></tr></thead><tbody><tr><td>è¾“å…¥æ ¼å¼</td><td>ISO 8601 å­—ç¬¦ä¸²ï¼ˆå¸¦æ—¶åŒºï¼‰</td><td>TIMESTAMP</td></tr><tr><td>å†…éƒ¨å­˜å‚¨</td><td>UTC æ ‡å‡†åŒ–å­˜å‚¨</td><td>å–å†³äº <code>time_zone</code> è®¾ç½®</td></tr><tr><td>æ¯”è¾ƒæ“ä½œ</td><td>ç»Ÿä¸€ä½¿ç”¨ UTC</td><td>å¯èƒ½å—æ—¶åŒºå½±å“</td></tr></tbody></table></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># æ—¶é—´æˆ³å­—æ®µ</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;created_at&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>TIMESTAMPTZ,
</span></span><span style=display:flex><span>    nullable<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>,
</span></span><span style=display:flex><span>    default_value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;2025-01-01T00:00:00+00:00&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ’å…¥æ•°æ®ç¤ºä¾‹</span>
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;product_id&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;created_at&#34;</span>: <span style=color:#e6db74>&#34;2025-05-01T23:59:59+08:00&#34;</span>  <span style=color:#75715e># åŒ—äº¬æ—¶é—´</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span>
</span></span></code></pre></div><h4 id=æ—¶åŒºç®¡ç†çº§åˆ«>æ—¶åŒºç®¡ç†çº§åˆ«</h4><div class=table-wrapper><table><thead><tr><th>çº§åˆ«</th><th>å‚æ•°</th><th>èŒƒå›´</th><th>ä¼˜å…ˆçº§</th></tr></thead><tbody><tr><td>æ•°æ®åº“</td><td>timezone</td><td>æ•°æ®åº“ä¸­æ‰€æœ‰é›†åˆçš„é»˜è®¤å€¼</td><td>æœ€ä½</td></tr><tr><td>é›†åˆ</td><td>timezone</td><td>è¦†ç›–è¯¥é›†åˆçš„æ•°æ®åº“é»˜è®¤æ—¶åŒº</td><td>ä¸­</td></tr><tr><td>æŸ¥è¯¢/æœç´¢</td><td>timezone</td><td>ä¸´æ—¶è¦†ç›–ä¸€ä¸ªç‰¹å®šæ“ä½œ</td><td>æœ€é«˜</td></tr></tbody></table></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># æ•°æ®åº“çº§åˆ«è®¾ç½®æ—¶åŒº</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>alter_database_properties(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;my_db&#34;</span>,
</span></span><span style=display:flex><span>    {<span style=color:#e6db74>&#34;timezone&#34;</span>: <span style=color:#e6db74>&#34;Asia/Shanghai&#34;</span>}
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># é›†åˆçº§åˆ«è®¾ç½®æ—¶åŒºï¼ˆåˆ›å»ºé›†åˆæ—¶ï¼‰</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;products&#34;</span>,
</span></span><span style=display:flex><span>    schema<span style=color:#f92672>=</span>schema,
</span></span><span style=display:flex><span>    properties<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;timezone&#34;</span>: <span style=color:#e6db74>&#34;America/New_York&#34;</span>}
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æŸ¥è¯¢æ—¶ä¸´æ—¶æŒ‡å®šæ—¶åŒº</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>query(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;products&#34;</span>,
</span></span><span style=display:flex><span>    filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;created_at &gt; &#39;2025-01-01T00:00:00+08:00&#39;&#34;</span>,
</span></span><span style=display:flex><span>    timezone<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Asia/Shanghai&#34;</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h3 id=46-ç»“æ„ä½“æ•°ç»„array-of-struct>4.6 ç»“æ„ä½“æ•°ç»„ï¼ˆARRAY of STRUCTï¼‰</h3><p>ç»“æ„ä½“æ•°ç»„ç”¨äºå­˜å‚¨å¤æ‚çš„åµŒå¥—æ•°æ®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># å•†å“è¯„è®ºæ•°ç»„ç¤ºä¾‹</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;reviews&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>ARRAY,
</span></span><span style=display:flex><span>    element_type<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>STRUCT,
</span></span><span style=display:flex><span>    max_capacity<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>,
</span></span><span style=display:flex><span>    element_schema<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;fields&#34;</span>: [
</span></span><span style=display:flex><span>            {<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;user_id&#34;</span>, <span style=color:#e6db74>&#34;type&#34;</span>: DataType<span style=color:#f92672>.</span>INT64},
</span></span><span style=display:flex><span>            {<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;rating&#34;</span>, <span style=color:#e6db74>&#34;type&#34;</span>: DataType<span style=color:#f92672>.</span>INT32},
</span></span><span style=display:flex><span>            {<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;comment&#34;</span>, <span style=color:#e6db74>&#34;type&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR, <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>500</span>},
</span></span><span style=display:flex><span>            {<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;review_vector&#34;</span>, <span style=color:#e6db74>&#34;type&#34;</span>: DataType<span style=color:#f92672>.</span>FLOAT_VECTOR, <span style=color:#e6db74>&#34;dim&#34;</span>: <span style=color:#ae81ff>64</span>},
</span></span><span style=display:flex><span>            {<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;timestamp&#34;</span>, <span style=color:#e6db74>&#34;type&#34;</span>: DataType<span style=color:#f92672>.</span>TIMESTAMPTZ}
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ’å…¥æ•°æ®ç¤ºä¾‹</span>
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;product_id&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;reviews&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;user_id&#34;</span>: <span style=color:#ae81ff>1001</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;rating&#34;</span>: <span style=color:#ae81ff>5</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;comment&#34;</span>: <span style=color:#e6db74>&#34;éå¸¸å¥½ç”¨ï¼&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;review_vector&#34;</span>: [<span style=color:#ae81ff>0.1</span>, <span style=color:#ae81ff>0.2</span>, <span style=color:#f92672>...</span>],  <span style=color:#75715e># 64ç»´å‘é‡</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2025-05-01T10:00:00+08:00&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;user_id&#34;</span>: <span style=color:#ae81ff>1002</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;rating&#34;</span>: <span style=color:#ae81ff>4</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;comment&#34;</span>: <span style=color:#e6db74>&#34;è¿˜ä¸é”™&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;review_vector&#34;</span>: [<span style=color:#ae81ff>0.3</span>, <span style=color:#ae81ff>0.4</span>, <span style=color:#f92672>...</span>],
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2025-05-02T15:30:00+08:00&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># éœ€è¦åˆ›å»ºå…³è”è¡¨ reviews</span>
</span></span><span style=display:flex><span><span style=color:#75715e># CREATE TABLE reviews (</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     review_id BIGINT PRIMARY KEY,</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     product_id BIGINT,</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     user_id BIGINT,</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     rating INT,</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     comment VARCHAR(500),</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     timestamp TIMESTAMP,</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#     FOREIGN KEY (product_id) REFERENCES products(product_id)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># );</span>
</span></span></code></pre></div><h3 id=47-å‡ ä½•å­—æ®µgeometry>4.7 å‡ ä½•å­—æ®µï¼ˆGEOMETRYï¼‰</h3><p>ç”¨äºå­˜å‚¨åœ°ç†ä½ç½®å’Œåæ ‡ä¿¡æ¯ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># å‡ ä½•å­—æ®µ</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;store_location&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>GEOMETRY,
</span></span><span style=display:flex><span>    default_value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;POINT(0 0)&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ’å…¥æ•°æ®ç¤ºä¾‹</span>
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;product_id&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;store_location&#34;</span>: <span style=color:#e6db74>&#34;POINT(116.4074 39.9042)&#34;</span>  <span style=color:#75715e># åŒ—äº¬å¤©å®‰é—¨åæ ‡</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># store_location POINT NOT NULL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># æˆ–ä½¿ç”¨ PostGIS æ‰©å±•çš„ GEOMETRY ç±»å‹</span>
</span></span></code></pre></div><h2 id=äº”å‘é‡å­—æ®µè¯¦è§£>äº”ã€å‘é‡å­—æ®µè¯¦è§£</h2><h3 id=51-å‘é‡ç±»å‹å¯¹æ¯”>5.1 å‘é‡ç±»å‹å¯¹æ¯”</h3><div class=table-wrapper><table><thead><tr><th>Milvus ç±»å‹</th><th>è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th><th>å­˜å‚¨å¤§å°</th></tr></thead><tbody><tr><td>FLOAT_VECTOR</td><td>32ä½æµ®ç‚¹å‘é‡</td><td>é«˜ç²¾åº¦è¯­ä¹‰æœç´¢</td><td>4å­—èŠ‚/ç»´</td></tr><tr><td>FLOAT16_VECTOR</td><td>16ä½åŠç²¾åº¦æµ®ç‚¹</td><td>æ·±åº¦å­¦ä¹ ã€GPUè®¡ç®—</td><td>2å­—èŠ‚/ç»´</td></tr><tr><td>BFLOAT16_VECTOR</td><td>16ä½è„‘æµ®ç‚¹</td><td>å¤§è§„æ¨¡å›¾åƒæ£€ç´¢</td><td>2å­—èŠ‚/ç»´</td></tr><tr><td>INT8_VECTOR</td><td>8ä½æ•´æ•°å‘é‡</td><td>é‡åŒ–æ¨¡å‹ã€å¿«é€Ÿæ¨ç†</td><td>1å­—èŠ‚/ç»´</td></tr><tr><td>SPARSE_FLOAT_VECTOR</td><td>ç¨€ç–æµ®ç‚¹å‘é‡</td><td>å…¨æ–‡æœç´¢ã€è¯æ€§åŒ¹é…</td><td>å˜é•¿</td></tr><tr><td>BINARY_VECTOR</td><td>äºŒè¿›åˆ¶å‘é‡</td><td>èµ„æºå—é™åœºæ™¯</td><td>1ä½/ç»´</td></tr></tbody></table></div><h3 id=52-å¯†é›†å‘é‡ç¤ºä¾‹>5.2 å¯†é›†å‘é‡ç¤ºä¾‹</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># FLOAT_VECTOR - æ ‡å‡†å¯†é›†å‘é‡</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;product_embedding&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>FLOAT_VECTOR,
</span></span><span style=display:flex><span>    dim<span style=color:#f92672>=</span><span style=color:#ae81ff>128</span>  <span style=color:#75715e># 128ç»´å‘é‡</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># FLOAT16_VECTOR - åŠç²¾åº¦å‘é‡</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;image_embedding&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>FLOAT16_VECTOR,
</span></span><span style=display:flex><span>    dim<span style=color:#f92672>=</span><span style=color:#ae81ff>512</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># INT8_VECTOR - é‡åŒ–å‘é‡</span>
</span></span><span style=display:flex><span>schema<span style=color:#f92672>.</span>add_field(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text_embedding_quantized&#34;</span>,
</span></span><span style=display:flex><span>    datatype<span style=color:#f92672>=</span>DataType<span style=color:#f92672>.</span>INT8_VECTOR,
</span></span><span style=display:flex><span>    dim<span style=color:#f92672>=</span><span style=color:#ae81ff>256</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ’å…¥æ•°æ®ç¤ºä¾‹</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;product_id&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;product_embedding&#34;</span>: np<span style=color:#f92672>.</span>random<span style=color:#f92672>.</span>rand(<span style=color:#ae81ff>128</span>)<span style=color:#f92672>.</span>tolist(),  <span style=color:#75715e># 128ç»´æµ®ç‚¹å‘é‡</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;image_embedding&#34;</span>: np<span style=color:#f92672>.</span>random<span style=color:#f92672>.</span>rand(<span style=color:#ae81ff>512</span>)<span style=color:#f92672>.</span>astype(np<span style=color:#f92672>.</span>float16)<span style=color:#f92672>.</span>tolist(),
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;text_embedding_quantized&#34;</span>: np<span style=color:#f92672>.</span>random<span style=color:#f92672>.</span>randint(<span style=color:#f92672>-</span><span style=color:#ae81ff>128</span>, <span style=color:#ae81ff>127</span>, <span style=color:#ae81ff>256</span>)<span style=color:#f92672>.</span>tolist()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># MySQL æ— å¯¹åº”ç±»å‹ï¼Œéœ€è¦å­˜å‚¨ä¸º BLOB æˆ– JSON</span>
</span></span></code></pre></div><h3 id=53-ç¨€ç–å‘é‡ç¤ºä¾‹>5.3 ç¨€ç–å‘é‡ç¤ºä¾‹</h3><p>``python</p><h1 id=ç¨€ç–å‘é‡å­—æ®µ>ç¨€ç–å‘é‡å­—æ®µ</h1><p>schema.add_field(
field_name=&ldquo;keyword_vector&rdquo;,
datatype=DataType.SPARSE_FLOAT_VECTOR
)</p><h1 id=æ’å…¥æ•°æ®ç¤ºä¾‹ç¨€ç–å‘é‡æ ¼å¼>æ’å…¥æ•°æ®ç¤ºä¾‹ï¼ˆç¨€ç–å‘é‡æ ¼å¼ï¼‰</h1><p>data = {
&ldquo;product_id&rdquo;: 1,
&ldquo;keyword_vector&rdquo;: {
10: 0.5, # ç´¢å¼•10çš„å€¼ä¸º0.5
25: 0.8, # ç´¢å¼•25çš„å€¼ä¸º0.8
100: 0.3 # ç´¢å¼•100çš„å€¼ä¸º0.3
}
}</p><pre tabindex=0><code>
## å…­ã€åŠ¨æ€å­—æ®µï¼ˆDynamic Fieldï¼‰

### 6.1 åŠ¨æ€å­—æ®µæ¦‚å¿µ

åŠ¨æ€å­—æ®µå…è®¸æ’å…¥ Schema ä¸­æœªå®šä¹‰çš„å­—æ®µï¼Œè¿™äº›å­—æ®µä¼šè‡ªåŠ¨å­˜å‚¨åœ¨éšè—çš„ `$meta` JSON å­—æ®µä¸­ã€‚

```python
# å¯ç”¨åŠ¨æ€å­—æ®µ
schema = client.create_schema(
    enable_dynamic_field=True  # å¯ç”¨åŠ¨æ€å­—æ®µ
)

# å®šä¹‰åŸºæœ¬å­—æ®µ
schema.add_field(
    field_name=&#34;product_id&#34;,
    datatype=DataType.INT64,
    is_primary=True,
    auto_id=True
)

schema.add_field(
    field_name=&#34;product_vector&#34;,
    datatype=DataType.FLOAT_VECTOR,
    dim=128
)

# æ’å…¥æ•°æ®æ—¶å¯ä»¥åŒ…å«æœªå®šä¹‰çš„å­—æ®µ
data = {
    &#34;product_id&#34;: 1,
    &#34;product_vector&#34;: [0.1, 0.2, ...],
    &#34;name&#34;: &#34;iPhone 15&#34;,           # æœªåœ¨ Schema ä¸­å®šä¹‰
    &#34;category&#34;: &#34;Electronics&#34;,     # æœªåœ¨ Schema ä¸­å®šä¹‰
    &#34;price&#34;: 999.99               # æœªåœ¨ Schema ä¸­å®šä¹‰
}

# Milvus å†…éƒ¨å­˜å‚¨ä¸ºï¼š
# {
#   &#34;product_id&#34;: 1,
#   &#34;product_vector&#34;: [0.1, 0.2, ...],
#   &#34;$meta&#34;: {
#     &#34;name&#34;: &#34;iPhone 15&#34;,
#     &#34;category&#34;: &#34;Electronics&#34;,
#     &#34;price&#34;: 999.99
#   }
# }
</code></pre><h3 id=62-åŠ¨æ€å­—æ®µæ”¯æŒçš„ç±»å‹>6.2 åŠ¨æ€å­—æ®µæ”¯æŒçš„ç±»å‹</h3><div class=table-wrapper><table><thead><tr><th>ç±»å‹</th><th>Milvus DataType</th><th>å¯¹æ¯” MongoDB</th></tr></thead><tbody><tr><td>å­—ç¬¦ä¸²</td><td>VARCHAR</td><td>String</td></tr><tr><td>æ•´æ•°</td><td>INT8, INT32, INT64</td><td>Int32, Int64</td></tr><tr><td>æµ®ç‚¹</td><td>FLOAT, DOUBLE</td><td>Double</td></tr><tr><td>å¸ƒå°”</td><td>BOOL</td><td>Boolean</td></tr><tr><td>æ•°ç»„</td><td>ARRAY</td><td>Array</td></tr><tr><td>JSONå¯¹è±¡</td><td>JSON</td><td>Object</td></tr></tbody></table></div><h3 id=63-æŸ¥è¯¢åŠ¨æ€å­—æ®µ>6.3 æŸ¥è¯¢åŠ¨æ€å­—æ®µ</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># ç›´æ¥ä½¿ç”¨å­—æ®µåæŸ¥è¯¢</span>
</span></span><span style=display:flex><span>results <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>query(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;products&#34;</span>,
</span></span><span style=display:flex><span>    filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;name == &#34;iPhone 15&#34;&#39;</span>,  <span style=color:#75715e># ç›´æ¥ä½¿ç”¨åŠ¨æ€å­—æ®µå</span>
</span></span><span style=display:flex><span>    output_fields<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;product_id&#34;</span>, <span style=color:#e6db74>&#34;name&#34;</span>, <span style=color:#e6db74>&#34;category&#34;</span>, <span style=color:#e6db74>&#34;price&#34;</span>]
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æˆ–é€šè¿‡ $meta æŸ¥è¯¢</span>
</span></span><span style=display:flex><span>results <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>query(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;products&#34;</span>,
</span></span><span style=display:flex><span>    filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;$meta[&#34;category&#34;] == &#34;Electronics&#34;&#39;</span>,
</span></span><span style=display:flex><span>    output_fields<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;product_id&#34;</span>, <span style=color:#e6db74>&#34;$meta&#34;</span>]
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MongoDB</span>
</span></span><span style=display:flex><span><span style=color:#75715e># db.products.find({&#34;name&#34;: &#34;iPhone 15&#34;})</span>
</span></span></code></pre></div><h2 id=ä¸ƒå®Œæ•´-schema-ç¤ºä¾‹>ä¸ƒã€å®Œæ•´ Schema ç¤ºä¾‹</h2><pre tabindex=0><code>from pymilvus import MilvusClient, DataType

# è¿æ¥å®¢æˆ·ç«¯
client = MilvusClient(uri=&#34;http://localhost:19530&#34;, token=&#34;root:Milvus&#34;)

# åˆ›å»º Schema
schema = client.create_schema(
    enable_dynamic_field=True  # å¯ç”¨åŠ¨æ€å­—æ®µ
)

# 1. ä¸»é”®å­—æ®µï¼ˆè‡ªåŠ¨IDï¼‰
schema.add_field(
    field_name=&#34;product_id&#34;,
    datatype=DataType.INT64,
    is_primary=True,
    auto_id=True
)

# 2. å­—ç¬¦ä¸²å­—æ®µ
schema.add_field(
    field_name=&#34;product_name&#34;,
    datatype=DataType.VARCHAR,
    max_length=255
)

# 3. æ•°å­—å­—æ®µ
schema.add_field(
    field_name=&#34;product_price&#34;,
    datatype=DataType.FLOAT
)

# 4. JSON å­—æ®µ
schema.add_field(
    field_name=&#34;product_detail&#34;,
    datatype=DataType.JSON
)

# 5. æ•°ç»„å­—æ®µ
schema.add_field(
    field_name=&#34;product_tags&#34;,
    datatype=DataType.ARRAY,
    element_type=DataType.VARCHAR,
    max_capacity=10,
    max_length=50
)

# 6. æ—¶é—´æˆ³å­—æ®µ
schema.add_field(
    field_name=&#34;created_at&#34;,
    datatype=DataType.TIMESTAMPTZ
)

# 7. ç»“æ„ä½“æ•°ç»„
schema.add_field(
    field_name=&#34;reviews&#34;,
    datatype=DataType.ARRAY,
    element_type=DataType.STRUCT,
    max_capacity=100,
    element_schema={
        &#34;fields&#34;: [
            {&#34;name&#34;: &#34;user_id&#34;, &#34;type&#34;: DataType.INT64},
            {&#34;name&#34;: &#34;rating&#34;, &#34;type&#34;: DataType.INT32},
            {&#34;name&#34;: &#34;comment&#34;, &#34;type&#34;: DataType.VARCHAR, &#34;max_length&#34;: 500},
            {&#34;name&#34;: &#34;review_vector&#34;, &#34;type&#34;: DataType.FLOAT_VECTOR, &#34;dim&#34;: 64}
        ]
    }
)

# 8. å‡ ä½•å­—æ®µ
schema.add_field(
    field_name=&#34;store_location&#34;,
    datatype=DataType.GEOMETRY,
    default_value=&#34;POINT(0 0)&#34;
)

# 9. å¯†é›†å‘é‡å­—æ®µ
schema.add_field(
    field_name=&#34;product_embedding&#34;,
    datatype=DataType.FLOAT_VECTOR,
    dim=128
)

# 10. ç¨€ç–å‘é‡å­—æ®µ
schema.add_field(
    field_name=&#34;keyword_vector&#34;,
    datatype=DataType.SPARSE_FLOAT_VECTOR
)

print(&#34;âœ… Schema åˆ›å»ºå®Œæˆ&#34;)
</code></pre><h2 id=å…«schema-ä¸-mysql-å¯¹æ¯”æ€»ç»“>å…«ã€Schema ä¸ MySQL å¯¹æ¯”æ€»ç»“</h2><div class=table-wrapper><table><thead><tr><th>æ“ä½œ</th><th>Milvus</th><th>MySQL</th></tr></thead><tbody><tr><td>åˆ›å»º Schema</td><td><code>client.create_schema()</code></td><td><code>CREATE TABLE</code></td></tr><tr><td>æ·»åŠ å­—æ®µ</td><td><code>schema.add_field()</code></td><td><code>ALTER TABLE ADD COLUMN</code></td></tr><tr><td>ä¸»é”®å®šä¹‰</td><td><code>is_primary=True</code></td><td><code>PRIMARY KEY</code></td></tr><tr><td>è‡ªåŠ¨ID</td><td><code>auto_id=True</code></td><td><code>AUTO_INCREMENT</code></td></tr><tr><td>å¯ç©ºå­—æ®µ</td><td><code>nullable=True</code></td><td><code>NULL</code></td></tr><tr><td>é»˜è®¤å€¼</td><td><code>default_value=value</code></td><td><code>DEFAULT value</code></td></tr><tr><td>å‘é‡å­—æ®µ</td><td><code>FLOAT_VECTOR</code> ç­‰</td><td>æ— å¯¹åº”ç±»å‹</td></tr><tr><td>åŠ¨æ€å­—æ®µ</td><td><code>enable_dynamic_field=True</code></td><td>æ— ï¼ˆéœ€ç”¨ JSON æˆ– NoSQLï¼‰</td></tr></tbody></table></div><h2 id=ä¹æœ€ä½³å®è·µ>ä¹ã€æœ€ä½³å®è·µ</h2><h3 id=91-å­—æ®µå‘½åè§„èŒƒ>9.1 å­—æ®µå‘½åè§„èŒƒ</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># âœ… æ¨è</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;product_id&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;user_name&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;created_at&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># âŒ é¿å…</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;Product-ID&#34;</span>      <span style=color:#75715e># é¿å…è¿å­—ç¬¦</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;ç”¨æˆ·å&#34;</span>          <span style=color:#75715e># é¿å…éASCII</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;field name&#34;</span>     <span style=color:#75715e># é¿å…ç©ºæ ¼</span>
</span></span></code></pre></div><h3 id=92-å‘é‡ç»´åº¦é€‰æ‹©>9.2 å‘é‡ç»´åº¦é€‰æ‹©</h3><div class=table-wrapper><table><thead><tr><th>åœºæ™¯</th><th>æ¨èç»´åº¦</th><th>æ¨¡å‹ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æ–‡æœ¬åµŒå…¥</td><td>384-768</td><td>sentence-transformers</td></tr><tr><td>å›¾åƒåµŒå…¥</td><td>512-2048</td><td>ResNet, CLIP</td></tr><tr><td>å¤šæ¨¡æ€</td><td>512-1024</td><td>CLIP, ALIGN</td></tr></tbody></table></div><h3 id=93-ç´¢å¼•ç­–ç•¥>9.3 ç´¢å¼•ç­–ç•¥</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># ä¸ºå‘é‡å­—æ®µåˆ›å»ºç´¢å¼•</span>
</span></span><span style=display:flex><span>index_params <span style=color:#f92672>=</span> MilvusClient<span style=color:#f92672>.</span>prepare_index_params()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># HNSW ç´¢å¼•ï¼ˆæ¨èç”¨äºé«˜ç²¾åº¦æœç´¢ï¼‰</span>
</span></span><span style=display:flex><span>index_params<span style=color:#f92672>.</span>add_index(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;product_embedding&#34;</span>,
</span></span><span style=display:flex><span>    index_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;HNSW&#34;</span>,
</span></span><span style=display:flex><span>    metric_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;COSINE&#34;</span>,
</span></span><span style=display:flex><span>    params<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;M&#34;</span>: <span style=color:#ae81ff>16</span>, <span style=color:#e6db74>&#34;efConstruction&#34;</span>: <span style=color:#ae81ff>256</span>}
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># IVF_FLAT ç´¢å¼•ï¼ˆé€‚åˆå¤§è§„æ¨¡æ•°æ®ï¼‰</span>
</span></span><span style=display:flex><span>index_params<span style=color:#f92672>.</span>add_index(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;image_embedding&#34;</span>,
</span></span><span style=display:flex><span>    index_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;IVF_FLAT&#34;</span>,
</span></span><span style=display:flex><span>    metric_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;L2&#34;</span>,
</span></span><span style=display:flex><span>    params<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;nlist&#34;</span>: <span style=color:#ae81ff>1024</span>}
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h2 id=åå…³é”®è¦ç‚¹æ€»ç»“>åã€å…³é”®è¦ç‚¹æ€»ç»“</h2><ol><li><strong>Schema çµæ´»æ€§</strong>ï¼šMilvus æ”¯æŒåŠ¨æ€å­—æ®µï¼Œæ¯”ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“æ›´çµæ´»</li><li><strong>å‘é‡åŸç”Ÿæ”¯æŒ</strong>ï¼šå‘é‡å­—æ®µæ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œæ— éœ€é¢å¤–è½¬æ¢</li><li><strong>ç±»å‹ä¸°å¯Œ</strong>ï¼šæ”¯æŒ JSONã€æ•°ç»„ã€ç»“æ„ä½“ç­‰å¤æ‚ç±»å‹</li><li><strong>æ—¶åŒºæ„ŸçŸ¥</strong>ï¼šTIMESTAMPTZ æä¾›åŸç”Ÿæ—¶åŒºæ”¯æŒ</li><li><strong>ç´¢å¼•ä¼˜åŒ–</strong>ï¼šJSON åˆ‡ç¢ã€å‘é‡ç´¢å¼•ç­‰ä¼˜åŒ–æ‰‹æ®µ</li><li><strong>ä¸ NoSQL ç»“åˆ</strong>ï¼šåŠ¨æ€å­—æ®µç±»ä¼¼ MongoDBï¼Œä½†ä¿ç•™äº† Schema çº¦æŸçš„ä¼˜åŠ¿</li></ol></section><footer class=article-footer><section class=article-tags><a href=/tags/milvus/>Milvus</a>
<a href=/tags/schema/>Schema</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/stu/milvus-stu-db/><div class=article-details><h2 class=article-title>Milvusæ•°æ®åº“æ“ä½œ</h2></div></a></article><article><a href=/stu/milvus-install-guide/><div class=article-details><h2 class=article-title>Milvus Standalone æ¨¡å¼å®‰è£…å®Œæ•´æŒ‡å—åŠå¸¸è§é—®é¢˜è§£å†³</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=zg-dd/zg-dd.github.io data-repo-id=R_kgDOQwB7tw data-category=Announcements data-category-id=DIC_kwDOQwB7t84C0WGD data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"preferred_color_scheme":"preferred_color_scheme")}})()</script><footer class=site-footer><section class=copyright>&copy;
2026 å°å··çš„éšç¬”</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>