<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="ä¸€ã€ä»€ä¹ˆæ˜¯é›†åˆ(Collection)\r1.1 æ¦‚å¿µç†è§£\ré›†åˆ(Collection)æ˜¯ Milvus ä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨(Table)ã€‚é›†åˆç”¨äºå­˜å‚¨å…·æœ‰ç›¸åŒç»“æ„çš„å‘é‡æ•°æ®å’Œå…ƒæ•°æ®ã€‚\n"><title>Milvus é›†åˆæ“ä½œè¯¦è§£</title><link rel=canonical href=https://zg-dd.github.io/stu/milvus-collection-operations/><link rel=stylesheet href=/scss/style.min.ff560f1cad7a040e336f2dd6880b9ee1ad344d6e3d8f5411e5a1aaa8b23bbdd0.css><meta property='og:title' content="Milvus é›†åˆæ“ä½œè¯¦è§£"><meta property='og:description' content="ä¸€ã€ä»€ä¹ˆæ˜¯é›†åˆ(Collection)\r1.1 æ¦‚å¿µç†è§£\ré›†åˆ(Collection)æ˜¯ Milvus ä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨(Table)ã€‚é›†åˆç”¨äºå­˜å‚¨å…·æœ‰ç›¸åŒç»“æ„çš„å‘é‡æ•°æ®å’Œå…ƒæ•°æ®ã€‚\n"><meta property='og:url' content='https://zg-dd.github.io/stu/milvus-collection-operations/'><meta property='og:site_name' content='å°å··çš„éšç¬”'><meta property='og:type' content='article'><meta property='article:section' content='Stu'><meta property='article:tag' content='Milvus'><meta property='article:tag' content='Collection'><meta property='article:published_time' content='2026-02-27T16:00:55+08:00'><meta property='article:modified_time' content='2026-02-27T16:00:55+08:00'><meta name=twitter:title content="Milvus é›†åˆæ“ä½œè¯¦è§£"><meta name=twitter:description content="ä¸€ã€ä»€ä¹ˆæ˜¯é›†åˆ(Collection)\r1.1 æ¦‚å¿µç†è§£\ré›†åˆ(Collection)æ˜¯ Milvus ä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨(Table)ã€‚é›†åˆç”¨äºå­˜å‚¨å…·æœ‰ç›¸åŒç»“æ„çš„å‘é‡æ•°æ®å’Œå…ƒæ•°æ®ã€‚\n"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_a0cc1cf57968b27d.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸŒ±</span></figure><div class=site-meta><h1 class=site-name><a href=/>å°å··çš„éšç¬”</a></h1><h2 class=site-description>è®°å½•ï¼Œä¸æ˜¯ä¸ºäº†è¯æ˜è‡ªå·±ï¼›è€Œæ˜¯æŠŠâ€œè§£å†³é—®é¢˜ â†’ æ€è€ƒ â†’ æ²‰æ·€â€å½¢æˆä¹ æƒ¯ã€‚</h2></div></header><ol class=menu id=main-menu><li class=current><a href=/stu/><span>å­¦ä¹ ç¬”è®°</span></a></li><li><a href=/blog/><span>éšç¬”æ€è€ƒ</span></a></li><li><a href=/life/><span>ç”Ÿæ´»è®°å½•</span></a></li><li><a href=/categories/><span>åˆ†ç±»</span></a></li><li><a href=/tags/><span>æ ‡ç­¾</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://zg-dd.github.io/ selected>ç®€ä½“ä¸­æ–‡</option><option value=https://zg-dd.github.io/en/>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#ä¸€ä»€ä¹ˆæ˜¯é›†åˆcollection>ä¸€ã€ä»€ä¹ˆæ˜¯é›†åˆ(Collection)</a><ul><li><a href=#11-æ¦‚å¿µç†è§£>1.1 æ¦‚å¿µç†è§£</a></li><li><a href=#12-é›†åˆçš„ç‰¹ç‚¹>1.2 é›†åˆçš„ç‰¹ç‚¹</a></li></ul></li><li><a href=#äºŒschema-è®¾è®¡>äºŒã€Schema è®¾è®¡</a><ul><li><a href=#21-åˆ›å»º-schema-çš„è¾…åŠ©å‡½æ•°>2.1 åˆ›å»º Schema çš„è¾…åŠ©å‡½æ•°</a></li><li><a href=#22-æ”¯æŒçš„æ•°æ®ç±»å‹>2.2 æ”¯æŒçš„æ•°æ®ç±»å‹</a></li><li><a href=#23-å®æˆ˜ç¤ºä¾‹æ™ºèƒ½å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ>2.3 å®æˆ˜ç¤ºä¾‹ï¼šæ™ºèƒ½å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ</a></li><li><a href=#24-åˆ›å»º-structfield>2.4 åˆ›å»º StructField</a></li></ul></li><li><a href=#ä¸‰ç´¢å¼•é…ç½®>ä¸‰ã€ç´¢å¼•é…ç½®</a></li><li><a href=#å››é›†åˆåŸºç¡€æ“ä½œ>å››ã€é›†åˆåŸºç¡€æ“ä½œ</a><ul><li><a href=#41-åˆ›å»ºé›†åˆ>4.1 åˆ›å»ºé›†åˆ</a></li><li><a href=#42-æŸ¥çœ‹é›†åˆåˆ—è¡¨>4.2 æŸ¥çœ‹é›†åˆåˆ—è¡¨</a></li><li><a href=#43-æ£€æŸ¥é›†åˆæ˜¯å¦å­˜åœ¨>4.3 æ£€æŸ¥é›†åˆæ˜¯å¦å­˜åœ¨</a></li><li><a href=#44-æŸ¥çœ‹é›†åˆè¯¦æƒ…>4.4 æŸ¥çœ‹é›†åˆè¯¦æƒ…</a></li><li><a href=#45-é‡å‘½åé›†åˆ>4.5 é‡å‘½åé›†åˆ</a></li><li><a href=#46-ä¿®æ”¹é›†åˆå±æ€§>4.6 ä¿®æ”¹é›†åˆå±æ€§</a></li><li><a href=#47-åˆ é™¤é›†åˆ>4.7 åˆ é™¤é›†åˆ</a></li></ul></li><li><a href=#äº”é›†åˆåŠ è½½ä¸é‡Šæ”¾>äº”ã€é›†åˆåŠ è½½ä¸é‡Šæ”¾</a><ul><li><a href=#51-ä¸ºä»€ä¹ˆéœ€è¦åŠ è½½é›†åˆ>5.1 ä¸ºä»€ä¹ˆéœ€è¦åŠ è½½é›†åˆï¼Ÿ</a></li><li><a href=#52-åŠ è½½æ•´ä¸ªé›†åˆ>5.2 åŠ è½½æ•´ä¸ªé›†åˆ</a></li><li><a href=#53-åŠ è½½ç‰¹å®šå­—æ®µv26x-æµ‹è¯•åŠŸèƒ½>5.3 åŠ è½½ç‰¹å®šå­—æ®µ(v2.6.x æµ‹è¯•åŠŸèƒ½)</a></li><li><a href=#54-é‡Šæ”¾é›†åˆ>5.4 é‡Šæ”¾é›†åˆ</a></li></ul></li><li><a href=#å…­é›†åˆåˆ«åalias>å…­ã€é›†åˆåˆ«å(Alias)</a><ul><li><a href=#61-åˆ«åçš„ä½œç”¨>6.1 åˆ«åçš„ä½œç”¨</a></li><li><a href=#62-åˆ«åçš„å…³é”®å±æ€§>6.2 åˆ«åçš„å…³é”®å±æ€§</a></li><li><a href=#63-åˆ›å»ºåˆ«å>6.3 åˆ›å»ºåˆ«å</a></li><li><a href=#64-æŸ¥çœ‹åˆ«åè¯¦æƒ…>6.4 æŸ¥çœ‹åˆ«åè¯¦æƒ…</a></li><li><a href=#65-æ›´æ”¹åˆ«åæŒ‡å‘>6.5 æ›´æ”¹åˆ«åæŒ‡å‘</a></li><li><a href=#66-åˆ é™¤åˆ«å>6.6 åˆ é™¤åˆ«å</a></li><li><a href=#67-è“ç»¿éƒ¨ç½²å®Œæ•´ç¤ºä¾‹>6.7 è“ç»¿éƒ¨ç½²å®Œæ•´ç¤ºä¾‹</a></li></ul></li><li><a href=#ä¸ƒæœ€ä½³å®è·µ>ä¸ƒã€æœ€ä½³å®è·µ</a><ul><li><a href=#71-é›†åˆå‘½åè§„èŒƒ>7.1 é›†åˆå‘½åè§„èŒƒ</a></li><li><a href=#72-schema-è®¾è®¡å»ºè®®>7.2 Schema è®¾è®¡å»ºè®®</a></li><li><a href=#73-ç´¢å¼•é…ç½®å»ºè®®>7.3 ç´¢å¼•é…ç½®å»ºè®®</a></li><li><a href=#74-å†…å­˜ä¼˜åŒ–>7.4 å†…å­˜ä¼˜åŒ–</a></li><li><a href=#75-æ€§èƒ½ä¼˜åŒ–>7.5 æ€§èƒ½ä¼˜åŒ–</a></li></ul></li><li><a href=#å…«å¸¸è§é—®é¢˜>å…«ã€å¸¸è§é—®é¢˜</a><ul><li><a href=#81-ä¸ºä»€ä¹ˆåˆ›å»ºé›†åˆæ—¶å¿…é¡»æŒ‡å®šç´¢å¼•>8.1 ä¸ºä»€ä¹ˆåˆ›å»ºé›†åˆæ—¶å¿…é¡»æŒ‡å®šç´¢å¼•ï¼Ÿ</a></li><li><a href=#82-å¦‚ä½•é€‰æ‹©ä¸€è‡´æ€§çº§åˆ«>8.2 å¦‚ä½•é€‰æ‹©ä¸€è‡´æ€§çº§åˆ«ï¼Ÿ</a></li><li><a href=#83-mmap-ä»€ä¹ˆæ—¶å€™å¯ç”¨>8.3 mmap ä»€ä¹ˆæ—¶å€™å¯ç”¨ï¼Ÿ</a></li><li><a href=#84-å¦‚ä½•å¤„ç†åŠ¨æ€å­—æ®µ>8.4 å¦‚ä½•å¤„ç†åŠ¨æ€å­—æ®µï¼Ÿ</a></li></ul></li><li><a href=#ä¹ä¸-mysql-æ“ä½œå¯¹æ¯”>ä¹ã€ä¸ MySQL æ“ä½œå¯¹æ¯”</a></li><li><a href=#åå…³é”®è¦ç‚¹æ€»ç»“>åã€å…³é”®è¦ç‚¹æ€»ç»“</a></li><li><a href=#åä¸€å‚è€ƒèµ„æ–™>åä¸€ã€å‚è€ƒèµ„æ–™</a></li></ul></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93/>å‘é‡æ•°æ®åº“</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/stu/milvus-collection-operations/>Milvus é›†åˆæ“ä½œè¯¦è§£</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2026-02-27T16:00:55+08:00>Feb 27, 2026</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 10 åˆ†é’Ÿ</time></div></footer><footer class=article-translations><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://zg-dd.github.io/en/stu/milvus-collection-operations/ class=link>English</a></div></footer></div></header><section class=article-content><h2 id=ä¸€ä»€ä¹ˆæ˜¯é›†åˆcollection>ä¸€ã€ä»€ä¹ˆæ˜¯é›†åˆ(Collection)</h2><h3 id=11-æ¦‚å¿µç†è§£>1.1 æ¦‚å¿µç†è§£</h3><p>é›†åˆ(Collection)æ˜¯ Milvus ä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨(Table)ã€‚é›†åˆç”¨äºå­˜å‚¨å…·æœ‰ç›¸åŒç»“æ„çš„å‘é‡æ•°æ®å’Œå…ƒæ•°æ®ã€‚</p><div class=table-wrapper><table><thead><tr><th>Milvus æ¦‚å¿µ</th><th>å…³ç³»å‹æ•°æ®åº“æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Collection</td><td>Table</td><td>å­˜å‚¨ç»“æ„åŒ–æ•°æ®çš„å®¹å™¨</td></tr><tr><td>Field</td><td>Column</td><td>æ•°æ®çš„å±æ€§å­—æ®µ</td></tr><tr><td>Entity</td><td>Row</td><td>ä¸€æ¡å®Œæ•´çš„æ•°æ®è®°å½•</td></tr><tr><td>Schema</td><td>Table Schema</td><td>å®šä¹‰æ•°æ®ç»“æ„å’Œçº¦æŸ</td></tr><tr><td>Vector Field</td><td>-</td><td>Milvus ç‰¹æœ‰çš„å‘é‡å­—æ®µ</td></tr></tbody></table></div><h3 id=12-é›†åˆçš„ç‰¹ç‚¹>1.2 é›†åˆçš„ç‰¹ç‚¹</h3><ul><li><strong>Schema å®šä¹‰</strong>ï¼šé›†åˆå¿…é¡»æœ‰æ˜ç¡®çš„ Schemaï¼Œå®šä¹‰æ‰€æœ‰å­—æ®µçš„ç±»å‹å’Œå±æ€§</li><li><strong>å‘é‡å­˜å‚¨</strong>ï¼šè‡³å°‘åŒ…å«ä¸€ä¸ªå‘é‡å­—æ®µ(å¯†é›†å‘é‡æˆ–ç¨€ç–å‘é‡)</li><li><strong>ç´¢å¼•æ”¯æŒ</strong>ï¼šæ”¯æŒå‘é‡ç´¢å¼•å’Œæ ‡é‡ç´¢å¼•ï¼ŒåŠ é€ŸæŸ¥è¯¢</li><li><strong>åˆ†ç‰‡æœºåˆ¶</strong>ï¼šæ”¯æŒæ°´å¹³åˆ†ç‰‡ï¼Œæé«˜å¹¶å‘å¤„ç†èƒ½åŠ›</li></ul><h2 id=äºŒschema-è®¾è®¡>äºŒã€Schema è®¾è®¡</h2><h3 id=21-åˆ›å»º-schema-çš„è¾…åŠ©å‡½æ•°>2.1 åˆ›å»º Schema çš„è¾…åŠ©å‡½æ•°</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pymilvus <span style=color:#f92672>import</span> MilvusClient, DataType, CollectionSchema
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>initialize_schema</span>(field_definitions: list[dict]) <span style=color:#f92672>-&gt;</span> CollectionSchema:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    æ‰¹é‡åˆ›å»º Schema
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        field_definitions: å­—æ®µå®šä¹‰åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ ä¸ºå­—æ®µé…ç½®å­—å…¸
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        CollectionSchema: åˆ›å»ºçš„ Schema å¯¹è±¡
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    schema_obj <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>create_schema()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> field_config <span style=color:#f92672>in</span> field_definitions:
</span></span><span style=display:flex><span>        schema_obj<span style=color:#f92672>.</span>add_field(<span style=color:#f92672>**</span>field_config)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> schema_obj
</span></span></code></pre></div><h3 id=22-æ”¯æŒçš„æ•°æ®ç±»å‹>2.2 æ”¯æŒçš„æ•°æ®ç±»å‹</h3><h4 id=221-ä¸»é”®ç±»å‹>2.2.1 ä¸»é”®ç±»å‹</h4><ul><li><strong>INT64</strong>ï¼š64ä½æ•´æ•°ï¼Œæ”¯æŒè‡ªåŠ¨é€’å¢</li><li><strong>VARCHAR</strong>ï¼šå­—ç¬¦ä¸²ç±»å‹ï¼Œéœ€æŒ‡å®š <code>max_length</code></li></ul><h4 id=222-æ ‡é‡ç±»å‹>2.2.2 æ ‡é‡ç±»å‹</h4><ul><li><strong>BOOL</strong>ï¼šå¸ƒå°”å€¼</li><li><strong>INT8, INT16, INT32, INT64</strong>ï¼šæ•´æ•°ç±»å‹</li><li><strong>FLOAT, DOUBLE</strong>ï¼šæµ®ç‚¹æ•°ç±»å‹</li><li><strong>VARCHAR</strong>ï¼šå­—ç¬¦ä¸²ç±»å‹</li></ul><h4 id=223-å¤æ‚ç±»å‹>2.2.3 å¤æ‚ç±»å‹</h4><ul><li><strong>JSON</strong>ï¼šå­˜å‚¨ JSON æ ¼å¼æ•°æ®</li><li><strong>ARRAY</strong>ï¼šæ•°ç»„ç±»å‹ï¼Œéœ€æŒ‡å®š <code>element_type</code> å’Œ <code>max_capacity</code></li><li><strong>STRUCT</strong>ï¼šç»“æ„ä½“ç±»å‹ï¼Œç”¨äºåµŒå¥—æ•°æ®</li><li><strong>TIMESTAMPTZ</strong>ï¼šå¸¦æ—¶åŒºçš„æ—¶é—´æˆ³</li><li><strong>GEOMETRY</strong>ï¼šå‡ ä½•ç±»å‹(å¦‚åæ ‡ç‚¹)</li></ul><h4 id=224-å‘é‡ç±»å‹>2.2.4 å‘é‡ç±»å‹</h4><ul><li><strong>FLOAT_VECTOR</strong>ï¼šå¯†é›†æµ®ç‚¹å‘é‡(æœ€å¸¸ç”¨)</li><li><strong>FLOAT16_VECTOR</strong>ï¼šåŠç²¾åº¦æµ®ç‚¹å‘é‡</li><li><strong>BFLOAT16_VECTOR</strong>ï¼šBrain Float16 å‘é‡</li><li><strong>INT8_VECTOR</strong>ï¼š8ä½æ•´æ•°å‘é‡</li><li><strong>BINARY_VECTOR</strong>ï¼šäºŒè¿›åˆ¶å‘é‡</li><li><strong>SPARSE_FLOAT_VECTOR</strong>ï¼šç¨€ç–æµ®ç‚¹å‘é‡</li></ul><h3 id=23-å®æˆ˜ç¤ºä¾‹æ™ºèƒ½å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ>2.3 å®æˆ˜ç¤ºä¾‹ï¼šæ™ºèƒ½å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pymilvus <span style=color:#f92672>import</span> MilvusClient, DataType
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å®šä¹‰ Schema</span>
</span></span><span style=display:flex><span>schemas_list <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;book_id&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>INT64,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;is_primary&#34;</span>: <span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;auto_id&#34;</span>: <span style=color:#66d9ef>True</span>,              <span style=color:#75715e># è‡ªåŠ¨é€’å¢ä¸»é”®</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;mmap_enabled&#34;</span>: <span style=color:#66d9ef>True</span>,         <span style=color:#75715e># å¯ç”¨å†…å­˜æ˜ å°„</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å›¾ä¹¦ID,è‡ªåŠ¨é€’å¢&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;title&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>500</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å›¾ä¹¦æ ‡é¢˜&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;isbn&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>20</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å›¾ä¹¦ISBNç¼–å·&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;is_available&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>BOOL,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;æ˜¯å¦åœ¨é¦†&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;page_count&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>INT32,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;é¡µæ•°&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;rating&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>FLOAT,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;è¯„åˆ†&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;price&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>DOUBLE,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;ä»·æ ¼&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;details&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>JSON,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å›¾ä¹¦è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…å«ä½œè€…ã€å‡ºç‰ˆç¤¾ç­‰&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;tags&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>ARRAY,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;element_type&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>255</span>,            <span style=color:#75715e># æ•°ç»„å…ƒç´ çš„æœ€å¤§é•¿åº¦</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;max_capacity&#34;</span>: <span style=color:#ae81ff>20</span>,           <span style=color:#75715e># æ•°ç»„æœ€å¤§å®¹é‡</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;æ ‡ç­¾åˆ—è¡¨&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;borrow_history&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>ARRAY,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;element_type&#34;</span>: DataType<span style=color:#f92672>.</span>STRUCT,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;max_capacity&#34;</span>: <span style=color:#ae81ff>2000</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;struct_schema&#34;</span>: initialize_struct_field([
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;borrower_id&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>INT64,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å€Ÿé˜…è€…ID&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;borrower_name&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>50</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å€Ÿé˜…è€…å§“å&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;borrow_time&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>100</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å€Ÿé˜…æ—¶é—´&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;return_time&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>100</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;è¿˜ä¹¦æ—¶é—´&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        ]),
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å€Ÿé˜…å†å²è®°å½•&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;publish_date&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>TIMESTAMPTZ,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å‡ºç‰ˆæ—¥æœŸ&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;added_time&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>TIMESTAMPTZ,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å…¥åº“æ—¶é—´&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;location&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>GEOMETRY,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å›¾ä¹¦ä½ç½®&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;content_vector&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>FLOAT_VECTOR,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;dim&#34;</span>: <span style=color:#ae81ff>256</span>,                   <span style=color:#75715e># å‘é‡ç»´åº¦</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;å†…å®¹ç‰¹å¾å‘é‡ï¼Œå¯†é›†å‘é‡&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;keyword_vector&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>SPARSE_FLOAT_VECTOR,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;ç¨€ç–å‘é‡ - å…³é”®è¯å‘é‡&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># åˆ›å»º Schema</span>
</span></span><span style=display:flex><span>schemas <span style=color:#f92672>=</span> initialize_schema(schemas_list)
</span></span></code></pre></div><h3 id=24-åˆ›å»º-structfield>2.4 åˆ›å»º StructField</h3><p>å¯¹äºåµŒå¥—çš„ç»“æ„ä½“æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨ <code>StructFieldSchema</code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>initialize_struct_field</span>(field_definitions: list[dict]) <span style=color:#f92672>-&gt;</span> StructFieldSchema:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    åˆ›å»º StructFieldSchema å¯¹è±¡
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        field_definitions: å­—æ®µå®šä¹‰åˆ—è¡¨
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        StructFieldSchema: åˆ›å»ºçš„ StructFieldSchema å¯¹è±¡
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    struct_field_obj <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>create_struct_field_schema()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> field_config <span style=color:#f92672>in</span> field_definitions:
</span></span><span style=display:flex><span>        struct_field_obj<span style=color:#f92672>.</span>add_field(<span style=color:#f92672>**</span>field_config)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> struct_field_obj
</span></span></code></pre></div><h2 id=ä¸‰ç´¢å¼•é…ç½®>ä¸‰ã€ç´¢å¼•é…ç½®</h2><p>åœ¨åˆ›å»ºé›†åˆä¹‹å‰ï¼Œéœ€è¦ä¸ºå‘é‡å­—æ®µå’Œä¸»é”®å­—æ®µé…ç½®ç´¢å¼•ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># å‡†å¤‡ç´¢å¼•å‚æ•°</span>
</span></span><span style=display:flex><span>index_params <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>prepare_index_params()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ä¸»é”®ç´¢å¼•</span>
</span></span><span style=display:flex><span>index_params<span style=color:#f92672>.</span>add_index(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book_id&#34;</span>,
</span></span><span style=display:flex><span>    index_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;AUTOINDEX&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯†é›†å‘é‡ç´¢å¼•</span>
</span></span><span style=display:flex><span>index_params<span style=color:#f92672>.</span>add_index(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;content_vector&#34;</span>,
</span></span><span style=display:flex><span>    index_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;AUTOINDEX&#34;</span>,
</span></span><span style=display:flex><span>    metric_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;COSINE&#34;</span>          <span style=color:#75715e># ä½™å¼¦ç›¸ä¼¼åº¦</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ç¨€ç–å‘é‡ç´¢å¼•</span>
</span></span><span style=display:flex><span>index_params<span style=color:#f92672>.</span>add_index(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;keyword_vector&#34;</span>,
</span></span><span style=display:flex><span>    index_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;AUTOINDEX&#34;</span>,
</span></span><span style=display:flex><span>    metric_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;IP&#34;</span>              <span style=color:#75715e># å†…ç§¯</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p><strong>åº¦é‡ç±»å‹è¯´æ˜ï¼š</strong></p><ul><li><strong>COSINE</strong>ï¼šä½™å¼¦ç›¸ä¼¼åº¦ï¼Œé€‚ç”¨äºæ–‡æœ¬å‘é‡</li><li><strong>IP</strong>ï¼šå†…ç§¯ï¼Œé€‚ç”¨äºç¨€ç–å‘é‡</li><li><strong>L2</strong>ï¼šæ¬§æ°è·ç¦»ï¼Œé€‚ç”¨äºå›¾åƒå‘é‡</li></ul><h2 id=å››é›†åˆåŸºç¡€æ“ä½œ>å››ã€é›†åˆåŸºç¡€æ“ä½œ</h2><h3 id=41-åˆ›å»ºé›†åˆ>4.1 åˆ›å»ºé›†åˆ</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>collection_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;book_collection&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ£€æŸ¥é›†åˆæ˜¯å¦å­˜åœ¨</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> client<span style=color:#f92672>.</span>has_collection(collection_name):
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>        collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>        schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>        index_params<span style=color:#f92672>=</span>index_params
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š é›†åˆ &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; åˆ›å»ºæˆåŠŸ&#34;</span>)
</span></span></code></pre></div><h4 id=411-åˆ›å»ºé›†åˆçš„å¯é€‰å‚æ•°>4.1.1 åˆ›å»ºé›†åˆçš„å¯é€‰å‚æ•°</h4><div class=table-wrapper><table><thead><tr><th>å‚æ•°å</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><code>collection_name</code></td><td>é›†åˆåç§°</td><td>å¿…å¡«</td></tr><tr><td><code>schema</code></td><td>é›†åˆçš„æ•°æ®ç»“æ„</td><td>å¿…å¡«</td></tr><tr><td><code>index_params</code></td><td>ç´¢å¼•å‚æ•°</td><td>å¯é€‰</td></tr><tr><td><code>num_shards</code></td><td>åˆ†ç‰‡æ•°é‡</td><td>1</td></tr><tr><td><code>enable_mmap</code></td><td>å¯ç”¨å†…å­˜æ˜ å°„</td><td>True</td></tr><tr><td><code>consistency_level</code></td><td>ä¸€è‡´æ€§çº§åˆ«</td><td>Session</td></tr></tbody></table></div><h4 id=412-åˆ†ç‰‡shardsè¯´æ˜>4.1.2 åˆ†ç‰‡(Shards)è¯´æ˜</h4><p>åˆ†ç‰‡æ˜¯é›†åˆçš„æ°´å¹³åˆ‡ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡å¯¹åº”ä¸€ä¸ªæ•°æ®è¾“å…¥é€šé“ã€‚åˆç†è®¾ç½®åˆ†ç‰‡æ•°å¯ä»¥æé«˜å¹¶å‘å†™å…¥æ€§èƒ½ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;large_collection&#34;</span>,
</span></span><span style=display:flex><span>    schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>    index_params<span style=color:#f92672>=</span>index_params,
</span></span><span style=display:flex><span>    num_shards<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span>  <span style=color:#75715e># 4ä¸ªåˆ†ç‰‡ï¼Œé€‚åˆé«˜å¹¶å‘å†™å…¥</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p><strong>åˆ†ç‰‡æ•°é‡å»ºè®®ï¼š</strong></p><ul><li>å°è§„æ¨¡æ•°æ®(&lt; 100ä¸‡)ï¼š1-2 ä¸ªåˆ†ç‰‡</li><li>ä¸­ç­‰è§„æ¨¡æ•°æ®(100ä¸‡-1000ä¸‡)ï¼š2-4 ä¸ªåˆ†ç‰‡</li><li>å¤§è§„æ¨¡æ•°æ®(> 1000ä¸‡)ï¼š4-8 ä¸ªåˆ†ç‰‡</li></ul><h4 id=413-å†…å­˜æ˜ å°„mmap>4.1.3 å†…å­˜æ˜ å°„(mmap)</h4><p>å†…å­˜æ˜ å°„å…è®¸ Milvus å°†åŸå§‹å­—æ®µæ•°æ®æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯å®Œå…¨åŠ è½½ï¼Œä»è€Œå‡å°‘å†…å­˜å ç”¨ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># åœ¨å­—æ®µçº§åˆ«å¯ç”¨ mmap</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;book_id&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>INT64,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;is_primary&#34;</span>: <span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;mmap_enabled&#34;</span>: <span style=color:#66d9ef>True</span>  <span style=color:#75715e># å­—æ®µçº§åˆ«çš„ mmap</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># åœ¨é›†åˆçº§åˆ«å¯ç”¨ mmap</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>    enable_mmap<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>  <span style=color:#75715e># é›†åˆçº§åˆ«çš„ mmap</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h4 id=414-ä¸€è‡´æ€§çº§åˆ«consistency-level>4.1.4 ä¸€è‡´æ€§çº§åˆ«(Consistency Level)</h4><p>Milvus æ”¯æŒå››ç§ä¸€è‡´æ€§çº§åˆ«ï¼š</p><div class=table-wrapper><table><thead><tr><th>çº§åˆ«</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Strong</strong></td><td>å¼ºä¸€è‡´æ€§ï¼Œè¯»å–æœ€æ–°å†™å…¥çš„æ•°æ®</td><td>é‡‘è/äº¤æ˜“ç³»ç»Ÿ</td></tr><tr><td><strong>Bounded</strong></td><td>æœ‰ç•Œä¸€è‡´æ€§ï¼Œåœ¨æ—¶é—´çª—å£å†…ä¸€è‡´</td><td>å®æ—¶æ¨èç³»ç»Ÿ</td></tr><tr><td><strong>Session</strong></td><td>ä¼šè¯ä¸€è‡´æ€§ï¼ŒåŒä¸€ä¼šè¯å†…ä¸€è‡´(é»˜è®¤)</td><td>ç”Ÿäº§ç¯å¢ƒ(æ¨è)</td></tr><tr><td><strong>Eventually</strong></td><td>æœ€ç»ˆä¸€è‡´æ€§ï¼Œå¯æ¥å—çŸ­æš‚ä¸ä¸€è‡´</td><td>å¤§æ•°æ®åˆ†æ</td></tr></tbody></table></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>    index_params<span style=color:#f92672>=</span>index_params,
</span></span><span style=display:flex><span>    consistency_level<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Session&#34;</span>  <span style=color:#75715e># æ¨èä½¿ç”¨</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h4 id=415-é›†åˆ-ttltime-to-live>4.1.5 é›†åˆ TTL(Time-To-Live)</h4><p>å¯ä»¥è®¾ç½®é›†åˆçš„æ•°æ®è¿‡æœŸæ—¶é—´ï¼ŒMilvus ä¼šè‡ªåŠ¨åˆ é™¤è¿‡æœŸæ•°æ®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># åˆ›å»ºæ—¶è®¾ç½® TTL</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>    properties<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;collection.ttl.seconds&#34;</span>: <span style=color:#ae81ff>86400</span>}  <span style=color:#75715e># 24å°æ—¶åè¿‡æœŸ</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æˆ–è€…åˆ›å»ºåä¿®æ”¹ TTL</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>alter_collection_properties(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    properties<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;collection.ttl.seconds&#34;</span>: <span style=color:#ae81ff>60</span>}  <span style=color:#75715e># 60ç§’åè¿‡æœŸ</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h3 id=42-æŸ¥çœ‹é›†åˆåˆ—è¡¨>4.2 æŸ¥çœ‹é›†åˆåˆ—è¡¨</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># åˆ—å‡ºå½“å‰æ•°æ®åº“çš„æ‰€æœ‰é›†åˆ</span>
</span></span><span style=display:flex><span>collections <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>list_collections()
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š å½“å‰æ•°æ®åº“ä¸­çš„é›†åˆåˆ—è¡¨ï¼š</span><span style=color:#e6db74>{</span>collections<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># SHOW TABLES;</span>
</span></span></code></pre></div><h3 id=43-æ£€æŸ¥é›†åˆæ˜¯å¦å­˜åœ¨>4.3 æ£€æŸ¥é›†åˆæ˜¯å¦å­˜åœ¨</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># åˆ¤æ–­é›†åˆæ˜¯å¦å­˜åœ¨</span>
</span></span><span style=display:flex><span>exists <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>has_collection(collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š é›†åˆ &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; æ˜¯å¦å­˜åœ¨ï¼š</span><span style=color:#e6db74>{</span>exists<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h3 id=44-æŸ¥çœ‹é›†åˆè¯¦æƒ…>4.4 æŸ¥çœ‹é›†åˆè¯¦æƒ…</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># æè¿°é›†åˆçš„è¯¦ç»†ä¿¡æ¯</span>
</span></span><span style=display:flex><span>collection_info <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>describe_collection(collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š é›†åˆ &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; çš„æè¿°ï¼š</span><span style=color:#e6db74>{</span>collection_info<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><p><strong>è¾“å‡ºç¤ºä¾‹ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;collection_name&#39;</span>: <span style=color:#e6db74>&#39;book_collection&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;auto_id&#39;</span>: <span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;num_shards&#39;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;description&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;fields&#39;</span>: [
</span></span><span style=display:flex><span>        {<span style=color:#e6db74>&#39;field_id&#39;</span>: <span style=color:#ae81ff>100</span>, <span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;book_id&#39;</span>, <span style=color:#e6db74>&#39;type&#39;</span>: <span style=color:#ae81ff>5</span>, <span style=color:#e6db74>&#39;is_primary&#39;</span>: <span style=color:#66d9ef>True</span>},
</span></span><span style=display:flex><span>        {<span style=color:#e6db74>&#39;field_id&#39;</span>: <span style=color:#ae81ff>101</span>, <span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#e6db74>&#39;type&#39;</span>: <span style=color:#ae81ff>21</span>, <span style=color:#e6db74>&#39;max_length&#39;</span>: <span style=color:#ae81ff>500</span>},
</span></span><span style=display:flex><span>        <span style=color:#75715e># ... å…¶ä»–å­—æ®µ</span>
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;consistency_level&#39;</span>: <span style=color:#e6db74>&#39;Session&#39;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=45-é‡å‘½åé›†åˆ>4.5 é‡å‘½åé›†åˆ</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># ä¿®æ”¹é›†åˆåç§°</span>
</span></span><span style=display:flex><span>new_collection_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;new_book_collection&#34;</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>rename_collection(
</span></span><span style=display:flex><span>    old_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    new_name<span style=color:#f92672>=</span>new_collection_name
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š é›†åˆ &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; ä¿®æ”¹æˆåŠŸï¼Œæ–°åç§°ä¸ºï¼š</span><span style=color:#e6db74>{</span>new_collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># RENAME TABLE old_name TO new_name;</span>
</span></span></code></pre></div><h3 id=46-ä¿®æ”¹é›†åˆå±æ€§>4.6 ä¿®æ”¹é›†åˆå±æ€§</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># è®¾ç½®é›†åˆå±æ€§</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>alter_collection_properties(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    properties<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;collection.ttl.seconds&#34;</span>: <span style=color:#ae81ff>86400</span>,      <span style=color:#75715e># è®¾ç½® TTL</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;mmap.enabled&#34;</span>: <span style=color:#66d9ef>True</span>,                 <span style=color:#75715e># å¯ç”¨ mmap</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;partitionkey.isolation&#34;</span>: <span style=color:#66d9ef>True</span>,       <span style=color:#75715e># å¯ç”¨åˆ†åŒºé”®éš”ç¦»</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;dynamicfield.enabled&#34;</span>: <span style=color:#66d9ef>True</span>,         <span style=color:#75715e># å¯ç”¨åŠ¨æ€å­—æ®µ</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;allow_insert_auto_id&#34;</span>: <span style=color:#66d9ef>False</span>,        <span style=color:#75715e># ä¸å…è®¸ç”¨æˆ·æä¾›ä¸»é”®</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;timezone&#34;</span>: <span style=color:#e6db74>&#34;Asia/Shanghai&#34;</span>           <span style=color:#75715e># è®¾ç½®æ—¶åŒº</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h4 id=461-æ”¯æŒä¿®æ”¹çš„å±æ€§>4.6.1 æ”¯æŒä¿®æ”¹çš„å±æ€§</h4><div class=table-wrapper><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>collection.ttl.seconds</code></td><td>æ•°æ®è¿‡æœŸæ—¶é—´(ç§’)</td></tr><tr><td><code>mmap.enabled</code></td><td>å¯ç”¨å†…å­˜æ˜ å°„</td></tr><tr><td><code>partitionkey.isolation</code></td><td>å¯ç”¨åˆ†åŒºé”®éš”ç¦»ï¼Œæé«˜æœç´¢æ€§èƒ½</td></tr><tr><td><code>dynamicfield.enabled</code></td><td>å¯ç”¨åŠ¨æ€å­—æ®µï¼Œå…è®¸æ’å…¥æœªå®šä¹‰çš„å­—æ®µ</td></tr><tr><td><code>allow_insert_auto_id</code></td><td>æ˜¯å¦å…è®¸ç”¨æˆ·æä¾›è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®å€¼</td></tr><tr><td><code>timezone</code></td><td>é›†åˆçš„é»˜è®¤æ—¶åŒº</td></tr></tbody></table></div><h3 id=47-åˆ é™¤é›†åˆ>4.7 åˆ é™¤é›†åˆ</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># åˆ é™¤é›†åˆ</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>drop_collection(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š é›†åˆ &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; å·²åˆ é™¤&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å¯¹æ¯” MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># DROP TABLE table_name;</span>
</span></span></code></pre></div><h2 id=äº”é›†åˆåŠ è½½ä¸é‡Šæ”¾>äº”ã€é›†åˆåŠ è½½ä¸é‡Šæ”¾</h2><h3 id=51-ä¸ºä»€ä¹ˆéœ€è¦åŠ è½½é›†åˆ>5.1 ä¸ºä»€ä¹ˆéœ€è¦åŠ è½½é›†åˆï¼Ÿ</h3><p>åœ¨ Milvus ä¸­ï¼Œé›†åˆåˆ›å»ºåé»˜è®¤æ˜¯æœªåŠ è½½çŠ¶æ€ã€‚åªæœ‰åŠ è½½åˆ°å†…å­˜åï¼Œæ‰èƒ½è¿›è¡Œæœç´¢å’ŒæŸ¥è¯¢æ“ä½œã€‚åŠ è½½é›†åˆæ—¶ï¼ŒMilvus ä¼šå°†ç´¢å¼•æ–‡ä»¶å’ŒåŸå§‹æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</p><h3 id=52-åŠ è½½æ•´ä¸ªé›†åˆ>5.2 åŠ è½½æ•´ä¸ªé›†åˆ</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># åŠ è½½é›†åˆ(å¿…é¡»å…ˆåˆ›å»ºç´¢å¼•)</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>load_collection(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æ£€æŸ¥åŠ è½½çŠ¶æ€</span>
</span></span><span style=display:flex><span>res <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>get_load_state(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š é›†åˆ &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; çš„åŠ è½½çŠ¶æ€ï¼š</span><span style=color:#e6db74>{</span>res<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><p><strong>åŠ è½½çŠ¶æ€è¯´æ˜ï¼š</strong></p><ul><li><code>LoadStateNotLoad</code>ï¼šæœªåŠ è½½</li><li><code>LoadStateLoading</code>ï¼šåŠ è½½ä¸­</li><li><code>LoadStateLoaded</code>ï¼šå·²åŠ è½½</li></ul><h3 id=53-åŠ è½½ç‰¹å®šå­—æ®µv26x-æµ‹è¯•åŠŸèƒ½>5.3 åŠ è½½ç‰¹å®šå­—æ®µ(v2.6.x æµ‹è¯•åŠŸèƒ½)</h3><p>ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå¯ä»¥åªåŠ è½½éœ€è¦çš„å­—æ®µï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># åªåŠ è½½æŒ‡å®šå­—æ®µ</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>load_collection(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    load_fields<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;book_id&#34;</span>, <span style=color:#e6db74>&#34;content_vector&#34;</span>],  <span style=color:#75715e># å¿…é¡»åŒ…å«ä¸»é”®å’Œè‡³å°‘ä¸€ä¸ªå‘é‡å­—æ®µ</span>
</span></span><span style=display:flex><span>    skip_load_dynamic_field<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>  <span style=color:#75715e># è·³è¿‡åŠ¨æ€å­—æ®µ</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>res <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>get_load_state(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š é›†åˆ &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; çš„åŠ è½½çŠ¶æ€ï¼š</span><span style=color:#e6db74>{</span>res<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li><code>load_fields</code> ä¸­å¿…é¡»åŒ…å«ä¸»é”®å­—æ®µ</li><li><code>load_fields</code> ä¸­å¿…é¡»åŒ…å«è‡³å°‘ä¸€ä¸ªå‘é‡å­—æ®µ</li><li>åªæœ‰ <code>load_fields</code> ä¸­çš„å­—æ®µæ‰èƒ½ç”¨ä½œæœç´¢å’ŒæŸ¥è¯¢çš„è¿‡æ»¤å™¨å’Œè¾“å‡ºå­—æ®µ</li></ul><h3 id=54-é‡Šæ”¾é›†åˆ>5.4 é‡Šæ”¾é›†åˆ</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># é‡Šæ”¾é›†åˆï¼Œä»å†…å­˜ä¸­å¸è½½</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>release_collection(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>res <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>get_load_state(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š é›†åˆ &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; çš„åŠ è½½çŠ¶æ€ï¼š</span><span style=color:#e6db74>{</span>res<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><p><strong>é‡Šæ”¾é›†åˆçš„åœºæ™¯ï¼š</strong></p><ul><li>é•¿æ—¶é—´ä¸ä½¿ç”¨çš„é›†åˆï¼Œé‡Šæ”¾ä»¥èŠ‚çœå†…å­˜</li><li>éœ€è¦é‡å»ºç´¢å¼•æ—¶ï¼Œå…ˆé‡Šæ”¾å†é‡å»º</li><li>ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶ï¼Œé‡Šæ”¾ä¸å¸¸ç”¨çš„é›†åˆ</li></ul><h2 id=å…­é›†åˆåˆ«åalias>å…­ã€é›†åˆåˆ«å(Alias)</h2><h3 id=61-åˆ«åçš„ä½œç”¨>6.1 åˆ«åçš„ä½œç”¨</h3><p>åˆ«åå…è®¸å°†å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸ç‰¹å®šçš„ç‰©ç†é›†åˆåç§°è§£è€¦ï¼Œå®ç°æ— ç¼æ›´æ–°å’Œè“ç»¿éƒ¨ç½²ã€‚</p><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><ol><li><strong>è“ç»¿éƒ¨ç½²</strong>ï¼šåˆ›å»ºæ–°é›†åˆ â†’ å‡†å¤‡æ•°æ® â†’ åˆ‡æ¢åˆ«å â†’ åˆ é™¤æ—§é›†åˆ</li><li><strong>A/B æµ‹è¯•</strong>ï¼šåŒæ—¶ç»´æŠ¤ä¸¤ä¸ªé›†åˆï¼Œé€šè¿‡åˆ«ååˆ‡æ¢</li><li><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼š<code>prod_data_v1</code>, <code>prod_data_v2</code>ï¼Œåˆ«åå§‹ç»ˆæŒ‡å‘æœ€æ–°ç‰ˆæœ¬</li></ol><h3 id=62-åˆ«åçš„å…³é”®å±æ€§>6.2 åˆ«åçš„å…³é”®å±æ€§</h3><ul><li>ä¸€ä¸ªé›†åˆå¯ä»¥æœ‰å¤šä¸ªåˆ«å</li><li>ä¸€ä¸ªåˆ«åä¸€æ¬¡åªèƒ½æŒ‡å‘ä¸€ä¸ªé›†åˆ</li><li>Milvus ä¼šå…ˆæ£€æŸ¥é›†åˆåç§°ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ£€æŸ¥åˆ«å</li></ul><h3 id=63-åˆ›å»ºåˆ«å>6.3 åˆ›å»ºåˆ«å</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># ä¸ºé›†åˆåˆ›å»ºåˆ«å</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>create_alias(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># æŸ¥çœ‹é›†åˆçš„æ‰€æœ‰åˆ«å</span>
</span></span><span style=display:flex><span>aliases <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>list_aliases(collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š é›†åˆ &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; çš„åˆ«åï¼š</span><span style=color:#e6db74>{</span>aliases<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h3 id=64-æŸ¥çœ‹åˆ«åè¯¦æƒ…>6.4 æŸ¥çœ‹åˆ«åè¯¦æƒ…</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># æè¿°åˆ«å</span>
</span></span><span style=display:flex><span>alias_info <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>describe_alias(alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;book&#39;</span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š åˆ«å &#39;book&#39; çš„æè¿°ï¼š</span><span style=color:#e6db74>{</span>alias_info<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h3 id=65-æ›´æ”¹åˆ«åæŒ‡å‘>6.5 æ›´æ”¹åˆ«åæŒ‡å‘</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># åˆ›å»ºæ–°ç‰ˆæœ¬çš„é›†åˆ</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> client<span style=color:#f92672>.</span>has_collection(<span style=color:#e6db74>&#34;book_v2&#34;</span>):
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>        collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book_v2&#34;</span>,
</span></span><span style=display:flex><span>        schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>        index_params<span style=color:#f92672>=</span>index_params
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># å°†åˆ«åæŒ‡å‘æ–°é›†åˆ</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>alter_alias(
</span></span><span style=display:flex><span>    alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book&#34;</span>,
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book_v2&#34;</span>  <span style=color:#75715e># æ–°çš„é›†åˆåç§°</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š åˆ«å &#39;book&#39; ç°åœ¨æŒ‡å‘ &#39;book_v2&#39;&#34;</span>)
</span></span></code></pre></div><h3 id=66-åˆ é™¤åˆ«å>6.6 åˆ é™¤åˆ«å</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># åˆ é™¤åˆ«å</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>drop_alias(alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book&#34;</span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ğŸ“š åˆ«å &#39;book&#39; å·²åˆ é™¤&#34;</span>)
</span></span></code></pre></div><h3 id=67-è“ç»¿éƒ¨ç½²å®Œæ•´ç¤ºä¾‹>6.7 è“ç»¿éƒ¨ç½²å®Œæ•´ç¤ºä¾‹</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>blue_green_deployment</span>():
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;è“ç»¿éƒ¨ç½²ç¤ºä¾‹&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 1. å½“å‰ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ prod_data_v1</span>
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>create_alias(
</span></span><span style=display:flex><span>        collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;prod_data_v1&#34;</span>,
</span></span><span style=display:flex><span>        alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;prod_data&#34;</span>
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 2. åˆ›å»ºæ–°ç‰ˆæœ¬é›†åˆ</span>
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>        collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;prod_data_v2&#34;</span>,
</span></span><span style=display:flex><span>        schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>        index_params<span style=color:#f92672>=</span>index_params
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 3. åœ¨æ–°é›†åˆä¸­å‡†å¤‡æ•°æ®</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># ... æ’å…¥æ•°æ®ã€åˆ›å»ºç´¢å¼•ã€æµ‹è¯• ...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 4. åˆ‡æ¢åˆ«å(é›¶åœæœº)</span>
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>alter_alias(
</span></span><span style=display:flex><span>        alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;prod_data&#34;</span>,
</span></span><span style=display:flex><span>        collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;prod_data_v2&#34;</span>
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 5. åº”ç”¨ç¨‹åºç»§ç»­ä½¿ç”¨ &#34;prod_data&#34; åˆ«åï¼Œæ— éœ€ä¿®æ”¹ä»£ç </span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 6. ç¡®è®¤æ— é—®é¢˜åï¼Œåˆ é™¤æ—§é›†åˆ</span>
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>drop_collection(<span style=color:#e6db74>&#34;prod_data_v1&#34;</span>)
</span></span></code></pre></div><h2 id=ä¸ƒæœ€ä½³å®è·µ>ä¸ƒã€æœ€ä½³å®è·µ</h2><h3 id=71-é›†åˆå‘½åè§„èŒƒ>7.1 é›†åˆå‘½åè§„èŒƒ</h3><pre tabindex=0><code>âœ… æ¨èçš„å‘½åæ–¹å¼
&#34;user_vectors&#34;
&#34;product_embeddings&#34;
&#34;image_search_collection&#34;

âŒ é¿å…çš„å‘½åæ–¹å¼
&#34;Collection-1&#34;      # é¿å…ä½¿ç”¨è¿å­—ç¬¦
&#34;é›†åˆ1&#34;             # é¿å…ä½¿ç”¨éASCIIå­—ç¬¦
&#34;my collection&#34;     # é¿å…ä½¿ç”¨ç©ºæ ¼
</code></pre><h3 id=72-schema-è®¾è®¡å»ºè®®>7.2 Schema è®¾è®¡å»ºè®®</h3><ol><li><p><strong>ä¸»é”®é€‰æ‹©</strong>ï¼š</p><ul><li>ä½¿ç”¨ <code>INT64</code> + <code>auto_id=True</code> æœ€ç®€å•</li><li>ä½¿ç”¨ <code>VARCHAR</code> ä¸»é”®æ—¶ï¼Œç¡®ä¿å”¯ä¸€æ€§</li></ul></li><li><p><strong>å‘é‡ç»´åº¦</strong>ï¼š</p><ul><li>å¸¸è§ç»´åº¦ï¼š128, 256, 512, 768, 1024, 1536</li><li>ç»´åº¦è¶Šé«˜ï¼Œç²¾åº¦è¶Šé«˜ï¼Œä½†æ€§èƒ½è¶Šä½</li></ul></li><li><p><strong>å­—æ®µæ•°é‡</strong>ï¼š</p><ul><li>é¿å…è¿‡å¤šå­—æ®µ(å»ºè®® &lt; 50 ä¸ª)</li><li>å¤æ‚æ•°æ®ä½¿ç”¨ JSON æˆ– STRUCT</li></ul></li><li><p><strong>æ•°ç»„å®¹é‡</strong>ï¼š</p><ul><li>åˆç†è®¾ç½® <code>max_capacity</code>ï¼Œé¿å…è¿‡å¤§</li><li>ç¤ºä¾‹ä¸­çš„ <code>borrow_history</code> è®¾ç½®ä¸º 2000 æ˜¯åˆç†çš„</li></ul></li></ol><h3 id=73-ç´¢å¼•é…ç½®å»ºè®®>7.3 ç´¢å¼•é…ç½®å»ºè®®</h3><pre tabindex=0><code># æ¨èä½¿ç”¨ AUTOINDEXï¼ŒMilvus ä¼šè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜ç´¢å¼•
index_params.add_index(
    field_name=&#34;content_vector&#34;,
    index_type=&#34;AUTOINDEX&#34;,
    metric_type=&#34;COSINE&#34;
)

# å¯¹äºå¤§è§„æ¨¡æ•°æ®ï¼Œå¯ä»¥æ‰‹åŠ¨æŒ‡å®šç´¢å¼•ç±»å‹
index_params.add_index(
    field_name=&#34;content_vector&#34;,
    index_type=&#34;HNSW&#34;,
    metric_type=&#34;COSINE&#34;,
    params={&#34;M&#34;: 16, &#34;efConstruction&#34;: 200}
)
</code></pre><h3 id=74-å†…å­˜ä¼˜åŒ–>7.4 å†…å­˜ä¼˜åŒ–</h3><pre tabindex=0><code># 1. å¯ç”¨ mmap å‡å°‘å†…å­˜å ç”¨
client.alter_collection_properties(
    collection_name=collection_name,
    properties={&#34;mmap.enabled&#34;: True}
)

# 2. åªåŠ è½½å¿…è¦çš„å­—æ®µ
client.load_collection(
    collection_name=collection_name,
    load_fields=[&#34;book_id&#34;, &#34;content_vector&#34;]
)

# 3. è®¾ç½®åˆç†çš„ TTL
client.alter_collection_properties(
    collection_name=collection_name,
    properties={&#34;collection.ttl.seconds&#34;: 604800}  # 7å¤©
)
</code></pre><h3 id=75-æ€§èƒ½ä¼˜åŒ–>7.5 æ€§èƒ½ä¼˜åŒ–</h3><pre tabindex=0><code># 1. åˆç†è®¾ç½®åˆ†ç‰‡æ•°
client.create_collection(
    collection_name=collection_name,
    schema=schemas,
    num_shards=4  # æ ¹æ®å¹¶å‘å†™å…¥é‡è°ƒæ•´
)

# 2. é€‰æ‹©åˆé€‚çš„ä¸€è‡´æ€§çº§åˆ«
client.create_collection(
    collection_name=collection_name,
    schema=schemas,
    consistency_level=&#34;Session&#34;  # å¹³è¡¡æ€§èƒ½å’Œä¸€è‡´æ€§
)

# 3. å¯ç”¨åˆ†åŒºé”®éš”ç¦»
client.alter_collection_properties(
    collection_name=collection_name,
    properties={&#34;partitionkey.isolation&#34;: True}
)
</code></pre><h2 id=å…«å¸¸è§é—®é¢˜>å…«ã€å¸¸è§é—®é¢˜</h2><h3 id=81-ä¸ºä»€ä¹ˆåˆ›å»ºé›†åˆæ—¶å¿…é¡»æŒ‡å®šç´¢å¼•>8.1 ä¸ºä»€ä¹ˆåˆ›å»ºé›†åˆæ—¶å¿…é¡»æŒ‡å®šç´¢å¼•ï¼Ÿ</h3><p>Milvus è¦æ±‚åœ¨åˆ›å»ºé›†åˆæ—¶è‡³å°‘ä¸ºå‘é‡å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œå¦åˆ™æ— æ³•åŠ è½½é›†åˆã€‚å¦‚æœä¸ç¡®å®šä½¿ç”¨å“ªç§ç´¢å¼•ï¼Œæ¨èä½¿ç”¨ <code>AUTOINDEX</code>ã€‚</p><h3 id=82-å¦‚ä½•é€‰æ‹©ä¸€è‡´æ€§çº§åˆ«>8.2 å¦‚ä½•é€‰æ‹©ä¸€è‡´æ€§çº§åˆ«ï¼Ÿ</h3><div class=table-wrapper><table><thead><tr><th>åœºæ™¯</th><th>æ¨èçº§åˆ«</th><th>åŸå› </th></tr></thead><tbody><tr><td>é‡‘èäº¤æ˜“</td><td>Strong</td><td>éœ€è¦å¼ºä¸€è‡´æ€§</td></tr><tr><td>å®æ—¶æ¨è</td><td>Bounded</td><td>å¹³è¡¡æ€§èƒ½å’Œä¸€è‡´æ€§</td></tr><tr><td>ç”Ÿäº§ç¯å¢ƒ</td><td>Session</td><td>é»˜è®¤æ¨è</td></tr><tr><td>å¤§æ•°æ®åˆ†æ</td><td>Eventually</td><td>å¯æ¥å—çŸ­æš‚ä¸ä¸€è‡´</td></tr></tbody></table></div><h3 id=83-mmap-ä»€ä¹ˆæ—¶å€™å¯ç”¨>8.3 mmap ä»€ä¹ˆæ—¶å€™å¯ç”¨ï¼Ÿ</h3><ul><li><strong>å¯ç”¨ mmap</strong>ï¼šæ•°æ®é‡å¤§ï¼Œå†…å­˜æœ‰é™</li><li><strong>ä¸å¯ç”¨ mmap</strong>ï¼šæ•°æ®é‡å°ï¼Œè¿½æ±‚æè‡´æ€§èƒ½</li></ul><h3 id=84-å¦‚ä½•å¤„ç†åŠ¨æ€å­—æ®µ>8.4 å¦‚ä½•å¤„ç†åŠ¨æ€å­—æ®µï¼Ÿ</h3><pre tabindex=0><code># å¯ç”¨åŠ¨æ€å­—æ®µ
client.alter_collection_properties(
    collection_name=collection_name,
    properties={&#34;dynamicfield.enabled&#34;: True}
)

# æ’å…¥æ—¶å¯ä»¥åŒ…å«æœªå®šä¹‰çš„å­—æ®µ
client.insert(
    collection_name=collection_name,
    data=[{
        &#34;book_id&#34;: 1,
        &#34;title&#34;: &#34;Python ç¼–ç¨‹&#34;,
        &#34;content_vector&#34;: [0.1] * 256,
        &#34;extra_field&#34;: &#34;è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€å­—æ®µ&#34;  # æœªåœ¨ Schema ä¸­å®šä¹‰
    }]
)
</code></pre><h2 id=ä¹ä¸-mysql-æ“ä½œå¯¹æ¯”>ä¹ã€ä¸ MySQL æ“ä½œå¯¹æ¯”</h2><div class=table-wrapper><table><thead><tr><th>æ“ä½œ</th><th>Milvus</th><th>MySQL</th></tr></thead><tbody><tr><td>åˆ›å»ºè¡¨/é›†åˆ</td><td><code>client.create_collection()</code></td><td><code>CREATE TABLE</code></td></tr><tr><td>æŸ¥çœ‹è¡¨/é›†åˆ</td><td><code>client.list_collections()</code></td><td><code>SHOW TABLES</code></td></tr><tr><td>æ£€æŸ¥å­˜åœ¨</td><td><code>client.has_collection()</code></td><td><code>SHOW TABLES LIKE 'name'</code></td></tr><tr><td>æŸ¥çœ‹ç»“æ„</td><td><code>client.describe_collection()</code></td><td><code>DESCRIBE table_name</code></td></tr><tr><td>é‡å‘½å</td><td><code>client.rename_collection()</code></td><td><code>RENAME TABLE</code></td></tr><tr><td>åˆ é™¤</td><td><code>client.drop_collection()</code></td><td><code>DROP TABLE</code></td></tr><tr><td>ä¿®æ”¹å±æ€§</td><td><code>client.alter_collection_properties()</code></td><td><code>ALTER TABLE</code></td></tr></tbody></table></div><h2 id=åå…³é”®è¦ç‚¹æ€»ç»“>åã€å…³é”®è¦ç‚¹æ€»ç»“</h2><ol><li><strong>Schema å¿…é¡»æ˜ç¡®</strong>ï¼šåˆ›å»ºé›†åˆå‰å¿…é¡»å®šä¹‰å®Œæ•´çš„ Schema</li><li><strong>ç´¢å¼•æ˜¯å¿…éœ€çš„</strong>ï¼šè‡³å°‘ä¸ºå‘é‡å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œæ¨èä½¿ç”¨ AUTOINDEX</li><li><strong>åŠ è½½åæ‰èƒ½æŸ¥è¯¢</strong>ï¼šé›†åˆåˆ›å»ºåéœ€è¦åŠ è½½åˆ°å†…å­˜æ‰èƒ½æœç´¢</li><li><strong>åˆ«åå®ç°è§£è€¦</strong>ï¼šä½¿ç”¨åˆ«åå¯ä»¥å®ç°æ— ç¼æ›´æ–°å’Œè“ç»¿éƒ¨ç½²</li><li><strong>mmap èŠ‚çœå†…å­˜</strong>ï¼šå¯¹äºå¤§è§„æ¨¡æ•°æ®ï¼Œå¯ç”¨ mmap å¯ä»¥æ˜¾è‘—å‡å°‘å†…å­˜å ç”¨</li><li><strong>ä¸€è‡´æ€§çº§åˆ«å¯è°ƒ</strong>ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„ä¸€è‡´æ€§çº§åˆ«</li><li><strong>TTL è‡ªåŠ¨æ¸…ç†</strong>ï¼šè®¾ç½® TTL å¯ä»¥è‡ªåŠ¨åˆ é™¤è¿‡æœŸæ•°æ®</li><li><strong>åˆ†ç‰‡æé«˜å¹¶å‘</strong>ï¼šåˆç†è®¾ç½®åˆ†ç‰‡æ•°å¯ä»¥æé«˜å¹¶å‘å†™å…¥æ€§èƒ½</li></ol><h2 id=åä¸€å‚è€ƒèµ„æ–™>åä¸€ã€å‚è€ƒèµ„æ–™</h2><ul><li><a class=link href=https://milvus.io/docs/manage-collections.md target=_blank rel=noopener>Milvus å®˜æ–¹æ–‡æ¡£ - Manage Collections</a></li><li><a class=link href=https://milvus.io/docs/schema.md target=_blank rel=noopener>Milvus å®˜æ–¹æ–‡æ¡£ - Schema</a></li><li><a class=link href=https://milvus.io/docs/index.md target=_blank rel=noopener>Milvus å®˜æ–¹æ–‡æ¡£ - Index</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/milvus/>Milvus</a>
<a href=/tags/collection/>Collection</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article><a href=/stu/milvus-stu-schema/><div class=article-details><h2 class=article-title>Milvus Schemaæ¨¡å¼è¯¦è§£ - å­—æ®µç±»å‹ä¸æ•°æ®å»ºæ¨¡æŒ‡å—</h2></div></a></article><article><a href=/stu/milvus-stu-db/><div class=article-details><h2 class=article-title>Milvusæ•°æ®åº“æ“ä½œ</h2></div></a></article><article><a href=/stu/milvus-install-guide/><div class=article-details><h2 class=article-title>Milvus Standalone æ¨¡å¼å®‰è£…å®Œæ•´æŒ‡å—åŠå¸¸è§é—®é¢˜è§£å†³</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=zg-dd/zg-dd.github.io data-repo-id=R_kgDOQwB7tw data-category=Announcements data-category-id=DIC_kwDOQwB7t84C0WGD data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"preferred_color_scheme":"preferred_color_scheme")}})()</script><footer class=site-footer><section class=copyright>&copy;
2026 å°å··çš„éšç¬”</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>