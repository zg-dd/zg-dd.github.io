<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='1. What is Collection\r1.1 Concept Understanding\rCollection is the core concept in Milvus, similar to a table in relational databases. Collections are used to store vector data and metadata with the same structure.\nMilvus Concept Relational Database Concept Description Collection Table Container for structured data Field Column Data attribute fields Entity Row A complete data record Schema Table Schema Defines data structure and constraints Vector Field - Milvus-specific vector field 1.2 Characteristics of Collections\rSchema Definition: Collections must have a clear Schema defining all field types and attributes Vector Storage: Must contain at least one vector field (dense or sparse vectors) Index Support: Supports vector indexes and scalar indexes to accelerate queries Sharding Mechanism: Supports horizontal sharding to improve concurrent processing capability 2. Schema Design\r2.1 Helper Function for Creating Schema\rfrom pymilvus import MilvusClient, DataType, CollectionSchema def initialize_schema(field_definitions: list[dict]) -> CollectionSchema: """ Batch create Schema Args: field_definitions: List of field definitions, each element is a field configuration dictionary Returns: CollectionSchema: Created Schema object """ schema_obj = client.create_schema() for field_config in field_definitions: schema_obj.add_field(**field_config) return schema_obj 2.2 Supported Data Types\r2.2.1 Primary Key Types\rINT64: 64-bit integer, supports auto-increment VARCHAR: String type, requires max_length 2.2.2 Scalar Types\rBOOL: Boolean values INT8, INT16, INT32, INT64: Integer types FLOAT, DOUBLE: Floating-point types VARCHAR: String type 2.2.3 Complex Types\rJSON: Store JSON format data ARRAY: Array type, requires element_type and max_capacity STRUCT: Struct type, for nested data TIMESTAMPTZ: Timestamp with timezone GEOMETRY: Geometry type (e.g., coordinates) 2.2.4 Vector Types\rFLOAT_VECTOR: Dense floating-point vectors (most commonly used) FLOAT16_VECTOR: Half-precision floating-point vectors BFLOAT16_VECTOR: Brain Float16 vectors INT8_VECTOR: 8-bit integer vectors BINARY_VECTOR: Binary vectors SPARSE_FLOAT_VECTOR: Sparse floating-point vectors 2.3 Practical Example: Intelligent Library Management System\rfrom pymilvus import MilvusClient, DataType # Define Schema schemas_list = [ { "field_name": "book_id", "datatype": DataType.INT64, "is_primary": True, "auto_id": True, # Auto-increment primary key "mmap_enabled": True, # Enable memory mapping "description": "Book ID, auto-increment" }, { "field_name": "title", "datatype": DataType.VARCHAR, "max_length": 500, "description": "Book title" }, { "field_name": "isbn", "datatype": DataType.VARCHAR, "max_length": 20, "description": "Book ISBN number" }, { "field_name": "is_available", "datatype": DataType.BOOL, "description": "Whether available in library" }, { "field_name": "page_count", "datatype": DataType.INT32, "description": "Page count" }, { "field_name": "rating", "datatype": DataType.FLOAT, "description": "Rating" }, { "field_name": "price", "datatype": DataType.DOUBLE, "description": "Price" }, { "field_name": "details", "datatype": DataType.JSON, "description": "Book details including author, publisher, etc." }, { "field_name": "tags", "datatype": DataType.ARRAY, "element_type": DataType.VARCHAR, "max_length": 255, # Maximum length of array elements "max_capacity": 20, # Maximum array capacity "description": "Tag list" }, { "field_name": "borrow_history", "datatype": DataType.ARRAY, "element_type": DataType.STRUCT, "max_capacity": 2000, "struct_schema": initialize_struct_field([ { "field_name": "borrower_id", "datatype": DataType.INT64, "description": "Borrower ID" }, { "field_name": "borrower_name", "datatype": DataType.VARCHAR, "max_length": 50, "description": "Borrower name" }, { "field_name": "borrow_time", "datatype": DataType.VARCHAR, "max_length": 100, "description": "Borrow time" }, { "field_name": "return_time", "datatype": DataType.VARCHAR, "max_length": 100, "description": "Return time" } ]), "description": "Borrowing history records" }, { "field_name": "publish_date", "datatype": DataType.TIMESTAMPTZ, "description": "Publication date" }, { "field_name": "added_time", "datatype": DataType.TIMESTAMPTZ, "description": "Inventory time" }, { "field_name": "location", "datatype": DataType.GEOMETRY, "description": "Book location" }, { "field_name": "content_vector", "datatype": DataType.FLOAT_VECTOR, "dim": 256, # Vector dimension "description": "Content feature vector, dense vector" }, { "field_name": "keyword_vector", "datatype": DataType.SPARSE_FLOAT_VECTOR, "description": "Sparse vector - keyword vector" } ] # Create Schema schemas = initialize_schema(schemas_list) 2.4 Creating StructField\rFor nested struct data, use StructFieldSchema:\n'><title>Milvus Collection Operations Detailed Guide</title><link rel=canonical href=https://zg-dd.github.io/en/stu/milvus-collection-operations/><link rel=stylesheet href=/scss/style.min.ff560f1cad7a040e336f2dd6880b9ee1ad344d6e3d8f5411e5a1aaa8b23bbdd0.css><meta property='og:title' content="Milvus Collection Operations Detailed Guide"><meta property='og:description' content='1. What is Collection\r1.1 Concept Understanding\rCollection is the core concept in Milvus, similar to a table in relational databases. Collections are used to store vector data and metadata with the same structure.\nMilvus Concept Relational Database Concept Description Collection Table Container for structured data Field Column Data attribute fields Entity Row A complete data record Schema Table Schema Defines data structure and constraints Vector Field - Milvus-specific vector field 1.2 Characteristics of Collections\rSchema Definition: Collections must have a clear Schema defining all field types and attributes Vector Storage: Must contain at least one vector field (dense or sparse vectors) Index Support: Supports vector indexes and scalar indexes to accelerate queries Sharding Mechanism: Supports horizontal sharding to improve concurrent processing capability 2. Schema Design\r2.1 Helper Function for Creating Schema\rfrom pymilvus import MilvusClient, DataType, CollectionSchema def initialize_schema(field_definitions: list[dict]) -> CollectionSchema: """ Batch create Schema Args: field_definitions: List of field definitions, each element is a field configuration dictionary Returns: CollectionSchema: Created Schema object """ schema_obj = client.create_schema() for field_config in field_definitions: schema_obj.add_field(**field_config) return schema_obj 2.2 Supported Data Types\r2.2.1 Primary Key Types\rINT64: 64-bit integer, supports auto-increment VARCHAR: String type, requires max_length 2.2.2 Scalar Types\rBOOL: Boolean values INT8, INT16, INT32, INT64: Integer types FLOAT, DOUBLE: Floating-point types VARCHAR: String type 2.2.3 Complex Types\rJSON: Store JSON format data ARRAY: Array type, requires element_type and max_capacity STRUCT: Struct type, for nested data TIMESTAMPTZ: Timestamp with timezone GEOMETRY: Geometry type (e.g., coordinates) 2.2.4 Vector Types\rFLOAT_VECTOR: Dense floating-point vectors (most commonly used) FLOAT16_VECTOR: Half-precision floating-point vectors BFLOAT16_VECTOR: Brain Float16 vectors INT8_VECTOR: 8-bit integer vectors BINARY_VECTOR: Binary vectors SPARSE_FLOAT_VECTOR: Sparse floating-point vectors 2.3 Practical Example: Intelligent Library Management System\rfrom pymilvus import MilvusClient, DataType # Define Schema schemas_list = [ { "field_name": "book_id", "datatype": DataType.INT64, "is_primary": True, "auto_id": True, # Auto-increment primary key "mmap_enabled": True, # Enable memory mapping "description": "Book ID, auto-increment" }, { "field_name": "title", "datatype": DataType.VARCHAR, "max_length": 500, "description": "Book title" }, { "field_name": "isbn", "datatype": DataType.VARCHAR, "max_length": 20, "description": "Book ISBN number" }, { "field_name": "is_available", "datatype": DataType.BOOL, "description": "Whether available in library" }, { "field_name": "page_count", "datatype": DataType.INT32, "description": "Page count" }, { "field_name": "rating", "datatype": DataType.FLOAT, "description": "Rating" }, { "field_name": "price", "datatype": DataType.DOUBLE, "description": "Price" }, { "field_name": "details", "datatype": DataType.JSON, "description": "Book details including author, publisher, etc." }, { "field_name": "tags", "datatype": DataType.ARRAY, "element_type": DataType.VARCHAR, "max_length": 255, # Maximum length of array elements "max_capacity": 20, # Maximum array capacity "description": "Tag list" }, { "field_name": "borrow_history", "datatype": DataType.ARRAY, "element_type": DataType.STRUCT, "max_capacity": 2000, "struct_schema": initialize_struct_field([ { "field_name": "borrower_id", "datatype": DataType.INT64, "description": "Borrower ID" }, { "field_name": "borrower_name", "datatype": DataType.VARCHAR, "max_length": 50, "description": "Borrower name" }, { "field_name": "borrow_time", "datatype": DataType.VARCHAR, "max_length": 100, "description": "Borrow time" }, { "field_name": "return_time", "datatype": DataType.VARCHAR, "max_length": 100, "description": "Return time" } ]), "description": "Borrowing history records" }, { "field_name": "publish_date", "datatype": DataType.TIMESTAMPTZ, "description": "Publication date" }, { "field_name": "added_time", "datatype": DataType.TIMESTAMPTZ, "description": "Inventory time" }, { "field_name": "location", "datatype": DataType.GEOMETRY, "description": "Book location" }, { "field_name": "content_vector", "datatype": DataType.FLOAT_VECTOR, "dim": 256, # Vector dimension "description": "Content feature vector, dense vector" }, { "field_name": "keyword_vector", "datatype": DataType.SPARSE_FLOAT_VECTOR, "description": "Sparse vector - keyword vector" } ] # Create Schema schemas = initialize_schema(schemas_list) 2.4 Creating StructField\rFor nested struct data, use StructFieldSchema:\n'><meta property='og:url' content='https://zg-dd.github.io/en/stu/milvus-collection-operations/'><meta property='og:site_name' content='Â∞èÂ∑∑ Blog'><meta property='og:type' content='article'><meta property='article:section' content='Stu'><meta property='article:tag' content='Milvus'><meta property='article:tag' content='Collection'><meta property='article:published_time' content='2026-02-27T16:00:55+08:00'><meta property='article:modified_time' content='2026-02-27T16:00:55+08:00'><meta name=twitter:title content="Milvus Collection Operations Detailed Guide"><meta name=twitter:description content='1. What is Collection\r1.1 Concept Understanding\rCollection is the core concept in Milvus, similar to a table in relational databases. Collections are used to store vector data and metadata with the same structure.\nMilvus Concept Relational Database Concept Description Collection Table Container for structured data Field Column Data attribute fields Entity Row A complete data record Schema Table Schema Defines data structure and constraints Vector Field - Milvus-specific vector field 1.2 Characteristics of Collections\rSchema Definition: Collections must have a clear Schema defining all field types and attributes Vector Storage: Must contain at least one vector field (dense or sparse vectors) Index Support: Supports vector indexes and scalar indexes to accelerate queries Sharding Mechanism: Supports horizontal sharding to improve concurrent processing capability 2. Schema Design\r2.1 Helper Function for Creating Schema\rfrom pymilvus import MilvusClient, DataType, CollectionSchema def initialize_schema(field_definitions: list[dict]) -> CollectionSchema: """ Batch create Schema Args: field_definitions: List of field definitions, each element is a field configuration dictionary Returns: CollectionSchema: Created Schema object """ schema_obj = client.create_schema() for field_config in field_definitions: schema_obj.add_field(**field_config) return schema_obj 2.2 Supported Data Types\r2.2.1 Primary Key Types\rINT64: 64-bit integer, supports auto-increment VARCHAR: String type, requires max_length 2.2.2 Scalar Types\rBOOL: Boolean values INT8, INT16, INT32, INT64: Integer types FLOAT, DOUBLE: Floating-point types VARCHAR: String type 2.2.3 Complex Types\rJSON: Store JSON format data ARRAY: Array type, requires element_type and max_capacity STRUCT: Struct type, for nested data TIMESTAMPTZ: Timestamp with timezone GEOMETRY: Geometry type (e.g., coordinates) 2.2.4 Vector Types\rFLOAT_VECTOR: Dense floating-point vectors (most commonly used) FLOAT16_VECTOR: Half-precision floating-point vectors BFLOAT16_VECTOR: Brain Float16 vectors INT8_VECTOR: 8-bit integer vectors BINARY_VECTOR: Binary vectors SPARSE_FLOAT_VECTOR: Sparse floating-point vectors 2.3 Practical Example: Intelligent Library Management System\rfrom pymilvus import MilvusClient, DataType # Define Schema schemas_list = [ { "field_name": "book_id", "datatype": DataType.INT64, "is_primary": True, "auto_id": True, # Auto-increment primary key "mmap_enabled": True, # Enable memory mapping "description": "Book ID, auto-increment" }, { "field_name": "title", "datatype": DataType.VARCHAR, "max_length": 500, "description": "Book title" }, { "field_name": "isbn", "datatype": DataType.VARCHAR, "max_length": 20, "description": "Book ISBN number" }, { "field_name": "is_available", "datatype": DataType.BOOL, "description": "Whether available in library" }, { "field_name": "page_count", "datatype": DataType.INT32, "description": "Page count" }, { "field_name": "rating", "datatype": DataType.FLOAT, "description": "Rating" }, { "field_name": "price", "datatype": DataType.DOUBLE, "description": "Price" }, { "field_name": "details", "datatype": DataType.JSON, "description": "Book details including author, publisher, etc." }, { "field_name": "tags", "datatype": DataType.ARRAY, "element_type": DataType.VARCHAR, "max_length": 255, # Maximum length of array elements "max_capacity": 20, # Maximum array capacity "description": "Tag list" }, { "field_name": "borrow_history", "datatype": DataType.ARRAY, "element_type": DataType.STRUCT, "max_capacity": 2000, "struct_schema": initialize_struct_field([ { "field_name": "borrower_id", "datatype": DataType.INT64, "description": "Borrower ID" }, { "field_name": "borrower_name", "datatype": DataType.VARCHAR, "max_length": 50, "description": "Borrower name" }, { "field_name": "borrow_time", "datatype": DataType.VARCHAR, "max_length": 100, "description": "Borrow time" }, { "field_name": "return_time", "datatype": DataType.VARCHAR, "max_length": 100, "description": "Return time" } ]), "description": "Borrowing history records" }, { "field_name": "publish_date", "datatype": DataType.TIMESTAMPTZ, "description": "Publication date" }, { "field_name": "added_time", "datatype": DataType.TIMESTAMPTZ, "description": "Inventory time" }, { "field_name": "location", "datatype": DataType.GEOMETRY, "description": "Book location" }, { "field_name": "content_vector", "datatype": DataType.FLOAT_VECTOR, "dim": 256, # Vector dimension "description": "Content feature vector, dense vector" }, { "field_name": "keyword_vector", "datatype": DataType.SPARSE_FLOAT_VECTOR, "description": "Sparse vector - keyword vector" } ] # Create Schema schemas = initialize_schema(schemas_list) 2.4 Creating StructField\rFor nested struct data, use StructFieldSchema:\n'></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/en/><img src=/img/avatar_hu_a0cc1cf57968b27d.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üå±</span></figure><div class=site-meta><h1 class=site-name><a href=/en>Â∞èÂ∑∑ Blog</a></h1><h2 class=site-description>Recording is not to prove myself; rather, to make a habit of 'solving problems ‚Üí thinking ‚Üí sedimentation'.</h2></div></header><ol class=menu id=main-menu><li class=current><a href=/en/stu/><span>Study Notes</span></a></li><li><a href=/en/blog/><span>Essays</span></a></li><li><a href=/en/life/><span>Life</span></a></li><li><a href=/categories/><span>Categories</span></a></li><li><a href=/tags/><span>Tags</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://zg-dd.github.io/>ÁÆÄ‰Ωì‰∏≠Êñá</option><option value=https://zg-dd.github.io/en/ selected>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#1-what-is-collection>1. What is Collection</a><ul><li><a href=#11-concept-understanding>1.1 Concept Understanding</a></li><li><a href=#12-characteristics-of-collections>1.2 Characteristics of Collections</a></li></ul></li><li><a href=#2-schema-design>2. Schema Design</a><ul><li><a href=#21-helper-function-for-creating-schema>2.1 Helper Function for Creating Schema</a></li><li><a href=#22-supported-data-types>2.2 Supported Data Types</a></li><li><a href=#23-practical-example-intelligent-library-management-system>2.3 Practical Example: Intelligent Library Management System</a></li><li><a href=#24-creating-structfield>2.4 Creating StructField</a></li></ul></li><li><a href=#3-index-configuration>3. Index Configuration</a></li><li><a href=#4-basic-collection-operations>4. Basic Collection Operations</a><ul><li><a href=#41-creating-collections>4.1 Creating Collections</a></li><li><a href=#42-viewing-collection-list>4.2 Viewing Collection List</a></li><li><a href=#43-checking-collection-existence>4.3 Checking Collection Existence</a></li><li><a href=#44-viewing-collection-details>4.4 Viewing Collection Details</a></li><li><a href=#45-renaming-collections>4.5 Renaming Collections</a></li><li><a href=#46-modifying-collection-properties>4.6 Modifying Collection Properties</a></li><li><a href=#47-deleting-collections>4.7 Deleting Collections</a></li></ul></li><li><a href=#5-collection-loading-and-unloading>5. Collection Loading and Unloading</a><ul><li><a href=#51-why-load-collections>5.1 Why Load Collections?</a></li><li><a href=#52-loading-entire-collection>5.2 Loading Entire Collection</a></li><li><a href=#53-loading-specific-fields-v26x-test-feature>5.3 Loading Specific Fields (v2.6.x Test Feature)</a></li><li><a href=#54-releasing-collections>5.4 Releasing Collections</a></li></ul></li><li><a href=#6-collection-aliases>6. Collection Aliases</a><ul><li><a href=#61-purpose-of-aliases>6.1 Purpose of Aliases</a></li><li><a href=#62-key-alias-properties>6.2 Key Alias Properties</a></li><li><a href=#63-creating-aliases>6.3 Creating Aliases</a></li><li><a href=#64-viewing-alias-details>6.4 Viewing Alias Details</a></li><li><a href=#65-changing-alias-target>6.5 Changing Alias Target</a></li><li><a href=#66-deleting-aliases>6.6 Deleting Aliases</a></li><li><a href=#67-complete-blue-green-deployment-example>6.7 Complete Blue-Green Deployment Example</a></li></ul></li><li><a href=#7-best-practices>7. Best Practices</a><ul><li><a href=#71-collection-naming-conventions>7.1 Collection Naming Conventions</a></li><li><a href=#72-schema-design-recommendations>7.2 Schema Design Recommendations</a></li><li><a href=#73-index-configuration-recommendations>7.3 Index Configuration Recommendations</a></li><li><a href=#74-memory-optimization>7.4 Memory Optimization</a></li><li><a href=#75-performance-optimization>7.5 Performance Optimization</a></li></ul></li><li><a href=#8-common-questions>8. Common Questions</a><ul><li><a href=#81-why-must-indexes-be-specified-when-creating-collections>8.1 Why must indexes be specified when creating collections?</a></li><li><a href=#82-how-to-choose-consistency-level>8.2 How to choose consistency level?</a></li><li><a href=#83-when-to-enable-mmap>8.3 When to enable mmap?</a></li><li><a href=#84-how-to-handle-dynamic-fields>8.4 How to handle dynamic fields?</a></li></ul></li><li><a href=#9-comparison-with-mysql-operations>9. Comparison with MySQL Operations</a></li><li><a href=#10-key-points-summary>10. Key Points Summary</a></li><li><a href=#11-references>11. References</a></li></ul></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/en/categories/vector-database/>Vector Database</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/en/stu/milvus-collection-operations/>Milvus Collection Operations Detailed Guide</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2026-02-27T16:00:55+08:00>Feb 27, 2026</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer><footer class=article-translations><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://zg-dd.github.io/stu/milvus-collection-operations/ class=link>ÁÆÄ‰Ωì‰∏≠Êñá</a></div></footer></div></header><section class=article-content><h2 id=1-what-is-collection>1. What is Collection</h2><h3 id=11-concept-understanding>1.1 Concept Understanding</h3><p>Collection is the core concept in Milvus, similar to a table in relational databases. Collections are used to store vector data and metadata with the same structure.</p><div class=table-wrapper><table><thead><tr><th>Milvus Concept</th><th>Relational Database Concept</th><th>Description</th></tr></thead><tbody><tr><td>Collection</td><td>Table</td><td>Container for structured data</td></tr><tr><td>Field</td><td>Column</td><td>Data attribute fields</td></tr><tr><td>Entity</td><td>Row</td><td>A complete data record</td></tr><tr><td>Schema</td><td>Table Schema</td><td>Defines data structure and constraints</td></tr><tr><td>Vector Field</td><td>-</td><td>Milvus-specific vector field</td></tr></tbody></table></div><h3 id=12-characteristics-of-collections>1.2 Characteristics of Collections</h3><ul><li><strong>Schema Definition</strong>: Collections must have a clear Schema defining all field types and attributes</li><li><strong>Vector Storage</strong>: Must contain at least one vector field (dense or sparse vectors)</li><li><strong>Index Support</strong>: Supports vector indexes and scalar indexes to accelerate queries</li><li><strong>Sharding Mechanism</strong>: Supports horizontal sharding to improve concurrent processing capability</li></ul><h2 id=2-schema-design>2. Schema Design</h2><h3 id=21-helper-function-for-creating-schema>2.1 Helper Function for Creating Schema</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pymilvus <span style=color:#f92672>import</span> MilvusClient, DataType, CollectionSchema
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>initialize_schema</span>(field_definitions: list[dict]) <span style=color:#f92672>-&gt;</span> CollectionSchema:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Batch create Schema
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        field_definitions: List of field definitions, each element is a field configuration dictionary
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        CollectionSchema: Created Schema object
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    schema_obj <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>create_schema()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> field_config <span style=color:#f92672>in</span> field_definitions:
</span></span><span style=display:flex><span>        schema_obj<span style=color:#f92672>.</span>add_field(<span style=color:#f92672>**</span>field_config)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> schema_obj
</span></span></code></pre></div><h3 id=22-supported-data-types>2.2 Supported Data Types</h3><h4 id=221-primary-key-types>2.2.1 Primary Key Types</h4><ul><li><strong>INT64</strong>: 64-bit integer, supports auto-increment</li><li><strong>VARCHAR</strong>: String type, requires <code>max_length</code></li></ul><h4 id=222-scalar-types>2.2.2 Scalar Types</h4><ul><li><strong>BOOL</strong>: Boolean values</li><li><strong>INT8, INT16, INT32, INT64</strong>: Integer types</li><li><strong>FLOAT, DOUBLE</strong>: Floating-point types</li><li><strong>VARCHAR</strong>: String type</li></ul><h4 id=223-complex-types>2.2.3 Complex Types</h4><ul><li><strong>JSON</strong>: Store JSON format data</li><li><strong>ARRAY</strong>: Array type, requires <code>element_type</code> and <code>max_capacity</code></li><li><strong>STRUCT</strong>: Struct type, for nested data</li><li><strong>TIMESTAMPTZ</strong>: Timestamp with timezone</li><li><strong>GEOMETRY</strong>: Geometry type (e.g., coordinates)</li></ul><h4 id=224-vector-types>2.2.4 Vector Types</h4><ul><li><strong>FLOAT_VECTOR</strong>: Dense floating-point vectors (most commonly used)</li><li><strong>FLOAT16_VECTOR</strong>: Half-precision floating-point vectors</li><li><strong>BFLOAT16_VECTOR</strong>: Brain Float16 vectors</li><li><strong>INT8_VECTOR</strong>: 8-bit integer vectors</li><li><strong>BINARY_VECTOR</strong>: Binary vectors</li><li><strong>SPARSE_FLOAT_VECTOR</strong>: Sparse floating-point vectors</li></ul><h3 id=23-practical-example-intelligent-library-management-system>2.3 Practical Example: Intelligent Library Management System</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pymilvus <span style=color:#f92672>import</span> MilvusClient, DataType
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Define Schema</span>
</span></span><span style=display:flex><span>schemas_list <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;book_id&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>INT64,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;is_primary&#34;</span>: <span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;auto_id&#34;</span>: <span style=color:#66d9ef>True</span>,              <span style=color:#75715e># Auto-increment primary key</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;mmap_enabled&#34;</span>: <span style=color:#66d9ef>True</span>,         <span style=color:#75715e># Enable memory mapping</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Book ID, auto-increment&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;title&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>500</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Book title&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;isbn&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>20</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Book ISBN number&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;is_available&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>BOOL,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Whether available in library&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;page_count&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>INT32,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Page count&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;rating&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>FLOAT,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Rating&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;price&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>DOUBLE,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Price&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;details&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>JSON,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Book details including author, publisher, etc.&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;tags&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>ARRAY,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;element_type&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>255</span>,            <span style=color:#75715e># Maximum length of array elements</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;max_capacity&#34;</span>: <span style=color:#ae81ff>20</span>,           <span style=color:#75715e># Maximum array capacity</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Tag list&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;borrow_history&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>ARRAY,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;element_type&#34;</span>: DataType<span style=color:#f92672>.</span>STRUCT,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;max_capacity&#34;</span>: <span style=color:#ae81ff>2000</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;struct_schema&#34;</span>: initialize_struct_field([
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;borrower_id&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>INT64,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Borrower ID&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;borrower_name&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>50</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Borrower name&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;borrow_time&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>100</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Borrow time&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;return_time&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>VARCHAR,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;max_length&#34;</span>: <span style=color:#ae81ff>100</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Return time&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        ]),
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Borrowing history records&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;publish_date&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>TIMESTAMPTZ,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Publication date&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;added_time&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>TIMESTAMPTZ,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Inventory time&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;location&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>GEOMETRY,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Book location&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;content_vector&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>FLOAT_VECTOR,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;dim&#34;</span>: <span style=color:#ae81ff>256</span>,                   <span style=color:#75715e># Vector dimension</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Content feature vector, dense vector&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;keyword_vector&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>SPARSE_FLOAT_VECTOR,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Sparse vector - keyword vector&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create Schema</span>
</span></span><span style=display:flex><span>schemas <span style=color:#f92672>=</span> initialize_schema(schemas_list)
</span></span></code></pre></div><h3 id=24-creating-structfield>2.4 Creating StructField</h3><p>For nested struct data, use <code>StructFieldSchema</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>initialize_struct_field</span>(field_definitions: list[dict]) <span style=color:#f92672>-&gt;</span> StructFieldSchema:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Create StructFieldSchema object
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        field_definitions: List of field definitions
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        StructFieldSchema: Created StructFieldSchema object
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    struct_field_obj <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>create_struct_field_schema()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> field_config <span style=color:#f92672>in</span> field_definitions:
</span></span><span style=display:flex><span>        struct_field_obj<span style=color:#f92672>.</span>add_field(<span style=color:#f92672>**</span>field_config)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> struct_field_obj
</span></span></code></pre></div><h2 id=3-index-configuration>3. Index Configuration</h2><p>Before creating collections, configure indexes for vector fields and primary key fields.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Prepare index parameters</span>
</span></span><span style=display:flex><span>index_params <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>prepare_index_params()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Primary key index</span>
</span></span><span style=display:flex><span>index_params<span style=color:#f92672>.</span>add_index(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book_id&#34;</span>,
</span></span><span style=display:flex><span>    index_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;AUTOINDEX&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Dense vector index</span>
</span></span><span style=display:flex><span>index_params<span style=color:#f92672>.</span>add_index(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;content_vector&#34;</span>,
</span></span><span style=display:flex><span>    index_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;AUTOINDEX&#34;</span>,
</span></span><span style=display:flex><span>    metric_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;COSINE&#34;</span>          <span style=color:#75715e># Cosine similarity</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Sparse vector index</span>
</span></span><span style=display:flex><span>index_params<span style=color:#f92672>.</span>add_index(
</span></span><span style=display:flex><span>    field_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;keyword_vector&#34;</span>,
</span></span><span style=display:flex><span>    index_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;AUTOINDEX&#34;</span>,
</span></span><span style=display:flex><span>    metric_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;IP&#34;</span>              <span style=color:#75715e># Inner product</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p><strong>Metric type explanations:</strong></p><ul><li><strong>COSINE</strong>: Cosine similarity, suitable for text vectors</li><li><strong>IP</strong>: Inner product, suitable for sparse vectors</li><li><strong>L2</strong>: Euclidean distance, suitable for image vectors</li></ul><h2 id=4-basic-collection-operations>4. Basic Collection Operations</h2><h3 id=41-creating-collections>4.1 Creating Collections</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>collection_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;book_collection&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check if collection exists</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> client<span style=color:#f92672>.</span>has_collection(collection_name):
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>        collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>        schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>        index_params<span style=color:#f92672>=</span>index_params
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Collection &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; created successfully&#34;</span>)
</span></span></code></pre></div><h4 id=411-optional-parameters-for-creating-collections>4.1.1 Optional Parameters for Creating Collections</h4><div class=table-wrapper><table><thead><tr><th>Parameter</th><th>Description</th><th>Default Value</th></tr></thead><tbody><tr><td><code>collection_name</code></td><td>Collection name</td><td>Required</td></tr><tr><td><code>schema</code></td><td>Collection data structure</td><td>Required</td></tr><tr><td><code>index_params</code></td><td>Index parameters</td><td>Optional</td></tr><tr><td><code>num_shards</code></td><td>Number of shards</td><td>1</td></tr><tr><td><code>enable_mmap</code></td><td>Enable memory mapping</td><td>True</td></tr><tr><td><code>consistency_level</code></td><td>Consistency level</td><td>Session</td></tr></tbody></table></div><h4 id=412-sharding-shards-explanation>4.1.2 Sharding (Shards) Explanation</h4><p>Shards are horizontal slices of collections, each shard corresponds to a data input channel. Reasonable shard configuration can improve concurrent write performance.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;large_collection&#34;</span>,
</span></span><span style=display:flex><span>    schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>    index_params<span style=color:#f92672>=</span>index_params,
</span></span><span style=display:flex><span>    num_shards<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span>  <span style=color:#75715e># 4 shards, suitable for high-concurrency writes</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p><strong>Shard quantity recommendations:</strong></p><ul><li>Small-scale data (&lt; 1 million): 1-2 shards</li><li>Medium-scale data (1M-10M): 2-4 shards</li><li>Large-scale data (> 10M): 4-8 shards</li></ul><h4 id=413-memory-mapping-mmap>4.1.3 Memory Mapping (mmap)</h4><p>Memory mapping allows Milvus to map raw field data to memory instead of fully loading it, thus reducing memory usage.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Enable mmap at field level</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;field_name&#34;</span>: <span style=color:#e6db74>&#34;book_id&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;datatype&#34;</span>: DataType<span style=color:#f92672>.</span>INT64,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;is_primary&#34;</span>: <span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;mmap_enabled&#34;</span>: <span style=color:#66d9ef>True</span>  <span style=color:#75715e># Field-level mmap</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable mmap at collection level</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>    enable_mmap<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>  <span style=color:#75715e># Collection-level mmap</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h4 id=414-consistency-level>4.1.4 Consistency Level</h4><p>Milvus supports four consistency levels:</p><div class=table-wrapper><table><thead><tr><th>Level</th><th>Description</th><th>Applicable Scenarios</th></tr></thead><tbody><tr><td><strong>Strong</strong></td><td>Strong consistency, read latest written data</td><td>Financial/transaction systems</td></tr><tr><td><strong>Bounded</strong></td><td>Bounded consistency, consistent within time window</td><td>Real-time recommendation systems</td></tr><tr><td><strong>Session</strong></td><td>Session consistency, consistent within same session (default)</td><td>Production environment (recommended)</td></tr><tr><td><strong>Eventually</strong></td><td>Eventual consistency, acceptable temporary inconsistency</td><td>Big data analysis</td></tr></tbody></table></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>    index_params<span style=color:#f92672>=</span>index_params,
</span></span><span style=display:flex><span>    consistency_level<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Session&#34;</span>  <span style=color:#75715e># Recommended</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h4 id=415-collection-ttl-time-to-live>4.1.5 Collection TTL (Time-To-Live)</h4><p>Set data expiration time for collections; Milvus automatically deletes expired data.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Set TTL during creation</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>    properties<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;collection.ttl.seconds&#34;</span>: <span style=color:#ae81ff>86400</span>}  <span style=color:#75715e># Expire after 24 hours</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Or modify TTL after creation</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>alter_collection_properties(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    properties<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;collection.ttl.seconds&#34;</span>: <span style=color:#ae81ff>60</span>}  <span style=color:#75715e># Expire after 60 seconds</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h3 id=42-viewing-collection-list>4.2 Viewing Collection List</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># List all collections in current database</span>
</span></span><span style=display:flex><span>collections <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>list_collections()
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Current database collection list: </span><span style=color:#e6db74>{</span>collections<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Compare with MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># SHOW TABLES;</span>
</span></span></code></pre></div><h3 id=43-checking-collection-existence>4.3 Checking Collection Existence</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Check if collection exists</span>
</span></span><span style=display:flex><span>exists <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>has_collection(collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Collection &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; exists: </span><span style=color:#e6db74>{</span>exists<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h3 id=44-viewing-collection-details>4.4 Viewing Collection Details</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Describe collection details</span>
</span></span><span style=display:flex><span>collection_info <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>describe_collection(collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Collection &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; description: </span><span style=color:#e6db74>{</span>collection_info<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><p><strong>Output example:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;collection_name&#39;</span>: <span style=color:#e6db74>&#39;book_collection&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;auto_id&#39;</span>: <span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;num_shards&#39;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;description&#39;</span>: <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;fields&#39;</span>: [
</span></span><span style=display:flex><span>        {<span style=color:#e6db74>&#39;field_id&#39;</span>: <span style=color:#ae81ff>100</span>, <span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;book_id&#39;</span>, <span style=color:#e6db74>&#39;type&#39;</span>: <span style=color:#ae81ff>5</span>, <span style=color:#e6db74>&#39;is_primary&#39;</span>: <span style=color:#66d9ef>True</span>},
</span></span><span style=display:flex><span>        {<span style=color:#e6db74>&#39;field_id&#39;</span>: <span style=color:#ae81ff>101</span>, <span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#e6db74>&#39;type&#39;</span>: <span style=color:#ae81ff>21</span>, <span style=color:#e6db74>&#39;max_length&#39;</span>: <span style=color:#ae81ff>500</span>},
</span></span><span style=display:flex><span>        <span style=color:#75715e># ... other fields</span>
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;consistency_level&#39;</span>: <span style=color:#e6db74>&#39;Session&#39;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=45-renaming-collections>4.5 Renaming Collections</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Rename collection</span>
</span></span><span style=display:flex><span>new_collection_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;new_book_collection&#34;</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>rename_collection(
</span></span><span style=display:flex><span>    old_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    new_name<span style=color:#f92672>=</span>new_collection_name
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Collection &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; renamed successfully, new name: </span><span style=color:#e6db74>{</span>new_collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Compare with MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># RENAME TABLE old_name TO new_name;</span>
</span></span></code></pre></div><h3 id=46-modifying-collection-properties>4.6 Modifying Collection Properties</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Set collection properties</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>alter_collection_properties(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    properties<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;collection.ttl.seconds&#34;</span>: <span style=color:#ae81ff>86400</span>,      <span style=color:#75715e># Set TTL</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;mmap.enabled&#34;</span>: <span style=color:#66d9ef>True</span>,                 <span style=color:#75715e># Enable mmap</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;partitionkey.isolation&#34;</span>: <span style=color:#66d9ef>True</span>,       <span style=color:#75715e># Enable partition key isolation</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;dynamicfield.enabled&#34;</span>: <span style=color:#66d9ef>True</span>,         <span style=color:#75715e># Enable dynamic fields</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;allow_insert_auto_id&#34;</span>: <span style=color:#66d9ef>False</span>,        <span style=color:#75715e># Don&#39;t allow user-provided primary keys</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;timezone&#34;</span>: <span style=color:#e6db74>&#34;Asia/Shanghai&#34;</span>           <span style=color:#75715e># Set timezone</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h4 id=461-supported-modifiable-properties>4.6.1 Supported Modifiable Properties</h4><div class=table-wrapper><table><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td><code>collection.ttl.seconds</code></td><td>Data expiration time (seconds)</td></tr><tr><td><code>mmap.enabled</code></td><td>Enable memory mapping</td></tr><tr><td><code>partitionkey.isolation</code></td><td>Enable partition key isolation to improve search performance</td></tr><tr><td><code>dynamicfield.enabled</code></td><td>Enable dynamic fields, allowing insertion of undefined fields</td></tr><tr><td><code>allow_insert_auto_id</code></td><td>Whether to allow users to provide auto-generated primary key values</td></tr><tr><td><code>timezone</code></td><td>Collection&rsquo;s default timezone</td></tr></tbody></table></div><h3 id=47-deleting-collections>4.7 Deleting Collections</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Delete collection</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>drop_collection(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Collection &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; deleted&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Compare with MySQL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># DROP TABLE table_name;</span>
</span></span></code></pre></div><h2 id=5-collection-loading-and-unloading>5. Collection Loading and Unloading</h2><h3 id=51-why-load-collections>5.1 Why Load Collections?</h3><p>In Milvus, collections are in unloaded state by default after creation. Only after loading into memory can search and query operations be performed. When loading collections, Milvus loads index files and raw data into memory.</p><h3 id=52-loading-entire-collection>5.2 Loading Entire Collection</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Load collection (must create index first)</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>load_collection(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check load status</span>
</span></span><span style=display:flex><span>res <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>get_load_state(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Collection &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; load status: </span><span style=color:#e6db74>{</span>res<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><p><strong>Load status explanation:</strong></p><ul><li><code>LoadStateNotLoad</code>: Not loaded</li><li><code>LoadStateLoading</code>: Loading</li><li><code>LoadStateLoaded</code>: Loaded</li></ul><h3 id=53-loading-specific-fields-v26x-test-feature>5.3 Loading Specific Fields (v2.6.x Test Feature)</h3><p>To save memory, you can load only required fields:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Load only specified fields</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>load_collection(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    load_fields<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;book_id&#34;</span>, <span style=color:#e6db74>&#34;content_vector&#34;</span>],  <span style=color:#75715e># Must include primary key and at least one vector field</span>
</span></span><span style=display:flex><span>    skip_load_dynamic_field<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>  <span style=color:#75715e># Skip dynamic fields</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>res <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>get_load_state(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Collection &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; load status: </span><span style=color:#e6db74>{</span>res<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><p><strong>Notes:</strong></p><ul><li><code>load_fields</code> must include primary key field</li><li><code>load_fields</code> must include at least one vector field</li><li>Only fields in <code>load_fields</code> can be used as filters and output fields for search and queries</li></ul><h3 id=54-releasing-collections>5.4 Releasing Collections</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Release collection, unload from memory</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>release_collection(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>res <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>get_load_state(collection_name<span style=color:#f92672>=</span>collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Collection &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; load status: </span><span style=color:#e6db74>{</span>res<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><p><strong>Scenarios for releasing collections:</strong></p><ul><li>Long-unused collections, release to save memory</li><li>Need to rebuild index, release first then rebuild</li><li>System memory insufficient, release unused collections</li></ul><h2 id=6-collection-aliases>6. Collection Aliases</h2><h3 id=61-purpose-of-aliases>6.1 Purpose of Aliases</h3><p>Aliases allow decoupling client applications from specific physical collection names, enabling seamless updates and blue-green deployments.</p><p><strong>Usage scenarios:</strong></p><ol><li><strong>Blue-green deployment</strong>: Create new collection ‚Üí Prepare data ‚Üí Switch alias ‚Üí Delete old collection</li><li><strong>A/B testing</strong>: Maintain two collections simultaneously, switch via alias</li><li><strong>Version management</strong>: <code>prod_data_v1</code>, <code>prod_data_v2</code>, alias always points to latest version</li></ol><h3 id=62-key-alias-properties>6.2 Key Alias Properties</h3><ul><li>One collection can have multiple aliases</li><li>One alias can point to only one collection at a time</li><li>Milvus checks collection name first, then alias if collection not found</li></ul><h3 id=63-creating-aliases>6.3 Creating Aliases</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Create alias for collection</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>create_alias(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># View all aliases for collection</span>
</span></span><span style=display:flex><span>aliases <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>list_aliases(collection_name)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Collection &#39;</span><span style=color:#e6db74>{</span>collection_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39; aliases: </span><span style=color:#e6db74>{</span>aliases<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h3 id=64-viewing-alias-details>6.4 Viewing Alias Details</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Describe alias</span>
</span></span><span style=display:flex><span>alias_info <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>describe_alias(alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;book&#39;</span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Alias &#39;book&#39; description: </span><span style=color:#e6db74>{</span>alias_info<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h3 id=65-changing-alias-target>6.5 Changing Alias Target</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Create new version collection</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> client<span style=color:#f92672>.</span>has_collection(<span style=color:#e6db74>&#34;book_v2&#34;</span>):
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>        collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book_v2&#34;</span>,
</span></span><span style=display:flex><span>        schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>        index_params<span style=color:#f92672>=</span>index_params
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Point alias to new collection</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>alter_alias(
</span></span><span style=display:flex><span>    alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book&#34;</span>,
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book_v2&#34;</span>  <span style=color:#75715e># New collection name</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Alias &#39;book&#39; now points to &#39;book_v2&#39;&#34;</span>)
</span></span></code></pre></div><h3 id=66-deleting-aliases>6.6 Deleting Aliases</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Delete alias</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>drop_alias(alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;book&#34;</span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìö Alias &#39;book&#39; deleted&#34;</span>)
</span></span></code></pre></div><h3 id=67-complete-blue-green-deployment-example>6.7 Complete Blue-Green Deployment Example</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>blue_green_deployment</span>():
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Blue-green deployment example&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 1. Current production uses prod_data_v1</span>
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>create_alias(
</span></span><span style=display:flex><span>        collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;prod_data_v1&#34;</span>,
</span></span><span style=display:flex><span>        alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;prod_data&#34;</span>
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 2. Create new version collection</span>
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>create_collection(
</span></span><span style=display:flex><span>        collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;prod_data_v2&#34;</span>,
</span></span><span style=display:flex><span>        schema<span style=color:#f92672>=</span>schemas,
</span></span><span style=display:flex><span>        index_params<span style=color:#f92672>=</span>index_params
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 3. Prepare data in new collection</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># ... insert data, create indexes, test ...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 4. Switch alias (zero downtime)</span>
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>alter_alias(
</span></span><span style=display:flex><span>        alias<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;prod_data&#34;</span>,
</span></span><span style=display:flex><span>        collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;prod_data_v2&#34;</span>
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 5. Application continues using &#34;prod_data&#34; alias without code changes</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 6. After confirmation, delete old collection</span>
</span></span><span style=display:flex><span>    client<span style=color:#f92672>.</span>drop_collection(<span style=color:#e6db74>&#34;prod_data_v1&#34;</span>)
</span></span></code></pre></div><h2 id=7-best-practices>7. Best Practices</h2><h3 id=71-collection-naming-conventions>7.1 Collection Naming Conventions</h3><pre tabindex=0><code>‚úÖ Recommended naming patterns
&#34;user_vectors&#34;
&#34;product_embeddings&#34;
&#34;image_search_collection&#34;

‚ùå Avoid these naming patterns
&#34;Collection-1&#34;      # Avoid hyphens
&#34;ÈõÜÂêà1&#34;             # Avoid non-ASCII characters
&#34;my collection&#34;     # Avoid spaces
</code></pre><h3 id=72-schema-design-recommendations>7.2 Schema Design Recommendations</h3><ol><li><p><strong>Primary Key Selection</strong>:</p><ul><li>Use <code>INT64</code> + <code>auto_id=True</code> for simplicity</li><li>When using <code>VARCHAR</code> primary keys, ensure uniqueness</li></ul></li><li><p><strong>Vector Dimensions</strong>:</p><ul><li>Common dimensions: 128, 256, 512, 768, 1024, 1536</li><li>Higher dimensions mean higher precision but lower performance</li></ul></li><li><p><strong>Field Count</strong>:</p><ul><li>Avoid too many fields (recommend &lt; 50)</li><li>Use JSON or STRUCT for complex data</li></ul></li><li><p><strong>Array Capacity</strong>:</p><ul><li>Set <code>max_capacity</code> reasonably, avoid excessive values</li><li>The <code>borrow_history</code> setting of 2000 in the example is reasonable</li></ul></li></ol><h3 id=73-index-configuration-recommendations>7.3 Index Configuration Recommendations</h3><pre tabindex=0><code># Recommended to use AUTOINDEX, Milvus will automatically select optimal index
index_params.add_index(
    field_name=&#34;content_vector&#34;,
    index_type=&#34;AUTOINDEX&#34;,
    metric_type=&#34;COSINE&#34;
)

# For large-scale data, manually specify index type
index_params.add_index(
    field_name=&#34;content_vector&#34;,
    index_type=&#34;HNSW&#34;,
    metric_type=&#34;COSINE&#34;,
    params={&#34;M&#34;: 16, &#34;efConstruction&#34;: 200}
)
</code></pre><h3 id=74-memory-optimization>7.4 Memory Optimization</h3><pre tabindex=0><code># 1. Enable mmap to reduce memory usage
client.alter_collection_properties(
    collection_name=collection_name,
    properties={&#34;mmap.enabled&#34;: True}
)

# 2. Load only necessary fields
client.load_collection(
    collection_name=collection_name,
    load_fields=[&#34;book_id&#34;, &#34;content_vector&#34;]
)

# 3. Set reasonable TTL
client.alter_collection_properties(
    collection_name=collection_name,
    properties={&#34;collection.ttl.seconds&#34;: 604800}  # 7 days
)
</code></pre><h3 id=75-performance-optimization>7.5 Performance Optimization</h3><pre tabindex=0><code># 1. Set reasonable shard count
client.create_collection(
    collection_name=collection_name,
    schema=schemas,
    num_shards=4  # Adjust based on concurrent write volume
)

# 2. Choose appropriate consistency level
client.create_collection(
    collection_name=collection_name,
    schema=schemas,
    consistency_level=&#34;Session&#34;  # Balance performance and consistency
)

# 3. Enable partition key isolation
client.alter_collection_properties(
    collection_name=collection_name,
    properties={&#34;partitionkey.isolation&#34;: True}
)
</code></pre><h2 id=8-common-questions>8. Common Questions</h2><h3 id=81-why-must-indexes-be-specified-when-creating-collections>8.1 Why must indexes be specified when creating collections?</h3><p>Milvus requires at least creating indexes for vector fields when creating collections; otherwise, collections cannot be loaded. If unsure which index to use, recommend using <code>AUTOINDEX</code>.</p><h3 id=82-how-to-choose-consistency-level>8.2 How to choose consistency level?</h3><div class=table-wrapper><table><thead><tr><th>Scenario</th><th>Recommended Level</th><th>Reason</th></tr></thead><tbody><tr><td>Financial transactions</td><td>Strong</td><td>Requires strong consistency</td></tr><tr><td>Real-time recommendations</td><td>Bounded</td><td>Balance performance and consistency</td></tr><tr><td>Production environment</td><td>Session</td><td>Default recommendation</td></tr><tr><td>Big data analysis</td><td>Eventually</td><td>Acceptable temporary inconsistency</td></tr></tbody></table></div><h3 id=83-when-to-enable-mmap>8.3 When to enable mmap?</h3><ul><li><strong>Enable mmap</strong>: Large data volume, limited memory</li><li><strong>Don&rsquo;t enable mmap</strong>: Small data volume, pursue maximum performance</li></ul><h3 id=84-how-to-handle-dynamic-fields>8.4 How to handle dynamic fields?</h3><pre tabindex=0><code># Enable dynamic fields
client.alter_collection_properties(
    collection_name=collection_name,
    properties={&#34;dynamicfield.enabled&#34;: True}
)

# Can include undefined fields during insertion
client.insert(
    collection_name=collection_name,
    data=[{
        &#34;book_id&#34;: 1,
        &#34;title&#34;: &#34;Python Programming&#34;,
        &#34;content_vector&#34;: [0.1] * 256,
        &#34;extra_field&#34;: &#34;This is a dynamic field&#34;  # Not defined in Schema
    }]
)
</code></pre><h2 id=9-comparison-with-mysql-operations>9. Comparison with MySQL Operations</h2><div class=table-wrapper><table><thead><tr><th>Operation</th><th>Milvus</th><th>MySQL</th></tr></thead><tbody><tr><td>Create table/collection</td><td><code>client.create_collection()</code></td><td><code>CREATE TABLE</code></td></tr><tr><td>View tables/collections</td><td><code>client.list_collections()</code></td><td><code>SHOW TABLES</code></td></tr><tr><td>Check existence</td><td><code>client.has_collection()</code></td><td><code>SHOW TABLES LIKE 'name'</code></td></tr><tr><td>View structure</td><td><code>client.describe_collection()</code></td><td><code>DESCRIBE table_name</code></td></tr><tr><td>Rename</td><td><code>client.rename_collection()</code></td><td><code>RENAME TABLE</code></td></tr><tr><td>Delete</td><td><code>client.drop_collection()</code></td><td><code>DROP TABLE</code></td></tr><tr><td>Modify properties</td><td><code>client.alter_collection_properties()</code></td><td><code>ALTER TABLE</code></td></tr></tbody></table></div><h2 id=10-key-points-summary>10. Key Points Summary</h2><ol><li><strong>Schema must be explicit</strong>: Must define complete Schema before creating collections</li><li><strong>Indexes are mandatory</strong>: At least create indexes for vector fields, recommend using AUTOINDEX</li><li><strong>Load before querying</strong>: Collections need to be loaded into memory before searching</li><li><strong>Aliases enable decoupling</strong>: Using aliases enables seamless updates and blue-green deployments</li><li><strong>mmap saves memory</strong>: For large-scale data, enabling mmap significantly reduces memory usage</li><li><strong>Consistency level adjustable</strong>: Choose appropriate consistency level based on business requirements</li><li><strong>TTL auto-cleans</strong>: Setting TTL automatically deletes expired data</li><li><strong>Sharding improves concurrency</strong>: Reasonable shard count improves concurrent write performance</li></ol><h2 id=11-references>11. References</h2><ul><li><a class=link href=https://milvus.io/docs/manage-collections.md target=_blank rel=noopener>Milvus Official Documentation - Manage Collections</a></li><li><a class=link href=https://milvus.io/docs/schema.md target=_blank rel=noopener>Milvus Official Documentation - Schema</a></li><li><a class=link href=https://milvus.io/docs/index.md target=_blank rel=noopener>Milvus Official Documentation - Index</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/en/tags/milvus/>Milvus</a>
<a href=/en/tags/collection/>Collection</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/en/stu/milvus-stu-schema/><div class=article-details><h2 class=article-title>Milvus Schema Detailed Guide - Field Types and Data Modeling</h2></div></a></article><article><a href=/en/stu/milvus-install-guide/><div class=article-details><h2 class=article-title>Complete Guide to Installing Milvus Standalone Mode and Common Problem Solutions</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=zg-dd/zg-dd.github.io data-repo-id=R_kgDOQwB7tw data-category=Announcements data-category-id=DIC_kwDOQwB7t84C0WGD data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"preferred_color_scheme":"preferred_color_scheme")}})()</script><footer class=site-footer><section class=copyright>&copy;
2026 Â∞èÂ∑∑ Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>