<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="‰∏Ä„ÄÅBasic Concepts\rIn Milvus, an Entity is a data record in a Collection that shares the same Schema, where data from each row of fields constitutes an entity.\nEntities in the same Collection have the same attributes (field names, data types, constraints) When inserting entities, all fields defined in the Schema must be included Entities enter the _default partition by default, but partition names can also be specified When dynamic fields are enabled, fields outside the Schema are stored in the $meta reserved field ‰∫å„ÄÅComparison with Relational Databases\rMilvus CRUD operations are conceptually similar to traditional relational databases (MySQL / PostgreSQL), but there are important differences:\n"><title>Milvus Data Operations Guide - Entity CRUD Practical Tutorial</title><link rel=canonical href=https://zg-dd.github.io/en/stu/milvus-entity-operations/><link rel=stylesheet href=/scss/style.min.ff560f1cad7a040e336f2dd6880b9ee1ad344d6e3d8f5411e5a1aaa8b23bbdd0.css><meta property='og:title' content="Milvus Data Operations Guide - Entity CRUD Practical Tutorial"><meta property='og:description' content="‰∏Ä„ÄÅBasic Concepts\rIn Milvus, an Entity is a data record in a Collection that shares the same Schema, where data from each row of fields constitutes an entity.\nEntities in the same Collection have the same attributes (field names, data types, constraints) When inserting entities, all fields defined in the Schema must be included Entities enter the _default partition by default, but partition names can also be specified When dynamic fields are enabled, fields outside the Schema are stored in the $meta reserved field ‰∫å„ÄÅComparison with Relational Databases\rMilvus CRUD operations are conceptually similar to traditional relational databases (MySQL / PostgreSQL), but there are important differences:\n"><meta property='og:url' content='https://zg-dd.github.io/en/stu/milvus-entity-operations/'><meta property='og:site_name' content='Â∞èÂ∑∑ Blog'><meta property='og:type' content='article'><meta property='article:section' content='Stu'><meta property='article:tag' content='Milvus'><meta property='article:published_time' content='2026-02-28T18:56:55+08:00'><meta property='article:modified_time' content='2026-02-28T18:56:55+08:00'><meta name=twitter:title content="Milvus Data Operations Guide - Entity CRUD Practical Tutorial"><meta name=twitter:description content="‰∏Ä„ÄÅBasic Concepts\rIn Milvus, an Entity is a data record in a Collection that shares the same Schema, where data from each row of fields constitutes an entity.\nEntities in the same Collection have the same attributes (field names, data types, constraints) When inserting entities, all fields defined in the Schema must be included Entities enter the _default partition by default, but partition names can also be specified When dynamic fields are enabled, fields outside the Schema are stored in the $meta reserved field ‰∫å„ÄÅComparison with Relational Databases\rMilvus CRUD operations are conceptually similar to traditional relational databases (MySQL / PostgreSQL), but there are important differences:\n"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/en/><img src=/img/avatar_hu_a0cc1cf57968b27d.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üå±</span></figure><div class=site-meta><h1 class=site-name><a href=/en>Â∞èÂ∑∑ Blog</a></h1><h2 class=site-description>Recording is not to prove myself; rather, to make a habit of 'solving problems ‚Üí thinking ‚Üí sedimentation'.</h2></div></header><ol class=menu id=main-menu><li class=current><a href=/en/stu/><span>Study Notes</span></a></li><li><a href=/en/blog/><span>Essays</span></a></li><li><a href=/en/life/><span>Life</span></a></li><li><a href=/categories/><span>Categories</span></a></li><li><a href=/tags/><span>Tags</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://zg-dd.github.io/>ÁÆÄ‰Ωì‰∏≠Êñá</option><option value=https://zg-dd.github.io/en/ selected>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ul><li><a href=#‰∏Äbasic-concepts>‰∏Ä„ÄÅBasic Concepts</a></li><li><a href=#‰∫åcomparison-with-relational-databases>‰∫å„ÄÅComparison with Relational Databases</a><ul><li><a href=#21-concept-mapping>2.1 Concept Mapping</a></li><li><a href=#22-key-differences>2.2 Key Differences</a></li><li><a href=#23-filter-syntax-comparison>2.3 Filter Syntax Comparison</a></li></ul></li><li><a href=#‰∏âinsert-entities>‰∏â„ÄÅInsert Entities</a><ul><li><a href=#31-basic-syntax>3.1 Basic Syntax</a></li><li><a href=#32-return-value-explanation>3.2 Return Value Explanation</a></li><li><a href=#33-example>3.3 Example</a></li><li><a href=#34-data-structure-example>3.4 Data Structure Example</a></li><li><a href=#35-important-notes>3.5 Important Notes</a></li></ul></li><li><a href=#Âõõupsert-entities>Âõõ„ÄÅUpsert Entities</a><ul><li><a href=#41-two-modes>4.1 Two Modes</a></li><li><a href=#42-overwrite-mode-partial_updatefalse>4.2 Overwrite Mode (partial_update=False)</a></li><li><a href=#43-merge-mode-partial_updatetrue>4.3 Merge Mode (partial_update=True)</a></li><li><a href=#44-common-upsert-errors-and-precautions>4.4 Common Upsert Errors and Precautions</a></li><li><a href=#45-upsert-mode-selection-guide>4.5 Upsert Mode Selection Guide</a></li></ul></li><li><a href=#‰∫îdelete-entities>‰∫î„ÄÅDelete Entities</a><ul><li><a href=#51-basic-syntax>5.1 Basic Syntax</a></li><li><a href=#52-three-deletion-methods>5.2 Three Deletion Methods</a></li><li><a href=#53-common-filter-expressions>5.3 Common Filter Expressions</a></li><li><a href=#54-important-notes>5.4 Important Notes</a></li></ul></li><li><a href=#ÂÖ≠operation-comparison-summary>ÂÖ≠„ÄÅOperation Comparison Summary</a></li></ul></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/en/categories/vector-database/>Vector Database</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/en/stu/milvus-entity-operations/>Milvus Data Operations Guide - Entity CRUD Practical Tutorial</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2026-02-28T18:56:55+08:00>Feb 28, 2026</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>3 minute read</time></div></footer><footer class=article-translations><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://zg-dd.github.io/stu/milvus-entity-operations/ class=link>ÁÆÄ‰Ωì‰∏≠Êñá</a></div></footer></div></header><section class=article-content><h2 id=‰∏Äbasic-concepts>‰∏Ä„ÄÅBasic Concepts</h2><p>In Milvus, an <strong>Entity</strong> is a data record in a Collection that shares the same Schema, where data from each row of fields constitutes an entity.</p><ul><li>Entities in the same Collection have the same attributes (field names, data types, constraints)</li><li>When inserting entities, all fields defined in the Schema must be included</li><li>Entities enter the <code>_default</code> partition by default, but partition names can also be specified</li><li>When dynamic fields are enabled, fields outside the Schema are stored in the <code>$meta</code> reserved field</li></ul><hr><h2 id=‰∫åcomparison-with-relational-databases>‰∫å„ÄÅComparison with Relational Databases</h2><p>Milvus CRUD operations are conceptually similar to traditional relational databases (MySQL / PostgreSQL), but there are important differences:</p><h3 id=21-concept-mapping>2.1 Concept Mapping</h3><div class=table-wrapper><table><thead><tr><th>Relational Database</th><th>Milvus</th><th>Description</th></tr></thead><tbody><tr><td>Database</td><td>Database</td><td>Database</td></tr><tr><td>Table</td><td>Collection</td><td>Data table/collection</td></tr><tr><td>Row</td><td>Entity</td><td>Row/entity</td></tr><tr><td>Column</td><td>Field</td><td>Column/field</td></tr><tr><td>Primary Key</td><td>Primary Key</td><td>Primary key, must be integer or string in Milvus</td></tr><tr><td>Index</td><td>Index</td><td>Index, Milvus indexes are optimized for vector search</td></tr><tr><td><code>INSERT</code></td><td><code>insert()</code></td><td>Add records</td></tr><tr><td><code>UPDATE</code></td><td><code>upsert(partial_update=True)</code></td><td>Update records, Milvus has no independent UPDATE</td></tr><tr><td><code>INSERT ... ON DUPLICATE KEY UPDATE</code></td><td><code>upsert()</code></td><td>Update if exists, insert if not</td></tr><tr><td><code>DELETE FROM ... WHERE</code></td><td><code>delete(filter=...)</code></td><td>Conditional deletion</td></tr></tbody></table></div><h3 id=22-key-differences>2.2 Key Differences</h3><div class=table-wrapper><table><thead><tr><th>Dimension</th><th>Relational Database</th><th>Milvus</th></tr></thead><tbody><tr><td>Update Method</td><td>Has independent <code>UPDATE</code> statement, can precisely modify any field</td><td>No independent UPDATE, can only be achieved through <code>upsert</code></td></tr><tr><td>Deletion Method</td><td><code>DELETE</code> takes effect immediately, can be rolled back</td><td>Marked for deletion then cleaned asynchronously, cannot be rolled back</td></tr><tr><td>Transaction Support</td><td>Supports ACID transactions</td><td>Does not support cross-entity transactions</td></tr><tr><td>Auto-increment Primary Key</td><td>Supports auto-increment primary key</td><td>Supports automatic generation of INT64 primary key (AutoID)</td></tr><tr><td>Filter Syntax</td><td>Standard SQL WHERE clause</td><td>SQL-like expressions, syntax slightly different</td></tr><tr><td>Data Types</td><td>Rich type system</td><td>Additional support for vector types (FloatVector, SparseVector, etc.)</td></tr></tbody></table></div><h3 id=23-filter-syntax-comparison>2.3 Filter Syntax Comparison</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- MySQL
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>WHERE</span> score <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>.<span style=color:#ae81ff>0</span> <span style=color:#66d9ef>AND</span> is_active <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>WHERE</span> id <span style=color:#66d9ef>IN</span> (<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>UPDATE</span> books <span style=color:#66d9ef>SET</span> score <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>.<span style=color:#ae81ff>0</span> <span style=color:#66d9ef>WHERE</span> id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Milvus</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>query(collection_name, filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;score &lt; 3.0 and is_active == false&#34;</span>)
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>delete(collection_name, filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;id in [1, 2, 3]&#34;</span>)
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>upsert(collection_name, data<span style=color:#f92672>=</span>[{<span style=color:#e6db74>&#34;id&#34;</span>: <span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#34;score&#34;</span>: <span style=color:#ae81ff>5.0</span>}], partial_update<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span></code></pre></div><hr><h2 id=‰∏âinsert-entities>‰∏â„ÄÅInsert Entities</h2><h3 id=31-basic-syntax>3.1 Basic Syntax</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>result <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>insert(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;your_collection&#34;</span>,
</span></span><span style=display:flex><span>    data<span style=color:#f92672>=</span>data  <span style=color:#75715e># list[dict], each dict is a record</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h3 id=32-return-value-explanation>3.2 Return Value Explanation</h3><div class=table-wrapper><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td><code>insert_count</code></td><td>Number of successfully inserted records</td></tr><tr><td><code>ids</code></td><td>List of primary key IDs of inserted records</td></tr></tbody></table></div><h3 id=33-example>3.3 Example</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>insert_data</span>(collection_name, data):
</span></span><span style=display:flex><span>    result <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>insert(
</span></span><span style=display:flex><span>        collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>        data<span style=color:#f92672>=</span>data
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Inserted records: </span><span style=color:#e6db74>{</span>result[<span style=color:#e6db74>&#39;insert_count&#39;</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;ID range: </span><span style=color:#e6db74>{</span>result[<span style=color:#e6db74>&#39;ids&#39;</span>][<span style=color:#ae81ff>0</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>{</span>result[<span style=color:#e6db74>&#39;ids&#39;</span>][<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> result
</span></span></code></pre></div><h3 id=34-data-structure-example>3.4 Data Structure Example</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>record <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;Python Programming fromÂÖ•Èó®to Practice&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;isbn&#34;</span>: <span style=color:#e6db74>&#34;978-123-45678-123-0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;is_available&#34;</span>: <span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;page_count&#34;</span>: <span style=color:#ae81ff>500</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;rating&#34;</span>: <span style=color:#ae81ff>4.8</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;price&#34;</span>: <span style=color:#ae81ff>89.9</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;tags&#34;</span>: [<span style=color:#e6db74>&#34;Programming&#34;</span>, <span style=color:#e6db74>&#34;Beginner&#34;</span>, <span style=color:#e6db74>&#34;Practice&#34;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;content_vector&#34;</span>: [<span style=color:#ae81ff>0.1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.3</span>, <span style=color:#f92672>...</span>]  <span style=color:#75715e># Vector field, dimension must match Schema</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=35-important-notes>3.5 Important Notes</h3><ul><li>Inserted data must contain all non-optional fields in the Schema</li><li>Vector field dimensions must match the Schema definition</li><li>Sparse vectors use dictionary format <code>{index: value}</code></li><li>Time fields recommend using ISO format strings or Unix timestamps</li></ul><hr><h2 id=Âõõupsert-entities>Âõõ„ÄÅUpsert Entities</h2><p>Upsert is a combination of <strong>Update + Insert</strong> operations, and is also Milvus&rsquo;s only update method:</p><ul><li><strong>Primary key exists</strong> ‚Üí Execute update</li><li><strong>Primary key doesn&rsquo;t exist</strong> ‚Üí Execute insertion</li></ul><h3 id=41-two-modes>4.1 Two Modes</h3><div class=table-wrapper><table><thead><tr><th>Mode</th><th>Parameter</th><th>Behavior</th></tr></thead><tbody><tr><td>Overwrite Mode</td><td><code>partial_update=False</code></td><td>Completely replace the entire record (default)</td></tr><tr><td>Merge Mode</td><td><code>partial_update=True</code></td><td>Only update specified fields, other fields remain unchanged</td></tr></tbody></table></div><hr><h3 id=42-overwrite-mode-partial_updatefalse>4.2 Overwrite Mode (partial_update=False)</h3><p>Suitable for scenarios requiring complete record replacement, all fields must be provided.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>new_record <span style=color:#f92672>=</span> [{
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;id&#34;</span>: record_id,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;New Title&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;category&#34;</span>: <span style=color:#e6db74>&#34;New Category&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;score&#34;</span>: <span style=color:#ae81ff>4.5</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;is_active&#34;</span>: <span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;tags&#34;</span>: [<span style=color:#e6db74>&#34;Update&#34;</span>, <span style=color:#e6db74>&#34;Test&#34;</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;embedding&#34;</span>: [random<span style=color:#f92672>.</span>uniform(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>for</span> _ <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>128</span>)]  <span style=color:#75715e># Vector field must be provided</span>
</span></span><span style=display:flex><span>}]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>result <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>upsert(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    data<span style=color:#f92672>=</span>new_record,
</span></span><span style=display:flex><span>    partial_update<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><hr><h3 id=43-merge-mode-partial_updatetrue>4.3 Merge Mode (partial_update=True)</h3><p>Only update specified fields, unprovided fields remain unchanged.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Only update rating and active status, other fields remain unchanged</span>
</span></span><span style=display:flex><span>update_data <span style=color:#f92672>=</span> [{
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;id&#34;</span>: <span style=color:#ae81ff>1</span>,           <span style=color:#75715e># Primary key must be provided</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;score&#34;</span>: <span style=color:#ae81ff>2.0</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;is_active&#34;</span>: <span style=color:#66d9ef>False</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;tags&#34;</span>: [<span style=color:#e6db74>&#34;Merge&#34;</span>, <span style=color:#e6db74>&#34;Update&#34;</span>]
</span></span><span style=display:flex><span>}]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>result <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>upsert(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span>collection_name,
</span></span><span style=display:flex><span>    data<span style=color:#f92672>=</span>update_data,
</span></span><span style=display:flex><span>    partial_update<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><hr><h3 id=44-common-upsert-errors-and-precautions>4.4 Common Upsert Errors and Precautions</h3><p><strong>1. Primary key must be provided</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># ‚ùå Error: Forgot primary key, cannot locate target record</span>
</span></span><span style=display:flex><span>update_data <span style=color:#f92672>=</span> [{<span style=color:#e6db74>&#34;score&#34;</span>: <span style=color:#ae81ff>5.0</span>}]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ‚úÖ Correct: Primary key + fields to update</span>
</span></span><span style=display:flex><span>update_data <span style=color:#f92672>=</span> [{<span style=color:#e6db74>&#34;id&#34;</span>: <span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#34;score&#34;</span>: <span style=color:#ae81ff>5.0</span>}]
</span></span></code></pre></div><p><strong>2. Primary key type must match Schema</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Schema defines primary key as INT64</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ‚ùå Error: Passing string type</span>
</span></span><span style=display:flex><span>update_data <span style=color:#f92672>=</span> [{<span style=color:#e6db74>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;1&#34;</span>, <span style=color:#e6db74>&#34;score&#34;</span>: <span style=color:#ae81ff>5.0</span>}]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ‚úÖ Correct: Passing integer type</span>
</span></span><span style=display:flex><span>update_data <span style=color:#f92672>=</span> [{<span style=color:#e6db74>&#34;id&#34;</span>: <span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#34;score&#34;</span>: <span style=color:#ae81ff>5.0</span>}]
</span></span></code></pre></div><p><strong>3. Merge mode doesn&rsquo;t support STRUCT type fields</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># ‚ùå Updating STRUCT fields in merge mode will fail</span>
</span></span><span style=display:flex><span>update_data <span style=color:#f92672>=</span> [{<span style=color:#e6db74>&#34;id&#34;</span>: <span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#34;details&#34;</span>: {<span style=color:#e6db74>&#34;author&#34;</span>: <span style=color:#e6db74>&#34;New Author&#34;</span>}}]  <span style=color:#75715e># details is STRUCT type</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>upsert(collection_name, data<span style=color:#f92672>=</span>update_data, partial_update<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ‚úÖ Use overwrite mode for updates containing STRUCT fields</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>upsert(collection_name, data<span style=color:#f92672>=</span>full_record, partial_update<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>)
</span></span></code></pre></div><p><strong>4. Data must be row format (list of dict)</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># ‚ùå Error: Column format data fails in merge mode</span>
</span></span><span style=display:flex><span>update_data <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;id&#34;</span>: [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>], <span style=color:#e6db74>&#34;score&#34;</span>: [<span style=color:#ae81ff>4.0</span>, <span style=color:#ae81ff>5.0</span>]}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ‚úÖ Correct: Row format</span>
</span></span><span style=display:flex><span>update_data <span style=color:#f92672>=</span> [{<span style=color:#e6db74>&#34;id&#34;</span>: <span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#34;score&#34;</span>: <span style=color:#ae81ff>4.0</span>}, {<span style=color:#e6db74>&#34;id&#34;</span>: <span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#34;score&#34;</span>: <span style=color:#ae81ff>5.0</span>}]
</span></span></code></pre></div><p><strong>5. Verify results before and after operation</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Query original values before update</span>
</span></span><span style=display:flex><span>before <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>query(collection_name, filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;id == 1&#34;</span>, output_fields<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;score&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>upsert(collection_name, data<span style=color:#f92672>=</span>[{<span style=color:#e6db74>&#34;id&#34;</span>: <span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#34;score&#34;</span>: <span style=color:#ae81ff>5.0</span>}], partial_update<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Query to confirm after update</span>
</span></span><span style=display:flex><span>after <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>query(collection_name, filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;id == 1&#34;</span>, output_fields<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;score&#34;</span>])
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;score: </span><span style=color:#e6db74>{</span>before[<span style=color:#ae81ff>0</span>][<span style=color:#e6db74>&#39;score&#39;</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74> ‚Üí </span><span style=color:#e6db74>{</span>after[<span style=color:#ae81ff>0</span>][<span style=color:#e6db74>&#39;score&#39;</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h3 id=45-upsert-mode-selection-guide>4.5 Upsert Mode Selection Guide</h3><div class=table-wrapper><table><thead><tr><th>Operation Scenario</th><th>Recommended Mode</th><th>Notes</th></tr></thead><tbody><tr><td>Complete record update</td><td>Overwrite mode</td><td>Must provide all fields, including vectors</td></tr><tr><td>Partial field modification</td><td>Merge mode</td><td>Avoid updating STRUCT type fields</td></tr><tr><td>New record creation</td><td>Overwrite mode</td><td>Use new primary key value for automatic insertion</td></tr><tr><td>Complex nested structures</td><td>Overwrite mode</td><td>Complex structures not suitable for merge mode</td></tr></tbody></table></div><hr><h2 id=‰∫îdelete-entities>‰∫î„ÄÅDelete Entities</h2><h3 id=51-basic-syntax>5.1 Basic Syntax</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>result <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>delete(
</span></span><span style=display:flex><span>    collection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;your_collection&#34;</span>,
</span></span><span style=display:flex><span>    filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;filter expression&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Deleted records: </span><span style=color:#e6db74>{</span>result<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;delete_count&#39;</span>, <span style=color:#ae81ff>0</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><h3 id=52-three-deletion-methods>5.2 Three Deletion Methods</h3><h4 id=521-single-deletion>5.2.1 Single Deletion</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>client<span style=color:#f92672>.</span>delete(collection_name<span style=color:#f92672>=</span>collection_name, filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;id == 1&#34;</span>)
</span></span></code></pre></div><h4 id=522-batch-deletion>5.2.2 Batch Deletion</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>client<span style=color:#f92672>.</span>delete(collection_name<span style=color:#f92672>=</span>collection_name, filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;id in [2, 3, 4]&#34;</span>)
</span></span></code></pre></div><h4 id=523-conditional-deletion>5.2.3 Conditional Deletion</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Delete records with rating below 3.0</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>delete(collection_name<span style=color:#f92672>=</span>collection_name, filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;score &lt; 3.0&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Combined conditions</span>
</span></span><span style=display:flex><span>client<span style=color:#f92672>.</span>delete(collection_name<span style=color:#f92672>=</span>collection_name, filter<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;score &lt; 3.0 and is_active == false&#34;</span>)
</span></span></code></pre></div><h3 id=53-common-filter-expressions>5.3 Common Filter Expressions</h3><div class=table-wrapper><table><thead><tr><th>Scenario</th><th>Expression Example</th></tr></thead><tbody><tr><td>Exact match single ID</td><td><code>"id == 1"</code></td></tr><tr><td>Match multiple IDs</td><td><code>"id in [1, 2, 3]"</code></td></tr><tr><td>Numeric comparison</td><td><code>"score &lt; 3.0"</code></td></tr><tr><td>String matching</td><td><code>"category == 'Technology'"</code></td></tr><tr><td>Boolean field</td><td><code>"is_active == false"</code></td></tr><tr><td>Combined conditions</td><td><code>"score &lt; 3.0 and is_active == false"</code></td></tr></tbody></table></div><h3 id=54-important-notes>5.4 Important Notes</h3><ul><li>Deletion operations cannot be rolled back, production environments should query first to confirm scope before execution</li><li>Large batch deletions should be executed in batches to avoid affecting cluster performance</li><li>Data is cleaned asynchronously after deletion, statistics from <code>get_collection_stats</code> may have temporary delays</li></ul><hr><h2 id=ÂÖ≠operation-comparison-summary>ÂÖ≠„ÄÅOperation Comparison Summary</h2><div class=table-wrapper><table><thead><tr><th>Operation</th><th>Method</th><th>When Primary Key Exists</th><th>When Primary Key Doesn&rsquo;t Exist</th><th>Must Provide All Fields</th></tr></thead><tbody><tr><td><code>insert</code></td><td><code>client.insert()</code></td><td>Error/duplicate</td><td>Insert new record</td><td>‚úÖ Yes</td></tr><tr><td><code>upsert</code> (overwrite)</td><td><code>client.upsert(partial_update=False)</code></td><td>Complete overwrite</td><td>Insert new record</td><td>‚úÖ Yes</td></tr><tr><td><code>upsert</code> (merge)</td><td><code>client.upsert(partial_update=True)</code></td><td>Partial update</td><td>Insert new record</td><td>‚ùå Only need to provide fields to change</td></tr><tr><td><code>delete</code></td><td><code>client.delete()</code></td><td>Delete record</td><td>No operation</td><td>‚Äî</td></tr></tbody></table></div></section><footer class=article-footer><section class=article-tags><a href=/en/tags/milvus/>Milvus</a></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/en/stu/milvus-index-explained/><div class=article-details><h2 class=article-title>Milvus Index Detailed Guide - Vector Search Performance Optimization</h2></div></a></article><article><a href=/en/stu/milvus-collection-operations/><div class=article-details><h2 class=article-title>Milvus Collection Operations Detailed Guide</h2></div></a></article><article><a href=/en/stu/milvus-stu-schema/><div class=article-details><h2 class=article-title>Milvus Schema Detailed Guide - Field Types and Data Modeling</h2></div></a></article><article><a href=/en/stu/milvus-install-guide/><div class=article-details><h2 class=article-title>Complete Guide to Installing Milvus Standalone Mode and Common Problem Solutions</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=zg-dd/zg-dd.github.io data-repo-id=R_kgDOQwB7tw data-category=Announcements data-category-id=DIC_kwDOQwB7t84C0WGD data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"preferred_color_scheme":"preferred_color_scheme")}})()</script><footer class=site-footer><section class=copyright>&copy;
2026 Â∞èÂ∑∑ Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>