[{"content":"ä¸€ã€Schema æ¦‚å¿µç†è§£\r1.1 ä»€ä¹ˆæ˜¯ Schemaï¼Ÿ\rSchema æ˜¯é›†åˆï¼ˆCollectionï¼‰çš„å…ƒæ•°æ®å®šä¹‰ï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„å®šä¹‰ã€‚\nMilvus æ¦‚å¿µ å…³ç³»å‹æ•°æ®åº“æ¦‚å¿µ è¯´æ˜ Schema Table Schema å®šä¹‰æ•°æ®ç»“æ„çš„å…ƒæ•°æ® Field Column å­—æ®µ/åˆ—å®šä¹‰ DataType Data Type æ•°æ®ç±»å‹ï¼ˆVARCHAR, INT, FLOATç­‰ï¼‰ Primary Key Primary Key ä¸»é”®å­—æ®µ Vector Field - Milvus ç‰¹æœ‰çš„å‘é‡å­—æ®µ Dynamic Field - åŠ¨æ€å­—æ®µï¼Œç±»ä¼¼ MongoDB çš„çµæ´» Schema 1.2 åˆ›å»º Schema\rfrom pymilvus import MilvusClient, DataType # åˆ›å»º Schema schema = client.create_schema( enable_dynamic_field=True # å¯ç”¨åŠ¨æ€å­—æ®µ ) # å¯¹æ¯” MySQL # CREATE TABLE products ( # ... # ); äºŒã€å­—æ®µç±»å‹è¯¦è§£\r2.1 å­—æ®µåˆ†ç±»\rå­—æ®µç±»å‹\râ”œâ”€â”€ æ ‡é‡å­—æ®µï¼ˆScalar Fieldsï¼‰\râ”‚ â”œâ”€â”€ å­—ç¬¦ä¸²ï¼ˆVARCHARï¼‰\râ”‚ â”œâ”€â”€ æ•°å­—ï¼ˆINT8/INT16/INT32/INT64/FLOAT/DOUBLE/BOOLï¼‰\râ”‚ â”œâ”€â”€ JSON\râ”‚ â”œâ”€â”€ æ•°ç»„ï¼ˆARRAYï¼‰\râ”‚ â”œâ”€â”€ æ—¶é—´æˆ³ï¼ˆTIMESTAMPTZï¼‰\râ”‚ â”œâ”€â”€ ç»“æ„ä½“æ•°ç»„ï¼ˆARRAY of STRUCTï¼‰\râ”‚ â””â”€â”€ å‡ ä½•å­—æ®µï¼ˆGEOMETRYï¼‰\râ””â”€â”€ å‘é‡å­—æ®µï¼ˆVector Fieldsï¼‰\râ”œâ”€â”€ å¯†é›†å‘é‡ï¼ˆFLOAT_VECTOR/FLOAT16_VECTOR/BFLOAT16_VECTOR/INT8_VECTORï¼‰\râ”œâ”€â”€ ç¨€ç–å‘é‡ï¼ˆSPARSE_FLOAT_VECTORï¼‰\râ””â”€â”€ äºŒè¿›åˆ¶å‘é‡ï¼ˆBINARY_VECTORï¼‰ ä¸‰ã€ä¸»é”®å­—æ®µ\r3.1 ä¸»é”®ç±»å‹å¯¹æ¯”\ræ•°æ®ç±»å‹ è¯´æ˜ å¯¹æ¯” MySQL INT64 64ä½æ•´æ•°ï¼Œæ¨èä½¿ç”¨ ç±»ä¼¼ BIGINT AUTO_INCREMENT VARCHAR å¯å˜é•¿åº¦å­—ç¬¦ä¸² ç±»ä¼¼ VARCHAR(n) PRIMARY KEY 3.2 è‡ªåŠ¨ ID vs æ‰‹åŠ¨ ID\ræ¨¡å¼ è¯´æ˜ ä½¿ç”¨åœºæ™¯ å¯¹æ¯” MySQL è‡ªåŠ¨ ID Milvus è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€æ ‡è¯†ç¬¦ å¤§å¤šæ•°æƒ…å†µ AUTO_INCREMENT æ‰‹åŠ¨ ID ç”¨æˆ·æä¾›å”¯ä¸€ ID ID éœ€è¦ä¸å¤–éƒ¨ç³»ç»Ÿä¿æŒä¸€è‡´ æ‰‹åŠ¨æ’å…¥ä¸»é”®å€¼ 3.3 ä¸»é”®å­—æ®µç¤ºä¾‹\r# è‡ªåŠ¨ ID ä¸»é”® schema.add_field( field_name=\u0026#34;product_id\u0026#34;, datatype=DataType.INT64, is_primary=True, # æ ‡è®°ä¸ºä¸»é”® auto_id=True # è‡ªåŠ¨ç”Ÿæˆ ID ) # å¯¹æ¯” MySQL # product_id BIGINT AUTO_INCREMENT PRIMARY KEY # æ‰‹åŠ¨ ID ä¸»é”®ï¼ˆä½¿ç”¨å­—ç¬¦ä¸²ï¼‰ schema.add_field( field_name=\u0026#34;sku_code\u0026#34;, datatype=DataType.VARCHAR, max_length=50, is_primary=True, auto_id=False # æ‰‹åŠ¨æä¾› ID ) # å¯¹æ¯” MySQL # sku_code VARCHAR(50) PRIMARY KEY å››ã€æ ‡é‡å­—æ®µè¯¦è§£\r4.1 å­—ç¬¦ä¸²å­—æ®µï¼ˆVARCHARï¼‰\rå±æ€§ è¯´æ˜ å–å€¼èŒƒå›´ å¯¹æ¯” MySQL datatype æ•°æ®ç±»å‹ DataType.VARCHAR VARCHAR max_length æœ€å¤§é•¿åº¦ 1-65535 VARCHAR(n) ä¸­çš„ n nullable æ˜¯å¦å¯ä¸ºç©º True/False NULL/NOT NULL default_value é»˜è®¤å€¼ å­—ç¬¦ä¸² DEFAULT \u0026lsquo;value\u0026rsquo; # å­—ç¬¦ä¸²å­—æ®µç¤ºä¾‹ schema.add_field( field_name=\u0026#34;product_name\u0026#34;, datatype=DataType.VARCHAR, max_length=255, nullable=False, default_value=\u0026#34;æœªå‘½åå•†å“\u0026#34; ) # å¯¹æ¯” MySQL # product_name VARCHAR(255) NOT NULL DEFAULT \u0026#39;æœªå‘½åå•†å“\u0026#39; 4.2 æ•°å­—å­—æ®µ\rMilvus ç±»å‹ è¯´æ˜ å–å€¼èŒƒå›´ å¯¹æ¯” MySQL BOOL å¸ƒå°”å€¼ True/False BOOLEAN INT8 8ä½æ•´æ•° -128 ~ 127 TINYINT INT16 16ä½æ•´æ•° -32768 ~ 32767 SMALLINT INT32 32ä½æ•´æ•° -2^31 ~ 2^31-1 INT INT64 64ä½æ•´æ•° -2^63 ~ 2^63-1 BIGINT FLOAT 32ä½æµ®ç‚¹æ•° - FLOAT DOUBLE 64ä½æµ®ç‚¹æ•° - DOUBLE # æ•´æ•°å­—æ®µ schema.add_field( field_name=\u0026#34;stock_quantity\u0026#34;, datatype=DataType.INT32, nullable=False, default_value=0 ) # æµ®ç‚¹æ•°å­—æ®µ schema.add_field( field_name=\u0026#34;product_price\u0026#34;, datatype=DataType.FLOAT, nullable=False ) # å¸ƒå°”å­—æ®µ schema.add_field( field_name=\u0026#34;is_available\u0026#34;, datatype=DataType.BOOL, default_value=True ) # å¯¹æ¯” MySQL # stock_quantity INT NOT NULL DEFAULT 0, # product_price FLOAT NOT NULL, # is_available BOOLEAN DEFAULT TRUE 4.3 JSON å­—æ®µ\rJSON å­—æ®µ vs åŠ¨æ€å­—æ®µå¯¹æ¯”\rç‰¹å¾ JSON å­—æ®µ åŠ¨æ€å­—æ®µ å¯¹æ¯” MySQL Schema å®šä¹‰ å¿…é¡»æ˜¾å¼å£°æ˜ éšè—å­—æ®µ $meta JSON åˆ— vs æ— å¯¹åº”æ¦‚å¿µ ä½¿ç”¨åœºæ™¯ ç»“æ„åŒ–ã€å·²çŸ¥çš„æ•°æ® çµæ´»ã€åŠç»“æ„åŒ–æ•°æ® JSON åˆ— vs NoSQL ç‰¹æ€§ æ§åˆ¶ ç”¨æˆ·æ§åˆ¶å­—æ®µåå’Œç»“æ„ ç³»ç»Ÿè‡ªåŠ¨ç®¡ç† - æŸ¥è¯¢æ–¹å¼ metadata[\u0026quot;key\u0026quot;] dynamic_key æˆ– $meta[\u0026quot;key\u0026quot;] JSON_EXTRACT() # JSON å­—æ®µç¤ºä¾‹ schema.add_field( field_name=\u0026#34;product_detail\u0026#34;, datatype=DataType.JSON ) # æ’å…¥æ•°æ®ç¤ºä¾‹ data = { \u0026#34;product_id\u0026#34;: 1, \u0026#34;product_detail\u0026#34;: { \u0026#34;brand\u0026#34;: \u0026#34;Apple\u0026#34;, \u0026#34;model\u0026#34;: \u0026#34;iPhone 15\u0026#34;, \u0026#34;specs\u0026#34;: { \u0026#34;cpu\u0026#34;: \u0026#34;A17 Pro\u0026#34;, \u0026#34;ram\u0026#34;: \u0026#34;8GB\u0026#34; } } } # å¯¹æ¯” MySQL # product_detail JSON # æŸ¥è¯¢: SELECT JSON_EXTRACT(product_detail, \u0026#39;$.brand\u0026#39;) FROM products; JSON ç´¢å¼•\rJSON ç´¢å¼•é€‚ç”¨åœºæ™¯ï¼š\nå…·æœ‰ä¸€è‡´ã€å·²çŸ¥é”®çš„ç»“æ„åŒ– Schema ç‰¹å®š JSON è·¯å¾„ä¸Šçš„ç­‰ä»·å’ŒèŒƒå›´æŸ¥è¯¢ éœ€è¦ç²¾ç¡®æ§åˆ¶ç´¢å¼•é”®çš„æƒ…å†µ å¯¹ç›®æ ‡æŸ¥è¯¢è¿›è¡Œé«˜æ•ˆå­˜å‚¨åŠ é€Ÿ # åˆ›å»º JSON ç´¢å¼• index_params = MilvusClient.prepare_index_params() index_params.add_index( field_name=\u0026#34;product_detail\u0026#34;, # JSON å­—æ®µå index_type=\u0026#34;AUTOINDEX\u0026#34;, # å¿…é¡»æ˜¯ AUTOINDEX æˆ– INVERTED index_name=\u0026#34;idx_product_brand\u0026#34;, # ç´¢å¼•åç§° params={ \u0026#34;json_path\u0026#34;: \u0026#39;product_detail[\u0026#34;brand\u0026#34;]\u0026#39;, # é¡¶çº§é”® \u0026#34;json_cast_type\u0026#34;: \u0026#34;VARCHAR\u0026#34; # æ•°æ®ç±»å‹ } ) # åµŒå¥—é”®ç´¢å¼• index_params.add_index( field_name=\u0026#34;product_detail\u0026#34;, index_type=\u0026#34;AUTOINDEX\u0026#34;, index_name=\u0026#34;idx_product_cpu\u0026#34;, params={ \u0026#34;json_path\u0026#34;: \u0026#39;product_detail[\u0026#34;specs\u0026#34;][\u0026#34;cpu\u0026#34;]\u0026#39;, # åµŒå¥—é”® \u0026#34;json_cast_type\u0026#34;: \u0026#34;VARCHAR\u0026#34; } ) # å¯¹æ¯” MySQL 8.0+ # CREATE INDEX idx_product_brand ON products((JSON_EXTRACT(product_detail, \u0026#39;$.brand\u0026#39;))); JSON åˆ‡ç¢ï¼ˆShreddingï¼‰ä¼˜åŒ–\rJSON åˆ‡ç¢é€šè¿‡å°†åŸºäºè¡Œçš„å­˜å‚¨è½¬æ¢ä¸ºåˆ—å¼å­˜å‚¨æ¥åŠ é€ŸæŸ¥è¯¢ã€‚\nå‚æ•°åç§° è¯´æ˜ é»˜è®¤å€¼ è°ƒæ•´å»ºè®® common.enabledJSONShredding æ˜¯å¦å¯ç”¨ JSON åˆ‡ç¢ false è®¾ä¸º true æ¿€æ´»åŠŸèƒ½ common.usingJSONShreddingForQuery æ˜¯å¦ä½¿ç”¨åˆ‡ç¢æ•°æ®åŠ é€Ÿ true æŸ¥è¯¢å¤±è´¥æ—¶è®¾ä¸º false æ¢å¤ queryNode.mmap.jsonShredding åŠ è½½æ—¶æ˜¯å¦ä½¿ç”¨ mmap true ç‰¹æ®Šå†…å­˜éœ€æ±‚æ—¶è°ƒæ•´ dataCoord.jsonShreddingMaxColumns æœ€å¤§åˆ‡ç¢åˆ—æ•° 1024 é¢‘ç¹é”®è¶…é™æ—¶å¢åŠ  dataCoord.jsonShreddingRatioThreshold æœ€å°å‡ºç°ç‡é˜ˆå€¼ 0.3 è°ƒæ•´åˆ‡ç¢æ ‡å‡† # milvus.yaml é…ç½®ç¤ºä¾‹\rcommon:\renabledJSONShredding: true\rusingJSONShreddingForQuery: true\rqueryNode:\rmmap:\rjsonShredding: true\rdataCoord:\rjsonShreddingMaxColumns: 1024\rjsonShreddingRatioThreshold: 0.3 4.4 æ•°ç»„å­—æ®µï¼ˆARRAYï¼‰\r# å­—ç¬¦ä¸²æ•°ç»„ schema.add_field( field_name=\u0026#34;product_tags\u0026#34;, datatype=DataType.ARRAY, element_type=DataType.VARCHAR, max_capacity=10, # æœ€å¤š10ä¸ªå…ƒç´  max_length=50 # æ¯ä¸ªå­—ç¬¦ä¸²æœ€é•¿50å­—ç¬¦ ) # æ•´æ•°æ•°ç»„ schema.add_field( field_name=\u0026#34;related_product_ids\u0026#34;, datatype=DataType.ARRAY, element_type=DataType.INT64, max_capacity=20 ) # æ’å…¥æ•°æ®ç¤ºä¾‹ data = { \u0026#34;product_id\u0026#34;: 1, \u0026#34;product_tags\u0026#34;: [\u0026#34;ç”µå­äº§å“\u0026#34;, \u0026#34;æ‰‹æœº\u0026#34;, \u0026#34;5G\u0026#34;, \u0026#34;æ™ºèƒ½\u0026#34;], \u0026#34;related_product_ids\u0026#34;: [101, 102, 103] } # å¯¹æ¯” MySQL 8.0+ # product_tags JSON -- MySQL ç”¨ JSON æ•°ç»„å®ç° # æˆ–ä½¿ç”¨å…³è”è¡¨å®ç°å¤šå¯¹å¤šå…³ç³» 4.5 æ—¶é—´æˆ³å­—æ®µï¼ˆTIMESTAMPTZï¼‰\rTIMESTAMPTZ æ˜¯æ—¶åŒºæ„ŸçŸ¥çš„æ—¶é—´æˆ³ç±»å‹ã€‚\nç‰¹æ€§ è¯´æ˜ å¯¹æ¯” MySQL è¾“å…¥æ ¼å¼ ISO 8601 å­—ç¬¦ä¸²ï¼ˆå¸¦æ—¶åŒºï¼‰ TIMESTAMP å†…éƒ¨å­˜å‚¨ UTC æ ‡å‡†åŒ–å­˜å‚¨ å–å†³äº time_zone è®¾ç½® æ¯”è¾ƒæ“ä½œ ç»Ÿä¸€ä½¿ç”¨ UTC å¯èƒ½å—æ—¶åŒºå½±å“ # æ—¶é—´æˆ³å­—æ®µ schema.add_field( field_name=\u0026#34;created_at\u0026#34;, datatype=DataType.TIMESTAMPTZ, nullable=False, default_value=\u0026#34;2025-01-01T00:00:00+00:00\u0026#34; ) # æ’å…¥æ•°æ®ç¤ºä¾‹ data = { \u0026#34;product_id\u0026#34;: 1, \u0026#34;created_at\u0026#34;: \u0026#34;2025-05-01T23:59:59+08:00\u0026#34; # åŒ—äº¬æ—¶é—´ } # å¯¹æ¯” MySQL # created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP æ—¶åŒºç®¡ç†çº§åˆ«\rçº§åˆ« å‚æ•° èŒƒå›´ ä¼˜å…ˆçº§ æ•°æ®åº“ timezone æ•°æ®åº“ä¸­æ‰€æœ‰é›†åˆçš„é»˜è®¤å€¼ æœ€ä½ é›†åˆ timezone è¦†ç›–è¯¥é›†åˆçš„æ•°æ®åº“é»˜è®¤æ—¶åŒº ä¸­ æŸ¥è¯¢/æœç´¢ timezone ä¸´æ—¶è¦†ç›–ä¸€ä¸ªç‰¹å®šæ“ä½œ æœ€é«˜ # æ•°æ®åº“çº§åˆ«è®¾ç½®æ—¶åŒº client.alter_database_properties( \u0026#34;my_db\u0026#34;, {\u0026#34;timezone\u0026#34;: \u0026#34;Asia/Shanghai\u0026#34;} ) # é›†åˆçº§åˆ«è®¾ç½®æ—¶åŒºï¼ˆåˆ›å»ºé›†åˆæ—¶ï¼‰ client.create_collection( collection_name=\u0026#34;products\u0026#34;, schema=schema, properties={\u0026#34;timezone\u0026#34;: \u0026#34;America/New_York\u0026#34;} ) # æŸ¥è¯¢æ—¶ä¸´æ—¶æŒ‡å®šæ—¶åŒº client.query( collection_name=\u0026#34;products\u0026#34;, filter=\u0026#34;created_at \u0026gt; \u0026#39;2025-01-01T00:00:00+08:00\u0026#39;\u0026#34;, timezone=\u0026#34;Asia/Shanghai\u0026#34; ) 4.6 ç»“æ„ä½“æ•°ç»„ï¼ˆARRAY of STRUCTï¼‰\rç»“æ„ä½“æ•°ç»„ç”¨äºå­˜å‚¨å¤æ‚çš„åµŒå¥—æ•°æ®ã€‚\n# å•†å“è¯„è®ºæ•°ç»„ç¤ºä¾‹ # ç¤ºä¾‹ï¼šå•†å“è¯„è®ºæ•°ç»„ï¼Œæ¯ä¸ªè¯„è®ºéƒ½æ˜¯ä¸€ä¸ª Struct struct_schema = client.create_struct_field_schema() struct_schema.add_field(field_name=\u0026#34;user_id\u0026#34;,datatype=DataType.INT64) struct_schema.add_field(field_name=\u0026#34;rating\u0026#34;,datatype=DataType.INT32) struct_schema.add_field(field_name=\u0026#34;comment\u0026#34;,datatype=DataType.VARCHAR,max_length=500) struct_schema.add_field(field_name=\u0026#34;review_vector\u0026#34;,datatype=DataType.FLOAT_VECTOR,dim=64) struct_schema.add_field(field_name=\u0026#34;timestamp\u0026#34;,datatype=DataType.TIMESTAMPTZ) schema.add_field( field_name=\u0026#34;reviews\u0026#34;, datatype=DataType.ARRAY, element_type=DataType.STRUCT, max_capacity=100, element_schema=struct_schema ) # æ’å…¥æ•°æ®ç¤ºä¾‹ data = { \u0026#34;product_id\u0026#34;: 1, \u0026#34;reviews\u0026#34;: [ { \u0026#34;user_id\u0026#34;: 1001, \u0026#34;rating\u0026#34;: 5, \u0026#34;comment\u0026#34;: \u0026#34;éå¸¸å¥½ç”¨ï¼\u0026#34;, \u0026#34;review_vector\u0026#34;: [0.1, 0.2, ...], # 64ç»´å‘é‡ \u0026#34;timestamp\u0026#34;: \u0026#34;2025-05-01T10:00:00+08:00\u0026#34; }, { \u0026#34;user_id\u0026#34;: 1002, \u0026#34;rating\u0026#34;: 4, \u0026#34;comment\u0026#34;: \u0026#34;è¿˜ä¸é”™\u0026#34;, \u0026#34;review_vector\u0026#34;: [0.3, 0.4, ...], \u0026#34;timestamp\u0026#34;: \u0026#34;2025-05-02T15:30:00+08:00\u0026#34; } ] } # å¯¹æ¯” MySQL # éœ€è¦åˆ›å»ºå…³è”è¡¨ reviews # CREATE TABLE reviews ( # review_id BIGINT PRIMARY KEY, # product_id BIGINT, # user_id BIGINT, # rating INT, # comment VARCHAR(500), # timestamp TIMESTAMP, # FOREIGN KEY (product_id) REFERENCES products(product_id) # ); 4.7 å‡ ä½•å­—æ®µï¼ˆGEOMETRYï¼‰\rç”¨äºå­˜å‚¨åœ°ç†ä½ç½®å’Œåæ ‡ä¿¡æ¯ã€‚\n# å‡ ä½•å­—æ®µ schema.add_field( field_name=\u0026#34;store_location\u0026#34;, datatype=DataType.GEOMETRY, default_value=\u0026#34;POINT(0 0)\u0026#34; ) # æ’å…¥æ•°æ®ç¤ºä¾‹ data = { \u0026#34;product_id\u0026#34;: 1, \u0026#34;store_location\u0026#34;: \u0026#34;POINT(116.4074 39.9042)\u0026#34; # åŒ—äº¬å¤©å®‰é—¨åæ ‡ } # å¯¹æ¯” MySQL # store_location POINT NOT NULL # æˆ–ä½¿ç”¨ PostGIS æ‰©å±•çš„ GEOMETRY ç±»å‹ äº”ã€å‘é‡å­—æ®µè¯¦è§£\r5.1 å‘é‡ç±»å‹å¯¹æ¯”\rMilvus ç±»å‹ è¯´æ˜ ä½¿ç”¨åœºæ™¯ å­˜å‚¨å¤§å° FLOAT_VECTOR 32ä½æµ®ç‚¹å‘é‡ é«˜ç²¾åº¦è¯­ä¹‰æœç´¢ 4å­—èŠ‚/ç»´ FLOAT16_VECTOR 16ä½åŠç²¾åº¦æµ®ç‚¹ æ·±åº¦å­¦ä¹ ã€GPUè®¡ç®— 2å­—èŠ‚/ç»´ BFLOAT16_VECTOR 16ä½è„‘æµ®ç‚¹ å¤§è§„æ¨¡å›¾åƒæ£€ç´¢ 2å­—èŠ‚/ç»´ INT8_VECTOR 8ä½æ•´æ•°å‘é‡ é‡åŒ–æ¨¡å‹ã€å¿«é€Ÿæ¨ç† 1å­—èŠ‚/ç»´ SPARSE_FLOAT_VECTOR ç¨€ç–æµ®ç‚¹å‘é‡ å…¨æ–‡æœç´¢ã€è¯æ€§åŒ¹é… å˜é•¿ BINARY_VECTOR äºŒè¿›åˆ¶å‘é‡ èµ„æºå—é™åœºæ™¯ 1ä½/ç»´ 5.2 å¯†é›†å‘é‡ç¤ºä¾‹\r# FLOAT_VECTOR - æ ‡å‡†å¯†é›†å‘é‡ schema.add_field( field_name=\u0026#34;product_embedding\u0026#34;, datatype=DataType.FLOAT_VECTOR, dim=128 # 128ç»´å‘é‡ ) # FLOAT16_VECTOR - åŠç²¾åº¦å‘é‡ schema.add_field( field_name=\u0026#34;image_embedding\u0026#34;, datatype=DataType.FLOAT16_VECTOR, dim=512 ) # INT8_VECTOR - é‡åŒ–å‘é‡ schema.add_field( field_name=\u0026#34;text_embedding_quantized\u0026#34;, datatype=DataType.INT8_VECTOR, dim=256 ) # æ’å…¥æ•°æ®ç¤ºä¾‹ import numpy as np data = { \u0026#34;product_id\u0026#34;: 1, \u0026#34;product_embedding\u0026#34;: np.random.rand(128).tolist(), # 128ç»´æµ®ç‚¹å‘é‡ \u0026#34;image_embedding\u0026#34;: np.random.rand(512).astype(np.float16).tolist(), \u0026#34;text_embedding_quantized\u0026#34;: np.random.randint(-128, 127, 256).tolist() } # MySQL æ— å¯¹åº”ç±»å‹ï¼Œéœ€è¦å­˜å‚¨ä¸º BLOB æˆ– JSON 5.3 ç¨€ç–å‘é‡ç¤ºä¾‹\r``python\nç¨€ç–å‘é‡å­—æ®µ\rschema.add_field( field_name=\u0026ldquo;keyword_vector\u0026rdquo;, datatype=DataType.SPARSE_FLOAT_VECTOR )\næ’å…¥æ•°æ®ç¤ºä¾‹ï¼ˆç¨€ç–å‘é‡æ ¼å¼ï¼‰\rdata = { \u0026ldquo;product_id\u0026rdquo;: 1, \u0026ldquo;keyword_vector\u0026rdquo;: { 10: 0.5, # ç´¢å¼•10çš„å€¼ä¸º0.5 25: 0.8, # ç´¢å¼•25çš„å€¼ä¸º0.8 100: 0.3 # ç´¢å¼•100çš„å€¼ä¸º0.3 } }\n## å…­ã€åŠ¨æ€å­—æ®µï¼ˆDynamic Fieldï¼‰\r### 6.1 åŠ¨æ€å­—æ®µæ¦‚å¿µ\råŠ¨æ€å­—æ®µå…è®¸æ’å…¥ Schema ä¸­æœªå®šä¹‰çš„å­—æ®µï¼Œè¿™äº›å­—æ®µä¼šè‡ªåŠ¨å­˜å‚¨åœ¨éšè—çš„ `$meta` JSON å­—æ®µä¸­ã€‚\r```python\r# å¯ç”¨åŠ¨æ€å­—æ®µ\rschema = client.create_schema(\renable_dynamic_field=True # å¯ç”¨åŠ¨æ€å­—æ®µ\r)\r# å®šä¹‰åŸºæœ¬å­—æ®µ\rschema.add_field(\rfield_name=\u0026#34;product_id\u0026#34;,\rdatatype=DataType.INT64,\ris_primary=True,\rauto_id=True\r)\rschema.add_field(\rfield_name=\u0026#34;product_vector\u0026#34;,\rdatatype=DataType.FLOAT_VECTOR,\rdim=128\r)\r# æ’å…¥æ•°æ®æ—¶å¯ä»¥åŒ…å«æœªå®šä¹‰çš„å­—æ®µ\rdata = {\r\u0026#34;product_id\u0026#34;: 1,\r\u0026#34;product_vector\u0026#34;: [0.1, 0.2, ...],\r\u0026#34;name\u0026#34;: \u0026#34;iPhone 15\u0026#34;, # æœªåœ¨ Schema ä¸­å®šä¹‰\r\u0026#34;category\u0026#34;: \u0026#34;Electronics\u0026#34;, # æœªåœ¨ Schema ä¸­å®šä¹‰\r\u0026#34;price\u0026#34;: 999.99 # æœªåœ¨ Schema ä¸­å®šä¹‰\r}\r# Milvus å†…éƒ¨å­˜å‚¨ä¸ºï¼š\r# {\r# \u0026#34;product_id\u0026#34;: 1,\r# \u0026#34;product_vector\u0026#34;: [0.1, 0.2, ...],\r# \u0026#34;$meta\u0026#34;: {\r# \u0026#34;name\u0026#34;: \u0026#34;iPhone 15\u0026#34;,\r# \u0026#34;category\u0026#34;: \u0026#34;Electronics\u0026#34;,\r# \u0026#34;price\u0026#34;: 999.99\r# }\r# } 6.2 åŠ¨æ€å­—æ®µæ”¯æŒçš„ç±»å‹\rç±»å‹ Milvus DataType å¯¹æ¯” MongoDB å­—ç¬¦ä¸² VARCHAR String æ•´æ•° INT8, INT32, INT64 Int32, Int64 æµ®ç‚¹ FLOAT, DOUBLE Double å¸ƒå°” BOOL Boolean æ•°ç»„ ARRAY Array JSONå¯¹è±¡ JSON Object 6.3 æŸ¥è¯¢åŠ¨æ€å­—æ®µ\r# ç›´æ¥ä½¿ç”¨å­—æ®µåæŸ¥è¯¢ results = client.query( collection_name=\u0026#34;products\u0026#34;, filter=\u0026#39;name == \u0026#34;iPhone 15\u0026#34;\u0026#39;, # ç›´æ¥ä½¿ç”¨åŠ¨æ€å­—æ®µå output_fields=[\u0026#34;product_id\u0026#34;, \u0026#34;name\u0026#34;, \u0026#34;category\u0026#34;, \u0026#34;price\u0026#34;] ) # æˆ–é€šè¿‡ $meta æŸ¥è¯¢ results = client.query( collection_name=\u0026#34;products\u0026#34;, filter=\u0026#39;$meta[\u0026#34;category\u0026#34;] == \u0026#34;Electronics\u0026#34;\u0026#39;, output_fields=[\u0026#34;product_id\u0026#34;, \u0026#34;$meta\u0026#34;] ) # å¯¹æ¯” MongoDB # db.products.find({\u0026#34;name\u0026#34;: \u0026#34;iPhone 15\u0026#34;}) ä¸ƒã€å®Œæ•´ Schema ç¤ºä¾‹\rfrom pymilvus import MilvusClient, DataType\r# è¿æ¥å®¢æˆ·ç«¯\rclient = MilvusClient(uri=\u0026#34;http://localhost:19530\u0026#34;, token=\u0026#34;root:Milvus\u0026#34;)\r# åˆ›å»º Schema\rschema = client.create_schema(\renable_dynamic_field=True # å¯ç”¨åŠ¨æ€å­—æ®µ\r)\r# 1. ä¸»é”®å­—æ®µï¼ˆè‡ªåŠ¨IDï¼‰\rschema.add_field(\rfield_name=\u0026#34;product_id\u0026#34;,\rdatatype=DataType.INT64,\ris_primary=True,\rauto_id=True\r)\r# 2. å­—ç¬¦ä¸²å­—æ®µ\rschema.add_field(\rfield_name=\u0026#34;product_name\u0026#34;,\rdatatype=DataType.VARCHAR,\rmax_length=255\r)\r# 3. æ•°å­—å­—æ®µ\rschema.add_field(\rfield_name=\u0026#34;product_price\u0026#34;,\rdatatype=DataType.FLOAT\r)\r# 4. JSON å­—æ®µ\rschema.add_field(\rfield_name=\u0026#34;product_detail\u0026#34;,\rdatatype=DataType.JSON\r)\r# 5. æ•°ç»„å­—æ®µ\rschema.add_field(\rfield_name=\u0026#34;product_tags\u0026#34;,\rdatatype=DataType.ARRAY,\relement_type=DataType.VARCHAR,\rmax_capacity=10,\rmax_length=50\r)\r# 6. æ—¶é—´æˆ³å­—æ®µ\rschema.add_field(\rfield_name=\u0026#34;created_at\u0026#34;,\rdatatype=DataType.TIMESTAMPTZ\r)\r# 7. ç»“æ„ä½“æ•°ç»„\rstruct_schema = client.create_struct_field_schema()\rstruct_schema.add_field(field_name=\u0026#34;user_id\u0026#34;,datatype=DataType.INT64)\rstruct_schema.add_field(field_name=\u0026#34;rating\u0026#34;,datatype=DataType.INT32)\rstruct_schema.add_field(field_name=\u0026#34;comment\u0026#34;,datatype=DataType.VARCHAR,max_length=500)\rstruct_schema.add_field(field_name=\u0026#34;review_vector\u0026#34;,datatype=DataType.FLOAT_VECTOR,dim=64)\rstruct_schema.add_field(field_name=\u0026#34;timestamp\u0026#34;,datatype=DataType.TIMESTAMPTZ)\rschema.add_field(\rfield_name=\u0026#34;reviews\u0026#34;,\rdatatype=DataType.ARRAY,\relement_type=DataType.STRUCT,\rmax_capacity=100,\relement_schema=struct_schema\r)\r# 8. å‡ ä½•å­—æ®µ\rschema.add_field(\rfield_name=\u0026#34;store_location\u0026#34;,\rdatatype=DataType.GEOMETRY,\rdefault_value=\u0026#34;POINT(0 0)\u0026#34;\r)\r# 9. å¯†é›†å‘é‡å­—æ®µ\rschema.add_field(\rfield_name=\u0026#34;product_embedding\u0026#34;,\rdatatype=DataType.FLOAT_VECTOR,\rdim=128\r)\r# 10. ç¨€ç–å‘é‡å­—æ®µ\rschema.add_field(\rfield_name=\u0026#34;keyword_vector\u0026#34;,\rdatatype=DataType.SPARSE_FLOAT_VECTOR\r)\rprint(\u0026#34;âœ… Schema åˆ›å»ºå®Œæˆ\u0026#34;) å…«ã€Schema ä¸ MySQL å¯¹æ¯”æ€»ç»“\ræ“ä½œ Milvus MySQL åˆ›å»º Schema client.create_schema() CREATE TABLE æ·»åŠ å­—æ®µ schema.add_field() ALTER TABLE ADD COLUMN ä¸»é”®å®šä¹‰ is_primary=True PRIMARY KEY è‡ªåŠ¨ID auto_id=True AUTO_INCREMENT å¯ç©ºå­—æ®µ nullable=True NULL é»˜è®¤å€¼ default_value=value DEFAULT value å‘é‡å­—æ®µ FLOAT_VECTOR ç­‰ æ— å¯¹åº”ç±»å‹ åŠ¨æ€å­—æ®µ enable_dynamic_field=True æ— ï¼ˆéœ€ç”¨ JSON æˆ– NoSQLï¼‰ ä¹ã€æœ€ä½³å®è·µ\r9.1 å­—æ®µå‘½åè§„èŒƒ\r# âœ… æ¨è \u0026#34;product_id\u0026#34; \u0026#34;user_name\u0026#34; \u0026#34;created_at\u0026#34; # âŒ é¿å… \u0026#34;Product-ID\u0026#34; # é¿å…è¿å­—ç¬¦ \u0026#34;ç”¨æˆ·å\u0026#34; # é¿å…éASCII \u0026#34;field name\u0026#34; # é¿å…ç©ºæ ¼ 9.2 å‘é‡ç»´åº¦é€‰æ‹©\råœºæ™¯ æ¨èç»´åº¦ æ¨¡å‹ç¤ºä¾‹ æ–‡æœ¬åµŒå…¥ 384-768 sentence-transformers å›¾åƒåµŒå…¥ 512-2048 ResNet, CLIP å¤šæ¨¡æ€ 512-1024 CLIP, ALIGN 9.3 ç´¢å¼•ç­–ç•¥\r# ä¸ºå‘é‡å­—æ®µåˆ›å»ºç´¢å¼• index_params = MilvusClient.prepare_index_params() # HNSW ç´¢å¼•ï¼ˆæ¨èç”¨äºé«˜ç²¾åº¦æœç´¢ï¼‰ index_params.add_index( field_name=\u0026#34;product_embedding\u0026#34;, index_type=\u0026#34;HNSW\u0026#34;, metric_type=\u0026#34;COSINE\u0026#34;, params={\u0026#34;M\u0026#34;: 16, \u0026#34;efConstruction\u0026#34;: 256} ) # IVF_FLAT ç´¢å¼•ï¼ˆé€‚åˆå¤§è§„æ¨¡æ•°æ®ï¼‰ index_params.add_index( field_name=\u0026#34;image_embedding\u0026#34;, index_type=\u0026#34;IVF_FLAT\u0026#34;, metric_type=\u0026#34;L2\u0026#34;, params={\u0026#34;nlist\u0026#34;: 1024} ) åã€å…³é”®è¦ç‚¹æ€»ç»“\rSchema çµæ´»æ€§ï¼šMilvus æ”¯æŒåŠ¨æ€å­—æ®µï¼Œæ¯”ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“æ›´çµæ´» å‘é‡åŸç”Ÿæ”¯æŒï¼šå‘é‡å­—æ®µæ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œæ— éœ€é¢å¤–è½¬æ¢ ç±»å‹ä¸°å¯Œï¼šæ”¯æŒ JSONã€æ•°ç»„ã€ç»“æ„ä½“ç­‰å¤æ‚ç±»å‹ æ—¶åŒºæ„ŸçŸ¥ï¼šTIMESTAMPTZ æä¾›åŸç”Ÿæ—¶åŒºæ”¯æŒ ç´¢å¼•ä¼˜åŒ–ï¼šJSON åˆ‡ç¢ã€å‘é‡ç´¢å¼•ç­‰ä¼˜åŒ–æ‰‹æ®µ ä¸ NoSQL ç»“åˆï¼šåŠ¨æ€å­—æ®µç±»ä¼¼ MongoDBï¼Œä½†ä¿ç•™äº† Schema çº¦æŸçš„ä¼˜åŠ¿ ","date":"2026-02-26T19:10:45+08:00","permalink":"https://zg-dd.github.io/stu/milvus-stu-schema/","title":"Milvus Schemaæ¨¡å¼è¯¦è§£ - å­—æ®µç±»å‹ä¸æ•°æ®å»ºæ¨¡æŒ‡å—"},{"content":"ä¸€ã€Milvus ä¸å…³ç³»å‹æ•°æ®åº“æ¦‚å¿µå¯¹æ¯”\rMilvus æ¦‚å¿µ å…³ç³»å‹æ•°æ®åº“æ¦‚å¿µ è¯´æ˜ Database Database æ•°æ®åº“ï¼Œæœ€é¡¶å±‚çš„æ•°æ®ç»„ç»‡å•ä½ Collection Table é›†åˆç›¸å½“äºè¡¨ï¼Œå­˜å‚¨å…·æœ‰ç›¸åŒç»“æ„çš„æ•°æ® Field Column å­—æ®µç›¸å½“äºåˆ—ï¼Œå®šä¹‰æ•°æ®çš„å±æ€§ Entity Row å®ä½“ç›¸å½“äºè¡Œï¼Œè¡¨ç¤ºä¸€æ¡å®Œæ•´çš„æ•°æ®è®°å½• Schema Table Schema æ¨¡å¼å®šä¹‰äº†æ•°æ®ç»“æ„å’Œçº¦æŸ Vector Field - å‘é‡å­—æ®µæ˜¯ Milvus ç‰¹æœ‰çš„ï¼Œç”¨äºå­˜å‚¨åµŒå…¥å‘é‡ Primary Key Primary Key ä¸»é”®ï¼Œå”¯ä¸€æ ‡è¯†æ¯æ¡è®°å½• äºŒã€è¿æ¥ Milvus æœåŠ¡å™¨\r2.1 åŸºæœ¬è¿æ¥\rfrom pymilvus import MilvusClient import yaml import os # è¯»å–é…ç½®æ–‡ä»¶ config_path = os.path.join(os.path.dirname(__file__), \u0026#39;config.yaml\u0026#39;) with open(config_path, \u0026#39;r\u0026#39;, encoding=\u0026#39;utf-8\u0026#39;) as f: config = yaml.safe_load(f) # åˆ›å»ºå®¢æˆ·ç«¯è¿æ¥ client = MilvusClient( uri=config[\u0026#39;milvus\u0026#39;][\u0026#39;uri\u0026#39;], # Milvus æœåŠ¡å™¨åœ°å€ token=config[\u0026#39;milvus\u0026#39;][\u0026#39;token\u0026#39;] # è®¤è¯ä»¤ç‰Œ ) 2.2 é…ç½®æ–‡ä»¶ç¤ºä¾‹ (config.yaml)\rmilvus: uri: \u0026#34;http://localhost:19530\u0026#34; # æœ¬åœ°éƒ¨ç½² # uri: \u0026#34;https://your-cluster.zillizcloud.com\u0026#34; # äº‘æœåŠ¡ token: \u0026#34;root:Milvus\u0026#34; # ç”¨æˆ·å:å¯†ç  ä¸‰ã€æ•°æ®åº“åŸºç¡€æ“ä½œ\r3.1 åˆ›å»ºæ•°æ®åº“\r# åˆ›å»ºæ•°æ®åº“ client.create_database(db_name=\u0026#34;my_database_1\u0026#34;) # å¯¹æ¯” MySQL # CREATE DATABASE my_database_1; 3.2 æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨\r# è·å–æ‰€æœ‰æ•°æ®åº“ dblist = client.list_databases() print(f\u0026#34;æ•°æ®åº“åˆ—è¡¨: {dblist}\u0026#34;) # å¯¹æ¯” MySQL # SHOW DATABASES; è¾“å‡ºç¤ºä¾‹ï¼š\næ•°æ®åº“åˆ—è¡¨: [\u0026#39;default\u0026#39;, \u0026#39;my_database_1\u0026#39;] 3.3 æŸ¥çœ‹æ•°æ®åº“è¯¦æƒ…\r# è·å–æ•°æ®åº“è¯¦ç»†ä¿¡æ¯ try: db_info = client.describe_database(\u0026#34;my_database_1\u0026#34;) print(f\u0026#34;æ•°æ®åº“è¯¦æƒ…: {db_info}\u0026#34;) except Exception as e: print(f\u0026#34;è·å–å¤±è´¥: {e}\u0026#34;) # å¯¹æ¯” MySQL # SELECT * FROM information_schema.SCHEMATA WHERE SCHEMA_NAME = \u0026#39;my_database_1\u0026#39;; 3.4 åˆ‡æ¢æ•°æ®åº“\r# åˆ‡æ¢åˆ°æŒ‡å®šæ•°æ®åº“ client.use_database(\u0026#34;my_database_1\u0026#34;) # å¯¹æ¯” MySQL # USE my_database_1; 3.5 åˆ é™¤æ•°æ®åº“\r# åˆ é™¤æ•°æ®åº“ client.drop_database(\u0026#34;my_database_1\u0026#34;) # å¯¹æ¯” MySQL # DROP DATABASE my_database_1; å››ã€æ•°æ®åº“å±æ€§ç®¡ç†\r4.1 å¯ä¿®æ”¹çš„æ•°æ®åº“å±æ€§\rå±æ€§åç§° è¯´æ˜ é»˜è®¤å€¼ å¯¹æ¯”å…³ç³»å‹æ•°æ®åº“ database.replica.number å‰¯æœ¬æ•°é‡ 1 ç±»ä¼¼ MySQL çš„ä¸»ä»å¤åˆ¶é…ç½® timezone é»˜è®¤æ—¶åŒºè®¾ç½® UTC ç±»ä¼¼ MySQL çš„ time_zone å˜é‡ database.diskQuota.mb æœ€å¤§ç£ç›˜ç©ºé—´(MB) æ— é™åˆ¶ ç±»ä¼¼ MySQL çš„è¡¨ç©ºé—´é…é¢ database.max.collections æœ€å¤§é›†åˆæ•°é‡ æ— é™åˆ¶ ç±»ä¼¼ MySQL çš„æœ€å¤§è¡¨æ•°é‡é™åˆ¶ database.force.deny.writing å¼ºåˆ¶æ‹’ç»å†™æ“ä½œ false ç±»ä¼¼ MySQL çš„ read_only æ¨¡å¼ database.force.deny.reading å¼ºåˆ¶æ‹’ç»è¯»æ“ä½œ false MySQL ä¸­è¾ƒå°‘ä½¿ç”¨æ­¤åŠŸèƒ½ 4.2 ä¿®æ”¹æ•°æ®åº“å±æ€§\r# ä¿®æ”¹å¤šä¸ªå±æ€§ client.alter_database_properties( \u0026#34;my_database_1\u0026#34;, { \u0026#34;database.replica.number\u0026#34;: 2, # è®¾ç½®2ä¸ªå‰¯æœ¬ \u0026#34;timezone\u0026#34;: \u0026#34;Asia/Shanghai\u0026#34;, # è®¾ç½®æ—¶åŒºä¸ºä¸Šæµ· \u0026#34;database.diskQuota.mb\u0026#34;: 10240, # é™åˆ¶ç£ç›˜ç©ºé—´ä¸º10GB \u0026#34;database.max.collections\u0026#34;: 100 # æœ€å¤š100ä¸ªé›†åˆ } ) # å¯¹æ¯” MySQL # ALTER DATABASE my_database_1 CHARACTER SET utf8mb4; # SET GLOBAL time_zone = \u0026#39;Asia/Shanghai\u0026#39;; 4.3 åˆ é™¤æ•°æ®åº“å±æ€§\r# åˆ é™¤æŒ‡å®šå±æ€§ï¼ˆæ¢å¤ä¸ºé»˜è®¤å€¼ï¼‰ client.drop_database_properties( \u0026#34;my_database_1\u0026#34;, [\u0026#34;timezone\u0026#34;, \u0026#34;database.diskQuota.mb\u0026#34;] ) # æ³¨æ„ï¼šå…³ç³»å‹æ•°æ®åº“é€šå¸¸ä¸æ”¯æŒ\u0026#34;åˆ é™¤\u0026#34;å±æ€§ï¼Œåªèƒ½é‡ç½®ä¸ºé»˜è®¤å€¼ äº”ã€å®Œæ•´æ“ä½œç¤ºä¾‹\rfrom pymilvus import MilvusClient import yaml import os def database_operations_demo(): \u0026#34;\u0026#34;\u0026#34;æ•°æ®åº“æ“ä½œå®Œæ•´ç¤ºä¾‹\u0026#34;\u0026#34;\u0026#34; # 1. è¿æ¥æœåŠ¡å™¨ print(\u0026#34;=== è¿æ¥ Milvus æœåŠ¡å™¨ ===\u0026#34;) config_path = os.path.join(os.path.dirname(__file__), \u0026#39;config.yaml\u0026#39;) with open(config_path, \u0026#39;r\u0026#39;, encoding=\u0026#39;utf-8\u0026#39;) as f: config = yaml.safe_load(f) client = MilvusClient( uri=config[\u0026#39;milvus\u0026#39;][\u0026#39;uri\u0026#39;], token=config[\u0026#39;milvus\u0026#39;][\u0026#39;token\u0026#39;] ) print(\u0026#34;âœ… è¿æ¥æˆåŠŸ\u0026#34;) # 2. åˆ›å»ºæ•°æ®åº“ print(\u0026#34;\\n=== åˆ›å»ºæ•°æ®åº“ ===\u0026#34;) db_name = \u0026#34;product_database\u0026#34; client.create_database(db_name=db_name) print(f\u0026#34;âœ… æ•°æ®åº“ \u0026#39;{db_name}\u0026#39; åˆ›å»ºæˆåŠŸ\u0026#34;) # 3. æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨ print(\u0026#34;\\n=== æ•°æ®åº“åˆ—è¡¨ ===\u0026#34;) databases = client.list_databases() for db in databases: print(f\u0026#34; - {db}\u0026#34;) # 4. é…ç½®æ•°æ®åº“å±æ€§ print(\u0026#34;\\n=== é…ç½®æ•°æ®åº“å±æ€§ ===\u0026#34;) client.alter_database_properties( db_name, { \u0026#34;database.replica.number\u0026#34;: 2, \u0026#34;timezone\u0026#34;: \u0026#34;Asia/Shanghai\u0026#34;, \u0026#34;database.max.collections\u0026#34;: 50 } ) print(\u0026#34;âœ… å±æ€§é…ç½®å®Œæˆ\u0026#34;) # 5. åˆ‡æ¢æ•°æ®åº“ print(\u0026#34;\\n=== åˆ‡æ¢æ•°æ®åº“ ===\u0026#34;) client.use_database(db_name) print(f\u0026#34;âœ… å·²åˆ‡æ¢åˆ° \u0026#39;{db_name}\u0026#39;\u0026#34;) # 6. æŸ¥çœ‹æ•°æ®åº“è¯¦æƒ… print(\u0026#34;\\n=== æ•°æ®åº“è¯¦æƒ… ===\u0026#34;) try: db_info = client.describe_database(db_name) print(f\u0026#34; {db_info}\u0026#34;) except Exception as e: print(f\u0026#34; è·å–è¯¦æƒ…å¤±è´¥: {e}\u0026#34;) # 7. æ¸…ç†ï¼šåˆ é™¤æ•°æ®åº“ print(\u0026#34;\\n=== æ¸…ç†æµ‹è¯•æ•°æ® ===\u0026#34;) client.drop_database(db_name) print(f\u0026#34;âœ… æ•°æ®åº“ \u0026#39;{db_name}\u0026#39; å·²åˆ é™¤\u0026#34;) if __name__ == \u0026#34;__main__\u0026#34;: database_operations_demo() å…­ã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹\r6.1 æ•°æ®åº“å‘½åè§„èŒƒ\r# âœ… æ¨èçš„å‘½åæ–¹å¼ \u0026#34;user_vectors\u0026#34; \u0026#34;product_embeddings\u0026#34; \u0026#34;image_search_db\u0026#34; # âŒ é¿å…çš„å‘½åæ–¹å¼ \u0026#34;Database-1\u0026#34; # é¿å…ä½¿ç”¨è¿å­—ç¬¦ \u0026#34;æ•°æ®åº“1\u0026#34; # é¿å…ä½¿ç”¨éASCIIå­—ç¬¦ \u0026#34;db with spaces\u0026#34; # é¿å…ä½¿ç”¨ç©ºæ ¼ 6.2 å‰¯æœ¬é…ç½®å»ºè®®\råœºæ™¯ æ¨èå‰¯æœ¬æ•° è¯´æ˜ å¼€å‘æµ‹è¯•ç¯å¢ƒ 1 èŠ‚çœèµ„æº ç”Ÿäº§ç¯å¢ƒï¼ˆä½è´Ÿè½½ï¼‰ 2 åŸºæœ¬é«˜å¯ç”¨ ç”Ÿäº§ç¯å¢ƒï¼ˆé«˜è´Ÿè½½ï¼‰ 3+ é«˜å¯ç”¨ + è´Ÿè½½å‡è¡¡ # ç”Ÿäº§ç¯å¢ƒé…ç½®ç¤ºä¾‹ client.alter_database_properties( \u0026#34;production_db\u0026#34;, { \u0026#34;database.replica.number\u0026#34;: 3, # 3ä¸ªå‰¯æœ¬ \u0026#34;database.diskQuota.mb\u0026#34;: 102400, # 100GBé™åˆ¶ \u0026#34;database.max.collections\u0026#34;: 200, # æœ€å¤š200ä¸ªé›†åˆ \u0026#34;database.force.deny.writing\u0026#34;: False # å…è®¸å†™å…¥ } ) 6.3 æ—¶åŒºå¤„ç†\r# è®¾ç½®æ•°æ®åº“æ—¶åŒº client.alter_database_properties( \u0026#34;my_db\u0026#34;, {\u0026#34;timezone\u0026#34;: \u0026#34;Asia/Shanghai\u0026#34;} ) # å¸¸ç”¨æ—¶åŒº # \u0026#34;UTC\u0026#34; # åè°ƒä¸–ç•Œæ—¶ # \u0026#34;Asia/Shanghai\u0026#34; # ä¸­å›½æ ‡å‡†æ—¶é—´ # \u0026#34;America/New_York\u0026#34; # ç¾å›½ä¸œéƒ¨æ—¶é—´ # \u0026#34;Europe/London\u0026#34; # è‹±å›½æ—¶é—´ 6.4 é”™è¯¯å¤„ç†\rfrom pymilvus import MilvusException try: client.create_database(\u0026#34;test_db\u0026#34;) except MilvusException as e: if \u0026#34;already exists\u0026#34; in str(e): print(\u0026#34;æ•°æ®åº“å·²å­˜åœ¨ï¼Œè·³è¿‡åˆ›å»º\u0026#34;) else: print(f\u0026#34;åˆ›å»ºå¤±è´¥: {e}\u0026#34;) raise ä¸ƒã€ä¸ MySQL æ“ä½œå¯¹æ¯”æ€»ç»“\ræ“ä½œ Milvus MySQL åˆ›å»ºæ•°æ®åº“ client.create_database(\u0026quot;db_name\u0026quot;) CREATE DATABASE db_name; æŸ¥çœ‹æ•°æ®åº“ client.list_databases() SHOW DATABASES; åˆ‡æ¢æ•°æ®åº“ client.use_database(\u0026quot;db_name\u0026quot;) USE db_name; åˆ é™¤æ•°æ®åº“ client.drop_database(\u0026quot;db_name\u0026quot;) DROP DATABASE db_name; ä¿®æ”¹å±æ€§ client.alter_database_properties() ALTER DATABASE ... æŸ¥çœ‹è¯¦æƒ… client.describe_database(\u0026quot;db_name\u0026quot;) SELECT * FROM information_schema.SCHEMATA å…«ã€å…³é”®è¦ç‚¹æ€»ç»“\rè¿æ¥ç®¡ç†ï¼šMilvus ä½¿ç”¨ URI + Token æ–¹å¼è¿æ¥ï¼Œæ¯” MySQL çš„ä¸»æœº+ç«¯å£+ç”¨æˆ·å+å¯†ç æ›´ç®€æ´ æ•°æ®åº“éš”ç¦»ï¼šæ¯ä¸ªæ•°æ®åº“å¯ä»¥ç‹¬ç«‹é…ç½®å‰¯æœ¬æ•°ã€æ—¶åŒºã€é…é¢ç­‰å±æ€§ é»˜è®¤æ•°æ®åº“ï¼šMilvus æœ‰ä¸€ä¸ªåä¸º default çš„é»˜è®¤æ•°æ®åº“ï¼Œç±»ä¼¼ MySQL çš„ mysql ç³»ç»Ÿæ•°æ®åº“ å±æ€§åŠ¨æ€ä¿®æ”¹ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹æ•°æ®åº“å±æ€§ï¼Œæ— éœ€é‡å¯æœåŠ¡ å‰¯æœ¬æœºåˆ¶ï¼šMilvus çš„å‰¯æœ¬æœºåˆ¶æ˜¯å†…ç½®çš„ï¼Œä¸éœ€è¦åƒ MySQL é‚£æ ·æ‰‹åŠ¨é…ç½®ä¸»ä»å¤åˆ¶ æ—¶åŒºæ„ŸçŸ¥ï¼šMilvus å¯¹æ—¶åŒºçš„æ”¯æŒæ›´åŠ åŸç”Ÿï¼Œç‰¹åˆ«æ˜¯ TIMESTAMPTZ å­—æ®µç±»å‹ ","date":"2026-02-26T18:51:45+08:00","permalink":"https://zg-dd.github.io/stu/milvus-stu-db/","title":"Milvusæ•°æ®åº“æ“ä½œ"},{"content":"å¼•è¨€\rMilvus æ˜¯ä¸€ä¸ªå¼€æºå‘é‡æ•°æ®åº“ï¼Œä¸“ä¸ºå¤„ç†å¤§è§„æ¨¡å‘é‡æ•°æ®è€Œè®¾è®¡ï¼Œæ”¯æŒå‘é‡ç›¸ä¼¼æ€§æœç´¢ã€å®æ—¶æŸ¥è¯¢ç­‰åŠŸèƒ½ã€‚Standalone æ¨¡å¼æ˜¯ Milvus çš„å•æœºåµŒå…¥å¼éƒ¨ç½²æ–¹å¼ï¼Œé€‚åˆå­¦ä¹ ã€æµ‹è¯•å’Œå°è§„æ¨¡åº”ç”¨ã€‚å®ƒä½¿ç”¨ Docker å®¹å™¨è¿è¡Œï¼ŒåµŒå…¥ etcd ä½œä¸ºå…ƒæ•°æ®å­˜å‚¨ï¼Œæ— éœ€å¤–éƒ¨ä¾èµ–ã€‚\nåœ¨å®é™…å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæˆ‘é‡åˆ°äº†é•œåƒæ ‡ç­¾ä¸å­˜åœ¨ã€ç½‘ç»œè¿æ¥æ‹’ç»ã€å®¹å™¨æƒé™ä¸è¶³å¯¼è‡´å¯åŠ¨å¤±è´¥ï¼ˆExited 134ï¼‰ã€è„šæœ¬å¡åœ¨ç­‰å¾…çŠ¶æ€ç­‰å¤šä¸ªé—®é¢˜ã€‚æœ¬æ–‡åŸºäº 2026 å¹´ 2 æœˆ 24 æ—¥åœ¨ VMware Ubuntu è™šæ‹Ÿæœºä¸­çš„çœŸå®å®‰è£…ç»éªŒï¼Œæä¾›å®Œæ•´æ­¥éª¤ï¼Œå¹¶ç³»ç»Ÿå½’çº³é—®é¢˜åŠè§£å†³æ–¹æ¡ˆã€‚å®¿ä¸»æœºé…ç½®ä¸º Intel Core i9-12900H + 16 GB RAMã€‚\nç¯å¢ƒå‡†å¤‡\rç³»ç»Ÿè¦æ±‚\rUbuntu 20.04 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆæ¨è 22.04 LTSï¼‰ Docker 20.10 æˆ–æ›´é«˜ç‰ˆæœ¬ è™šæ‹Ÿæœºæœ€ä½é…ç½®å»ºè®®ï¼š8â€“12 GB RAMã€4â€“8 vCPUï¼ˆå»ºè®® 1 å¤„ç†å™¨ Ã— 6â€“8 å†…æ ¸ï¼‰ ç½‘ç»œï¼šå»ºè®®é…ç½®å›½å†…é•œåƒåŠ é€Ÿå™¨ é…ç½® Docker é•œåƒåŠ é€Ÿå™¨\rç¼–è¾‘ /etc/docker/daemon.jsonï¼š\n{ \u0026#34;registry-mirrors\u0026#34;: [ \u0026#34;https://docker.xuanyuan.me\u0026#34;, \u0026#34;https://6ndgp76b.mirror.aliyuncs.com\u0026#34;, \u0026#34;https://mirror.ccs.tencentyun.com\u0026#34;, \u0026#34;https://hub-mirror.c.163.com\u0026#34;, \u0026#34;https://docker.mirrors.ustc.edu.cn\u0026#34; ] } é‡å¯ Dockerï¼š\nsudo systemctl daemon-reload sudo systemctl restart docker éªŒè¯åŠ é€Ÿå™¨é…ç½®ï¼š\nsudo docker info | grep -A 10 \u0026#34;Registry Mirrors\u0026#34; å®‰è£…æ­¥éª¤\r1. ä¸‹è½½å®˜æ–¹ Standalone åµŒå…¥å¼å¯åŠ¨è„šæœ¬\rwget https://raw.githubusercontent.com/milvus-io/milvus/master/scripts/standalone_embed.sh chmod +x standalone_embed.sh 2. ä¿®æ”¹é•œåƒæ ‡ç­¾ï¼ˆv2.6.11 æœªæ¨é€ï¼Œä½¿ç”¨ master åˆ†æ”¯æœ€æ–°å¯ç”¨æ„å»ºï¼‰\rç¼–è¾‘ standalone_embed.shï¼Œæ‰¾åˆ° docker run å‘½ä»¤ä¸­çš„é•œåƒè¡Œï¼Œå°†ï¼š\nmilvusdb/milvus:v2.6.11 \\ æ”¹ä¸ºï¼š\nmilvusdb/milvus:master-20260224-091b147e-amd64 \\ æˆ–æ›´ç¨³å®šçš„å‰ä¸€å¤©ç‰ˆæœ¬ï¼š\nmilvusdb/milvus:master-20260223-49bf0b63-amd64 \\ ä¿å­˜æ–‡ä»¶ã€‚\n3. åˆ›å»ºå¹¶è®¾ç½®æ•°æ®ç›®å½•æƒé™ï¼ˆæœ€å…³é”®æ­¥éª¤ï¼Œé¿å…æƒé™æ‹’ç»ï¼‰\r# åˆ é™¤æ—§ç›®å½•ï¼ˆé˜²æ­¢æ®‹ç•™é”™è¯¯æƒé™ï¼‰ rm -rf ./volumes/milvus # åˆ›å»ºæ–°ç›®å½• mkdir -p ./volumes/milvus # è®¾ç½®æ‰€æœ‰è€…å’Œæƒé™ï¼ˆç¡®ä¿å®¹å™¨å†…é root ç”¨æˆ·å¯å†™ï¼‰ sudo chown -R $USER:$USER ./volumes/milvus chmod -R 775 ./volumes/milvus # éªŒè¯æƒé™ï¼ˆåº”æ˜¾ç¤º drwxrwxr-x ai-stu ai-stuï¼‰ ls -ld ./volumes/milvus 4. å¯åŠ¨ Milvus\rbash standalone_embed.sh start 5. éªŒè¯æ˜¯å¦æˆåŠŸ\rç­‰å¾…è„šæœ¬è¾“å‡º \u0026ldquo;Start successfully.\u0026rdquo;\næ£€æŸ¥å®¹å™¨çŠ¶æ€ï¼š\nsudo docker ps åº”æ˜¾ç¤º Up ... (healthy)\næµ‹è¯•å¥åº·æ¥å£ï¼š\ncurl http://localhost:19530/healthz åº”è¿”å› \u0026quot;ok\u0026quot;\nå¸¸è§é—®é¢˜å½’çº³ä¸è§£å†³æ–¹æ¡ˆ\ré—®é¢˜ 1ï¼šé•œåƒæ‹‰å–å¤±è´¥ï¼ˆnot found / connection refusedï¼‰\rç°è±¡ï¼š\nUnable to find image ... not found æˆ– dial tcp ... connection refused åŸå› ï¼š\nv2.6.11 æ ‡ç­¾å°šæœªæ¨é€è‡³ Docker Hub å›½å†…ç½‘ç»œå¯¹ registry-1.docker.io è®¿é—®å—é™ è§£å†³æ–¹æ¡ˆï¼š\nä½¿ç”¨ç¨³å®šç‰ˆæœ¬æ ‡ç­¾ï¼šæ”¹ç”¨ v2.6.10 ç­‰å·²å‘å¸ƒçš„ç¨³å®šç‰ˆæœ¬ sudo docker run -d \\ --name milvus-standalone \\ --gpus all \\ -e ETCD_USE_EMBED=true \\ -e COMMON_STORAGETYPE=local \\ -p 19530:19530 \\ -v ${DOCKER_VOLUME_DIRECTORY:-.}/volumes/milvus:/var/lib/milvus \\ milvusdb/milvus:v2.6.10 é…ç½®å›½å†…åŠ é€Ÿå™¨ï¼ˆè½©è¾•ã€é˜¿é‡Œäº‘ã€ç½‘æ˜“ç­‰ï¼‰ ç¦»çº¿ä¼ è¾“æ–¹å¼ï¼šåœ¨å¯è®¿é—®ç½‘ç»œçš„æœºå™¨ä¸Š pull + saveï¼š docker pull milvusdb/milvus:master-20260224-091b147e-amd64 docker save -o milvus.tar milvusdb/milvus:master-20260224-091b147e-amd64 gzip milvus.tar ä¼ è¾“åˆ°æœåŠ¡å™¨ååŠ è½½ï¼š\ngunzip milvus.tar.gz sudo docker load -i milvus.tar é—®é¢˜ 2ï¼šå®¹å™¨å¯åŠ¨åç«‹å³é€€å‡ºï¼ˆExited 134ï¼‰\rç°è±¡ï¼š\nsudo docker ps -a æ˜¾ç¤º Exited (134) åŸå› ï¼š\nSIGABRT ä¿¡å·ï¼Œè¿›ç¨‹å†…éƒ¨ abort é€šå¸¸ç”±æƒé™æ‹’ç»ã€åˆå§‹åŒ–å¤±è´¥æˆ–å†…å­˜ä¸è¶³å¼•èµ· è§£å†³æ–¹æ¡ˆï¼š\næŸ¥çœ‹æ—¥å¿—ï¼š sudo docker logs milvus-standalone --tail 100 å¢åŠ è™šæ‹Ÿæœºå†…å­˜åˆ° 8â€“12 GB æ¸…ç†å¹¶é‡æ–°è®¾ç½®æƒé™ï¼ˆè§æ­¥éª¤ 3ï¼‰ å°è¯•æ›´ç¨³å®šæ ‡ç­¾ï¼ˆå¦‚ master-20260223-49bf0b63-amd64ï¼‰ é—®é¢˜ 3ï¼šæƒé™æ‹’ç»ï¼ˆmkdir /var/lib/milvus/data/: permission deniedï¼‰\rç°è±¡ï¼š\næ—¥å¿—æ˜¾ç¤º [FATAL] ... permission denied å¹¶ panic åŸå› ï¼š\nå®¿ä¸»æœº ./volumes/milvus ç›®å½•æƒé™ä¸è¶³ å®¹å™¨å†…é root ç”¨æˆ·æ— æ³•åˆ›å»ºå­ç›®å½• è§£å†³æ–¹æ¡ˆï¼š\nå¿…é¡»å…ˆåˆ é™¤æ—§ç›®å½•ï¼š rm -rf ./volumes/milvus é‡æ–°åˆ›å»ºå¹¶è®¾ç½®æƒé™ï¼ˆæ­¥éª¤ 3ï¼‰ æ¨èä½¿ç”¨ 775 æƒé™ï¼Œç¡®ä¿ç»„å¯å†™ é—®é¢˜ 4ï¼šè„šæœ¬å¡åœ¨ \u0026ldquo;Wait for Milvus Starting\u0026hellip;\u0026rdquo;\rç°è±¡ï¼š\nè„šæœ¬é•¿æ—¶é—´æ— è¾“å‡º åŸå› ï¼š\nå®¹å™¨æœªè¾¾åˆ° healthy çŠ¶æ€ï¼ˆå´©æºƒæˆ–å¥åº·æ£€æŸ¥å¤±è´¥ï¼‰ è§£å†³æ–¹æ¡ˆï¼š\næ–°ç»ˆç«¯æ£€æŸ¥çŠ¶æ€ï¼š sudo docker ps -a æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼š sudo docker logs -f milvus-standalone æ‰‹åŠ¨æµ‹è¯•å¥åº·æ¥å£ï¼š curl http://localhost:19530/healthz æ¸…ç†æ•°æ®å·åé‡è¯• ","date":"2026-02-24T19:07:58+08:00","permalink":"https://zg-dd.github.io/stu/milvus-install-guide/","title":"Milvus Standalone æ¨¡å¼å®‰è£…å®Œæ•´æŒ‡å—åŠå¸¸è§é—®é¢˜è§£å†³"},{"content":"ç¬¬ä¸€ç« ï¼šä»€ä¹ˆæ˜¯ Skills\r1.1 Skills ç®€ä»‹\rSkills æ˜¯ Claude Code çš„æ‰©å±•åŠŸèƒ½ç³»ç»Ÿï¼Œå°±åƒç»™ Claude å®‰è£…\u0026quot;æŠ€èƒ½åŒ…\u0026quot;ä¸€æ ·ã€‚\né€šä¿—ç†è§£ï¼š\nå°±åƒæ‰‹æœº APPï¼šä½ å¯ä»¥ç»™æ‰‹æœºå®‰è£…ä¸åŒçš„ APP æ¥å®ç°ä¸åŒåŠŸèƒ½ Skills å°±æ˜¯ç»™ Claude å®‰è£…çš„\u0026quot;åŠŸèƒ½æ’ä»¶\u0026quot; æ¯ä¸ª Skill è®© Claude å­¦ä¼šä¸€é¡¹æ–°æŠ€èƒ½ ä¸¾ä¾‹è¯´æ˜ï¼š\nå®‰è£… docx skill â†’ Claude å°±ä¼šåˆ›å»ºå’Œç¼–è¾‘ Word æ–‡æ¡£ å®‰è£… pdf skill â†’ Claude å°±ä¼šå¤„ç† PDF æ–‡ä»¶ å®‰è£… mysql-manager skill â†’ Claude å°±ä¼šæ“ä½œæ•°æ®åº“ 1.2 Skills çš„ç±»å‹\rå®˜æ–¹ Skillsï¼ˆAnthropic æä¾›ï¼‰\rç”± Claude å®˜æ–¹å›¢é˜Ÿå¼€å‘å’Œç»´æŠ¤ è´¨é‡æœ‰ä¿è¯ï¼ŒåŠŸèƒ½ç¨³å®š å…è´¹ä½¿ç”¨ ä¾‹å¦‚ï¼šdocxã€pdfã€pptxã€xlsx ç­‰ ç¤¾åŒº Skillsï¼ˆç¬¬ä¸‰æ–¹å¼€å‘ï¼‰\rç”±ç¤¾åŒºå¼€å‘è€…è´¡çŒ® åŠŸèƒ½å¤šæ ·åŒ– éœ€è¦è‡ªè¡Œè¯„ä¼°è´¨é‡ è‡ªå®šä¹‰ Skillsï¼ˆä½ è‡ªå·±åˆ›å»ºï¼‰\ræ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šåˆ¶ å®Œå…¨å¯æ§ æœ¬æ•™ç¨‹ä¼šæ•™ä½ å¦‚ä½•åˆ›å»º 1.3 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Skills\ræ²¡æœ‰ Skills çš„æƒ…å†µï¼š\nä½ ï¼šå¸®æˆ‘åˆ›å»ºä¸€ä¸ª Word æ–‡æ¡£\rClaudeï¼šæŠ±æ­‰ï¼Œæˆ‘ä¸èƒ½ç›´æ¥åˆ›å»º Word æ–‡æ¡£ æœ‰ Skills çš„æƒ…å†µï¼š\nä½ ï¼šå¸®æˆ‘åˆ›å»ºä¸€ä¸ª Word æ–‡æ¡£\rClaudeï¼šå¥½çš„ï¼ï¼ˆè‡ªåŠ¨ä½¿ç”¨ docx skill åˆ›å»ºæ–‡æ¡£ï¼‰ Skills çš„ä¼˜åŠ¿ï¼š\nâœ… æ‰©å±• Claude çš„èƒ½åŠ› âœ… è‡ªåŠ¨åŒ–é‡å¤ä»»åŠ¡ âœ… æé«˜å·¥ä½œæ•ˆç‡ âœ… å¯ä»¥å®šåˆ¶ä¸“å±åŠŸèƒ½ 1.4 Skills çš„å·¥ä½œåŸç†\rä½ çš„è¯·æ±‚ â†’ Claude åˆ†æ â†’ é€‰æ‹©åˆé€‚çš„ Skill â†’ æ‰§è¡Œæ“ä½œ â†’ è¿”å›ç»“æœ ç¤ºä¾‹æµç¨‹ï¼š\nä½ è¯´ï¼š\u0026ldquo;åˆ›å»ºä¸€ä¸ª Word æ–‡æ¡£\u0026rdquo; Claude è¯†åˆ«åˆ°éœ€è¦æ–‡æ¡£å¤„ç† Claude è°ƒç”¨ docx skill docx skill æ‰§è¡Œåˆ›å»ºæ–‡æ¡£çš„ä»£ç  è¿”å›åˆ›å»ºå¥½çš„æ–‡æ¡£ ç¬¬äºŒç« ï¼šç¯å¢ƒå‡†å¤‡\r2.1 å‰ç½®è¦æ±‚\råœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº†ï¼š\nå¿…éœ€è½¯ä»¶\r1. Claude Code CLI\nè¿™æ˜¯ Claude çš„å‘½ä»¤è¡Œå·¥å…· å¦‚æœä½ èƒ½è¿è¡Œ Claude Codeï¼Œè¯´æ˜å·²ç»å®‰è£…äº† æ£€æŸ¥æ–¹æ³•ï¼š claude --version 2. Node.jsï¼ˆæŸäº› skills éœ€è¦ï¼‰\nç‰ˆæœ¬è¦æ±‚ï¼š14.0 æˆ–æ›´é«˜ æ£€æŸ¥æ˜¯å¦å®‰è£…ï¼š node --version npm --version å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œè®¿é—®ï¼šhttps://nodejs.org/ ä¸‹è½½ LTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬ 3. Gitï¼ˆå¯é€‰ï¼Œç”¨äºå…‹éš†å®˜æ–¹ä»“åº“ï¼‰\næ£€æŸ¥æ˜¯å¦å®‰è£…ï¼š git --version å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œè®¿é—®ï¼šhttps://git-scm.com/ 2.2 äº†è§£æ–‡ä»¶ä½ç½®\ré‡è¦ç›®å½•ç»“æ„ï¼š\nä½ çš„ç”¨æˆ·ç›®å½•/\râ”œâ”€â”€ .claude/ # Claude é…ç½®ç›®å½•\râ”‚ â”œâ”€â”€ skills/ # è‡ªå®šä¹‰ skills å­˜æ”¾ä½ç½®\râ”‚ â”‚ â””â”€â”€ mysql-manager/ # ç¤ºä¾‹ï¼šè‡ªå®šä¹‰ skill\râ”‚ â”‚ â”œâ”€â”€ SKILL.md # Skill å®šä¹‰æ–‡ä»¶\râ”‚ â”‚ â”œâ”€â”€ config.json # é…ç½®æ–‡ä»¶\râ”‚ â”‚ â”œâ”€â”€ mysql-tool.js # å·¥å…·è„šæœ¬\râ”‚ â”‚ â””â”€â”€ README.md # è¯´æ˜æ–‡æ¡£\râ”‚ â”œâ”€â”€ plugins/ # æ’ä»¶ç›®å½•\râ”‚ â”‚ â””â”€â”€ marketplaces/ # Skills å¸‚åœº\râ”‚ â”‚ â””â”€â”€ anthropic-agent-skills/\râ”‚ â”‚ â””â”€â”€ skills/ # å®˜æ–¹ skills\râ”‚ â”‚ â”œâ”€â”€ docx/\râ”‚ â”‚ â”œâ”€â”€ pdf/\râ”‚ â”‚ â””â”€â”€ ...\râ”‚ â””â”€â”€ config.json # å…¨å±€é…ç½®æ–‡ä»¶ ä¸åŒæ“ä½œç³»ç»Ÿçš„è·¯å¾„ï¼š\nWindowsï¼š\nç”¨æˆ·ç›®å½•ï¼šC:\\Users\\ä½ çš„ç”¨æˆ·å\\ Claude ç›®å½•ï¼šC:\\Users\\ä½ çš„ç”¨æˆ·å\\.claude\\ æŸ¥çœ‹æ–¹æ³•ï¼š echo %USERPROFILE%\\.claude Macï¼š\nç”¨æˆ·ç›®å½•ï¼š/Users/ä½ çš„ç”¨æˆ·å/ Claude ç›®å½•ï¼š/Users/ä½ çš„ç”¨æˆ·å/.claude/ æŸ¥çœ‹æ–¹æ³•ï¼š echo ~/.claude Linuxï¼š\nç”¨æˆ·ç›®å½•ï¼š/home/ä½ çš„ç”¨æˆ·å/ Claude ç›®å½•ï¼š/home/ä½ çš„ç”¨æˆ·å/.claude/ æŸ¥çœ‹æ–¹æ³•ï¼š echo ~/.claude 2.3 æ£€æŸ¥ç¯å¢ƒ\ræ­¥éª¤ 1ï¼šæ£€æŸ¥ Claude Code\nclaude --version é¢„æœŸè¾“å‡ºï¼šæ˜¾ç¤ºç‰ˆæœ¬å·\næ­¥éª¤ 2ï¼šæ£€æŸ¥ Node.js\nnode --version npm --version é¢„æœŸè¾“å‡ºï¼šæ˜¾ç¤ºç‰ˆæœ¬å·ï¼ˆå¦‚ v20.9.0ï¼‰\næ­¥éª¤ 3ï¼šæ£€æŸ¥é…ç½®ç›®å½•\n# Windows dir %USERPROFILE%\\.claude # Mac/Linux ls -la ~/.claude é¢„æœŸè¾“å‡ºï¼šæ˜¾ç¤º .claude ç›®å½•å†…å®¹\nç¬¬ä¸‰ç« ï¼šå®‰è£…å®˜æ–¹ Skills\r3.1 æ·»åŠ å®˜æ–¹ Skills å¸‚åœº\ræ­¥éª¤ 1ï¼šå¯åŠ¨ Claude Code\nåœ¨ç»ˆç«¯æˆ–å‘½ä»¤è¡Œä¸­ï¼š\nclaude-code æ­¥éª¤ 2ï¼šæ·»åŠ å®˜æ–¹å¸‚åœº\nåœ¨ Claude Code ä¸­è¾“å…¥ï¼š\n/plugin marketplace add anthropics/skills é¢„æœŸç»“æœï¼š\nSuccessfully added marketplace: anthropic-agent-skills è¿™ä¸€æ­¥åšäº†ä»€ä¹ˆï¼Ÿ\nè¿æ¥åˆ° Anthropic å®˜æ–¹çš„ skills ä»“åº“ï¼ˆGitHubï¼‰ ä¸‹è½½ skills åˆ—è¡¨åˆ°ä½ çš„ç”µè„‘ å­˜å‚¨ä½ç½®ï¼š~/.claude/plugins/marketplaces/anthropic-agent-skills/ ä½†è¿˜æ²¡æœ‰å®‰è£…å…·ä½“çš„ skills å¦‚æœå¤±è´¥æ€ä¹ˆåŠï¼Ÿ\næ£€æŸ¥ç½‘ç»œè¿æ¥ ç¡®ä¿å¯ä»¥è®¿é—® GitHub å°è¯•ä½¿ç”¨ä»£ç†ï¼ˆå¦‚æœåœ¨å›½å†…ï¼‰ 3.2 æµè§ˆå¯ç”¨çš„ Skills\ræ–¹æ³• 1ï¼šé€šè¿‡å‘½ä»¤æµè§ˆ\n/plugin browse æ–¹æ³• 2ï¼šæŸ¥çœ‹å·²ä¸‹è½½çš„ skills\n# Windows dir %USERPROFILE%\\.claude\\plugins\\marketplaces\\anthropic-agent-skills\\skills # Mac/Linux ls ~/.claude/plugins/marketplaces/anthropic-agent-skills/skills/ ä½ ä¼šçœ‹åˆ°è¿™äº› skillsï¼š\nSkill åç§° åŠŸèƒ½è¯´æ˜ é€‚ç”¨åœºæ™¯ docx Word æ–‡æ¡£å¤„ç† åˆ›å»ºæŠ¥å‘Šã€ç¼–è¾‘æ–‡æ¡£ pdf PDF æ–‡ä»¶å¤„ç† æå–æ–‡æœ¬ã€åˆå¹¶PDF pptx PowerPoint æ¼”ç¤º åˆ›å»ºå¹»ç¯ç‰‡ xlsx Excel è¡¨æ ¼ æ•°æ®å¤„ç†ã€è¡¨æ ¼åˆ›å»º frontend-design å‰ç«¯è®¾è®¡ ç½‘é¡µè®¾è®¡ã€UIç»„ä»¶ algorithmic-art ç®—æ³•è‰ºæœ¯ ç”Ÿæˆè‰ºæœ¯ã€åŠ¨ç”» canvas-design ç”»å¸ƒè®¾è®¡ æµ·æŠ¥ã€å›¾å½¢è®¾è®¡ mcp-builder MCP æœåŠ¡å™¨ API é›†æˆ webapp-testing Web æµ‹è¯• è‡ªåŠ¨åŒ–æµ‹è¯• skill-creator Skill åˆ›å»º åˆ›å»ºè‡ªå®šä¹‰ skill æ›´å¤š\u0026hellip; \u0026hellip; \u0026hellip; 3.3 å®‰è£… Skills\ræ–¹å¼ 1ï¼šå®‰è£…ç¤ºä¾‹ skills åŒ…ï¼ˆæ¨èæ–°æ‰‹ï¼‰\r/plugin install example-skills@anthropic-agent-skills è¿™ä¸ªå‘½ä»¤ä¼šå®‰è£…ï¼š\næ‰€æœ‰ç¤ºä¾‹ skillsï¼ˆ16ä¸ªï¼‰ åŒ…æ‹¬æ–‡æ¡£å¤„ç†ã€è®¾è®¡ã€å¼€å‘ç­‰ é€‚åˆå­¦ä¹ å’Œæ—¥å¸¸ä½¿ç”¨ é¢„æœŸç»“æœï¼š\nâœ“ Installed example-skills. Restart Claude Code to load new plugins. æ–¹å¼ 2ï¼šå®‰è£…æ–‡æ¡£ skills åŒ…\rå¦‚æœåªéœ€è¦æ–‡æ¡£å¤„ç†åŠŸèƒ½ï¼š\n/plugin install document-skills@anthropic-agent-skills è¿™ä¸ªå‘½ä»¤ä¼šå®‰è£…ï¼š\ndocxï¼ˆWordï¼‰ pdfï¼ˆPDFï¼‰ pptxï¼ˆPowerPointï¼‰ xlsxï¼ˆExcelï¼‰ æ–¹å¼ 3ï¼šå®‰è£…å•ä¸ª skillï¼ˆé«˜çº§ï¼‰\r/plugin install docx@anthropic-agent-skills 3.4 é‡å¯ Claude Code\ré‡è¦ï¼šå®‰è£…åå¿…é¡»é‡å¯ Claude Code æ‰èƒ½ç”Ÿæ•ˆï¼\næ­¥éª¤ï¼š\né€€å‡ºå½“å‰ Claude Code ä¼šè¯\nè¾“å…¥ exit æˆ– æŒ‰ Ctrl+Cï¼ˆWindows/Linuxï¼‰æˆ– Cmd+Cï¼ˆMacï¼‰ é‡æ–°å¯åŠ¨ï¼š\nclaude-code 3.5 éªŒè¯å®‰è£…\ræ–¹æ³• 1ï¼šè¯¢é—® Claude\råœ¨ Claude Code ä¸­è¾“å…¥ï¼š\nä½ æœ‰å“ªäº› skillsï¼Ÿ\råˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ skills Claude ä¼šåˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„ skillsã€‚\næ–¹æ³• 2ï¼šæµ‹è¯•ä¸€ä¸ª skill\rå¸®æˆ‘åˆ›å»ºä¸€ä¸ªæµ‹è¯• Word æ–‡æ¡£ å¦‚æœ Claude æˆåŠŸåˆ›å»ºäº†æ–‡æ¡£ï¼Œè¯´æ˜ skills å®‰è£…æˆåŠŸï¼\næ–¹æ³• 3ï¼šæŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯\r# æŸ¥çœ‹å·²å®‰è£…çš„ skills ls ~/.claude/plugins/cache/ ç¬¬å››ç« ï¼šä½¿ç”¨ Skills\r4.1 Skills çš„ä¸‰ç§ä½¿ç”¨æ–¹å¼\ræ–¹å¼ 1ï¼šè‡ªç„¶è¯­è¨€ï¼ˆæ¨èæ–°æ‰‹ï¼‰\rç›´æ¥ç”¨æ—¥å¸¸è¯­è¨€æè¿°ä½ çš„éœ€æ±‚ï¼ŒClaude ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ skillã€‚\nç¤ºä¾‹ï¼š\nåˆ›å»ºä¸€ä¸ª Word æ–‡æ¡£\rå¤„ç†è¿™ä¸ª PDF æ–‡ä»¶\rè®¾è®¡ä¸€ä¸ªç™»å½•é¡µé¢\ræŸ¥è¯¢æ•°æ®åº“ ä¼˜ç‚¹ï¼š\næœ€ç®€å•ï¼Œä¸éœ€è¦è®°ä½ skill åç§° Claude ä¼šè‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨å“ªä¸ª skill é€‚åˆæ—¥å¸¸ä½¿ç”¨ ç¼ºç‚¹ï¼š\næœ‰æ—¶ Claude å¯èƒ½é€‰é”™ skill ä¸å¤Ÿç²¾ç¡® æ–¹å¼ 2ï¼šæ˜ç¡®æŒ‡å®š skill\rå¦‚æœä½ çŸ¥é“è¦ç”¨å“ªä¸ª skillï¼Œå¯ä»¥æ˜ç¡®æŒ‡å®šã€‚\nç¤ºä¾‹ï¼š\nä½¿ç”¨ docx skill åˆ›å»ºæŠ¥å‘Š\rä½¿ç”¨ pdf skill æå–æ–‡æœ¬\rä½¿ç”¨ mysql-manager æŸ¥è¯¢æ•°æ® ä¼˜ç‚¹ï¼š\næ›´ç²¾ç¡® é¿å… Claude é€‰é”™ skill é€‚åˆé‡å¤æ€§ä»»åŠ¡ ç¼ºç‚¹ï¼š\néœ€è¦è®°ä½ skill åç§° æ–¹å¼ 3ï¼šç›´æ¥è°ƒç”¨å‘½ä»¤ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰\rå¯¹äºè‡ªå®šä¹‰ skillsï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨å‘½ä»¤ã€‚\nç¤ºä¾‹ï¼š\ncd ~/.claude/skills/mysql-manager node mysql-tool.js list-databases ä¼˜ç‚¹ï¼š\næœ€å¿«é€Ÿ å®Œå…¨æ§åˆ¶ é€‚åˆè„šæœ¬åŒ– ç¼ºç‚¹ï¼š\néœ€è¦äº†è§£å‘½ä»¤è¡Œ éœ€è¦çŸ¥é“å…·ä½“å‘½ä»¤ 4.2 å¸¸ç”¨ Skills ä½¿ç”¨ç¤ºä¾‹\rğŸ“„ æ–‡æ¡£å¤„ç† Skills\råˆ›å»º Word æ–‡æ¡£ï¼ˆdocxï¼‰ï¼š\nåŸºç¡€ç”¨æ³•ï¼š\nåˆ›å»ºä¸€ä¸ª Word æ–‡æ¡£ è¯¦ç»†ç”¨æ³•ï¼š\nåˆ›å»ºä¸€ä¸ªé¡¹ç›®æŠ¥å‘Šæ–‡æ¡£ï¼ŒåŒ…å«ï¼š\r- æ ‡é¢˜ï¼š2024å¹´åº¦æ€»ç»“\r- å‰¯æ ‡é¢˜ï¼šæŠ€æœ¯éƒ¨é—¨\r- ä¸‰ä¸ªç« èŠ‚ï¼šèƒŒæ™¯ã€å®æ–½ã€æˆæœ\r- ä¸€ä¸ªæ•°æ®è¡¨æ ¼\r- é¡µè„šåŒ…å«æ—¥æœŸ\rä¿å­˜ä¸º report.docx å¤„ç† PDFï¼ˆpdfï¼‰ï¼š\næå–æ–‡æœ¬ï¼š\nä» report.pdf ä¸­æå–æ‰€æœ‰æ–‡æœ¬ åˆå¹¶ PDFï¼š\nåˆå¹¶ file1.pdf å’Œ file2.pdf ä¸º merged.pdf åˆ†å‰² PDFï¼š\nå°† document.pdf çš„ç¬¬ 1-5 é¡µæå–ä¸ºæ–°æ–‡ä»¶ åˆ›å»º PowerPointï¼ˆpptxï¼‰ï¼š\nåˆ›å»ºä¸€ä¸ªäº§å“ä»‹ç»æ¼”ç¤ºæ–‡ç¨¿ï¼ŒåŒ…å«ï¼š\r- å°é¢é¡µ\r- äº§å“ç‰¹ç‚¹ï¼ˆ3é¡µï¼‰\r- ä»·æ ¼æ–¹æ¡ˆï¼ˆ1é¡µï¼‰\r- è”ç³»æ–¹å¼ï¼ˆ1é¡µï¼‰ å¤„ç† Excelï¼ˆxlsxï¼‰ï¼š\nåˆ›å»ºä¸€ä¸ªé”€å”®æ•°æ®è¡¨æ ¼ï¼ŒåŒ…å«ï¼š\r- åˆ—ï¼šæ—¥æœŸã€äº§å“ã€æ•°é‡ã€é‡‘é¢\r- 10è¡Œæµ‹è¯•æ•°æ®\r- æ·»åŠ æ±‚å’Œå…¬å¼ ğŸ¨ è®¾è®¡ç±» Skills\rå‰ç«¯è®¾è®¡ï¼ˆfrontend-designï¼‰ï¼š\nç™»å½•é¡µé¢ï¼š\nè®¾è®¡ä¸€ä¸ªç°ä»£é£æ ¼çš„ç™»å½•é¡µé¢ï¼ŒåŒ…å«ï¼š\r- ç”¨æˆ·åå’Œå¯†ç è¾“å…¥æ¡†\r- è®°ä½æˆ‘é€‰é¡¹\r- ç™»å½•æŒ‰é’®\r- ä½¿ç”¨è“è‰²ä¸»é¢˜ å¯¼èˆªæ ï¼š\nåˆ›å»ºä¸€ä¸ªå“åº”å¼å¯¼èˆªæ ï¼ŒåŒ…å«ï¼š\r- Logo\r- é¦–é¡µã€äº§å“ã€å…³äºæˆ‘ä»¬ã€è”ç³»\r- ç§»åŠ¨ç«¯æ±‰å ¡èœå• ç®—æ³•è‰ºæœ¯ï¼ˆalgorithmic-artï¼‰ï¼š\nç”¨ç²’å­ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªåŠ¨ç”»ï¼ŒåŒ…å«ï¼š\r- 1000ä¸ªç²’å­\r- éšæœºé¢œè‰²\r- é¼ æ ‡äº¤äº’ Canvas è®¾è®¡ï¼ˆcanvas-designï¼‰ï¼š\nè®¾è®¡ä¸€å¼ æ´»åŠ¨æµ·æŠ¥ï¼š\r- ä¸»é¢˜ï¼šæ˜¥å­£ä¿ƒé”€\r- å°ºå¯¸ï¼šA4\r- åŒ…å«æ ‡é¢˜ã€æ—¥æœŸã€äºŒç»´ç  ğŸ› ï¸ å¼€å‘ç±» Skills\rWeb æµ‹è¯•ï¼ˆwebapp-testingï¼‰ï¼š\næµ‹è¯• localhost:3000 çš„ç™»å½•åŠŸèƒ½ï¼š\r1. æ‰“å¼€é¡µé¢\r2. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç \r3. ç‚¹å‡»ç™»å½•æŒ‰é’®\r4. æˆªå›¾ä¿å­˜ MCP æ„å»ºï¼ˆmcp-builderï¼‰ï¼š\nåˆ›å»ºä¸€ä¸ªè¿æ¥ GitHub API çš„ MCP æœåŠ¡å™¨ï¼ŒåŠŸèƒ½ï¼š\r- è·å–ä»“åº“åˆ—è¡¨\r- åˆ›å»º Issue\r- æŸ¥çœ‹ Pull Request 4.3 Skills ä½¿ç”¨æŠ€å·§\ræŠ€å·§ 1ï¼šæä¾›è¯¦ç»†ä¿¡æ¯\rä¸å¥½çš„ç¤ºä¾‹ï¼š\nåˆ›å»ºä¸€ä¸ªæ–‡æ¡£ å¤ªæ¨¡ç³Š Claude ä¸çŸ¥é“è¦åˆ›å»ºä»€ä¹ˆå†…å®¹ å¥½çš„ç¤ºä¾‹ï¼š\nåˆ›å»ºä¸€ä¸ª Word æ–‡æ¡£ï¼Œæ–‡ä»¶åä¸º report.docxï¼ŒåŒ…å«ï¼š\r- æ ‡é¢˜ï¼šé¡¹ç›®æŠ¥å‘Š\r- ä¸‰ä¸ªç« èŠ‚ï¼šèƒŒæ™¯ã€æ–¹æ¡ˆã€ç»“è®º\r- æ¯ä¸ªç« èŠ‚åŒ…å« 2-3 æ®µæ–‡å­—\r- ä¿å­˜åˆ°å½“å‰ç›®å½• æ¸…æ™°æ˜ç¡® Claude çŸ¥é“å…·ä½“è¦åšä»€ä¹ˆ æŠ€å·§ 2ï¼šåˆ†æ­¥éª¤æ“ä½œ\rå¯¹äºå¤æ‚ä»»åŠ¡ï¼Œåˆ†æ­¥éª¤è¿›è¡Œï¼š\nç¬¬ä¸€æ­¥ï¼šå…ˆå¸®æˆ‘æŸ¥çœ‹æ•°æ®åº“æœ‰å“ªäº›è¡¨\rï¼ˆç­‰å¾…ç»“æœï¼‰\rç¬¬äºŒæ­¥ï¼šæŸ¥è¯¢ users è¡¨çš„ç»“æ„\rï¼ˆç­‰å¾…ç»“æœï¼‰\rç¬¬ä¸‰æ­¥ï¼šå¯¼å‡º users è¡¨ä¸º CSV ä¸ºä»€ä¹ˆè¦åˆ†æ­¥éª¤ï¼Ÿ\næ¯ä¸€æ­¥éƒ½èƒ½ç¡®è®¤ç»“æœ å‡ºé”™æ—¶å®¹æ˜“å®šä½é—®é¢˜ å¯ä»¥æ ¹æ®ç»“æœè°ƒæ•´ä¸‹ä¸€æ­¥ æŠ€å·§ 3ï¼šæŸ¥çœ‹ Skill èƒ½åšä»€ä¹ˆ\rdocx skill æœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ\rpdf skill å¯ä»¥åšä»€ä¹ˆï¼Ÿ\rmysql-manager æ”¯æŒå“ªäº›æ“ä½œï¼Ÿ Claude ä¼šåˆ—å‡ºè¯¥ skill çš„æ‰€æœ‰åŠŸèƒ½ã€‚\næŠ€å·§ 4ï¼šæä¾›ç¤ºä¾‹\rå¦‚æœæœ‰å‚è€ƒæ ·å¼ï¼š\nåˆ›å»ºä¸€ä¸ªç±»ä¼¼ example.docx çš„æ–‡æ¡£ï¼Œä½†å†…å®¹æ”¹ä¸º... æŠ€å·§ 5ï¼šæŒ‡å®šè¾“å‡ºä½ç½®\råˆ›å»ºæ–‡æ¡£å¹¶ä¿å­˜åˆ°æ¡Œé¢\rå¯¼å‡ºæ•°æ®åˆ° D:/exports/ ç›®å½• 4.4 å¸¸è§ä½¿ç”¨åœºæ™¯\råœºæ™¯ 1ï¼šæ—¥å¸¸åŠå…¬\réœ€æ±‚ï¼šæ¯å‘¨å†™å·¥ä½œå‘¨æŠ¥\nä½¿ç”¨ Skillsï¼š\nä½¿ç”¨ docx skill åˆ›å»ºæœ¬å‘¨å·¥ä½œå‘¨æŠ¥ï¼š\r- æ ‡é¢˜ï¼šç¬¬Xå‘¨å·¥ä½œå‘¨æŠ¥\r- æœ¬å‘¨å®Œæˆçš„å·¥ä½œï¼ˆåˆ—è¡¨ï¼‰\r- ä¸‹å‘¨è®¡åˆ’ï¼ˆåˆ—è¡¨ï¼‰\r- é‡åˆ°çš„é—®é¢˜ åœºæ™¯ 2ï¼šæ•°æ®å¤„ç†\réœ€æ±‚ï¼šå¤„ç† Excel æ•°æ®\nä½¿ç”¨ Skillsï¼š\nä½¿ç”¨ xlsx skillï¼š\r1. è¯»å– sales.xlsx\r2. ç­›é€‰é‡‘é¢å¤§äº 1000 çš„è®°å½•\r3. æŒ‰æ—¥æœŸæ’åº\r4. å¯¼å‡ºä¸ºæ–°æ–‡ä»¶ åœºæ™¯ 3ï¼šç½‘é¡µå¼€å‘\réœ€æ±‚ï¼šå¿«é€Ÿåˆ›å»ºé¡µé¢åŸå‹\nä½¿ç”¨ Skillsï¼š\nä½¿ç”¨ frontend-design skill åˆ›å»ºï¼š\r- ä¸€ä¸ªäº§å“å±•ç¤ºé¡µé¢\r- åŒ…å«å›¾ç‰‡è½®æ’­\r- äº§å“å¡ç‰‡ç½‘æ ¼\r- å“åº”å¼å¸ƒå±€ åœºæ™¯ 4ï¼šæ•°æ®åº“ç®¡ç†\réœ€æ±‚ï¼šå®šæœŸå¤‡ä»½æ•°æ®åº“\nä½¿ç”¨ Skillsï¼š\nä½¿ç”¨ mysql-manager skillï¼š\r1. å¤‡ä»½ production æ•°æ®åº“\r2. ä¿å­˜åˆ° /backups/ ç›®å½•\r3. æ–‡ä»¶ååŒ…å«æ—¥æœŸ ç¬¬å…­ç« ï¼šå®æˆ˜æ¡ˆä¾‹ - MySQL æ•°æ®åº“ç®¡ç† Skill\ræœ¬ç« å°†é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„å®æˆ˜æ¡ˆä¾‹ï¼Œæ•™ä½ å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ MySQL æ•°æ®åº“ç®¡ç† Skillã€‚\n6.1 éœ€æ±‚åˆ†æ\rç›®æ ‡ï¼šåˆ›å»ºä¸€ä¸ª Skill æ¥ç®¡ç† MySQL æ•°æ®åº“\nåŠŸèƒ½éœ€æ±‚ï¼š\næ•°æ®åº“ç®¡ç†ï¼ˆåˆ›å»ºã€åˆ é™¤ã€åˆ—å‡ºï¼‰ è¡¨ç®¡ç†ï¼ˆåˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹ç»“æ„ï¼‰ æ•°æ®æŸ¥è¯¢ï¼ˆSELECTã€ç»Ÿè®¡ï¼‰ æ•°æ®æ“ä½œï¼ˆæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰ å¯¼å…¥å¯¼å‡ºï¼ˆCSVã€JSONã€SQLï¼‰ å¤‡ä»½ä¸æ¢å¤ ç”¨æˆ·ç®¡ç† æ€§èƒ½åˆ†æ æŠ€æœ¯é€‰å‹ï¼š\nNode.js + mysql2 åº“ é…ç½®æ–‡ä»¶å­˜å‚¨è¿æ¥ä¿¡æ¯ å‘½ä»¤è¡Œå·¥å…·å®ç°å„ç§æ“ä½œ 6.2 åˆ›å»º Skill ç»“æ„\ræ­¥éª¤ 1ï¼šåˆ›å»ºç›®å½•\nmkdir -p ~/.claude/skills/mysql-manager cd ~/.claude/skills/mysql-manager æ­¥éª¤ 2ï¼šåˆå§‹åŒ– npm é¡¹ç›®\nnpm init -y npm install mysql2 6.3 åˆ›å»ºé…ç½®æ–‡ä»¶\rconfig.jsonï¼š\n{ \u0026#34;host\u0026#34;: \u0026#34;localhost\u0026#34;, \u0026#34;port\u0026#34;: 3306, \u0026#34;user\u0026#34;: \u0026#34;root\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;root\u0026#34;, \u0026#34;database\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;charset\u0026#34;: \u0026#34;utf8mb4\u0026#34;, \u0026#34;connectionLimit\u0026#34;: 10, \u0026#34;connectTimeout\u0026#34;: 10000, \u0026#34;backupPath\u0026#34;: \u0026#34;~/.claude/skills/mysql-manager/backups\u0026#34; } é…ç½®è¯´æ˜ï¼š\nhost: æ•°æ®åº“æœåŠ¡å™¨åœ°å€ port: ç«¯å£å·ï¼ˆé»˜è®¤ 3306ï¼‰ user: æ•°æ®åº“ç”¨æˆ·å password: æ•°æ®åº“å¯†ç  database: é»˜è®¤æ•°æ®åº“ï¼ˆå¯ä¸ºç©ºï¼‰ backupPath: å¤‡ä»½æ–‡ä»¶å­˜å‚¨è·¯å¾„ å®‰å…¨æç¤ºï¼š\n# è®¾ç½®é…ç½®æ–‡ä»¶æƒé™ï¼ˆåªæœ‰æ‰€æœ‰è€…å¯è¯»å†™ï¼‰ chmod 600 config.json 6.4 åˆ›å»ºæ ¸å¿ƒå·¥å…·è„šæœ¬\rmysql-tool.jsï¼ˆæ ¸å¿ƒåŠŸèƒ½å®ç°ï¼‰ï¼š\n#!/usr/bin/env node const mysql = require(\u0026#39;mysql2/promise\u0026#39;); const fs = require(\u0026#39;fs\u0026#39;).promises; const path = require(\u0026#39;path\u0026#39;); // åŠ è½½é…ç½® async function loadConfig() { const configPath = path.join(__dirname, \u0026#39;config.json\u0026#39;); const configData = await fs.readFile(configPath, \u0026#39;utf8\u0026#39;); return JSON.parse(configData); } // åˆ›å»ºæ•°æ®åº“è¿æ¥ async function createConnection(dbName = null) { const config = await loadConfig(); if (dbName) { config.database = dbName; } return await mysql.createConnection(config); } // åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“ async function listDatabases() { const conn = await createConnection(); const [rows] = await conn.execute(\u0026#39;SHOW DATABASES\u0026#39;); await conn.end(); return rows.map(row =\u0026gt; row.Database); } // åˆ—å‡ºæ‰€æœ‰è¡¨ async function listTables(dbName) { const conn = await createConnection(dbName); const [rows] = await conn.execute(\u0026#39;SHOW TABLES\u0026#39;); await conn.end(); return rows.map(row =\u0026gt; Object.values(row)[0]); } // æŸ¥è¯¢æ•°æ® async function selectAll(dbName, tableName, limit = 100) { const conn = await createConnection(dbName); const [rows] = await conn.execute( `SELECT * FROM \\`${tableName}\\` LIMIT ?`, [limit] ); await conn.end(); return rows; } // ä¸»å‡½æ•° async function main() { const args = process.argv.slice(2); const command = args[0]; try { let result; switch (command) { case \u0026#39;list-databases\u0026#39;: result = await listDatabases(); break; case \u0026#39;list-tables\u0026#39;: result = await listTables(args[1]); break; case \u0026#39;select-all\u0026#39;: result = await selectAll(args[1], args[2], parseInt(args[3] || 100)); break; default: console.error(\u0026#39;æœªçŸ¥å‘½ä»¤:\u0026#39;, command); process.exit(1); } console.log(JSON.stringify(result, null, 2)); } catch (error) { console.error(\u0026#39;é”™è¯¯:\u0026#39;, error.message); process.exit(1); } } if (require.main === module) { main(); } è®¾ç½®æ‰§è¡Œæƒé™ï¼š\nchmod +x mysql-tool.js 6.5 åˆ›å»º SKILL.md\r--- name: mysql-manager description: å…¨é¢çš„ MySQL æ•°æ®åº“ç®¡ç†å·¥å…·ã€‚æ”¯æŒè¿æ¥æ•°æ®åº“ã€æ‰§è¡ŒæŸ¥è¯¢ã€æ•°æ®å¯¼å…¥å¯¼å‡ºã€å¤‡ä»½æ¢å¤ã€è¡¨ç»“æ„ç®¡ç†ç­‰æ“ä½œã€‚ä½¿ç”¨å‰éœ€è¦é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€‚ --- # MySQL æ•°æ®åº“ç®¡ç† Skill è¿™ä¸ª skill æä¾›å…¨é¢çš„ MySQL æ•°æ®åº“æ“ä½œåŠŸèƒ½ã€‚ ## é…ç½® æ•°æ®åº“è¿æ¥ä¿¡æ¯å­˜å‚¨åœ¨ `~/.claude/skills/mysql-manager/config.json` ä¸­ã€‚ é»˜è®¤é…ç½®ï¼š ```json { \u0026#34;host\u0026#34;: \u0026#34;localhost\u0026#34;, \u0026#34;port\u0026#34;: 3306, \u0026#34;user\u0026#34;: \u0026#34;root\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;root\u0026#34; } æ”¯æŒçš„æ“ä½œ\ræ•°æ®åº“ç®¡ç†\råˆ—å‡ºæ‰€æœ‰æ•°æ®åº“ åˆ›å»ºæ•°æ®åº“ åˆ é™¤æ•°æ®åº“ æŸ¥çœ‹æ•°æ®åº“å¤§å° è¡¨ç®¡ç†\råˆ—å‡ºæ‰€æœ‰è¡¨ åˆ›å»ºè¡¨ åˆ é™¤è¡¨ æŸ¥çœ‹è¡¨ç»“æ„ æ•°æ®æŸ¥è¯¢\rSELECT æŸ¥è¯¢ æ¡ä»¶æŸ¥è¯¢ ç»Ÿè®¡æŸ¥è¯¢ æ•°æ®æ“ä½œ\ræ’å…¥æ•°æ® æ›´æ–°æ•°æ® åˆ é™¤æ•°æ® å¯¼å…¥å¯¼å‡º\rå¯¼å‡ºä¸º CSV å¯¼å‡ºä¸º JSON å¯¼å‡ºä¸º SQL ä» SQL å¯¼å…¥ å¤‡ä»½ä¸æ¢å¤\rå¤‡ä»½æ•°æ®åº“ æ¢å¤æ•°æ®åº“ ä½¿ç”¨ç¤ºä¾‹\rä½¿ç”¨ mysql-manager åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“\rä½¿ç”¨ mysql-manager æŸ¥è¯¢ users è¡¨çš„æ•°æ®\rä½¿ç”¨ mysql-manager å¤‡ä»½ mydb æ•°æ®åº“ å®‰å…¨æ³¨æ„äº‹é¡¹\ré…ç½®æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œç¡®ä¿æƒé™è®¾ç½®æ­£ç¡® ç”Ÿäº§ç¯å¢ƒä½¿ç”¨åªè¯»ç”¨æˆ·è¿›è¡ŒæŸ¥è¯¢ åˆ é™¤æ“ä½œå‰åŠ¡å¿…ç¡®è®¤ å®šæœŸå¤‡ä»½é‡è¦æ•°æ® ### 6.6 åˆ›å»ºä½¿ç”¨æ–‡æ¡£\r**README.md**ï¼š\r```markdown\r# MySQL Manager Skill ä½¿ç”¨æŒ‡å—\r## å®‰è£…\r1. åˆ›å»ºç›®å½•ï¼š\r```bash\rmkdir -p ~/.claude/skills/mysql-manager\rcd ~/.claude/skills/mysql-manager å®‰è£…ä¾èµ–ï¼š npm install mysql2 é…ç½®æ•°æ®åº“è¿æ¥ï¼š ç¼–è¾‘ config.json æ–‡ä»¶ å‘½ä»¤å‚è€ƒ\ræ•°æ®åº“ç®¡ç†\r# åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“ node mysql-tool.js list-databases # åˆ—å‡ºæ‰€æœ‰è¡¨ node mysql-tool.js list-tables mydb # æŸ¥è¯¢æ•°æ® node mysql-tool.js select-all mydb users 10 åœ¨ Claude Code ä¸­ä½¿ç”¨\rä½¿ç”¨ mysql-manager åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“\rä½¿ç”¨ mysql-manager æŸ¥è¯¢ test æ•°æ®åº“ä¸­ users è¡¨çš„æ•°æ®\rä½¿ç”¨ mysql-manager å¤‡ä»½ mydb æ•°æ®åº“ æ•…éšœæ’é™¤\rè¿æ¥å¤±è´¥\ræ£€æŸ¥ï¼š\nMySQL æœåŠ¡æ˜¯å¦è¿è¡Œ é…ç½®æ–‡ä»¶ä¸­çš„è¿æ¥ä¿¡æ¯æ˜¯å¦æ­£ç¡® é˜²ç«å¢™æ˜¯å¦å…è®¸è¿æ¥ ### 6.7 æµ‹è¯• Skill\r**æ­¥éª¤ 1ï¼šæµ‹è¯•è¿æ¥**\r```bash\rcd ~/.claude/skills/mysql-manager\rnode mysql-tool.js list-databases é¢„æœŸè¾“å‡ºï¼š\n[ \u0026#34;information_schema\u0026#34;, \u0026#34;mysql\u0026#34;, \u0026#34;performance_schema\u0026#34;, \u0026#34;test\u0026#34; ] æ­¥éª¤ 2ï¼šåœ¨ Claude Code ä¸­æµ‹è¯•\né‡å¯ Claude Codeï¼Œç„¶åï¼š\nä½¿ç”¨ mysql-manager åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“ æ­¥éª¤ 3ï¼šæµ‹è¯•æŸ¥è¯¢åŠŸèƒ½\nä½¿ç”¨ mysql-manager æŸ¥è¯¢ test æ•°æ®åº“ä¸­ users è¡¨çš„æ•°æ® 6.8 æ‰©å±•åŠŸèƒ½\ræ·»åŠ æ›´å¤šå‘½ä»¤ï¼š\nåˆ›å»ºæ•°æ®åº“ï¼š async function createDatabase(dbName) { const conn = await createConnection(); await conn.execute(`CREATE DATABASE IF NOT EXISTS \\`${dbName}\\``); await conn.end(); return `æ•°æ®åº“ ${dbName} åˆ›å»ºæˆåŠŸ`; } å¯¼å‡ºä¸º CSVï¼š async function exportToCSV(dbName, tableName, outputPath) { const conn = await createConnection(dbName); const [rows] = await conn.execute(`SELECT * FROM \\`${tableName}\\``); await conn.end(); const headers = Object.keys(rows[0]).join(\u0026#39;,\u0026#39;); const csvRows = rows.map(row =\u0026gt; Object.values(row).map(val =\u0026gt; typeof val === \u0026#39;string\u0026#39; ? `\u0026#34;${val}\u0026#34;` : val ).join(\u0026#39;,\u0026#39;) ); const csv = [headers, ...csvRows].join(\u0026#39;\\n\u0026#39;); await fs.writeFile(outputPath, csv, \u0026#39;utf8\u0026#39;); return `å¯¼å‡ºæˆåŠŸ: ${outputPath}`; } å¤‡ä»½æ•°æ®åº“ï¼š async function backupDatabase(dbName, outputPath) { const cmd = `mysqldump -u ${config.user} -p${config.password} ${dbName} \u0026gt; \u0026#34;${outputPath}\u0026#34;`; await execPromise(cmd); return `å¤‡ä»½æˆåŠŸ: ${outputPath}`; } 6.9 å®æˆ˜æ¼”ç»ƒ\rä»»åŠ¡ 1ï¼šæŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨\nä½¿ç”¨ mysql-manager åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“ ä»»åŠ¡ 2ï¼šæŸ¥è¯¢è¡¨æ•°æ®\nä½¿ç”¨ mysql-manager æŸ¥è¯¢ test æ•°æ®åº“ä¸­ t_user è¡¨çš„å‰ 10 æ¡æ•°æ® ä»»åŠ¡ 3ï¼šæ’å…¥æµ‹è¯•æ•°æ®\nä½¿ç”¨ mysql-manager åœ¨ test æ•°æ®åº“çš„ t_user è¡¨ä¸­æ’å…¥ 10 æ¡æµ‹è¯•æ•°æ® ä»»åŠ¡ 4ï¼šå¯¼å‡ºæ•°æ®\nä½¿ç”¨ mysql-manager å°† t_user è¡¨å¯¼å‡ºä¸º CSV æ–‡ä»¶ ä»»åŠ¡ 5ï¼šå¤‡ä»½æ•°æ®åº“\nä½¿ç”¨ mysql-manager å¤‡ä»½ test æ•°æ®åº“ 6.10 æ€»ç»“\ré€šè¿‡è¿™ä¸ªå®æˆ˜æ¡ˆä¾‹ï¼Œä½ å­¦ä¼šäº†ï¼š\nâœ… å¦‚ä½•è§„åˆ’ Skill çš„åŠŸèƒ½ âœ… å¦‚ä½•åˆ›å»º Skill çš„ç›®å½•ç»“æ„ âœ… å¦‚ä½•ç¼–å†™é…ç½®æ–‡ä»¶ âœ… å¦‚ä½•å®ç°æ ¸å¿ƒåŠŸèƒ½ âœ… å¦‚ä½•ç¼–å†™ SKILL.md âœ… å¦‚ä½•æµ‹è¯• Skill âœ… å¦‚ä½•æ‰©å±•åŠŸèƒ½ å…³é”®è¦ç‚¹ï¼š\né…ç½®æ–‡ä»¶åˆ†ç¦»æ•æ„Ÿä¿¡æ¯ é”™è¯¯å¤„ç†è¦å®Œå–„ æ–‡æ¡£è¦è¯¦ç»† æµ‹è¯•è¦å……åˆ† ç¬¬ä¸ƒç« ï¼šå¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\r7.1 å®‰è£…ç›¸å…³é—®é¢˜\ré—®é¢˜ 1ï¼šæ— æ³•æ·»åŠ å®˜æ–¹å¸‚åœº\ré”™è¯¯ä¿¡æ¯ï¼š\nFailed to add marketplace å¯èƒ½åŸå› ï¼š\nç½‘ç»œè¿æ¥é—®é¢˜ æ— æ³•è®¿é—® GitHub ä»£ç†è®¾ç½®é—®é¢˜ è§£å†³æ–¹æ¡ˆï¼š\næ£€æŸ¥ç½‘ç»œè¿æ¥ï¼š ping github.com é…ç½® Git ä»£ç†ï¼ˆå¦‚æœåœ¨å›½å†…ï¼‰ï¼š git config --global http.proxy http://proxy.example.com:8080 git config --global https.proxy https://proxy.example.com:8080 ä½¿ç”¨ VPN æˆ–ä»£ç† é—®é¢˜ 2ï¼šSkills å®‰è£…åä¸æ˜¾ç¤º\rç—‡çŠ¶ï¼š\nå®‰è£…æˆåŠŸä½† Claude çœ‹ä¸åˆ° skills è¯¢é—®\u0026quot;ä½ æœ‰å“ªäº› skills\u0026quot;æ—¶æ²¡æœ‰åˆ—å‡º è§£å†³æ–¹æ¡ˆï¼š\né‡å¯ Claude Codeï¼ˆæœ€å¸¸è§åŸå› ï¼‰ï¼š # é€€å‡º exit # é‡æ–°å¯åŠ¨ claude-code æ£€æŸ¥å®‰è£…ä½ç½®ï¼š ls ~/.claude/plugins/cache/ é‡æ–°å®‰è£…ï¼š /plugin uninstall example-skills\r/plugin install example-skills@anthropic-agent-skills é—®é¢˜ 3ï¼šä¾èµ–å®‰è£…å¤±è´¥\ré”™è¯¯ä¿¡æ¯ï¼š\nnpm ERR! Cannot find module \u0026#39;mysql2\u0026#39; è§£å†³æ–¹æ¡ˆï¼š\nè¿›å…¥ skill ç›®å½•ï¼š cd ~/.claude/skills/mysql-manager å®‰è£…ä¾èµ–ï¼š npm install mysql2 å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œæ¸…é™¤ç¼“å­˜ï¼š npm cache clean --force npm install 7.2 ä½¿ç”¨ç›¸å…³é—®é¢˜\ré—®é¢˜ 4ï¼šSkill æ‰§è¡Œå¤±è´¥\ré”™è¯¯ä¿¡æ¯ï¼š\nError: Command failed æ’æŸ¥æ­¥éª¤ï¼š\næ£€æŸ¥å‘½ä»¤æ˜¯å¦æ­£ç¡®ï¼š # æ‰‹åŠ¨æµ‹è¯•å‘½ä»¤ cd ~/.claude/skills/mysql-manager node mysql-tool.js list-databases æŸ¥çœ‹é”™è¯¯è¯¦æƒ…ï¼š Claude é€šå¸¸ä¼šæ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯\næ£€æŸ¥æƒé™ï¼š\n# ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™ chmod +x mysql-tool.js æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼š # éªŒè¯ JSON æ ¼å¼ cat config.json | python -m json.tool é—®é¢˜ 5ï¼šClaude é€‰é”™äº† Skill\rç—‡çŠ¶ï¼š\nä½ æƒ³ç”¨ A skillï¼Œä½† Claude ç”¨äº† B skill è§£å†³æ–¹æ¡ˆï¼š\næ˜ç¡®æŒ‡å®š skillï¼š ä½¿ç”¨ docx skill åˆ›å»ºæ–‡æ¡£ï¼ˆè€Œä¸æ˜¯\u0026#34;åˆ›å»ºæ–‡æ¡£\u0026#34;ï¼‰ æä¾›æ›´è¯¦ç»†çš„æè¿°ï¼š ä½¿ç”¨ mysql-manager skill æŸ¥è¯¢æ•°æ®åº“ æ£€æŸ¥ SKILL.md çš„ descriptionï¼š ç¡®ä¿æè¿°æ¸…æ™°ï¼Œä¸ä¼šä¸å…¶ä»– skills æ··æ·† é—®é¢˜ 6ï¼šé…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°\ré”™è¯¯ä¿¡æ¯ï¼š\nError: ENOENT: no such file or directory è§£å†³æ–¹æ¡ˆï¼š\næ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š ls ~/.claude/skills/mysql-manager/config.json æ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼š åœ¨è„šæœ¬ä¸­ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š const configPath = path.join(__dirname, \u0026#39;config.json\u0026#39;); åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š cd ~/.claude/skills/mysql-manager cat \u0026gt; config.json \u0026lt;\u0026lt; EOF { \u0026#34;host\u0026#34;: \u0026#34;localhost\u0026#34;, \u0026#34;port\u0026#34;: 3306 } EOF 7.3 æ•°æ®åº“ç›¸å…³é—®é¢˜\ré—®é¢˜ 7ï¼šæ— æ³•è¿æ¥æ•°æ®åº“\ré”™è¯¯ä¿¡æ¯ï¼š\nError: connect ECONNREFUSED\rError: Access denied for user è§£å†³æ–¹æ¡ˆï¼š\næ£€æŸ¥ MySQL æœåŠ¡æ˜¯å¦è¿è¡Œï¼š # Windows sc query MySQL # Mac brew services list | grep mysql # Linux systemctl status mysql æ£€æŸ¥è¿æ¥ä¿¡æ¯ï¼š # æµ‹è¯•è¿æ¥ mysql -h localhost -u root -p æ£€æŸ¥é˜²ç«å¢™ï¼š # Linux sudo ufw status # Windows netsh advfirewall show allprofiles æ£€æŸ¥ç”¨æˆ·æƒé™ï¼š -- åœ¨ MySQL ä¸­æ‰§è¡Œ SHOW GRANTS FOR \u0026#39;root\u0026#39;@\u0026#39;localhost\u0026#39;; é—®é¢˜ 8ï¼šå¤‡ä»½å¤±è´¥\ré”™è¯¯ä¿¡æ¯ï¼š\nmysqldump: command not found è§£å†³æ–¹æ¡ˆï¼š\nå®‰è£… MySQL å®¢æˆ·ç«¯å·¥å…·ï¼š # Ubuntu/Debian sudo apt-get install mysql-client # Mac brew install mysql-client # Windows # ä¸‹è½½ MySQL Installer æ·»åŠ åˆ° PATHï¼ˆWindowsï¼‰ï¼š å°† C:\\Program Files\\MySQL\\MySQL Server 8.0\\bin æ·»åŠ åˆ°ç³»ç»Ÿ PATH ä½¿ç”¨å®Œæ•´è·¯å¾„ï¼š const mysqldumpPath = \u0026#39;C:\\\\Program Files\\\\MySQL\\\\MySQL Server 8.0\\\\bin\\\\mysqldump.exe\u0026#39;; 7.4 æ€§èƒ½ç›¸å…³é—®é¢˜\ré—®é¢˜ 9ï¼šæŸ¥è¯¢å¾ˆæ…¢\rç—‡çŠ¶ï¼š\næŸ¥è¯¢å¤§è¡¨æ—¶å“åº”å¾ˆæ…¢ Claude é•¿æ—¶é—´æ— å“åº” è§£å†³æ–¹æ¡ˆï¼š\né™åˆ¶æŸ¥è¯¢æ•°é‡ï¼š // é»˜è®¤é™åˆ¶ 100 æ¡ async function selectAll(dbName, tableName, limit = 100) { // ... } æ·»åŠ ç´¢å¼•ï¼š CREATE INDEX idx_name ON users(name); ä½¿ç”¨åˆ†é¡µï¼š async function selectPage(dbName, tableName, page, pageSize) { const offset = (page - 1) * pageSize; const [rows] = await conn.execute( `SELECT * FROM \\`${tableName}\\` LIMIT ? OFFSET ?`, [pageSize, offset] ); return rows; } é—®é¢˜ 10ï¼šå†…å­˜å ç”¨è¿‡é«˜\rç—‡çŠ¶ï¼š\nNode.js è¿›ç¨‹å ç”¨å¤§é‡å†…å­˜ ç³»ç»Ÿå˜æ…¢ è§£å†³æ–¹æ¡ˆï¼š\nä½¿ç”¨æµå¼å¤„ç†ï¼š const stream = conn.query(`SELECT * FROM large_table`).stream(); stream.on(\u0026#39;data\u0026#39;, (row) =\u0026gt; { // å¤„ç†æ¯ä¸€è¡Œ }); åŠæ—¶å…³é—­è¿æ¥ï¼š try { // æ“ä½œ } finally { await conn.end(); } é™åˆ¶è¿æ¥æ± å¤§å°ï¼š { \u0026#34;connectionLimit\u0026#34;: 5 } 7.5 æ–‡æ¡£ç›¸å…³é—®é¢˜\ré—®é¢˜ 11ï¼šWord æ–‡æ¡£åˆ›å»ºå¤±è´¥\ré”™è¯¯ä¿¡æ¯ï¼š\nCannot find module \u0026#39;docx\u0026#39; è§£å†³æ–¹æ¡ˆï¼š\nå…¨å±€å®‰è£… docxï¼š npm install -g docx æˆ–åœ¨é¡¹ç›®ä¸­å®‰è£…ï¼š cd /path/to/project npm install docx é—®é¢˜ 12ï¼šPDF å¤„ç†å¤±è´¥\ré”™è¯¯ä¿¡æ¯ï¼š\npdftoppm: command not found è§£å†³æ–¹æ¡ˆï¼š\nå®‰è£… Popplerï¼š # Ubuntu/Debian sudo apt-get install poppler-utils # Mac brew install poppler # Windows # ä¸‹è½½ Poppler for Windows 7.6 è°ƒè¯•æŠ€å·§\ræŠ€å·§ 1ï¼šå¯ç”¨è¯¦ç»†æ—¥å¿—\råœ¨è„šæœ¬ä¸­æ·»åŠ æ—¥å¿—ï¼š\nconsole.log(\u0026#39;å¼€å§‹æ‰§è¡Œ:\u0026#39;, command); console.log(\u0026#39;å‚æ•°:\u0026#39;, args); console.log(\u0026#39;é…ç½®:\u0026#39;, config); æŠ€å·§ 2ï¼šä½¿ç”¨è°ƒè¯•æ¨¡å¼\r# Node.js è°ƒè¯• node --inspect mysql-tool.js list-databases æŠ€å·§ 3ï¼šæµ‹è¯•å•ä¸ªåŠŸèƒ½\r# å•ç‹¬æµ‹è¯•æ¯ä¸ªå‡½æ•° node -e \u0026#34;require(\u0026#39;./mysql-tool.js\u0026#39;).listDatabases().then(console.log)\u0026#34; æŠ€å·§ 4ï¼šæŸ¥çœ‹ Claude Code æ—¥å¿—\r# æŸ¥çœ‹æ—¥å¿—ç›®å½• ls ~/.claude/logs/ # æŸ¥çœ‹æœ€æ–°æ—¥å¿— tail -f ~/.claude/logs/latest.log 7.7 è·å–å¸®åŠ©\rå®˜æ–¹èµ„æº\rClaude Code æ–‡æ¡£ï¼š\nhttps://docs.claude.com/ Skills ä»“åº“ï¼š\nhttps://github.com/anthropics/skills é—®é¢˜åé¦ˆï¼š\nhttps://github.com/anthropics/claude-code/issues ç¤¾åŒºèµ„æº\rDiscord ç¤¾åŒº Stack Overflowï¼ˆæ ‡ç­¾ï¼šclaude-codeï¼‰ GitHub Discussions å¯»æ±‚å¸®åŠ©çš„æŠ€å·§\ræé—®æ—¶æä¾›ï¼š\nå®Œæ•´çš„é”™è¯¯ä¿¡æ¯ ä½ çš„æ“ä½œæ­¥éª¤ ç³»ç»Ÿç¯å¢ƒä¿¡æ¯ ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼ˆå»é™¤æ•æ„Ÿä¿¡æ¯ï¼‰ å¥½çš„æé—®ç¤ºä¾‹ï¼š\né—®é¢˜ï¼šmysql-manager skill æ— æ³•è¿æ¥æ•°æ®åº“\rç¯å¢ƒï¼š\r- OS: Windows 10\r- Node.js: v20.9.0\r- MySQL: 8.0.35\ré”™è¯¯ä¿¡æ¯ï¼š\rError: connect ECONNREFUSED 127.0.0.1:3306\rå·²å°è¯•ï¼š\r1. ç¡®è®¤ MySQL æœåŠ¡æ­£åœ¨è¿è¡Œ\r2. å¯ä»¥ç”¨ mysql å‘½ä»¤è¡Œè¿æ¥\r3. é…ç½®æ–‡ä»¶ä¸­çš„ä¿¡æ¯æ­£ç¡®\ré…ç½®æ–‡ä»¶ï¼ˆå·²å»é™¤å¯†ç ï¼‰ï¼š\r{\r\u0026#34;host\u0026#34;: \u0026#34;localhost\u0026#34;,\r\u0026#34;port\u0026#34;: 3306,\r\u0026#34;user\u0026#34;: \u0026#34;root\u0026#34;\r} é™„å½•ï¼šå®Œæ•´å‘½ä»¤å‚è€ƒ\rA. Claude Code åŸºæœ¬å‘½ä»¤\r# å¯åŠ¨ Claude Code claude-code # æŸ¥çœ‹ç‰ˆæœ¬ claude --version # æŸ¥çœ‹å¸®åŠ© claude --help # é€€å‡º exit B. Plugin ç®¡ç†å‘½ä»¤\r# æ·»åŠ å¸‚åœº /plugin marketplace add anthropics/skills # æµè§ˆæ’ä»¶ /plugin browse # å®‰è£…æ’ä»¶ /plugin install example-skills@anthropic-agent-skills /plugin install document-skills@anthropic-agent-skills # å¸è½½æ’ä»¶ /plugin uninstall example-skills # åˆ—å‡ºå·²å®‰è£…æ’ä»¶ /plugin list C. æ–‡ä»¶æ“ä½œå‘½ä»¤\rWindows\r# æŸ¥çœ‹ç›®å½• dir %USERPROFILE%\\.claude # è¿›å…¥ç›®å½• cd %USERPROFILE%\\.claude\\skills # åˆ›å»ºç›®å½• mkdir my-skill # åˆ é™¤ç›®å½• rmdir /s my-skill # æŸ¥çœ‹æ–‡ä»¶å†…å®¹ type config.json # ç¼–è¾‘æ–‡ä»¶ notepad config.json Mac/Linux\r# æŸ¥çœ‹ç›®å½• ls -la ~/.claude # è¿›å…¥ç›®å½• cd ~/.claude/skills # åˆ›å»ºç›®å½• mkdir -p my-skill # åˆ é™¤ç›®å½• rm -rf my-skill # æŸ¥çœ‹æ–‡ä»¶å†…å®¹ cat config.json # ç¼–è¾‘æ–‡ä»¶ nano config.json # æˆ– vim config.json D. Node.js å‘½ä»¤\r# åˆå§‹åŒ–é¡¹ç›® npm init -y # å®‰è£…ä¾èµ– npm install mysql2 npm install docx # å…¨å±€å®‰è£… npm install -g docx # æŸ¥çœ‹å·²å®‰è£…åŒ… npm list # è¿è¡Œè„šæœ¬ node script.js # è°ƒè¯•æ¨¡å¼ node --inspect script.js E. Git å‘½ä»¤\r# å…‹éš†ä»“åº“ git clone https://github.com/anthropics/skills.git # æŸ¥çœ‹çŠ¶æ€ git status # æ‹‰å–æ›´æ–° git pull # æŸ¥çœ‹æ—¥å¿— git log --oneline -10 F. MySQL å‘½ä»¤\r# è¿æ¥æ•°æ®åº“ mysql -h localhost -u root -p # å¯¼å‡ºæ•°æ®åº“ mysqldump -u root -p mydb \u0026gt; backup.sql # å¯¼å…¥æ•°æ®åº“ mysql -u root -p mydb \u0026lt; backup.sql # æŸ¥çœ‹è¿›ç¨‹ mysqladmin -u root -p processlist G. å¸¸ç”¨ Skill å‘½ä»¤æ¨¡æ¿\rMySQL Manager\r# åˆ—å‡ºæ•°æ®åº“ node mysql-tool.js list-databases # åˆ—å‡ºè¡¨ node mysql-tool.js list-tables mydb # æŸ¥è¯¢æ•°æ® node mysql-tool.js select-all mydb users 10 # å¯¼å‡º CSV node mysql-tool.js export-csv mydb users output.csv # å¤‡ä»½ node mysql-tool.js backup mydb backup.sql æ–‡ä»¶ç»Ÿè®¡\r# ç»Ÿè®¡å½“å‰ç›®å½• node file-stats.js . # ç»Ÿè®¡æŒ‡å®šç›®å½• node file-stats.js /path/to/directory é™„å½• Bï¼šé…ç½®æ–‡ä»¶æ¨¡æ¿\r1. SKILL.md æ¨¡æ¿\r--- name: skill-name description: è¯¦ç»†æè¿°è¿™ä¸ª skill çš„åŠŸèƒ½å’Œä½¿ç”¨åœºæ™¯ --- # Skill Name ç®€çŸ­çš„ä»‹ç»ã€‚ ## åŠŸèƒ½ - åŠŸèƒ½ 1 - åŠŸèƒ½ 2 - åŠŸèƒ½ 3 ## ä½¿ç”¨æ–¹æ³• è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜... ## ç¤ºä¾‹ ä½¿ç”¨ skill-name åšæŸäº‹\n## é…ç½®\rå¦‚æœéœ€è¦é…ç½®ï¼Œåœ¨è¿™é‡Œè¯´æ˜ã€‚\r## ä¾èµ–\råˆ—å‡ºæ‰€éœ€çš„ä¾èµ–ã€‚\r## æ³¨æ„äº‹é¡¹\ré‡è¦çš„æ³¨æ„äº‹é¡¹ã€‚ 2. config.json æ¨¡æ¿\r{ \u0026#34;host\u0026#34;: \u0026#34;localhost\u0026#34;, \u0026#34;port\u0026#34;: 3306, \u0026#34;user\u0026#34;: \u0026#34;username\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;password\u0026#34;, \u0026#34;database\u0026#34;: \u0026#34;dbname\u0026#34;, \u0026#34;options\u0026#34;: { \u0026#34;key\u0026#34;: \u0026#34;value\u0026#34; } } 3. package.json æ¨¡æ¿\r{ \u0026#34;name\u0026#34;: \u0026#34;skill-name\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Skill description\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;index.js\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;test\u0026#34;: \u0026#34;node test.js\u0026#34; }, \u0026#34;dependencies\u0026#34;: { \u0026#34;mysql2\u0026#34;: \u0026#34;^3.0.0\u0026#34; }, \u0026#34;author\u0026#34;: \u0026#34;Your Name\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;MIT\u0026#34; } 4. README.md æ¨¡æ¿\r# Skill Name ç®€çŸ­æè¿°ã€‚ ## å®‰è£… ```bash cd ~/.claude/skills/skill-name npm install é…ç½®\rç¼–è¾‘ config.json:\n{ \u0026#34;key\u0026#34;: \u0026#34;value\u0026#34; } ä½¿ç”¨\rå‘½ä»¤è¡Œ\rnode tool.js command Claude Code\rä½¿ç”¨ skill-name åšæŸäº‹ å‘½ä»¤å‚è€ƒ\rå‘½ä»¤ è¯´æ˜ ç¤ºä¾‹ command1 è¯´æ˜ node tool.js command1 command2 è¯´æ˜ node tool.js command2 ","date":"2026-02-14T10:21:18+08:00","permalink":"https://zg-dd.github.io/stu/complete-skills-guide/","title":"Claude Code Skills å®Œæ•´å­¦ä¹ æŒ‡å—"},{"content":"Propertiesè½¬YAMLè½¬æ¢å·¥å…·ä½¿ç”¨æ‰‹å†Œ\rğŸ“‹ æ¦‚è¿°\rè¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„Pythonè„šæœ¬å·¥å…·ï¼Œç”¨äºå°†Java .properties é…ç½®æ–‡ä»¶è½¬æ¢ä¸ºYAMLæ ¼å¼ã€‚è¯¥å·¥å…·ä¸ä»…æ”¯æŒåŸºæœ¬çš„æ ¼å¼è½¬æ¢ï¼Œè¿˜å…·å¤‡æ™ºèƒ½çš„æ³¨é‡Šä¿ç•™ã€ç±»å‹æ¨æ–­å’Œç»“æ„ä¿æŒåŠŸèƒ½ã€‚\nğŸ“œè„šæœ¬\r#!/usr/bin/env python3 # -*- coding: utf-8 -*- \u0026#34;\u0026#34;\u0026#34; Propertiesæ–‡ä»¶è½¬YAMLæ–‡ä»¶å·¥å…·ï¼ˆä¼˜åŒ–ç‰ˆï¼‰ ä¼˜åŒ–ç‚¹ï¼š 1. ä½¿ç”¨æ™®é€šdictæ›¿ä»£OrderedDictï¼ˆPython 3.7+ä¿æŒæ’å…¥é¡ºåºï¼‰ 2. å‡å°‘æ•°æ®å†—ä½™å­˜å‚¨ 3. ç¼“å­˜é‡å¤çš„å­—ç¬¦ä¸²æ“ä½œ 4. ç®€åŒ–é€»è¾‘æµç¨‹ \u0026#34;\u0026#34;\u0026#34; import sys import argparse from pathlib import Path import yaml import re def infer_value_type(value_str): \u0026#34;\u0026#34;\u0026#34;æ¨æ–­å€¼çš„ç±»å‹å¹¶è¿”å›é€‚å½“çš„Pythonå¯¹è±¡\u0026#34;\u0026#34;\u0026#34; if not isinstance(value_str, str): return value_str value_str = value_str.strip() # ç©ºå€¼å¤„ç† if value_str == \u0026#39;\u0026#39; or value_str.lower() in [\u0026#39;null\u0026#39;, \u0026#39;nil\u0026#39;]: return None # å¸ƒå°”å€¼ if value_str.lower() in [\u0026#39;true\u0026#39;, \u0026#39;false\u0026#39;]: return value_str.lower() == \u0026#39;true\u0026#39; # æ•°å­—ï¼ˆæ•´æ•°ï¼‰ if \u0026#39;.\u0026#39; not in value_str and re.match(r\u0026#39;^-?\\d+$\u0026#39;, value_str): try: return int(value_str) except ValueError: pass # æ•°å­—ï¼ˆæµ®ç‚¹æ•°ï¼‰ if re.match(r\u0026#39;^-?\\d+\\.?\\d*$\u0026#39;, value_str): try: return float(value_str) except ValueError: pass # å»æ‰å¯èƒ½çš„å¼•å· if len(value_str) \u0026gt;= 2 and ( (value_str[0] == \u0026#39;\u0026#34;\u0026#39; and value_str[-1] == \u0026#39;\u0026#34;\u0026#39;) or (value_str[0] == \u0026#34;\u0026#39;\u0026#34; and value_str[-1] == \u0026#34;\u0026#39;\u0026#34;) ): return value_str[1:-1] return value_str def parse_properties_content(content): \u0026#34;\u0026#34;\u0026#34;è§£æpropertiesæ–‡ä»¶å†…å®¹\u0026#34;\u0026#34;\u0026#34; structure = [] lines = content.splitlines() for i, line in enumerate(lines): stripped = line.strip() # æ³¨é‡Šè¡Œ if stripped.startswith(\u0026#39;#\u0026#39;) or stripped.startswith(\u0026#39;!\u0026#39;): structure.append({ \u0026#39;type\u0026#39;: \u0026#39;comment\u0026#39;, \u0026#39;content\u0026#39;: stripped[1:].strip(), \u0026#39;line_num\u0026#39;: i + 1 }) continue # ç©ºè¡Œ if not stripped: structure.append({\u0026#39;type\u0026#39;: \u0026#39;empty_line\u0026#39;, \u0026#39;line_num\u0026#39;: i + 1}) continue # å±æ€§è¡Œ if \u0026#39;=\u0026#39; in stripped or \u0026#39;:\u0026#39; in stripped: separator = \u0026#39;=\u0026#39; if \u0026#39;=\u0026#39; in stripped else \u0026#39;:\u0026#39; key, value = stripped.split(separator, 1) key = key.strip() value = value.strip() structure.append({ \u0026#39;type\u0026#39;: \u0026#39;property\u0026#39;, \u0026#39;key\u0026#39;: key, \u0026#39;value\u0026#39;: infer_value_type(value), \u0026#39;line_num\u0026#39;: i + 1 }) else: print(f\u0026#34;è­¦å‘Šï¼šç¬¬{i + 1}è¡Œæ ¼å¼ä¸æ­£ç¡®ï¼Œè·³è¿‡: {stripped}\u0026#34;) return structure def build_comment_mapping(structure): \u0026#34;\u0026#34;\u0026#34;æ„å»ºæ³¨é‡Šåˆ°å±æ€§çš„æ˜ å°„å…³ç³»\u0026#34;\u0026#34;\u0026#34; comment_mapping = {} i = 0 while i \u0026lt; len(structure): if structure[i][\u0026#39;type\u0026#39;] != \u0026#39;comment\u0026#39;: i += 1 continue # æ”¶é›†è¿ç»­æ³¨é‡Šå— comment_start = i comments = [] while i \u0026lt; len(structure) and structure[i][\u0026#39;type\u0026#39;] == \u0026#39;comment\u0026#39;: comments.append(structure[i][\u0026#39;content\u0026#39;]) i += 1 comment_end = i - 1 # åˆ¤æ–­æ³¨é‡Šå—ç±»å‹å’Œç›®æ ‡å±æ€§ prev_empty = (comment_start == 0 or structure[comment_start - 1][\u0026#39;type\u0026#39;] == \u0026#39;empty_line\u0026#39;) next_empty = (comment_end == len(structure) - 1 or structure[comment_end + 1][\u0026#39;type\u0026#39;] == \u0026#39;empty_line\u0026#39;) next_property = (comment_end \u0026lt; len(structure) - 1 and structure[comment_end + 1][\u0026#39;type\u0026#39;] == \u0026#39;property\u0026#39;) target_key = None position = None # ç‹¬ç«‹æ³¨é‡Šå—ï¼ˆä¸Šä¸‹éƒ½æ˜¯ç©ºè¡Œï¼‰ if prev_empty and next_empty: # å‘ä¸ŠæŸ¥æ‰¾å±æ€§ for j in range(comment_start - 1, -1, -1): if structure[j][\u0026#39;type\u0026#39;] == \u0026#39;property\u0026#39;: target_key = structure[j][\u0026#39;key\u0026#39;] position = \u0026#39;below\u0026#39; break # å‘ä¸Šæ²¡æ‰¾åˆ°ï¼Œå‘ä¸‹æŸ¥æ‰¾ if not target_key: for j in range(comment_end + 1, len(structure)): if structure[j][\u0026#39;type\u0026#39;] == \u0026#39;property\u0026#39;: target_key = structure[j][\u0026#39;key\u0026#39;] position = \u0026#39;above\u0026#39; break # å…³è”æ³¨é‡Šå—ï¼ˆä¸‹æ–¹æ˜¯å±æ€§ï¼‰ elif next_property: target_key = structure[comment_end + 1][\u0026#39;key\u0026#39;] position = \u0026#39;above\u0026#39; # æ·»åŠ åˆ°æ˜ å°„ if target_key and position: if target_key not in comment_mapping: comment_mapping[target_key] = [] comment_mapping[target_key].append({ \u0026#39;comments\u0026#39;: comments, \u0026#39;position\u0026#39;: position }) return comment_mapping def dump_yaml_with_structure(structure): \u0026#34;\u0026#34;\u0026#34;ç”ŸæˆYAMLå†…å®¹\u0026#34;\u0026#34;\u0026#34; # æ„å»ºæ³¨é‡Šæ˜ å°„ comment_mapping = build_comment_mapping(structure) # æå–æ‰€æœ‰å±æ€§å¹¶æŒ‰ç»„åˆ†ç±» properties = [item for item in structure if item[\u0026#39;type\u0026#39;] == \u0026#39;property\u0026#39;] groups = {} # {top_level_key: [properties]} simple_props = [] # æ— ç‚¹å·çš„ç®€å•å±æ€§ for prop in properties: key = prop[\u0026#39;key\u0026#39;] if \u0026#39;.\u0026#39; in key: top_key = key.split(\u0026#39;.\u0026#39;, 1)[0] if top_key not in groups: groups[top_key] = [] groups[top_key].append(prop) else: simple_props.append(prop) # ç”Ÿæˆè¾“å‡º output_lines = [] processed_keys = set() # æŒ‰åŸå§‹é¡ºåºå¤„ç† for item in structure: if item[\u0026#39;type\u0026#39;] != \u0026#39;property\u0026#39;: continue key = item[\u0026#39;key\u0026#39;] if key in processed_keys: continue # å¤„ç†åˆ†ç»„å±æ€§ if \u0026#39;.\u0026#39; in key: top_key = key.split(\u0026#39;.\u0026#39;, 1)[0] if top_key in processed_keys: continue # æ ‡è®°è¯¥ç»„æ‰€æœ‰å±æ€§ä¸ºå·²å¤„ç† for prop in groups[top_key]: processed_keys.add(prop[\u0026#39;key\u0026#39;]) # è¾“å‡ºç»„çº§ä¸Šæ–¹æ³¨é‡Šï¼ˆä½¿ç”¨ç»„å†…ç¬¬ä¸€ä¸ªå±æ€§çš„æ³¨é‡Šï¼‰ first_key = groups[top_key][0][\u0026#39;key\u0026#39;] if first_key in comment_mapping: for block in comment_mapping[first_key]: if block[\u0026#39;position\u0026#39;] == \u0026#39;above\u0026#39;: for comment in block[\u0026#39;comments\u0026#39;]: output_lines.append(f\u0026#34;# {comment}\u0026#34;) # è¾“å‡ºç»„å output_lines.append(f\u0026#34;{top_key}:\u0026#34;) # è¾“å‡ºç»„å†…å±æ€§ nested_path = [] for idx, prop in enumerate(groups[top_key]): prop_key = prop[\u0026#39;key\u0026#39;] value = prop[\u0026#39;value\u0026#39;] # å±æ€§çº§ä¸Šæ–¹æ³¨é‡Šï¼ˆè·³è¿‡ç¬¬ä¸€ä¸ªå±æ€§çš„ç»„çº§æ³¨é‡Šï¼‰ if prop_key in comment_mapping and not (idx == 0 and prop_key == first_key): for block in comment_mapping[prop_key]: if block[\u0026#39;position\u0026#39;] == \u0026#39;above\u0026#39;: for comment in block[\u0026#39;comments\u0026#39;]: output_lines.append(f\u0026#34; # {comment}\u0026#34;) # è¾“å‡ºå±æ€§ parts = prop_key.split(\u0026#39;.\u0026#39;)[1:] # å»æ‰é¡¶å±‚key if len(parts) == 1: # äºŒçº§å±æ€§ yaml_str = yaml.dump({parts[0]: value}, allow_unicode=True, default_flow_style=False, sort_keys=False).strip() output_lines.append(f\u0026#34; {yaml_str}\u0026#34;) else: # å¤šçº§åµŒå¥— for level, part in enumerate(parts[:-1]): path = parts[:level+1] if path != nested_path[:len(path)]: indent = \u0026#39; \u0026#39; * (level + 1) output_lines.append(f\u0026#34;{indent}{part}:\u0026#34;) nested_path = path[:] # æœ€åä¸€çº§ final_indent = \u0026#39; \u0026#39; * len(parts) final_key = parts[-1] yaml_str = yaml.dump({final_key: value}, allow_unicode=True, default_flow_style=False, sort_keys=False).strip() value_part = yaml_str.split(\u0026#39;:\u0026#39;, 1)[1].strip() if \u0026#39;:\u0026#39; in yaml_str else str(value) output_lines.append(f\u0026#34;{final_indent}{final_key}: {value_part}\u0026#34;) # å±æ€§çº§ä¸‹æ–¹æ³¨é‡Š if prop_key in comment_mapping: for block in comment_mapping[prop_key]: if block[\u0026#39;position\u0026#39;] == \u0026#39;below\u0026#39;: output_lines.append(\u0026#34;\u0026#34;) for comment in block[\u0026#39;comments\u0026#39;]: output_lines.append(f\u0026#34;# {comment}\u0026#34;) output_lines.append(\u0026#34;\u0026#34;) # å¤„ç†ç®€å•å±æ€§ else: processed_keys.add(key) # ä¸Šæ–¹æ³¨é‡Š if key in comment_mapping: for block in comment_mapping[key]: if block[\u0026#39;position\u0026#39;] == \u0026#39;above\u0026#39;: for comment in block[\u0026#39;comments\u0026#39;]: output_lines.append(f\u0026#34;# {comment}\u0026#34;) # è¾“å‡ºå±æ€§ output_lines.append(f\u0026#34;{key}: \u0026#39;{item[\u0026#39;value\u0026#39;]}\u0026#39;\u0026#34;) # ä¸‹æ–¹æ³¨é‡Š if key in comment_mapping: for block in comment_mapping[key]: if block[\u0026#39;position\u0026#39;] == \u0026#39;below\u0026#39;: output_lines.append(\u0026#34;\u0026#34;) for comment in block[\u0026#39;comments\u0026#39;]: output_lines.append(f\u0026#34;# {comment}\u0026#34;) output_lines.append(\u0026#34;\u0026#34;) # ç§»é™¤æœ«å°¾ç©ºè¡Œ while output_lines and output_lines[-1] == \u0026#34;\u0026#34;: output_lines.pop() return \u0026#39;\\n\u0026#39;.join(output_lines) def properties_to_yaml(properties_file_path): \u0026#34;\u0026#34;\u0026#34;è½¬æ¢propertiesæ–‡ä»¶ä¸ºYAMLæ ¼å¼\u0026#34;\u0026#34;\u0026#34; try: prop_path = Path(properties_file_path) if not prop_path.exists(): print(f\u0026#34;é”™è¯¯ï¼šæ–‡ä»¶ä¸å­˜åœ¨ - {properties_file_path}\u0026#34;) return False if not prop_path.is_file(): print(f\u0026#34;é”™è¯¯ï¼šè·¯å¾„ä¸æ˜¯æ–‡ä»¶ - {properties_file_path}\u0026#34;) return False with open(prop_path, \u0026#39;r\u0026#39;, encoding=\u0026#39;utf-8\u0026#39;) as f: content = f.read() structure = parse_properties_content(content) yaml_content = dump_yaml_with_structure(structure) yaml_file_path = prop_path.with_suffix(\u0026#39;.yaml\u0026#39;) with open(yaml_file_path, \u0026#39;w\u0026#39;, encoding=\u0026#39;utf-8\u0026#39;) as f: f.write(yaml_content) print(f\u0026#34;æˆåŠŸè½¬æ¢ï¼š{properties_file_path} -\u0026gt; {yaml_file_path}\u0026#34;) return True except Exception as e: print(f\u0026#34;è½¬æ¢å¤±è´¥ï¼š{properties_file_path}\u0026#34;) print(f\u0026#34;é”™è¯¯ä¿¡æ¯ï¼š{str(e)}\u0026#34;) import traceback traceback.print_exc() return False def main(): \u0026#34;\u0026#34;\u0026#34;ä¸»å‡½æ•°ï¼šå¤„ç†å‘½ä»¤è¡Œå‚æ•°å¹¶æ‰§è¡Œè½¬æ¢\u0026#34;\u0026#34;\u0026#34; parser = argparse.ArgumentParser(description=\u0026#39;å°†propertiesæ–‡ä»¶è½¬æ¢ä¸ºyamlæ–‡ä»¶\u0026#39;) parser.add_argument(\u0026#39;files\u0026#39;, nargs=\u0026#39;+\u0026#39;, help=\u0026#39;è¦è½¬æ¢çš„propertiesæ–‡ä»¶è·¯å¾„\u0026#39;) args = parser.parse_args() success_count = 0 fail_count = 0 print(\u0026#34;å¼€å§‹è½¬æ¢propertiesæ–‡ä»¶åˆ°yamlæ ¼å¼...\u0026#34;) print(\u0026#34;=\u0026#34; * 50) for file_path in args.files: if properties_to_yaml(file_path): success_count += 1 else: fail_count += 1 print(\u0026#34;=\u0026#34; * 50) print(f\u0026#34;è½¬æ¢å®Œæˆï¼æˆåŠŸï¼š{success_count}ä¸ªï¼Œå¤±è´¥ï¼š{fail_count}ä¸ª\u0026#34;) return 1 if fail_count \u0026gt; 0 else 0 if __name__ == \u0026#39;__main__\u0026#39;: sys.exit(main()) ğŸš€ ä¸»è¦ç‰¹æ€§\râœ… æ ¸å¿ƒåŠŸèƒ½\rå¤šæ–‡ä»¶æ‰¹é‡è½¬æ¢ - æ”¯æŒåŒæ—¶è½¬æ¢å¤šä¸ªé…ç½®æ–‡ä»¶ æ™ºèƒ½ç±»å‹æ¨æ–­ - è‡ªåŠ¨è¯†åˆ«å¸ƒå°”å€¼ã€æ•°å­—ã€å­—ç¬¦ä¸²ç­‰æ•°æ®ç±»å‹ å®Œæ•´æ³¨é‡Šä¿ç•™ - ä¿ç•™æ‰€æœ‰åŸå§‹æ³¨é‡ŠåŠå…¶ä½ç½®å…³ç³» ç»“æ„é¡ºåºä¿æŒ - ä¸¥æ ¼ç»´æŒåŸå§‹æ–‡ä»¶çš„é”®å€¼å¯¹é¡ºåº åµŒå¥—å±æ€§å¤„ç† - æ™ºèƒ½å¤„ç†ç‚¹å·åˆ†éš”çš„å±‚çº§é…ç½® ğŸ¯ é«˜çº§ç‰¹æ€§\ræ³¨é‡Šæ™ºèƒ½å®šä½ - æ”¯æŒä¸Šæ–¹æ³¨é‡Šã€ä¸‹æ–¹æ³¨é‡Šçš„ç²¾ç¡®ä½ç½®ä¿æŒ ç‹¬ç«‹æ³¨é‡Šå¤„ç† - æ™ºèƒ½å¤„ç†æ–‡ä»¶ä¸­çš„ç‹¬ç«‹æ³¨é‡Šå— UTF-8ç¼–ç æ”¯æŒ - å®Œç¾æ”¯æŒä¸­æ–‡ç­‰å¤šè¯­è¨€å­—ç¬¦ é”™è¯¯å¤„ç†æœºåˆ¶ - å®Œå–„çš„é”™è¯¯æç¤ºå’Œè½¬æ¢ç»Ÿè®¡ ğŸ“¦ å®‰è£…è¦æ±‚\rç³»ç»Ÿç¯å¢ƒ\rPythonç‰ˆæœ¬ï¼š3.6 æˆ–æ›´é«˜ç‰ˆæœ¬ æ“ä½œç³»ç»Ÿï¼šWindowsã€Linuxã€macOS å‡æ”¯æŒ ä¾èµ–åº“\réœ€è¦å®‰è£… PyYAML åº“ï¼š\npip install pyyaml ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•\r1. åŸºæœ¬ç”¨æ³•\rè½¬æ¢å•ä¸ªæ–‡ä»¶\rpython properties_to_yaml.py config.properties è½¬æ¢å¤šä¸ªæ–‡ä»¶\rpython properties_to_yaml.py app.properties database.properties redis.properties 2. è·¯å¾„ä½¿ç”¨\rç»å¯¹è·¯å¾„\rpython properties_to_yaml.py C:\\projects\\myapp\\config\\application.properties ç›¸å¯¹è·¯å¾„\rpython properties_to_yaml.py ./config/dev.properties å½“å‰ç›®å½•æ–‡ä»¶\rpython properties_to_yaml.py application.properties ğŸ“ è½¬æ¢ç¤ºä¾‹\rè¾“å…¥æ–‡ä»¶ç¤ºä¾‹ (application.properties)\r# ========================================== # åº”ç”¨ç¨‹åºæ ¸å¿ƒé…ç½® # ========================================== # åº”ç”¨åŸºæœ¬ä¿¡æ¯ app.name=MyAwesomeApplication app.version=2.1.0 app.description=ä¼ä¸šçº§åº”ç”¨å¹³å° # å¼€å‘æ¨¡å¼å¼€å…³ app.debug=true # æ•°æ®åº“è¿æ¥é…ç½® database.host=localhost database.port=3306 database.username=admin database.password=secure_password_123 # è¿æ¥æ± é…ç½® database.pool.max-size=20 database.pool.min-idle=5 database.pool.max-wait=30000 # å…¶ä»–é…ç½®é¡¹ timeout=30000 max-connections=100 è¾“å‡ºæ–‡ä»¶ç¤ºä¾‹ (application.yaml)\r# ========================================== # åº”ç”¨ç¨‹åºæ ¸å¿ƒé…ç½® # ========================================== # åº”ç”¨åŸºæœ¬ä¿¡æ¯ app: name: MyAwesomeApplication version: 2.1.0 description: ä¼ä¸šçº§åº”ç”¨å¹³å° # å¼€å‘æ¨¡å¼å¼€å…³ debug: true # æ•°æ®åº“è¿æ¥é…ç½® database: host: localhost port: 3306 username: admin password: secure_password_123 # è¿æ¥æ± é…ç½® pool: max-size: 20 min-idle: 5 max-wait: 30000 # å…¶ä»–é…ç½®é¡¹ timeout: \u0026#39;30000\u0026#39; max-connections: \u0026#39;100\u0026#39; ğŸ”§ åŠŸèƒ½è¯¦è§£\r1. ç±»å‹æ¨æ–­æœºåˆ¶\rå·¥å…·èƒ½å¤Ÿæ™ºèƒ½è¯†åˆ«å¹¶ä¿æŒä»¥ä¸‹æ•°æ®ç±»å‹ï¼š\nPropertieså€¼ æ¨æ–­ç±»å‹ YAMLè¾“å‡º è¯´æ˜ true/false boolean true/false å¸ƒå°”å€¼ 8080 integer 8080 æ•´æ•° 30.5 float 30.5 æµ®ç‚¹æ•° hello string hello å­—ç¬¦ä¸² \u0026quot;hello world\u0026quot; string hello world å»å¼•å·å­—ç¬¦ä¸² 2. æ³¨é‡Šå¤„ç†æœºåˆ¶\ræ³¨é‡Šç±»å‹è¯†åˆ«\rå…³è”æ³¨é‡Šï¼šç´§è·Ÿåœ¨é…ç½®é¡¹å‰çš„æ³¨é‡Š ç‹¬ç«‹æ³¨é‡Šï¼šè¢«ç©ºè¡ŒåŒ…å›´çš„æ³¨é‡Šå— æ–‡ä»¶å¤´æ³¨é‡Šï¼šæ–‡ä»¶å¼€å¤´çš„æ³¨é‡Š ä½ç½®ä¿æŒç­–ç•¥\r# è¿™æ˜¯ä¸Šæ–¹æ³¨é‡Š config.value=test # è¿™æ˜¯ä¸‹æ–¹æ³¨é‡Š è½¬æ¢åï¼š\n# è¿™æ˜¯ä¸Šæ–¹æ³¨é‡Š config: value: test # è¿™æ˜¯ä¸‹æ–¹æ³¨é‡Š 3. åµŒå¥—ç»“æ„å¤„ç†\rç‚¹å·åˆ†éš”çš„é”®åä¼šè‡ªåŠ¨è½¬æ¢ä¸ºYAMLåµŒå¥—ç»“æ„ï¼š\nProperties YAML database.host=localhost database: {host: localhost} spring.datasource.url=jdbc:... spring: {datasource: {url: jdbc:...}} 4. é¡ºåºä¿æŒæœºåˆ¶\rä¸¥æ ¼é¡ºåºï¼šå®Œå…¨ä¿æŒåŸå§‹propertiesæ–‡ä»¶ä¸­çš„é”®å€¼å¯¹é¡ºåº å±‚çº§é¡ºåºï¼šåµŒå¥—å±æ€§çš„å±‚çº§ç»“æ„ä¹Ÿä¿æŒåŸæœ‰é¡ºåº æ³¨é‡Šé¡ºåºï¼šæ³¨é‡Šä¸é…ç½®é¡¹çš„ç›¸å¯¹ä½ç½®å®Œå…¨ä¿æŒ âš™ï¸ é«˜çº§ç”¨æ³•\r1. æ‰¹é‡å¤„ç†è„šæœ¬\r# æ‰¹é‡è½¬æ¢å½“å‰ç›®å½•æ‰€æœ‰propertiesæ–‡ä»¶ for file in *.properties; do python properties_to_yaml.py \u0026#34;$file\u0026#34; done 2. é›†æˆåˆ°CI/CDæµç¨‹\r# åœ¨GitHub Actionsä¸­ä½¿ç”¨ - name: Convert Properties to YAML run: | python properties_to_yaml.py config/*.properties 3. ä½œä¸ºæ¨¡å—å¯¼å…¥\rfrom properties_to_yaml import parse_properties_content, dump_yaml_with_structure # è¯»å–å¹¶è½¬æ¢ with open(\u0026#39;config.properties\u0026#39;, \u0026#39;r\u0026#39;, encoding=\u0026#39;utf-8\u0026#39;) as f: content = f.read() parsed_data = parse_properties_content(content) yaml_result = dump_yaml_with_structure(parsed_data) print(yaml_result) ğŸ“Š è¾“å‡ºæ ¼å¼è¯´æ˜\rç”Ÿæˆæ–‡ä»¶å‘½å\rè¾“å…¥ï¼šapplication.properties è¾“å‡ºï¼šapplication.yaml ä¿å­˜ä½ç½®ï¼šä¸æºæ–‡ä»¶ç›¸åŒç›®å½• YAMLæ ¼å¼ç‰¹ç‚¹\rä½¿ç”¨2ä¸ªç©ºæ ¼ç¼©è¿› æ”¯æŒUTF-8ç¼–ç  ä¿æŒæ¸…æ™°çš„å±‚æ¬¡ç»“æ„ æ³¨é‡Šä»¥#å¼€å¤´ ğŸš¨ é”™è¯¯å¤„ç†\rå¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ\r1. æ–‡ä»¶ä¸å­˜åœ¨\ré”™è¯¯ï¼šæ–‡ä»¶ä¸å­˜åœ¨ - /path/to/config.properties è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®\n2. æ ¼å¼é”™è¯¯\rè­¦å‘Šï¼šç¬¬5è¡Œæ ¼å¼ä¸æ­£ç¡®ï¼Œè·³è¿‡: invalid=format=line è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥propertiesæ–‡ä»¶æ ¼å¼ï¼Œç¡®ä¿ä½¿ç”¨=æˆ–:åˆ†éš”\n3. æƒé™ä¸è¶³\ré”™è¯¯ï¼šæƒé™è¢«æ‹’ç» - config.properties è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥æ–‡ä»¶è¯»å†™æƒé™\nğŸ” æ•…éšœæ’é™¤\rè°ƒè¯•æŠ€å·§\ræŸ¥çœ‹è¯¦ç»†è¾“å‡º python properties_to_yaml.py config.properties æ£€æŸ¥ç”Ÿæˆçš„YAML cat config.yaml éªŒè¯YAMLè¯­æ³• python -c \u0026#34;import yaml; yaml.safe_load(open(\u0026#39;config.yaml\u0026#39;))\u0026#34; ğŸ“ˆ æ€§èƒ½è¯´æ˜\rå¤„ç†èƒ½åŠ›\rå°æ–‡ä»¶ (\u0026lt; 100KB)ï¼šç¬é—´å®Œæˆ ä¸­ç­‰æ–‡ä»¶ (100KB-1MB)ï¼š1-2ç§’ å¤§æ–‡ä»¶ (\u0026gt; 1MB)ï¼šæ ¹æ®å†…å®¹å¤æ‚åº¦ï¼Œé€šå¸¸åœ¨5ç§’å†… æ³¨æ„ï¼šæœ¬å·¥å…·ä¸“ä¸ºé…ç½®æ–‡ä»¶è½¬æ¢è®¾è®¡ï¼Œä¸é€‚ç”¨äºå…¶ä»–ç±»å‹çš„æ–‡ä»¶è½¬æ¢ã€‚è½¬æ¢å‰å»ºè®®å¤‡ä»½åŸå§‹æ–‡ä»¶ã€‚\n","date":"2026-02-09T00:32:40+08:00","permalink":"https://zg-dd.github.io/blog/properties-to-yaml/","title":"Propertiesè½¬YAMLè½¬æ¢å·¥å…·"},{"content":"1. å¹¶å‘ç¼–ç¨‹åŸºç¡€æ¦‚å¿µ\rå¹¶å‘ç¼–ç¨‹æ˜¯ç°ä»£è½¯ä»¶å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„æŠ€èƒ½ã€‚å¦‚æœè¯´ä¼ ç»Ÿçš„é¡ºåºæ‰§è¡Œåƒæ˜¯ä¸€ä¸ªäººæŒ‰éƒ¨å°±ç­åœ°å®Œæˆä»»åŠ¡ï¼Œé‚£ä¹ˆå¹¶å‘å°±åƒæ˜¯åŒæ—¶æŒ‡æŒ¥å¤šä¸ªå·¥äººå¹¶è¡Œå·¥ä½œã€‚Goè¯­è¨€å¤©ç”Ÿæ”¯æŒå¹¶å‘ï¼Œè®©å¹¶å‘ç¼–ç¨‹å˜å¾—ç®€å•è€Œé«˜æ•ˆã€‚\n1.1 ä»€ä¹ˆæ˜¯å¹¶å‘\rè®©æˆ‘ä»¬é€šè¿‡ç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥ç†è§£å¹¶å‘ï¼š\nç°å®åœºæ™¯å¯¹æ¯”ï¼š\né¡ºåºæ‰§è¡Œï¼šä¸€ä¸ªäººåšé¥­ â†’ æ´—ç¢— â†’ æ‰“æ‰«å«ç”Ÿï¼ˆæ€»å…±éœ€è¦3å°æ—¶ï¼‰ å¹¶å‘æ‰§è¡Œï¼šä¸€ä¸ªäººåšé¥­çš„åŒæ—¶ï¼Œå¦ä¸€ä¸ªäººæ´—ç¢—ï¼Œç¬¬ä¸‰äººæ‰“æ‰«å«ç”Ÿï¼ˆæ€»å…±åªéœ€1å°æ—¶ï¼‰ ç¨‹åºä¸­çš„å¹¶å‘ï¼š\né¡ºåºæ‰§è¡Œï¼šæ‰§è¡Œä»»åŠ¡A â†’ æ‰§è¡Œä»»åŠ¡B â†’ æ‰§è¡Œä»»åŠ¡C å¹¶å‘æ‰§è¡Œï¼šåŒæ—¶æ‰§è¡Œä»»åŠ¡Aã€Bã€C 1.2 å¹¶å‘ vs å¹¶è¡Œ vs ä¸²è¡Œ\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) // ä¸²è¡Œæ‰§è¡Œç¤ºä¾‹ func serialExecution() { fmt.Println(\u0026#34;=== ä¸²è¡Œæ‰§è¡Œ ===\u0026#34;) start := time.Now() task1() task2() task3() elapsed := time.Since(start) fmt.Printf(\u0026#34;ä¸²è¡Œæ‰§è¡Œæ€»è€—æ—¶ï¼š%v\\n\\n\u0026#34;, elapsed) } // å¹¶å‘æ‰§è¡Œç¤ºä¾‹ func concurrentExecution() { fmt.Println(\u0026#34;=== å¹¶å‘æ‰§è¡Œ ===\u0026#34;) start := time.Now() // å¯åŠ¨3ä¸ªgoroutineå¹¶å‘æ‰§è¡Œ go task1() go task2() go task3() // ç­‰å¾…ä¸€æ®µæ—¶é—´è®©goroutineæ‰§è¡Œå®Œæˆ time.Sleep(2 * time.Second) elapsed := time.Since(start) fmt.Printf(\u0026#34;å¹¶å‘æ‰§è¡Œæ€»è€—æ—¶ï¼š%v\\n\\n\u0026#34;, elapsed) } // æ¨¡æ‹Ÿè€—æ—¶ä»»åŠ¡ func task1() { fmt.Println(\u0026#34;ä»»åŠ¡1å¼€å§‹æ‰§è¡Œ...\u0026#34;) time.Sleep(1 * time.Second) fmt.Println(\u0026#34;ä»»åŠ¡1æ‰§è¡Œå®Œæˆ\u0026#34;) } func task2() { fmt.Println(\u0026#34;ä»»åŠ¡2å¼€å§‹æ‰§è¡Œ...\u0026#34;) time.Sleep(1 * time.Second) fmt.Println(\u0026#34;ä»»åŠ¡2æ‰§è¡Œå®Œæˆ\u0026#34;) } func task3() { fmt.Println(\u0026#34;ä»»åŠ¡3å¼€å§‹æ‰§è¡Œ...\u0026#34;) time.Sleep(1 * time.Second) fmt.Println(\u0026#34;ä»»åŠ¡3æ‰§è¡Œå®Œæˆ\u0026#34;) } func main() { serialExecution() concurrentExecution() // è§£é‡Šå¹¶å‘çš„ä¼˜åŠ¿ fmt.Println(\u0026#34;=== å¹¶å‘ä¼˜åŠ¿è¯´æ˜ ===\u0026#34;) fmt.Println(\u0026#34;1. æé«˜ç¨‹åºæ‰§è¡Œæ•ˆç‡\u0026#34;) fmt.Println(\u0026#34;2. æ›´å¥½åœ°åˆ©ç”¨å¤šæ ¸CPU\u0026#34;) fmt.Println(\u0026#34;3. æ”¹å–„ç”¨æˆ·ä½“éªŒï¼ˆå“åº”æ›´å¿«ï¼‰\u0026#34;) fmt.Println(\u0026#34;4. å¤„ç†I/Oå¯†é›†å‹ä»»åŠ¡æ›´æœ‰æ•ˆ\u0026#34;) } è¿è¡Œç»“æœï¼š\n=== ä¸²è¡Œæ‰§è¡Œ === ä»»åŠ¡1å¼€å§‹æ‰§è¡Œ... ä»»åŠ¡1æ‰§è¡Œå®Œæˆ ä»»åŠ¡2å¼€å§‹æ‰§è¡Œ... ä»»åŠ¡2æ‰§è¡Œå®Œæˆ ä»»åŠ¡3å¼€å§‹æ‰§è¡Œ... ä»»åŠ¡3æ‰§è¡Œå®Œæˆ ä¸²è¡Œæ‰§è¡Œæ€»è€—æ—¶ï¼š3.004s === å¹¶å‘æ‰§è¡Œ === ä»»åŠ¡1å¼€å§‹æ‰§è¡Œ... ä»»åŠ¡2å¼€å§‹æ‰§è¡Œ... ä»»åŠ¡3å¼€å§‹æ‰§è¡Œ... ä»»åŠ¡1æ‰§è¡Œå®Œæˆ ä»»åŠ¡2æ‰§è¡Œå®Œæˆ ä»»åŠ¡3æ‰§è¡Œå®Œæˆ å¹¶å‘æ‰§è¡Œæ€»è€—æ—¶ï¼š1.001s === å¹¶å‘ä¼˜åŠ¿è¯´æ˜ === 1. æé«˜ç¨‹åºæ‰§è¡Œæ•ˆç‡ 2. æ›´å¥½åœ°åˆ©ç”¨å¤šæ ¸CPU 3. æ”¹å–„ç”¨æˆ·ä½“éªŒï¼ˆå“åº”æ›´å¿«ï¼‰ 4. å¤„ç†I/Oå¯†é›†å‹ä»»åŠ¡æ›´æœ‰æ•ˆ 1.3 Goå¹¶å‘çš„æ ¸å¿ƒç»„ä»¶\rGoå¹¶å‘ç¼–ç¨‹ä¸»è¦ä¾é ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š\nGoroutineï¼šè½»é‡çº§çº¿ç¨‹ï¼Œç”±Goè¿è¡Œæ—¶ç®¡ç† Channelï¼šç”¨äºgoroutineä¹‹é—´é€šä¿¡å’ŒåŒæ­¥çš„ç®¡é“ package main import ( \u0026#34;fmt\u0026#34; \u0026#34;runtime\u0026#34; \u0026#34;time\u0026#34; ) func demonstrateGoroutineBasics() { fmt.Println(\u0026#34;=== GoroutineåŸºç¡€æ¼”ç¤º ===\u0026#34;) // æŸ¥çœ‹å½“å‰goroutineæ•°é‡ fmt.Printf(\u0026#34;åˆå§‹goroutineæ•°é‡ï¼š%d\\n\u0026#34;, runtime.NumGoroutine()) // å¯åŠ¨å¤šä¸ªgoroutine for i := 1; i \u0026lt;= 5; i++ { go func(id int) { fmt.Printf(\u0026#34;Goroutine %d å¼€å§‹æ‰§è¡Œ\\n\u0026#34;, id) time.Sleep(time.Duration(id) * 100 * time.Millisecond) fmt.Printf(\u0026#34;Goroutine %d æ‰§è¡Œå®Œæˆ\\n\u0026#34;, id) }(i) } fmt.Printf(\u0026#34;å¯åŠ¨ågoroutineæ•°é‡ï¼š%d\\n\u0026#34;, runtime.NumGoroutine()) // ç­‰å¾…goroutineæ‰§è¡Œå®Œæˆ time.Sleep(1 * time.Second) fmt.Printf(\u0026#34;æœ€ç»ˆgoroutineæ•°é‡ï¼š%d\\n\u0026#34;, runtime.NumGoroutine()) } func demonstrateChannelBasics() { fmt.Println(\u0026#34;\\n=== ChannelåŸºç¡€æ¼”ç¤º ===\u0026#34;) // åˆ›å»ºchannel ch := make(chan string) // å¯åŠ¨ç”Ÿäº§è€…goroutine go func() { fmt.Println(\u0026#34;ç”Ÿäº§è€…ï¼šå‡†å¤‡å‘é€æ•°æ®...\u0026#34;) ch \u0026lt;- \u0026#34;Hello from goroutine!\u0026#34; // å‘é€æ•°æ®åˆ°channel fmt.Println(\u0026#34;ç”Ÿäº§è€…ï¼šæ•°æ®å‘é€å®Œæˆ\u0026#34;) }() // ä¸»goroutineä½œä¸ºæ¶ˆè´¹è€… fmt.Println(\u0026#34;ä¸»ç¨‹åºï¼šç­‰å¾…æ¥æ”¶æ•°æ®...\u0026#34;) message := \u0026lt;-ch // ä»channelæ¥æ”¶æ•°æ® fmt.Printf(\u0026#34;ä¸»ç¨‹åºï¼šæ¥æ”¶åˆ°æ•°æ®ï¼š%s\\n\u0026#34;, message) } func main() { demonstrateGoroutineBasics() demonstrateChannelBasics() } è¿è¡Œç»“æœï¼š\n=== GoroutineåŸºç¡€æ¼”ç¤º === åˆå§‹goroutineæ•°é‡ï¼š1 å¯åŠ¨ågoroutineæ•°é‡ï¼š6 Goroutine 5 å¼€å§‹æ‰§è¡Œ Goroutine 1 å¼€å§‹æ‰§è¡Œ Goroutine 2 å¼€å§‹æ‰§è¡Œ Goroutine 3 å¼€å§‹æ‰§è¡Œ Goroutine 4 å¼€å§‹æ‰§è¡Œ Goroutine 1 æ‰§è¡Œå®Œæˆ Goroutine 2 æ‰§è¡Œå®Œæˆ Goroutine 3 æ‰§è¡Œå®Œæˆ Goroutine 4 æ‰§è¡Œå®Œæˆ Goroutine 5 æ‰§è¡Œå®Œæˆ æœ€ç»ˆgoroutineæ•°é‡ï¼š1 === ChannelåŸºç¡€æ¼”ç¤º === ä¸»ç¨‹åºï¼šç­‰å¾…æ¥æ”¶æ•°æ®... ç”Ÿäº§è€…ï¼šå‡†å¤‡å‘é€æ•°æ®... ç”Ÿäº§è€…ï¼šæ•°æ®å‘é€å®Œæˆ ä¸»ç¨‹åºï¼šæ¥æ”¶åˆ°æ•°æ®ï¼šHello from goroutine! 2. Goroutineè¯¦è§£\r2.1 Goroutineçš„åˆ›å»ºå’Œç®¡ç†\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;runtime\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) // WaitGroupç”¨äºç­‰å¾…ä¸€ç»„goroutineå®Œæˆ func demonstrateWaitGroup() { fmt.Println(\u0026#34;=== ä½¿ç”¨WaitGroupç­‰å¾…goroutineå®Œæˆ ===\u0026#34;) var wg sync.WaitGroup tasks := []string{\u0026#34;ä»»åŠ¡A\u0026#34;, \u0026#34;ä»»åŠ¡B\u0026#34;, \u0026#34;ä»»åŠ¡C\u0026#34;, \u0026#34;ä»»åŠ¡D\u0026#34;} // ä¸ºæ¯ä¸ªä»»åŠ¡æ·»åŠ è®¡æ•° wg.Add(len(tasks)) for i, task := range tasks { go func(id int, name string) { defer wg.Done() // ä»»åŠ¡å®Œæˆæ—¶å‡å°‘è®¡æ•° fmt.Printf(\u0026#34;å¼€å§‹æ‰§è¡Œ%s (goroutine %d)\\n\u0026#34;, name, id) time.Sleep(time.Duration(id+1) * 500 * time.Millisecond) fmt.Printf(\u0026#34;%sæ‰§è¡Œå®Œæˆ (goroutine %d)\\n\u0026#34;, name, id) }(i, task) } fmt.Println(\u0026#34;ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ...\u0026#34;) wg.Wait() // ç­‰å¾…æ‰€æœ‰goroutineå®Œæˆ fmt.Println(\u0026#34;æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼\u0026#34;) } // å¸¦å‚æ•°çš„goroutine func demonstrateGoroutineParameters() { fmt.Println(\u0026#34;\\n=== å¸¦å‚æ•°çš„Goroutine ===\u0026#34;) // æ–¹æ³•1ï¼šä½¿ç”¨åŒ¿åå‡½æ•°æ•è·å‚æ•° for i := 1; i \u0026lt;= 3; i++ { value := i // é‡è¦ï¼šåˆ›å»ºå±€éƒ¨å˜é‡å‰¯æœ¬ go func() { fmt.Printf(\u0026#34;æ–¹æ³•1 - å€¼ï¼š%d\\n\u0026#34;, value) }() } // æ–¹æ³•2ï¼šé€šè¿‡å‡½æ•°å‚æ•°ä¼ é€’ for i := 1; i \u0026lt;= 3; i++ { go func(val int) { fmt.Printf(\u0026#34;æ–¹æ³•2 - å€¼ï¼š%d\\n\u0026#34;, val) }(i) } time.Sleep(100 * time.Millisecond) } // Goroutineç”Ÿå‘½å‘¨æœŸç®¡ç† func demonstrateLifecycle() { fmt.Println(\u0026#34;\\n=== Goroutineç”Ÿå‘½å‘¨æœŸ ===\u0026#34;) // åˆ›å»ºä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„goroutine stop := make(chan bool) go func() { for { select { case \u0026lt;-stop: fmt.Println(\u0026#34;Goroutineæ”¶åˆ°åœæ­¢ä¿¡å·ï¼Œæ­£åœ¨é€€å‡º...\u0026#34;) return default: fmt.Println(\u0026#34;Goroutineæ­£åœ¨å·¥ä½œä¸­...\u0026#34;) time.Sleep(300 * time.Millisecond) } } }() // è®©goroutineè¿è¡Œä¸€æ®µæ—¶é—´ time.Sleep(1 * time.Second) // å‘é€åœæ­¢ä¿¡å· fmt.Println(\u0026#34;å‘é€åœæ­¢ä¿¡å·...\u0026#34;) stop \u0026lt;- true // ç­‰å¾…ç¡®è®¤åœæ­¢ time.Sleep(500 * time.Millisecond) fmt.Println(\u0026#34;ä¸»ç¨‹åºç»“æŸ\u0026#34;) } func main() { demonstrateWaitGroup() demonstrateGoroutineParameters() demonstrateLifecycle() // æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ fmt.Println(\u0026#34;\\n=== ç³»ç»Ÿä¿¡æ¯ ===\u0026#34;) fmt.Printf(\u0026#34;CPUæ ¸å¿ƒæ•°ï¼š%d\\n\u0026#34;, runtime.NumCPU()) fmt.Printf(\u0026#34;å½“å‰goroutineæ•°é‡ï¼š%d\\n\u0026#34;, runtime.NumGoroutine()) } è¿è¡Œç»“æœï¼š\n=== ä½¿ç”¨WaitGroupç­‰å¾…goroutineå®Œæˆ === ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ... å¼€å§‹æ‰§è¡Œä»»åŠ¡A (goroutine 0) å¼€å§‹æ‰§è¡Œä»»åŠ¡B (goroutine 1) å¼€å§‹æ‰§è¡Œä»»åŠ¡C (goroutine 2) å¼€å§‹æ‰§è¡Œä»»åŠ¡D (goroutine 3) ä»»åŠ¡Aæ‰§è¡Œå®Œæˆ (goroutine 0) ä»»åŠ¡Bæ‰§è¡Œå®Œæˆ (goroutine 1) ä»»åŠ¡Cæ‰§è¡Œå®Œæˆ (goroutine 2) ä»»åŠ¡Dæ‰§è¡Œå®Œæˆ (goroutine 3) æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼ === å¸¦å‚æ•°çš„Goroutine === æ–¹æ³•1 - å€¼ï¼š1 æ–¹æ³•1 - å€¼ï¼š2 æ–¹æ³•1 - å€¼ï¼š3 æ–¹æ³•2 - å€¼ï¼š1 æ–¹æ³•2 - å€¼ï¼š2 æ–¹æ³•2 - å€¼ï¼š3 === Goroutineç”Ÿå‘½å‘¨æœŸ === Goroutineæ­£åœ¨å·¥ä½œä¸­... Goroutineæ­£åœ¨å·¥ä½œä¸­... Goroutineæ­£åœ¨å·¥ä½œä¸­... å‘é€åœæ­¢ä¿¡å·... Goroutineæ”¶åˆ°åœæ­¢ä¿¡å·ï¼Œæ­£åœ¨é€€å‡º... ä¸»ç¨‹åºç»“æŸ === ç³»ç»Ÿä¿¡æ¯ === CPUæ ¸å¿ƒæ•°ï¼š8 å½“å‰goroutineæ•°é‡ï¼š1 2.2 Goroutineè°ƒåº¦æœºåˆ¶\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;runtime\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) func demonstrateScheduler() { fmt.Println(\u0026#34;=== Goroutineè°ƒåº¦æ¼”ç¤º ===\u0026#34;) var wg sync.WaitGroup wg.Add(2) // CPUå¯†é›†å‹ä»»åŠ¡ go func() { defer wg.Done() fmt.Println(\u0026#34;CPUå¯†é›†å‹ä»»åŠ¡å¼€å§‹\u0026#34;) count := 0 for i := 0; i \u0026lt; 1000000; i++ { count += i } fmt.Printf(\u0026#34;CPUå¯†é›†å‹ä»»åŠ¡å®Œæˆï¼Œcount=%d\\n\u0026#34;, count) }() // I/Oå¯†é›†å‹ä»»åŠ¡ go func() { defer wg.Done() fmt.Println(\u0026#34;I/Oå¯†é›†å‹ä»»åŠ¡å¼€å§‹\u0026#34;) time.Sleep(100 * time.Millisecond) // æ¨¡æ‹ŸI/Oç­‰å¾… fmt.Println(\u0026#34;I/Oå¯†é›†å‹ä»»åŠ¡å®Œæˆ\u0026#34;) }() wg.Wait() fmt.Println(\u0026#34;æ‰€æœ‰ä»»åŠ¡å®Œæˆ\u0026#34;) } func demonstratePreemption() { fmt.Println(\u0026#34;\\n=== æŠ¢å å¼è°ƒåº¦æ¼”ç¤º ===\u0026#34;) // åˆ›å»ºå¤šä¸ªçŸ­ä»»åŠ¡æ¥è§‚å¯Ÿè°ƒåº¦ var wg sync.WaitGroup taskCount := 10 wg.Add(taskCount) for i := 0; i \u0026lt; taskCount; i++ { go func(id int) { defer wg.Done() fmt.Printf(\u0026#34;ä»»åŠ¡%då¼€å§‹æ‰§è¡Œ\\n\u0026#34;, id) // æ¨¡æ‹Ÿä¸€äº›å·¥ä½œ for j := 0; j \u0026lt; 100000; j++ { _ = j * j // CPUè®¡ç®— } fmt.Printf(\u0026#34;ä»»åŠ¡%dæ‰§è¡Œå®Œæˆ\\n\u0026#34;, id) }(i) } wg.Wait() fmt.Println(\u0026#34;æ‰€æœ‰çŸ­ä»»åŠ¡å®Œæˆ\u0026#34;) } func main() { demonstrateScheduler() demonstratePreemption() // æ˜¾ç¤ºè°ƒåº¦å™¨ä¿¡æ¯ fmt.Println(\u0026#34;\\n=== è°ƒåº¦å™¨ä¿¡æ¯ ===\u0026#34;) fmt.Printf(\u0026#34;GOMAXPROCSï¼š%d\\n\u0026#34;, runtime.GOMAXPROCS(0)) fmt.Printf(\u0026#34;NumCPUï¼š%d\\n\u0026#34;, runtime.NumCPU()) // è®¾ç½®GOMAXPROCS old := runtime.GOMAXPROCS(2) fmt.Printf(\u0026#34;æ—§çš„GOMAXPROCSï¼š%dï¼Œæ–°çš„GOMAXPROCSï¼š%d\\n\u0026#34;, old, runtime.GOMAXPROCS(0)) } è¿è¡Œç»“æœï¼š\n=== Goroutineè°ƒåº¦æ¼”ç¤º === CPUå¯†é›†å‹ä»»åŠ¡å¼€å§‹ I/Oå¯†é›†å‹ä»»åŠ¡å¼€å§‹ I/Oå¯†é›†å‹ä»»åŠ¡å®Œæˆ CPUå¯†é›†å‹ä»»åŠ¡å®Œæˆï¼Œcount=499999500000 æ‰€æœ‰ä»»åŠ¡å®Œæˆ === æŠ¢å å¼è°ƒåº¦æ¼”ç¤º === ä»»åŠ¡9å¼€å§‹æ‰§è¡Œ ä»»åŠ¡0å¼€å§‹æ‰§è¡Œ ä»»åŠ¡1å¼€å§‹æ‰§è¡Œ ä»»åŠ¡2å¼€å§‹æ‰§è¡Œ ä»»åŠ¡3å¼€å§‹æ‰§è¡Œ ä»»åŠ¡4å¼€å§‹æ‰§è¡Œ ä»»åŠ¡5å¼€å§‹æ‰§è¡Œ ä»»åŠ¡6å¼€å§‹æ‰§è¡Œ ä»»åŠ¡7å¼€å§‹æ‰§è¡Œ ä»»åŠ¡8å¼€å§‹æ‰§è¡Œ ä»»åŠ¡9æ‰§è¡Œå®Œæˆ ä»»åŠ¡0æ‰§è¡Œå®Œæˆ ä»»åŠ¡1æ‰§è¡Œå®Œæˆ ä»»åŠ¡2æ‰§è¡Œå®Œæˆ ä»»åŠ¡3æ‰§è¡Œå®Œæˆ ä»»åŠ¡4æ‰§è¡Œå®Œæˆ ä»»åŠ¡5æ‰§è¡Œå®Œæˆ ä»»åŠ¡6æ‰§è¡Œå®Œæˆ ä»»åŠ¡7æ‰§è¡Œå®Œæˆ ä»»åŠ¡8æ‰§è¡Œå®Œæˆ æ‰€æœ‰çŸ­ä»»åŠ¡å®Œæˆ === è°ƒåº¦å™¨ä¿¡æ¯ === GOMAXPROCSï¼š8 NumCPUï¼š8 æ—§çš„GOMAXPROCSï¼š8ï¼Œæ–°çš„GOMAXPROCSï¼š2 3. Channelè¯¦è§£\r3.1 ChannelåŸºç¡€æ“ä½œ\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) // åŸºæœ¬channelæ“ä½œ func basicChannelOperations() { fmt.Println(\u0026#34;=== åŸºæœ¬Channelæ“ä½œ ===\u0026#34;) // 1. åˆ›å»ºchannel ch := make(chan int) // 2. å‘é€æ•°æ® go func() { fmt.Println(\u0026#34;å‘é€æ•°æ®ï¼š100\u0026#34;) ch \u0026lt;- 100 fmt.Println(\u0026#34;å‘é€æ•°æ®ï¼š200\u0026#34;) ch \u0026lt;- 200 }() // 3. æ¥æ”¶æ•°æ® value1 := \u0026lt;-ch fmt.Printf(\u0026#34;æ¥æ”¶åˆ°ï¼š%d\\n\u0026#34;, value1) value2 := \u0026lt;-ch fmt.Printf(\u0026#34;æ¥æ”¶åˆ°ï¼š%d\\n\u0026#34;, value2) } // å¸¦ç¼“å†²çš„channel func bufferedChannel() { fmt.Println(\u0026#34;\\n=== å¸¦ç¼“å†²çš„Channel ===\u0026#34;) // åˆ›å»ºå¸¦ç¼“å†²çš„channelï¼ˆç¼“å†²åŒºå¤§å°ä¸º2ï¼‰ ch := make(chan string, 2) // å¯ä»¥è¿ç»­å‘é€è€Œä¸é˜»å¡ï¼ˆç¼“å†²åŒºæœªæ»¡æ—¶ï¼‰ ch \u0026lt;- \u0026#34;æ¶ˆæ¯1\u0026#34; fmt.Println(\u0026#34;å·²å‘é€æ¶ˆæ¯1\u0026#34;) ch \u0026lt;- \u0026#34;æ¶ˆæ¯2\u0026#34; fmt.Println(\u0026#34;å·²å‘é€æ¶ˆæ¯2\u0026#34;) // ç¼“å†²åŒºæ»¡äº†ï¼Œè¿™ä¼šé˜»å¡ fmt.Println(\u0026#34;å‡†å¤‡å‘é€æ¶ˆæ¯3...\u0026#34;) go func() { ch \u0026lt;- \u0026#34;æ¶ˆæ¯3\u0026#34; fmt.Println(\u0026#34;æ¶ˆæ¯3å‘é€å®Œæˆ\u0026#34;) }() // æ¥æ”¶æ•°æ® msg1 := \u0026lt;-ch fmt.Printf(\u0026#34;æ¥æ”¶åˆ°ï¼š%s\\n\u0026#34;, msg1) msg2 := \u0026lt;-ch fmt.Printf(\u0026#34;æ¥æ”¶åˆ°ï¼š%s\\n\u0026#34;, msg2) msg3 := \u0026lt;-ch fmt.Printf(\u0026#34;æ¥æ”¶åˆ°ï¼š%s\\n\u0026#34;, msg3) } // å•å‘channel func directionalChannel() { fmt.Println(\u0026#34;\\n=== å•å‘Channel ===\u0026#34;) ch := make(chan int) // å‘é€æ–¹ï¼šåªèƒ½å‘é€æ•°æ® go sendOnly(ch) // æ¥æ”¶æ–¹ï¼šåªèƒ½æ¥æ”¶æ•°æ® receiveOnly(ch) } func sendOnly(ch chan\u0026lt;- int) { fmt.Println(\u0026#34;å‘é€æ–¹ï¼šå‘é€æ•°æ®\u0026#34;) ch \u0026lt;- 42 fmt.Println(\u0026#34;å‘é€æ–¹ï¼šå‘é€å®Œæˆ\u0026#34;) } func receiveOnly(ch \u0026lt;-chan int) { fmt.Println(\u0026#34;æ¥æ”¶æ–¹ï¼šç­‰å¾…æ•°æ®\u0026#34;) value := \u0026lt;-ch fmt.Printf(\u0026#34;æ¥æ”¶æ–¹ï¼šæ¥æ”¶åˆ° %d\\n\u0026#34;, value) } // channelå…³é—­å’Œrange func channelCloseAndRange() { fmt.Println(\u0026#34;\\n=== Channelå…³é—­å’ŒRange ===\u0026#34;) ch := make(chan int, 3) // å‘é€æ•°æ® go func() { for i := 1; i \u0026lt;= 5; i++ { ch \u0026lt;- i fmt.Printf(\u0026#34;å‘é€ï¼š%d\\n\u0026#34;, i) time.Sleep(100 * time.Millisecond) } close(ch) // å…³é—­channel fmt.Println(\u0026#34;Channelå·²å…³é—­\u0026#34;) }() // ä½¿ç”¨rangeæ¥æ”¶æ‰€æœ‰æ•°æ® fmt.Println(\u0026#34;å¼€å§‹æ¥æ”¶æ•°æ®...\u0026#34;) for value := range ch { fmt.Printf(\u0026#34;æ¥æ”¶åˆ°ï¼š%d\\n\u0026#34;, value) } fmt.Println(\u0026#34;æ¥æ”¶å®Œæˆ\u0026#34;) } func main() { basicChannelOperations() bufferedChannel() directionalChannel() channelCloseAndRange() } è¿è¡Œç»“æœï¼š\n=== åŸºæœ¬Channelæ“ä½œ === å‘é€æ•°æ®ï¼š100 æ¥æ”¶åˆ°ï¼š100 å‘é€æ•°æ®ï¼š200 æ¥æ”¶åˆ°ï¼š200 === å¸¦ç¼“å†²çš„Channel === å·²å‘é€æ¶ˆæ¯1 å·²å‘é€æ¶ˆæ¯2 å‡†å¤‡å‘é€æ¶ˆæ¯3... æ¥æ”¶åˆ°ï¼šæ¶ˆæ¯1 æ¥æ”¶åˆ°ï¼šæ¶ˆæ¯2 æ¶ˆæ¯3å‘é€å®Œæˆ æ¥æ”¶åˆ°ï¼šæ¶ˆæ¯3 === å•å‘Channel === æ¥æ”¶æ–¹ï¼šç­‰å¾…æ•°æ® å‘é€æ–¹ï¼šå‘é€æ•°æ® å‘é€æ–¹ï¼šå‘é€å®Œæˆ æ¥æ”¶æ–¹ï¼šæ¥æ”¶åˆ° 42 === Channelå…³é—­å’ŒRange === å¼€å§‹æ¥æ”¶æ•°æ®... å‘é€ï¼š1 æ¥æ”¶åˆ°ï¼š1 å‘é€ï¼š2 æ¥æ”¶åˆ°ï¼š2 å‘é€ï¼š3 æ¥æ”¶åˆ°ï¼š3 å‘é€ï¼š4 æ¥æ”¶åˆ°ï¼š4 å‘é€ï¼š5 æ¥æ”¶åˆ°ï¼š5 Channelå·²å…³é—­ æ¥æ”¶å®Œæˆ 3.2 Selectè¯­å¥\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) // åŸºæœ¬selectç”¨æ³• func basicSelect() { fmt.Println(\u0026#34;=== åŸºæœ¬Selectç”¨æ³• ===\u0026#34;) ch1 := make(chan string) ch2 := make(chan string) go func() { time.Sleep(100 * time.Millisecond) ch1 \u0026lt;- \u0026#34;æ¥è‡ªchannel1çš„æ¶ˆæ¯\u0026#34; }() go func() { time.Sleep(200 * time.Millisecond) ch2 \u0026lt;- \u0026#34;æ¥è‡ªchannel2çš„æ¶ˆæ¯\u0026#34; }() // selectç­‰å¾…å¤šä¸ªchannelæ“ä½œ for i := 0; i \u0026lt; 2; i++ { select { case msg1 := \u0026lt;-ch1: fmt.Printf(\u0026#34;æ¥æ”¶åˆ°ï¼š%s\\n\u0026#34;, msg1) case msg2 := \u0026lt;-ch2: fmt.Printf(\u0026#34;æ¥æ”¶åˆ°ï¼š%s\\n\u0026#34;, msg2) } } } // å¸¦é»˜è®¤åˆ†æ”¯çš„select func selectWithDefault() { fmt.Println(\u0026#34;\\n=== å¸¦é»˜è®¤åˆ†æ”¯çš„Select ===\u0026#34;) ch := make(chan int) // ä¸é˜»å¡çš„select select { case value := \u0026lt;-ch: fmt.Printf(\u0026#34;æ¥æ”¶åˆ°ï¼š%d\\n\u0026#34;, value) default: fmt.Println(\u0026#34;æ²¡æœ‰æ•°æ®å¯æ¥æ”¶ï¼Œæ‰§è¡Œé»˜è®¤åˆ†æ”¯\u0026#34;) } // å‘é€æ•°æ® go func() { time.Sleep(100 * time.Millisecond) ch \u0026lt;- 42 }() // ç­‰å¾…å¹¶æ¥æ”¶ select { case value := \u0026lt;-ch: fmt.Printf(\u0026#34;ç°åœ¨æ¥æ”¶åˆ°ï¼š%d\\n\u0026#34;, value) case \u0026lt;-time.After(200 * time.Millisecond): fmt.Println(\u0026#34;è¶…æ—¶äº†\u0026#34;) } } // è¶…æ—¶æ§åˆ¶ func timeoutControl() { fmt.Println(\u0026#34;\\n=== è¶…æ—¶æ§åˆ¶ ===\u0026#34;) ch := make(chan string) // æ¨¡æ‹Ÿå¯èƒ½è¶…æ—¶çš„æ“ä½œ go func() { // éšæœºå†³å®šæ˜¯å¦è¶…æ—¶ time.Sleep(time.Duration(150) * time.Millisecond) ch \u0026lt;- \u0026#34;æ“ä½œå®Œæˆ\u0026#34; }() // ä½¿ç”¨selectå®ç°è¶…æ—¶ select { case result := \u0026lt;-ch: fmt.Printf(\u0026#34;æˆåŠŸï¼š%s\\n\u0026#34;, result) case \u0026lt;-time.After(100 * time.Millisecond): fmt.Println(\u0026#34;æ“ä½œè¶…æ—¶\u0026#34;) } } // å¤šè·¯å¤ç”¨ func multiplexing() { fmt.Println(\u0026#34;\\n=== å¤šè·¯å¤ç”¨ ===\u0026#34;) // åˆ›å»ºå¤šä¸ªchannel channels := make([]chan int, 3) for i := range channels { channels[i] = make(chan int) } // å¯åŠ¨å¤šä¸ªç”Ÿäº§è€… for i, ch := range channels { go func(id int, c chan int) { time.Sleep(time.Duration(id*100) * time.Millisecond) c \u0026lt;- id * 10 }(i, ch) } // ä½¿ç”¨selectå¤šè·¯å¤ç”¨æ¥æ”¶ received := 0 for received \u0026lt; len(channels) { select { case val := \u0026lt;-channels[0]: fmt.Printf(\u0026#34;ä»channel 0æ¥æ”¶åˆ°ï¼š%d\\n\u0026#34;, val) received++ case val := \u0026lt;-channels[1]: fmt.Printf(\u0026#34;ä»channel 1æ¥æ”¶åˆ°ï¼š%d\\n\u0026#34;, val) received++ case val := \u0026lt;-channels[2]: fmt.Printf(\u0026#34;ä»channel 2æ¥æ”¶åˆ°ï¼š%d\\n\u0026#34;, val) received++ } } } func main() { basicSelect() selectWithDefault() timeoutControl() multiplexing() } è¿è¡Œç»“æœï¼š\n=== åŸºæœ¬Selectç”¨æ³• === æ¥æ”¶åˆ°ï¼šæ¥è‡ªchannel1çš„æ¶ˆæ¯ æ¥æ”¶åˆ°ï¼šæ¥è‡ªchannel2çš„æ¶ˆæ¯ === å¸¦é»˜è®¤åˆ†æ”¯çš„Select === æ²¡æœ‰æ•°æ®å¯æ¥æ”¶ï¼Œæ‰§è¡Œé»˜è®¤åˆ†æ”¯ ç°åœ¨æ¥æ”¶åˆ°ï¼š42 === è¶…æ—¶æ§åˆ¶ === æ“ä½œè¶…æ—¶ === å¤šè·¯å¤ç”¨ === ä»channel 0æ¥æ”¶åˆ°ï¼š0 ä»channel 1æ¥æ”¶åˆ°ï¼š10 ä»channel 2æ¥æ”¶åˆ°ï¼š20 4. å®é™…åº”ç”¨åœºæ™¯\r4.1 Worker Poolæ¨¡å¼\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) // å·¥ä½œä»»åŠ¡ç»“æ„ type Job struct { ID int Data string } // å·¥ä½œç»“æœç»“æ„ type Result struct { JobID int Value string Error error } // Worker Poolå®ç° type WorkerPool struct { workers int jobQueue chan Job resultChan chan Result wg sync.WaitGroup } func NewWorkerPool(workers int) *WorkerPool { return \u0026amp;WorkerPool{ workers: workers, jobQueue: make(chan Job, 100), resultChan: make(chan Result, 100), } } func (wp *WorkerPool) Start() { for i := 0; i \u0026lt; wp.workers; i++ { wp.wg.Add(1) go wp.worker(i) } } func (wp *WorkerPool) worker(id int) { defer wp.wg.Done() fmt.Printf(\u0026#34;Worker %d å¯åŠ¨\\n\u0026#34;, id) for job := range wp.jobQueue { fmt.Printf(\u0026#34;Worker %d å¤„ç†ä»»åŠ¡ %d\\n\u0026#34;, id, job.ID) // æ¨¡æ‹Ÿå·¥ä½œå¤„ç† time.Sleep(100 * time.Millisecond) // äº§ç”Ÿç»“æœ result := Result{ JobID: job.ID, Value: fmt.Sprintf(\u0026#34;å¤„ç†ç»“æœ-%s\u0026#34;, job.Data), } wp.resultChan \u0026lt;- result } fmt.Printf(\u0026#34;Worker %d åœæ­¢\\n\u0026#34;, id) } func (wp *WorkerPool) Submit(job Job) { wp.jobQueue \u0026lt;- job } func (wp *WorkerPool) GetResult() \u0026lt;-chan Result { return wp.resultChan } func (wp *WorkerPool) Stop() { close(wp.jobQueue) wp.wg.Wait() close(wp.resultChan) } func demonstrateWorkerPool() { fmt.Println(\u0026#34;=== Worker Poolæ¨¡å¼æ¼”ç¤º ===\u0026#34;) // åˆ›å»ºworker pool pool := NewWorkerPool(3) pool.Start() // æäº¤ä»»åŠ¡ jobs := []Job{ {ID: 1, Data: \u0026#34;ä»»åŠ¡1æ•°æ®\u0026#34;}, {ID: 2, Data: \u0026#34;ä»»åŠ¡2æ•°æ®\u0026#34;}, {ID: 3, Data: \u0026#34;ä»»åŠ¡3æ•°æ®\u0026#34;}, {ID: 4, Data: \u0026#34;ä»»åŠ¡4æ•°æ®\u0026#34;}, {ID: 5, Data: \u0026#34;ä»»åŠ¡5æ•°æ®\u0026#34;}, } // æäº¤æ‰€æœ‰ä»»åŠ¡ for _, job := range jobs { pool.Submit(job) } // æ”¶é›†ç»“æœ results := make([]Result, 0, len(jobs)) for i := 0; i \u0026lt; len(jobs); i++ { result := \u0026lt;-pool.GetResult() results = append(results, result) fmt.Printf(\u0026#34;æ”¶åˆ°ç»“æœï¼šä»»åŠ¡%d -\u0026gt; %s\\n\u0026#34;, result.JobID, result.Value) } // åœæ­¢pool pool.Stop() fmt.Println(\u0026#34;Worker Poolå·²åœæ­¢\u0026#34;) } func main() { demonstrateWorkerPool() } è¿è¡Œç»“æœï¼š\n=== Worker Poolæ¨¡å¼æ¼”ç¤º === Worker 2 å¯åŠ¨ Worker 0 å¯åŠ¨ Worker 1 å¯åŠ¨ Worker 0 å¤„ç†ä»»åŠ¡ 1 Worker 2 å¤„ç†ä»»åŠ¡ 2 Worker 1 å¤„ç†ä»»åŠ¡ 3 æ”¶åˆ°ç»“æœï¼šä»»åŠ¡1 -\u0026gt; å¤„ç†ç»“æœ-ä»»åŠ¡1æ•°æ® Worker 0 å¤„ç†ä»»åŠ¡ 4 æ”¶åˆ°ç»“æœï¼šä»»åŠ¡2 -\u0026gt; å¤„ç†ç»“æœ-ä»»åŠ¡2æ•°æ® Worker 2 å¤„ç†ä»»åŠ¡ 5 æ”¶åˆ°ç»“æœï¼šä»»åŠ¡3 -\u0026gt; å¤„ç†ç»“æœ-ä»»åŠ¡3æ•°æ® æ”¶åˆ°ç»“æœï¼šä»»åŠ¡4 -\u0026gt; å¤„ç†ç»“æœ-ä»»åŠ¡4æ•°æ® æ”¶åˆ°ç»“æœï¼šä»»åŠ¡5 -\u0026gt; å¤„ç†ç»“æœ-ä»»åŠ¡5æ•°æ® Worker 0 åœæ­¢ Worker 1 åœæ­¢ Worker 2 åœæ­¢ Worker Poolå·²åœæ­¢ 4.2 ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math/rand\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) type Item struct { ID int Value string } // ç”Ÿäº§è€… func producer(id int, items chan\u0026lt;- Item, wg *sync.WaitGroup) { defer wg.Done() for i := 1; i \u0026lt;= 3; i++ { item := Item{ ID: id*100 + i, Value: fmt.Sprintf(\u0026#34;ç”Ÿäº§è€…%d-äº§å“%d\u0026#34;, id, i), } fmt.Printf(\u0026#34;ç”Ÿäº§è€…%dç”Ÿäº§ï¼š%+v\\n\u0026#34;, id, item) items \u0026lt;- item time.Sleep(time.Duration(rand.Intn(300)) * time.Millisecond) } fmt.Printf(\u0026#34;ç”Ÿäº§è€…%då®Œæˆ\\n\u0026#34;, id) } // æ¶ˆè´¹è€… func consumer(id int, items \u0026lt;-chan Item, wg *sync.WaitGroup) { defer wg.Done() for item := range items { fmt.Printf(\u0026#34;æ¶ˆè´¹è€…%dæ¶ˆè´¹ï¼š%+v\\n\u0026#34;, id, item) // æ¨¡æ‹Ÿå¤„ç†æ—¶é—´ time.Sleep(time.Duration(rand.Intn(200)) * time.Millisecond) } fmt.Printf(\u0026#34;æ¶ˆè´¹è€…%dé€€å‡º\\n\u0026#34;, id) } func demonstrateProducerConsumer() { fmt.Println(\u0026#34;=== ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ ===\u0026#34;) items := make(chan Item, 10) // å¸¦ç¼“å†²çš„channel var wg sync.WaitGroup // å¯åŠ¨ç”Ÿäº§è€… producers := 2 consumers := 3 for i := 1; i \u0026lt;= producers; i++ { wg.Add(1) go producer(i, items, \u0026amp;wg) } // å¯åŠ¨æ¶ˆè´¹è€… for i := 1; i \u0026lt;= consumers; i++ { wg.Add(1) go consumer(i, items, \u0026amp;wg) } // ç­‰å¾…ç”Ÿäº§è€…å®Œæˆ wg.Wait() // å…³é—­channelï¼Œè®©æ¶ˆè´¹è€…çŸ¥é“æ²¡æœ‰æ›´å¤šæ•°æ® close(items) // ç»™æ¶ˆè´¹è€…ä¸€äº›æ—¶é—´å¤„ç†å‰©ä½™æ•°æ® time.Sleep(1 * time.Second) fmt.Println(\u0026#34;æ‰€æœ‰ç”Ÿäº§å’Œæ¶ˆè´¹å®Œæˆ\u0026#34;) } func main() { rand.Seed(time.Now().UnixNano()) demonstrateProducerConsumer() } è¿è¡Œç»“æœï¼š\n=== ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ === ç”Ÿäº§è€…1ç”Ÿäº§ï¼š{ID:101 Value:ç”Ÿäº§è€…1-äº§å“1} ç”Ÿäº§è€…2ç”Ÿäº§ï¼š{ID:201 Value:ç”Ÿäº§è€…2-äº§å“1} æ¶ˆè´¹è€…1æ¶ˆè´¹ï¼š{ID:101 Value:ç”Ÿäº§è€…1-äº§å“1} ç”Ÿäº§è€…1ç”Ÿäº§ï¼š{ID:102 Value:ç”Ÿäº§è€…1-äº§å“2} æ¶ˆè´¹è€…2æ¶ˆè´¹ï¼š{ID:201 Value:ç”Ÿäº§è€…2-äº§å“1} ç”Ÿäº§è€…2ç”Ÿäº§ï¼š{ID:202 Value:ç”Ÿäº§è€…2-äº§å“2} æ¶ˆè´¹è€…3æ¶ˆè´¹ï¼š{ID:102 Value:ç”Ÿäº§è€…1-äº§å“2} ç”Ÿäº§è€…1ç”Ÿäº§ï¼š{ID:103 Value:ç”Ÿäº§è€…1-äº§å“3} æ¶ˆè´¹è€…1æ¶ˆè´¹ï¼š{ID:202 Value:ç”Ÿäº§è€…2-äº§å“2} ç”Ÿäº§è€…2ç”Ÿäº§ï¼š{ID:203 Value:ç”Ÿäº§è€…2-äº§å“3} æ¶ˆè´¹è€…2æ¶ˆè´¹ï¼š{ID:103 Value:ç”Ÿäº§è€…1-äº§å“3} ç”Ÿäº§è€…1å®Œæˆ æ¶ˆè´¹è€…3æ¶ˆè´¹ï¼š{ID:203 Value:ç”Ÿäº§è€…2-äº§å“3} ç”Ÿäº§è€…2å®Œæˆ æ¶ˆè´¹è€…1é€€å‡º æ¶ˆè´¹è€…2é€€å‡º æ¶ˆè´¹è€…3é€€å‡º æ‰€æœ‰ç”Ÿäº§å’Œæ¶ˆè´¹å®Œæˆ 4.3 æ‰‡å…¥æ‰‡å‡ºæ¨¡å¼\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) // æ‰‡å‡ºï¼šä¸€ä¸ªè¾“å…¥ï¼Œå¤šä¸ªè¾“å‡º func fanOut(input \u0026lt;-chan int, outputs []chan\u0026lt;- int) { for value := range input { // å°†æ•°æ®å‘é€åˆ°æ‰€æœ‰è¾“å‡ºchannel for _, output := range outputs { output \u0026lt;- value } } // å…³é—­æ‰€æœ‰è¾“å‡ºchannel for _, output := range outputs { close(output) } } // æ‰‡å…¥ï¼šå¤šä¸ªè¾“å…¥ï¼Œä¸€ä¸ªè¾“å‡º func fanIn(inputs []\u0026lt;-chan int, output chan\u0026lt;- int) { var wg sync.WaitGroup // ä¸ºæ¯ä¸ªè¾“å…¥channelå¯åŠ¨ä¸€ä¸ªgoroutine for _, input := range inputs { wg.Add(1) go func(ch \u0026lt;-chan int) { defer wg.Done() for value := range ch { output \u0026lt;- value } }(input) } // ç­‰å¾…æ‰€æœ‰è¾“å…¥å¤„ç†å®Œæˆ go func() { wg.Wait() close(output) }() } func demonstrateFanInOut() { fmt.Println(\u0026#34;=== æ‰‡å…¥æ‰‡å‡ºæ¨¡å¼ ===\u0026#34;) // åˆ›å»ºè¾“å…¥channel input := make(chan int, 5) // åˆ›å»ºå¤šä¸ªè¾“å‡ºchannel outputs := make([]chan int, 3) for i := range outputs { outputs[i] = make(chan int, 5) } // å¯åŠ¨æ‰‡å‡º go fanOut(input, outputs) // åˆ›å»ºæ‰‡å…¥çš„è¾“å…¥ï¼ˆæ¥è‡ªæ‰‡å‡ºçš„è¾“å‡ºï¼‰ fanInInput := make([]\u0026lt;-chan int, len(outputs)) for i, output := range outputs { fanInInput[i] = output } // åˆ›å»ºæœ€ç»ˆè¾“å‡º finalOutput := make(chan int, 15) // å¯åŠ¨æ‰‡å…¥ go fanIn(fanInInput, finalOutput) // å‘é€æ•°æ®åˆ°è¾“å…¥ go func() { for i := 1; i \u0026lt;= 5; i++ { input \u0026lt;- i fmt.Printf(\u0026#34;å‘é€æ•°æ®ï¼š%d\\n\u0026#34;, i) time.Sleep(100 * time.Millisecond) } close(input) }() // æ¥æ”¶æœ€ç»ˆç»“æœ fmt.Println(\u0026#34;æ¥æ”¶å¤„ç†ç»“æœï¼š\u0026#34;) for result := range finalOutput { fmt.Printf(\u0026#34;æ¥æ”¶åˆ°ï¼š%d\\n\u0026#34;, result) } fmt.Println(\u0026#34;æ‰‡å…¥æ‰‡å‡ºå¤„ç†å®Œæˆ\u0026#34;) } func main() { demonstrateFanInOut() } è¿è¡Œç»“æœï¼š\n=== æ‰‡å…¥æ‰‡å‡ºæ¨¡å¼ === å‘é€æ•°æ®ï¼š1 å‘é€æ•°æ®ï¼š2 å‘é€æ•°æ®ï¼š3 å‘é€æ•°æ®ï¼š4 å‘é€æ•°æ®ï¼š5 æ¥æ”¶å¤„ç†ç»“æœï¼š æ¥æ”¶åˆ°ï¼š1 æ¥æ”¶åˆ°ï¼š1 æ¥æ”¶åˆ°ï¼š1 æ¥æ”¶åˆ°ï¼š2 æ¥æ”¶åˆ°ï¼š2 æ¥æ”¶åˆ°ï¼š2 æ¥æ”¶åˆ°ï¼š3 æ¥æ”¶åˆ°ï¼š3 æ¥æ”¶åˆ°ï¼š3 æ¥æ”¶åˆ°ï¼š4 æ¥æ”¶åˆ°ï¼š4 æ¥æ”¶åˆ°ï¼š4 æ¥æ”¶åˆ°ï¼š5 æ¥æ”¶åˆ°ï¼š5 æ¥æ”¶åˆ°ï¼š5 æ‰‡å…¥æ‰‡å‡ºå¤„ç†å®Œæˆ 5. å¹¶å‘å®‰å…¨å’Œæœ€ä½³å®è·µ\r5.1 ç«æ€æ¡ä»¶å’Œäº’æ–¥é”\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;time\u0026#34; ) // ä¸å®‰å…¨çš„å¹¶å‘è®¡æ•°å™¨ï¼ˆä¼šäº§ç”Ÿç«æ€æ¡ä»¶ï¼‰ func unsafeCounter() { fmt.Println(\u0026#34;=== ä¸å®‰å…¨çš„å¹¶å‘è®¡æ•°å™¨ ===\u0026#34;) counter := 0 var wg sync.WaitGroup // å¯åŠ¨å¤šä¸ªgoroutineåŒæ—¶å¢åŠ è®¡æ•°å™¨ for i := 0; i \u0026lt; 1000; i++ { wg.Add(1) go func() { defer wg.Done() counter++ // ç«æ€æ¡ä»¶ï¼ }() } wg.Wait() fmt.Printf(\u0026#34;æœŸæœ›å€¼ï¼š1000ï¼Œå®é™…å€¼ï¼š%d\\n\u0026#34;, counter) } // å®‰å…¨çš„å¹¶å‘è®¡æ•°å™¨ï¼ˆä½¿ç”¨äº’æ–¥é”ï¼‰ func safeCounter() { fmt.Println(\u0026#34;\\n=== å®‰å…¨çš„å¹¶å‘è®¡æ•°å™¨ ===\u0026#34;) var counter int var mutex sync.Mutex var wg sync.WaitGroup for i := 0; i \u0026lt; 1000; i++ { wg.Add(1) go func() { defer wg.Done() mutex.Lock() counter++ // ä¸´ç•ŒåŒº mutex.Unlock() }() } wg.Wait() fmt.Printf(\u0026#34;æœŸæœ›å€¼ï¼š1000ï¼Œå®é™…å€¼ï¼š%d\\n\u0026#34;, counter) } // ä½¿ç”¨åŸå­æ“ä½œ func atomicCounter() { fmt.Println(\u0026#34;\\n=== åŸå­æ“ä½œè®¡æ•°å™¨ ===\u0026#34;) var counter int64 var wg sync.WaitGroup for i := 0; i \u0026lt; 1000; i++ { wg.Add(1) go func() { defer wg.Done() // åŸå­å¢åŠ æ“ä½œ // atomic.AddInt64(\u0026amp;counter, 1) counter++ // ç®€åŒ–ç¤ºä¾‹ï¼Œå®é™…åº”ä½¿ç”¨atomicåŒ… }() } wg.Wait() fmt.Printf(\u0026#34;æœŸæœ›å€¼ï¼š1000ï¼Œå®é™…å€¼ï¼š%d\\n\u0026#34;, counter) } // è¯»å†™é”ç¤ºä¾‹ func readWriteLockExample() { fmt.Println(\u0026#34;\\n=== è¯»å†™é”ç¤ºä¾‹ ===\u0026#34;) var data = make(map[string]string) var rwMutex sync.RWMutex var wg sync.WaitGroup // å†™æ“ä½œ wg.Add(1) go func() { defer wg.Done() rwMutex.Lock() fmt.Println(\u0026#34;å†™æ“ä½œï¼šè·å–å†™é”\u0026#34;) data[\u0026#34;key1\u0026#34;] = \u0026#34;value1\u0026#34; time.Sleep(100 * time.Millisecond) // æ¨¡æ‹Ÿå†™æ“ä½œè€—æ—¶ fmt.Println(\u0026#34;å†™æ“ä½œï¼šé‡Šæ”¾å†™é”\u0026#34;) rwMutex.Unlock() }() // è¯»æ“ä½œ for i := 0; i \u0026lt; 3; i++ { wg.Add(1) go func(id int) { defer wg.Done() rwMutex.RLock() fmt.Printf(\u0026#34;è¯»æ“ä½œ%dï¼šè·å–è¯»é”\\n\u0026#34;, id) value := data[\u0026#34;key1\u0026#34;] time.Sleep(50 * time.Millisecond) // æ¨¡æ‹Ÿè¯»æ“ä½œè€—æ—¶ fmt.Printf(\u0026#34;è¯»æ“ä½œ%dï¼šè¯»å–å€¼=%sï¼Œé‡Šæ”¾è¯»é”\\n\u0026#34;, id, value) rwMutex.RUnlock() }(i) } wg.Wait() } func main() { unsafeCounter() safeCounter() atomicCounter() readWriteLockExample() } è¿è¡Œç»“æœï¼š\n=== ä¸å®‰å…¨çš„å¹¶å‘è®¡æ•°å™¨ === æœŸæœ›å€¼ï¼š1000ï¼Œå®é™…å€¼ï¼š947 === å®‰å…¨çš„å¹¶å‘è®¡æ•°å™¨ === æœŸæœ›å€¼ï¼š1000ï¼Œå®é™…å€¼ï¼š1000 === åŸå­æ“ä½œè®¡æ•°å™¨ === æœŸæœ›å€¼ï¼š1000ï¼Œå®é™…å€¼ï¼š1000 === è¯»å†™é”ç¤ºä¾‹ === å†™æ“ä½œï¼šè·å–å†™é” å†™æ“ä½œï¼šé‡Šæ”¾å†™é” è¯»æ“ä½œ0ï¼šè·å–è¯»é” è¯»æ“ä½œ1ï¼šè·å–è¯»é” è¯»æ“ä½œ2ï¼šè·å–è¯»é” è¯»æ“ä½œ0ï¼šè¯»å–å€¼=value1ï¼Œé‡Šæ”¾è¯»é” è¯»æ“ä½œ1ï¼šè¯»å–å€¼=value1ï¼Œé‡Šæ”¾è¯»é” è¯»æ“ä½œ2ï¼šè¯»å–å€¼=value1ï¼Œé‡Šæ”¾è¯»é” 5.2 Contextçš„ä½¿ç”¨\rpackage main import ( \u0026#34;context\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) // åŸºæœ¬Contextä½¿ç”¨ func basicContext() { fmt.Println(\u0026#34;=== åŸºæœ¬Contextä½¿ç”¨ ===\u0026#34;) // åˆ›å»ºå¯å–æ¶ˆçš„context ctx, cancel := context.WithCancel(context.Background()) // å¯åŠ¨å·¥ä½œgoroutine go func() { for { select { case \u0026lt;-ctx.Done(): fmt.Println(\u0026#34;å·¥ä½œgoroutineæ”¶åˆ°å–æ¶ˆä¿¡å·ï¼Œæ­£åœ¨é€€å‡º...\u0026#34;) return default: fmt.Println(\u0026#34;å·¥ä½œgoroutineæ­£åœ¨è¿è¡Œ...\u0026#34;) time.Sleep(200 * time.Millisecond) } } }() // è®©å·¥ä½œè¿è¡Œä¸€æ®µæ—¶é—´ time.Sleep(1 * time.Second) // å–æ¶ˆcontext fmt.Println(\u0026#34;å‘é€å–æ¶ˆä¿¡å·...\u0026#34;) cancel() // ç­‰å¾…ç¡®è®¤é€€å‡º time.Sleep(300 * time.Millisecond) fmt.Println(\u0026#34;ä¸»ç¨‹åºç»“æŸ\u0026#34;) } // å¸¦è¶…æ—¶çš„Context func timeoutContext() { fmt.Println(\u0026#34;\\n=== è¶…æ—¶Context ===\u0026#34;) // åˆ›å»º500æ¯«ç§’è¶…æ—¶çš„context ctx, cancel := context.WithTimeout(context.Background(), 500*time.Millisecond) defer cancel() // ç¡®ä¿é‡Šæ”¾èµ„æº // æ¨¡æ‹Ÿé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ done := make(chan bool) go func() { fmt.Println(\u0026#34;å¼€å§‹é•¿æ—¶é—´ä»»åŠ¡...\u0026#34;) time.Sleep(800 * time.Millisecond) // è¶…è¿‡è¶…æ—¶æ—¶é—´ done \u0026lt;- true }() select { case \u0026lt;-done: fmt.Println(\u0026#34;ä»»åŠ¡å®Œæˆ\u0026#34;) case \u0026lt;-ctx.Done(): fmt.Printf(\u0026#34;ä»»åŠ¡è¶…æ—¶ï¼š%v\\n\u0026#34;, ctx.Err()) } } // å¸¦æˆªæ­¢æ—¶é—´çš„Context func deadlineContext() { fmt.Println(\u0026#34;\\n=== æˆªæ­¢æ—¶é—´Context ===\u0026#34;) // åˆ›å»ºæˆªæ­¢æ—¶é—´ä¸º2ç§’åçš„context deadline := time.Now().Add(2 * time.Second) ctx, cancel := context.WithDeadline(context.Background(), deadline) defer cancel() // æ¨¡æ‹Ÿä»»åŠ¡ go func() { for { select { case \u0026lt;-ctx.Done(): fmt.Printf(\u0026#34;ä»»åŠ¡ç»“æŸï¼š%v\\n\u0026#34;, ctx.Err()) return default: fmt.Println(\u0026#34;ä»»åŠ¡è¿›è¡Œä¸­...\u0026#34;) time.Sleep(500 * time.Millisecond) } } }() // ç­‰å¾…ä»»åŠ¡å®Œæˆæˆ–è¶…æ—¶ \u0026lt;-ctx.Done() } // Contextä¼ é€’å‚æ•° func contextWithValue() { fmt.Println(\u0026#34;\\n=== Contextä¼ é€’å‚æ•° ===\u0026#34;) // åˆ›å»ºå¸¦å€¼çš„context ctx := context.WithValue(context.Background(), \u0026#34;userID\u0026#34;, \u0026#34;user123\u0026#34;) ctx = context.WithValue(ctx, \u0026#34;requestID\u0026#34;, \u0026#34;req456\u0026#34;) // åœ¨ä¸åŒå±‚çº§ä¼ é€’context processRequest(ctx) } func processRequest(ctx context.Context) { userID := ctx.Value(\u0026#34;userID\u0026#34;) requestID := ctx.Value(\u0026#34;requestID\u0026#34;) fmt.Printf(\u0026#34;å¤„ç†è¯·æ±‚ - ç”¨æˆ·IDï¼š%vï¼Œè¯·æ±‚IDï¼š%v\\n\u0026#34;, userID, requestID) // ä¼ é€’ç»™ä¸‹ä¸€å±‚ databaseQuery(ctx) } func databaseQuery(ctx context.Context) { userID := ctx.Value(\u0026#34;userID\u0026#34;) fmt.Printf(\u0026#34;æ•°æ®åº“æŸ¥è¯¢ - ç”¨æˆ·IDï¼š%v\\n\u0026#34;, userID) } func main() { basicContext() timeoutContext() deadlineContext() contextWithValue() } è¿è¡Œç»“æœï¼š\n=== åŸºæœ¬Contextä½¿ç”¨ === å·¥ä½œgoroutineæ­£åœ¨è¿è¡Œ... å·¥ä½œgoroutineæ­£åœ¨è¿è¡Œ... å·¥ä½œgoroutineæ­£åœ¨è¿è¡Œ... å·¥ä½œgoroutineæ­£åœ¨è¿è¡Œ... å·¥ä½œgoroutineæ­£åœ¨è¿è¡Œ... å‘é€å–æ¶ˆä¿¡å·... å·¥ä½œgoroutineæ”¶åˆ°å–æ¶ˆä¿¡å·ï¼Œæ­£åœ¨é€€å‡º... ä¸»ç¨‹åºç»“æŸ === è¶…æ—¶Context === å¼€å§‹é•¿æ—¶é—´ä»»åŠ¡... ä»»åŠ¡è¶…æ—¶ï¼šcontext deadline exceeded === æˆªæ­¢æ—¶é—´Context === ä»»åŠ¡è¿›è¡Œä¸­... ä»»åŠ¡è¿›è¡Œä¸­... ä»»åŠ¡è¿›è¡Œä¸­... ä»»åŠ¡è¿›è¡Œä¸­... ä»»åŠ¡ç»“æŸï¼šcontext deadline exceeded === Contextä¼ é€’å‚æ•° === å¤„ç†è¯·æ±‚ - ç”¨æˆ·IDï¼šuser123ï¼Œè¯·æ±‚IDï¼šreq456 æ•°æ®åº“æŸ¥è¯¢ - ç”¨æˆ·IDï¼šuser123 6. æ€»ç»“\rGoè¯­è¨€çš„å¹¶å‘ç¼–ç¨‹ä»¥å…¶ç®€æ´å’Œé«˜æ•ˆè‘—ç§°ï¼š\næ ¸å¿ƒæ¦‚å¿µï¼š\nGoroutineï¼šè½»é‡çº§çº¿ç¨‹ï¼Œç”±Goè¿è¡Œæ—¶ç®¡ç† Channelï¼šgoroutineé—´é€šä¿¡å’ŒåŒæ­¥çš„æœºåˆ¶ Selectï¼šå¤šè·¯å¤ç”¨channelæ“ä½œ Contextï¼šæ§åˆ¶goroutineç”Ÿå‘½å‘¨æœŸå’Œä¼ é€’è¯·æ±‚èŒƒå›´å€¼ é‡è¦ç‰¹æ€§ï¼š\nCSPæ¨¡å‹ï¼šé€šè¿‡é€šä¿¡å…±äº«å†…å­˜ï¼Œè€Œä¸æ˜¯é€šè¿‡å…±äº«å†…å­˜é€šä¿¡ æŠ¢å å¼è°ƒåº¦ï¼šGoè¿è¡Œæ—¶è‡ªåŠ¨è°ƒåº¦goroutine å†…å­˜æ•ˆç‡ï¼šgoroutineæ ˆå¤§å°å¯åŠ¨æ€è°ƒæ•´ï¼Œåˆå§‹å¾ˆå° æ­»é”æ£€æµ‹ï¼šè¿è¡Œæ—¶å¯ä»¥æ£€æµ‹åˆ°ä¸€äº›æ­»é”æƒ…å†µ æœ€ä½³å®è·µï¼š\nåˆç†ä½¿ç”¨WaitGroupç­‰å¾…goroutineå®Œæˆ æ­£ç¡®å…³é—­channelé¿å…goroutineæ³„æ¼ ä½¿ç”¨Contextæ§åˆ¶goroutineç”Ÿå‘½å‘¨æœŸ æ³¨æ„ç«æ€æ¡ä»¶ï¼Œé€‚å½“ä½¿ç”¨åŒæ­¥æœºåˆ¶ é€‰æ‹©åˆé€‚çš„å¹¶å‘æ¨¡å¼ï¼ˆWorker Poolã€ç”Ÿäº§è€…-æ¶ˆè´¹è€…ç­‰ï¼‰ å¸¸è§æ¨¡å¼ï¼š\nWorker Poolï¼šæ§åˆ¶å¹¶å‘æ•°é‡ ç”Ÿäº§è€…-æ¶ˆè´¹è€…ï¼šè§£è€¦æ•°æ®ç”Ÿäº§å’Œæ¶ˆè´¹ æ‰‡å…¥æ‰‡å‡ºï¼šåˆ†å¸ƒå¼æ•°æ®å¤„ç† è¶…æ—¶æ§åˆ¶ï¼šé˜²æ­¢æ— é™ç­‰å¾… å¹¶å‘ç¼–ç¨‹è™½ç„¶å¼ºå¤§ï¼Œä½†ä¹Ÿå¢åŠ äº†ç¨‹åºçš„å¤æ‚æ€§ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”è¯¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„å¹¶å‘ç­–ç•¥ï¼Œé¿å…è¿‡åº¦è®¾è®¡ã€‚\n","date":"2026-02-04T21:15:16+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-13/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬åä¸‰ç¯‡ å¹¶å‘å…¥é—¨ï¼šgoroutine + channel åŸºç¡€ã€‘"},{"content":"1. Goè¯­è¨€é”™è¯¯å¤„ç†å“²å­¦\rGoè¯­è¨€é‡‡ç”¨äº†æ˜¾å¼çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œä¸å…¶ä»–è¯­è¨€çš„å¼‚å¸¸å¤„ç†ä¸åŒã€‚Goè®¤ä¸ºé”™è¯¯æ˜¯ç¨‹åºæ­£å¸¸æµç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œåº”è¯¥è¢«æ˜¾å¼åœ°æ£€æŸ¥å’Œå¤„ç†ï¼Œè€Œä¸æ˜¯é€šè¿‡å¼‚å¸¸æœºåˆ¶æ¥å¤„ç†ã€‚è¿™ç§è®¾è®¡ç†å¿µè®©é”™è¯¯å¤„ç†æ›´åŠ é€æ˜å’Œå¯æ§ã€‚\n1.1 Goé”™è¯¯å¤„ç†çš„ç‰¹ç‚¹\rGoçš„é”™è¯¯å¤„ç†å“²å­¦ï¼š\né”™è¯¯æ˜¯å€¼ï¼Œä¸æ˜¯å¼‚å¸¸ æ˜¾å¼æ£€æŸ¥æ¯”å›é¿æ›´å¥½ é”™è¯¯åº”è¯¥è¢«å¤„ç†ï¼Œè€Œä¸æ˜¯è¢«å¿½ç•¥ å¤±è´¥çš„è¯·æ±‚æ˜¯æ­£å¸¸çš„ï¼ŒæˆåŠŸçš„è¯·æ±‚æ‰æ˜¯ä¾‹å¤– ä¸å…¶ä»–è¯­è¨€çš„å¯¹æ¯”ï¼š\n// Javaé£æ ¼çš„å¼‚å¸¸å¤„ç† try { result = riskyOperation(); } catch (Exception e) { // å¤„ç†å¼‚å¸¸ } // Goé£æ ¼çš„é”™è¯¯å¤„ç† result, err := riskyOperation(); if err != nil { // å¤„ç†é”™è¯¯ return err } 1.2 ä¸ºä»€ä¹ˆGoé€‰æ‹©æ˜¾å¼é”™è¯¯å¤„ç†\rä¼˜ç‚¹ï¼š\næ¸…æ™°å¯è§ï¼šé”™è¯¯å¤„ç†é€»è¾‘æ˜ç¡®ï¼Œä¸ä¼šéšè—åœ¨æ·±å¤„ å¼ºåˆ¶å¤„ç†ï¼šç¼–è¯‘å™¨ä¼šæé†’ä½ å¤„ç†è¿”å›çš„é”™è¯¯ æ€§èƒ½æ›´å¥½ï¼šé¿å…äº†å¼‚å¸¸å¤„ç†çš„æ€§èƒ½å¼€é”€ æ›´å¯æ§ï¼šç¨‹åºå‘˜å®Œå…¨æ§åˆ¶é”™è¯¯å¤„ç†æµç¨‹ ç¼ºç‚¹ï¼š\nä»£ç å†—é•¿ï¼šéœ€è¦å¤§é‡çš„if err != nilæ£€æŸ¥ å®¹æ˜“å¿½ç•¥ï¼šæ–°æ‰‹å¯èƒ½ä¹ æƒ¯æ€§å¿½ç•¥é”™è¯¯æ£€æŸ¥ 2. erroræ¥å£è¯¦è§£\r2.1 erroræ¥å£å®šä¹‰\r// erroræ¥å£å®šä¹‰åœ¨builtinåŒ…ä¸­ type error interface { Error() string } 2.2 errorsåŒ…çš„åŸºæœ¬ä½¿ç”¨\rpackage main import ( \u0026#34;errors\u0026#34; \u0026#34;fmt\u0026#34; ) func main() { // åˆ›å»ºç®€å•é”™è¯¯ err1 := errors.New(\u0026#34;è¿™æ˜¯ä¸€ä¸ªç®€å•çš„é”™è¯¯\u0026#34;) fmt.Printf(\u0026#34;é”™è¯¯1ï¼š%v\\n\u0026#34;, err1) fmt.Printf(\u0026#34;é”™è¯¯1ç±»å‹ï¼š%T\\n\u0026#34;, err1) // ä½¿ç”¨fmt.Errorfåˆ›å»ºæ ¼å¼åŒ–é”™è¯¯ name := \u0026#34;å¼ ä¸‰\u0026#34; age := -5 err2 := fmt.Errorf(\u0026#34;ç”¨æˆ· %s çš„å¹´é¾„ %d æ— æ•ˆ\u0026#34;, name, age) fmt.Printf(\u0026#34;é”™è¯¯2ï¼š%v\\n\u0026#34;, err2) // é”™è¯¯çš„å­—ç¬¦ä¸²è¡¨ç¤º fmt.Printf(\u0026#34;é”™è¯¯1çš„å­—ç¬¦ä¸²ï¼š%s\\n\u0026#34;, err1.Error()) fmt.Printf(\u0026#34;é”™è¯¯2çš„å­—ç¬¦ä¸²ï¼š%s\\n\u0026#34;, err2.Error()) // nilé”™è¯¯è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ var noError error fmt.Printf(\u0026#34;nilé”™è¯¯ï¼š%vï¼Œæ˜¯å¦ä¸ºnilï¼š%t\\n\u0026#34;, noError, noError == nil) } è¿è¡Œç»“æœï¼š\né”™è¯¯1ï¼šè¿™æ˜¯ä¸€ä¸ªç®€å•çš„é”™è¯¯ é”™è¯¯1ç±»å‹ï¼š*errors.errorString é”™è¯¯2ï¼šç”¨æˆ· å¼ ä¸‰ çš„å¹´é¾„ -5 æ— æ•ˆ é”™è¯¯1çš„å­—ç¬¦ä¸²ï¼šè¿™æ˜¯ä¸€ä¸ªç®€å•çš„é”™è¯¯ é”™è¯¯2çš„å­—ç¬¦ä¸²ï¼šç”¨æˆ· å¼ ä¸‰ çš„å¹´é¾„ -5 æ— æ•ˆ nilé”™è¯¯ï¼š\u0026lt;nil\u0026gt;ï¼Œæ˜¯å¦ä¸ºnilï¼štrue 2.3 è‡ªå®šä¹‰é”™è¯¯ç±»å‹\rpackage main import ( \u0026#34;fmt\u0026#34; ) // è‡ªå®šä¹‰é”™è¯¯ç±»å‹1ï¼šç®€å•ç»“æ„ä½“ type ValidationError struct { Field string Value interface{} Message string } func (e ValidationError) Error() string { return fmt.Sprintf(\u0026#34;éªŒè¯é”™è¯¯ - å­—æ®µï¼š%sï¼Œå€¼ï¼š%vï¼ŒåŸå› ï¼š%s\u0026#34;, e.Field, e.Value, e.Message) } // è‡ªå®šä¹‰é”™è¯¯ç±»å‹2ï¼šå¸¦é”™è¯¯ç  type APIError struct { Code int Message string Details string } func (e APIError) Error() string { return fmt.Sprintf(\u0026#34;APIé”™è¯¯[%d]: %s (è¯¦æƒ…: %s)\u0026#34;, e.Code, e.Message, e.Details) } // è‡ªå®šä¹‰é”™è¯¯ç±»å‹3ï¼šåŒ…è£…å…¶ä»–é”™è¯¯ type WrappedError struct { Operation string Err error } func (e WrappedError) Error() string { return fmt.Sprintf(\u0026#34;æ“ä½œ %s å¤±è´¥: %v\u0026#34;, e.Operation, e.Err) } func (e WrappedError) Unwrap() error { return e.Err } // ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯çš„å‡½æ•° func validateUserAge(age int) error { if age \u0026lt; 0 { return ValidationError{ Field: \u0026#34;age\u0026#34;, Value: age, Message: \u0026#34;å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°\u0026#34;, } } if age \u0026gt; 150 { return ValidationError{ Field: \u0026#34;age\u0026#34;, Value: age, Message: \u0026#34;å¹´é¾„ä¸èƒ½è¶…è¿‡150å²\u0026#34;, } } return nil } func callAPI(endpoint string) error { if endpoint == \u0026#34;/admin\u0026#34; { return APIError{ Code: 403, Message: \u0026#34;æƒé™ä¸è¶³\u0026#34;, Details: \u0026#34;éœ€è¦ç®¡ç†å‘˜æƒé™æ‰èƒ½è®¿é—®\u0026#34;, } } if endpoint == \u0026#34;/timeout\u0026#34; { return APIError{ Code: 504, Message: \u0026#34;è¯·æ±‚è¶…æ—¶\u0026#34;, Details: \u0026#34;æœåŠ¡å™¨å“åº”è¶…æ—¶\u0026#34;, } } return nil } func processData(data string) error { if data == \u0026#34;\u0026#34; { return WrappedError{ Operation: \u0026#34;æ•°æ®å¤„ç†\u0026#34;, Err: errors.New(\u0026#34;è¾“å…¥æ•°æ®ä¸ºç©º\u0026#34;), } } return nil } func main() { fmt.Println(\u0026#34;=== è‡ªå®šä¹‰é”™è¯¯ç±»å‹æ¼”ç¤º ===\u0026#34;) // æµ‹è¯•éªŒè¯é”™è¯¯ ages := []int{-5, 25, 200} for _, age := range ages { fmt.Printf(\u0026#34;éªŒè¯å¹´é¾„ %d: \u0026#34;, age) if err := validateUserAge(age); err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } else { fmt.Printf(\u0026#34;âœ… éªŒè¯é€šè¿‡\\n\u0026#34;) } } // æµ‹è¯•APIé”™è¯¯ endpoints := []string{\u0026#34;/user\u0026#34;, \u0026#34;/admin\u0026#34;, \u0026#34;/timeout\u0026#34;} fmt.Println(\u0026#34;\\n=== APIè°ƒç”¨æµ‹è¯• ===\u0026#34;) for _, endpoint := range endpoints { fmt.Printf(\u0026#34;è°ƒç”¨ %s: \u0026#34;, endpoint) if err := callAPI(endpoint); err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } else { fmt.Printf(\u0026#34;âœ… è°ƒç”¨æˆåŠŸ\\n\u0026#34;) } } // æµ‹è¯•åŒ…è£…é”™è¯¯ fmt.Println(\u0026#34;\\n=== åŒ…è£…é”™è¯¯æµ‹è¯• ===\u0026#34;) testData := []string{\u0026#34;\u0026#34;, \u0026#34;æœ‰æ•ˆæ•°æ®\u0026#34;} for _, data := range testData { fmt.Printf(\u0026#34;å¤„ç†æ•°æ® \u0026#39;%s\u0026#39;: \u0026#34;, data) if err := processData(data); err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) // è§£åŒ…é”™è¯¯ if wrapped, ok := err.(WrappedError); ok { fmt.Printf(\u0026#34; åŸå§‹é”™è¯¯: %v\\n\u0026#34;, wrapped.Err) } } else { fmt.Printf(\u0026#34;âœ… å¤„ç†æˆåŠŸ\\n\u0026#34;) } } } è¿è¡Œç»“æœï¼š\n=== è‡ªå®šä¹‰é”™è¯¯ç±»å‹æ¼”ç¤º === éªŒè¯å¹´é¾„ -5: âŒ éªŒè¯é”™è¯¯ - å­—æ®µï¼šageï¼Œå€¼ï¼š-5ï¼ŒåŸå› ï¼šå¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•° éªŒè¯å¹´é¾„ 25: âœ… éªŒè¯é€šè¿‡ éªŒè¯å¹´é¾„ 200: âŒ éªŒè¯é”™è¯¯ - å­—æ®µï¼šageï¼Œå€¼ï¼š200ï¼ŒåŸå› ï¼šå¹´é¾„ä¸èƒ½è¶…è¿‡150å² === APIè°ƒç”¨æµ‹è¯• === è°ƒç”¨ /user: âœ… è°ƒç”¨æˆåŠŸ è°ƒç”¨ /admin: âŒ APIé”™è¯¯[403]: æƒé™ä¸è¶³ (è¯¦æƒ…: éœ€è¦ç®¡ç†å‘˜æƒé™æ‰èƒ½è®¿é—®) è°ƒç”¨ /timeout: âŒ APIé”™è¯¯[504]: è¯·æ±‚è¶…æ—¶ (è¯¦æƒ…: æœåŠ¡å™¨å“åº”è¶…æ—¶) === åŒ…è£…é”™è¯¯æµ‹è¯• === å¤„ç†æ•°æ® \u0026#39;\u0026#39;: âŒ æ“ä½œ æ•°æ®å¤„ç† å¤±è´¥: è¾“å…¥æ•°æ®ä¸ºç©º åŸå§‹é”™è¯¯: è¾“å…¥æ•°æ®ä¸ºç©º å¤„ç†æ•°æ® \u0026#39;æœ‰æ•ˆæ•°æ®\u0026#39;: âœ… å¤„ç†æˆåŠŸ 3. é”™è¯¯æ£€æŸ¥å’Œå¤„ç†æ¨¡å¼\r3.1 åŸºæœ¬é”™è¯¯å¤„ç†æ¨¡å¼\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;os\u0026#34; ) // æ¨¡å¼1ï¼šç«‹å³å¤„ç†é”™è¯¯ func readFileBasic(filename string) error { file, err := os.Open(filename) if err != nil { return fmt.Errorf(\u0026#34;æ‰“å¼€æ–‡ä»¶å¤±è´¥ %s: %w\u0026#34;, filename, err) } defer file.Close() // æ–‡ä»¶æ“ä½œ... fmt.Printf(\u0026#34;æˆåŠŸæ‰“å¼€æ–‡ä»¶ï¼š%s\\n\u0026#34;, filename) return nil } // æ¨¡å¼2ï¼šé”™è¯¯ç´¯ç§¯å¤„ç† func processMultipleFiles(filenames []string) error { var errors []error for _, filename := range filenames { if err := readFileBasic(filename); err != nil { errors = append(errors, err) } } if len(errors) \u0026gt; 0 { return fmt.Errorf(\u0026#34;å¤„ç†æ–‡ä»¶æ—¶å‘ç”Ÿ %d ä¸ªé”™è¯¯: %v\u0026#34;, len(errors), errors) } return nil } // æ¨¡å¼3ï¼šé”™è¯¯é‡è¯• func retryOperation(operation func() error, maxRetries int) error { var lastErr error for i := 0; i \u0026lt; maxRetries; i++ { err := operation() if err == nil { return nil // æˆåŠŸ } lastErr = err fmt.Printf(\u0026#34;ç¬¬ %d æ¬¡å°è¯•å¤±è´¥ï¼š%v\\n\u0026#34;, i+1, err) } return fmt.Errorf(\u0026#34;é‡è¯• %d æ¬¡åä»ç„¶å¤±è´¥ï¼Œæœ€åé”™è¯¯ï¼š%w\u0026#34;, maxRetries, lastErr) } // æ¨¡å¼4ï¼šé”™è¯¯å¿½ç•¥ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ func ignoreErrors() { // åªåœ¨ç¡®å®å¯ä»¥å¿½ç•¥é”™è¯¯çš„æƒ…å†µä¸‹ä½¿ç”¨ dir, _ := os.Getwd() // å¿½ç•¥é”™è¯¯ fmt.Printf(\u0026#34;å½“å‰ç›®å½•ï¼š%s\\n\u0026#34;, dir) } func main() { fmt.Println(\u0026#34;=== åŸºæœ¬é”™è¯¯å¤„ç†æ¨¡å¼ ===\u0026#34;) // æµ‹è¯•åŸºæœ¬æ¨¡å¼ fmt.Println(\u0026#34;1. åŸºæœ¬é”™è¯¯å¤„ç†ï¼š\u0026#34;) if err := readFileBasic(\u0026#34;ä¸å­˜åœ¨çš„æ–‡ä»¶.txt\u0026#34;); err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } // æµ‹è¯•ç´¯ç§¯æ¨¡å¼ fmt.Println(\u0026#34;\\n2. é”™è¯¯ç´¯ç§¯å¤„ç†ï¼š\u0026#34;) files := []string{\u0026#34;file1.txt\u0026#34;, \u0026#34;file2.txt\u0026#34;, \u0026#34;file3.txt\u0026#34;} if err := processMultipleFiles(files); err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } // æµ‹è¯•é‡è¯•æ¨¡å¼ fmt.Println(\u0026#34;\\n3. é”™è¯¯é‡è¯•ï¼š\u0026#34;) failingOp := func() error { return fmt.Errorf(\u0026#34;æ¨¡æ‹Ÿæ“ä½œå¤±è´¥\u0026#34;) } if err := retryOperation(failingOp, 3); err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } // æµ‹è¯•å¿½ç•¥é”™è¯¯ fmt.Println(\u0026#34;\\n4. é”™è¯¯å¿½ç•¥ï¼š\u0026#34;) ignoreErrors() } è¿è¡Œç»“æœï¼š\n=== åŸºæœ¬é”™è¯¯å¤„ç†æ¨¡å¼ === 1. åŸºæœ¬é”™è¯¯å¤„ç†ï¼š âŒ æ‰“å¼€æ–‡ä»¶å¤±è´¥ ä¸å­˜åœ¨çš„æ–‡ä»¶.txt: open ä¸å­˜åœ¨çš„æ–‡ä»¶.txt: The system cannot find the file specified. 2. é”™è¯¯ç´¯ç§¯å¤„ç†ï¼š âŒ å¤„ç†æ–‡ä»¶æ—¶å‘ç”Ÿ 3 ä¸ªé”™è¯¯: [æ‰“å¼€æ–‡ä»¶å¤±è´¥ file1.txt: open file1.txt: The system cannot find the file specified. æ‰“å¼€æ–‡ä»¶å¤±è´¥ file2.txt: open file2.txt: The system cannot find the file specified. æ‰“å¼€æ–‡ä»¶å¤±è´¥ file3.txt: open file3.txt: The system cannot find the file specified.] 3. é”™è¯¯é‡è¯•ï¼š ç¬¬ 1 æ¬¡å°è¯•å¤±è´¥ï¼šæ¨¡æ‹Ÿæ“ä½œå¤±è´¥ ç¬¬ 2 æ¬¡å°è¯•å¤±è´¥ï¼šæ¨¡æ‹Ÿæ“ä½œå¤±è´¥ ç¬¬ 3 æ¬¡å°è¯•å¤±è´¥ï¼šæ¨¡æ‹Ÿæ“ä½œå¤±è´¥ âŒ é‡è¯• 3 æ¬¡åä»ç„¶å¤±è´¥ï¼Œæœ€åé”™è¯¯ï¼šæ¨¡æ‹Ÿæ“ä½œå¤±è´¥ 4. é”™è¯¯å¿½ç•¥ï¼š å½“å‰ç›®å½•ï¼šF:\\blog\\zg-blog 3.2 é”™è¯¯ç±»å‹æ–­è¨€å¤„ç†\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;os\u0026#34; \u0026#34;strconv\u0026#34; ) type ValidationError struct { Field string Message string } func (e ValidationError) Error() string { return fmt.Sprintf(\u0026#34;éªŒè¯é”™è¯¯ - %s: %s\u0026#34;, e.Field, e.Message) } type NetworkError struct { Code int Message string } func (e NetworkError) Error() string { return fmt.Sprintf(\u0026#34;ç½‘ç»œé”™è¯¯[%d]: %s\u0026#34;, e.Code, e.Message) } func parseAndValidate(input string) error { // å°è¯•è½¬æ¢ä¸ºæ•´æ•° num, err := strconv.Atoi(input) if err != nil { return ValidationError{ Field: \u0026#34;input\u0026#34;, Message: \u0026#34;è¾“å…¥å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ•´æ•°\u0026#34;, } } // éªŒè¯æ•°å€¼èŒƒå›´ if num \u0026lt; 0 { return ValidationError{ Field: \u0026#34;number\u0026#34;, Message: \u0026#34;æ•°å­—ä¸èƒ½ä¸ºè´Ÿæ•°\u0026#34;, } } // æ¨¡æ‹Ÿç½‘ç»œæ“ä½œ if num == 999 { return NetworkError{ Code: 503, Message: \u0026#34;æœåŠ¡æš‚æ—¶ä¸å¯ç”¨\u0026#34;, } } return nil } func handleSpecificErrors() { inputs := []string{\u0026#34;abc\u0026#34;, \u0026#34;-5\u0026#34;, \u0026#34;999\u0026#34;, \u0026#34;42\u0026#34;} for _, input := range inputs { fmt.Printf(\u0026#34;å¤„ç†è¾“å…¥ \u0026#39;%s\u0026#39;: \u0026#34;, input) err := parseAndValidate(input) if err != nil { // æ–¹æ³•1ï¼šç±»å‹æ–­è¨€ if validationErr, ok := err.(ValidationError); ok { fmt.Printf(\u0026#34;âŒ éªŒè¯é”™è¯¯ - å­—æ®µï¼š%sï¼Œæ¶ˆæ¯ï¼š%s\\n\u0026#34;, validationErr.Field, validationErr.Message) continue } // æ–¹æ³•2ï¼šç±»å‹é€‰æ‹© switch specificErr := err.(type) { case NetworkError: fmt.Printf(\u0026#34;âŒ ç½‘ç»œé”™è¯¯ - ä»£ç ï¼š%dï¼Œæ¶ˆæ¯ï¼š%s\\n\u0026#34;, specificErr.Code, specificErr.Message) case ValidationError: fmt.Printf(\u0026#34;âŒ éªŒè¯é”™è¯¯ - å­—æ®µï¼š%sï¼Œæ¶ˆæ¯ï¼š%s\\n\u0026#34;, specificErr.Field, specificErr.Message) default: fmt.Printf(\u0026#34;âŒ æœªçŸ¥é”™è¯¯ï¼š%v\\n\u0026#34;, err) } } else { fmt.Printf(\u0026#34;âœ… å¤„ç†æˆåŠŸ\\n\u0026#34;) } } } func main() { fmt.Println(\u0026#34;=== é”™è¯¯ç±»å‹æ–­è¨€å¤„ç† ===\u0026#34;) handleSpecificErrors() // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ fmt.Println(\u0026#34;\\n=== æ–‡ä»¶é”™è¯¯å¤„ç† ===\u0026#34;) filenames := []string{\u0026#34;existing.txt\u0026#34;, \u0026#34;missing.txt\u0026#34;} for _, filename := range filenames { fmt.Printf(\u0026#34;æ£€æŸ¥æ–‡ä»¶ \u0026#39;%s\u0026#39;: \u0026#34;, filename) _, err := os.Stat(filename) if err != nil { if os.IsNotExist(err) { fmt.Printf(\u0026#34;âŒ æ–‡ä»¶ä¸å­˜åœ¨\\n\u0026#34;) } else if os.IsPermission(err) { fmt.Printf(\u0026#34;âŒ æƒé™ä¸è¶³\\n\u0026#34;) } else { fmt.Printf(\u0026#34;âŒ å…¶ä»–é”™è¯¯ï¼š%v\\n\u0026#34;, err) } } else { fmt.Printf(\u0026#34;âœ… æ–‡ä»¶å­˜åœ¨\\n\u0026#34;) } } } è¿è¡Œç»“æœï¼š\n=== é”™è¯¯ç±»å‹æ–­è¨€å¤„ç† === å¤„ç†è¾“å…¥ \u0026#39;abc\u0026#39;: âŒ éªŒè¯é”™è¯¯ - å­—æ®µï¼šinputï¼Œæ¶ˆæ¯ï¼šè¾“å…¥å¿…é¡»æ˜¯æœ‰æ•ˆçš„æ•´æ•° å¤„ç†è¾“å…¥ \u0026#39;-5\u0026#39;: âŒ éªŒè¯é”™è¯¯ - å­—æ®µï¼šnumberï¼Œæ¶ˆæ¯ï¼šæ•°å­—ä¸èƒ½ä¸ºè´Ÿæ•° å¤„ç†è¾“å…¥ \u0026#39;999\u0026#39;: âŒ ç½‘ç»œé”™è¯¯ - ä»£ç ï¼š503ï¼Œæ¶ˆæ¯ï¼šæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ å¤„ç†è¾“å…¥ \u0026#39;42\u0026#39;: âœ… å¤„ç†æˆåŠŸ === æ–‡ä»¶é”™è¯¯å¤„ç† === æ£€æŸ¥æ–‡ä»¶ \u0026#39;existing.txt\u0026#39;: âœ… æ–‡ä»¶å­˜åœ¨ æ£€æŸ¥æ–‡ä»¶ \u0026#39;missing.txt\u0026#39;: âŒ æ–‡ä»¶ä¸å­˜åœ¨ 4. é”™è¯¯åŒ…è£…å’Œä¸Šä¸‹æ–‡\r4.1 errorsåŒ…çš„æ–°åŠŸèƒ½ï¼ˆGo 1.13+ï¼‰\rpackage main import ( \u0026#34;errors\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;io\u0026#34; \u0026#34;os\u0026#34; ) // æ¨¡æ‹Ÿæ•°æ®åº“æ“ä½œ func databaseQuery(query string) error { if query == \u0026#34;invalid\u0026#34; { return errors.New(\u0026#34;æ•°æ®åº“æŸ¥è¯¢è¯­æ³•é”™è¯¯\u0026#34;) } if query == \u0026#34;timeout\u0026#34; { return errors.New(\u0026#34;æ•°æ®åº“è¿æ¥è¶…æ—¶\u0026#34;) } return nil } // ä¸šåŠ¡å±‚å‡½æ•° func getUserData(userID string) error { // éªŒè¯ç”¨æˆ·ID if userID == \u0026#34;\u0026#34; { return fmt.Errorf(\u0026#34;ç”¨æˆ·IDä¸èƒ½ä¸ºç©º\u0026#34;) } // æŸ¥è¯¢æ•°æ®åº“ if err := databaseQuery(\u0026#34;SELECT * FROM users WHERE id = \u0026#34; + userID); err != nil { return fmt.Errorf(\u0026#34;è·å–ç”¨æˆ·æ•°æ®å¤±è´¥: %w\u0026#34;, err) // åŒ…è£…é”™è¯¯ } return nil } // æœåŠ¡å±‚å‡½æ•° func handleUserRequest(userID string) error { if err := getUserData(userID); err != nil { return fmt.Errorf(\u0026#34;å¤„ç†ç”¨æˆ·è¯·æ±‚å¤±è´¥: %w\u0026#34;, err) // å†æ¬¡åŒ…è£… } return nil } func demonstrateErrorWrapping() { userIDs := []string{\u0026#34;\u0026#34;, \u0026#34;invalid\u0026#34;, \u0026#34;timeout\u0026#34;, \u0026#34;123\u0026#34;} for _, userID := range userIDs { fmt.Printf(\u0026#34;å¤„ç†ç”¨æˆ·è¯·æ±‚ UserID=\u0026#39;%s\u0026#39;: \u0026#34;, userID) err := handleUserRequest(userID) if err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) // æ£€æŸ¥ç‰¹å®šé”™è¯¯ if errors.Is(err, os.ErrNotExist) { fmt.Printf(\u0026#34; åŸå› ï¼šæ–‡ä»¶ä¸å­˜åœ¨\\n\u0026#34;) } // æŸ¥æ‰¾ç‰¹å®šç±»å‹çš„é”™è¯¯ var pathError *os.PathError if errors.As(err, \u0026amp;pathError) { fmt.Printf(\u0026#34; è·¯å¾„é”™è¯¯ï¼šæ“ä½œ=%sï¼Œè·¯å¾„=%s\\n\u0026#34;, pathError.Op, pathError.Path) } // æ‰“å°é”™è¯¯é“¾ fmt.Printf(\u0026#34; é”™è¯¯é“¾ï¼š\u0026#34;) for err != nil { fmt.Printf(\u0026#34;%v\u0026#34;, err) if err = errors.Unwrap(err); err != nil { fmt.Printf(\u0026#34; -\u0026gt; \u0026#34;) } } fmt.Println() } else { fmt.Printf(\u0026#34;âœ… è¯·æ±‚å¤„ç†æˆåŠŸ\\n\u0026#34;) } fmt.Println() } } // è‡ªå®šä¹‰å¯åŒ…è£…é”™è¯¯ type CustomError struct { Code int Message string Err error // åµŒå…¥åº•å±‚é”™è¯¯ } func (e CustomError) Error() string { if e.Err != nil { return fmt.Sprintf(\u0026#34;è‡ªå®šä¹‰é”™è¯¯[%d]: %s (åŸå› : %v)\u0026#34;, e.Code, e.Message, e.Err) } return fmt.Sprintf(\u0026#34;è‡ªå®šä¹‰é”™è¯¯[%d]: %s\u0026#34;, e.Code, e.Message) } func (e CustomError) Unwrap() error { return e.Err } func main() { fmt.Println(\u0026#34;=== é”™è¯¯åŒ…è£…å’Œä¸Šä¸‹æ–‡ ===\u0026#34;) demonstrateErrorWrapping() // è‡ªå®šä¹‰é”™è¯¯åŒ…è£…ç¤ºä¾‹ fmt.Println(\u0026#34;=== è‡ªå®šä¹‰é”™è¯¯åŒ…è£… ===\u0026#34;) baseErr := errors.New(\u0026#34;åº•å±‚é”™è¯¯\u0026#34;) wrappedErr := CustomError{ Code: 1001, Message: \u0026#34;ä¸šåŠ¡é€»è¾‘é”™è¯¯\u0026#34;, Err: baseErr, } fmt.Printf(\u0026#34;åŒ…è£…é”™è¯¯ï¼š%v\\n\u0026#34;, wrappedErr) fmt.Printf(\u0026#34;åº•å±‚é”™è¯¯ï¼š%v\\n\u0026#34;, errors.Unwrap(wrappedErr)) fmt.Printf(\u0026#34;æ˜¯å¦æœ‰åº•å±‚é”™è¯¯ï¼š%t\\n\u0026#34;, errors.Is(wrappedErr, baseErr)) } è¿è¡Œç»“æœï¼š\n=== é”™è¯¯åŒ…è£…å’Œä¸Šä¸‹æ–‡ === å¤„ç†ç”¨æˆ·è¯·æ±‚ UserID=\u0026#39;\u0026#39;: âŒ å¤„ç†ç”¨æˆ·è¯·æ±‚å¤±è´¥: è·å–ç”¨æˆ·æ•°æ®å¤±è´¥: ç”¨æˆ·IDä¸èƒ½ä¸ºç©º é”™è¯¯é“¾ï¼šå¤„ç†ç”¨æˆ·è¯·æ±‚å¤±è´¥: è·å–ç”¨æˆ·æ•°æ®å¤±è´¥: ç”¨æˆ·IDä¸èƒ½ä¸ºç©º å¤„ç†ç”¨æˆ·è¯·æ±‚ UserID=\u0026#39;invalid\u0026#39;: âŒ å¤„ç†ç”¨æˆ·è¯·æ±‚å¤±è´¥: è·å–ç”¨æˆ·æ•°æ®å¤±è´¥: æ•°æ®åº“æŸ¥è¯¢è¯­æ³•é”™è¯¯ é”™è¯¯é“¾ï¼šå¤„ç†ç”¨æˆ·è¯·æ±‚å¤±è´¥: è·å–ç”¨æˆ·æ•°æ®å¤±è´¥: æ•°æ®åº“æŸ¥è¯¢è¯­æ³•é”™è¯¯ å¤„ç†ç”¨æˆ·è¯·æ±‚ UserID=\u0026#39;timeout\u0026#39;: âŒ å¤„ç†ç”¨æˆ·è¯·æ±‚å¤±è´¥: è·å–ç”¨æˆ·æ•°æ®å¤±è´¥: æ•°æ®åº“è¿æ¥è¶…æ—¶ é”™è¯¯é“¾ï¼šå¤„ç†ç”¨æˆ·è¯·æ±‚å¤±è´¥: è·å–ç”¨æˆ·æ•°æ®å¤±è´¥: æ•°æ®åº“è¿æ¥è¶…æ—¶ å¤„ç†ç”¨æˆ·è¯·æ±‚ UserID=\u0026#39;123\u0026#39;: âœ… è¯·æ±‚å¤„ç†æˆåŠŸ === è‡ªå®šä¹‰é”™è¯¯åŒ…è£… === åŒ…è£…é”™è¯¯ï¼šè‡ªå®šä¹‰é”™è¯¯[1001]: ä¸šåŠ¡é€»è¾‘é”™è¯¯ (åŸå› : åº•å±‚é”™è¯¯) åº•å±‚é”™è¯¯ï¼šåº•å±‚é”™è¯¯ æ˜¯å¦æœ‰åº•å±‚é”™è¯¯ï¼štrue 4.2 å¤šé”™è¯¯å¤„ç†\rpackage main import ( \u0026#34;errors\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;strings\u0026#34; ) // é”™è¯¯é›†åˆç±»å‹ type ErrorCollection []error func (ec ErrorCollection) Error() string { if len(ec) == 0 { return \u0026#34;\u0026#34; } var errorMsgs []string for _, err := range ec { errorMsgs = append(errorMsgs, err.Error()) } return fmt.Sprintf(\u0026#34;å‘ç”Ÿ %d ä¸ªé”™è¯¯: %s\u0026#34;, len(ec), strings.Join(errorMsgs, \u0026#34;; \u0026#34;)) } // å¹¶è¡Œä»»åŠ¡å¤„ç† func processTasks(taskNames []string) error { var errorsList ErrorCollection // æ¨¡æ‹Ÿå¹¶è¡Œå¤„ç†å¤šä¸ªä»»åŠ¡ for _, taskName := range taskNames { if err := processSingleTask(taskName); err != nil { errorsList = append(errorsList, fmt.Errorf(\u0026#34;ä»»åŠ¡ \u0026#39;%s\u0026#39; å¤±è´¥: %w\u0026#34;, taskName, err)) } } if len(errorsList) \u0026gt; 0 { return errorsList } return nil } func processSingleTask(taskName string) error { switch taskName { case \u0026#34;task1\u0026#34;: return errors.New(\u0026#34;ç½‘ç»œè¿æ¥å¤±è´¥\u0026#34;) case \u0026#34;task2\u0026#34;: return errors.New(\u0026#34;æ–‡ä»¶ä¸å­˜åœ¨\u0026#34;) case \u0026#34;task3\u0026#34;: return nil // æˆåŠŸ case \u0026#34;task4\u0026#34;: return errors.New(\u0026#34;æƒé™ä¸è¶³\u0026#34;) default: return errors.New(\u0026#34;æœªçŸ¥ä»»åŠ¡\u0026#34;) } } // é”™è¯¯åˆ†ç»„å¤„ç† func handleGroupedErrors() { taskGroups := [][]string{ {\u0026#34;task1\u0026#34;, \u0026#34;task2\u0026#34;, \u0026#34;task3\u0026#34;}, {\u0026#34;task3\u0026#34;, \u0026#34;task4\u0026#34;}, {\u0026#34;task1\u0026#34;, \u0026#34;task4\u0026#34;, \u0026#34;task5\u0026#34;}, } for i, tasks := range taskGroups { fmt.Printf(\u0026#34;å¤„ç†ä»»åŠ¡ç»„ %d %v:\\n\u0026#34;, i+1, tasks) err := processTasks(tasks) if err != nil { if errorCollection, ok := err.(ErrorCollection); ok { fmt.Printf(\u0026#34; âŒ å‘ç”Ÿ %d ä¸ªé”™è¯¯:\\n\u0026#34;, len(errorCollection)) for j, singleErr := range errorCollection { fmt.Printf(\u0026#34; %d. %v\\n\u0026#34;, j+1, singleErr) } } else { fmt.Printf(\u0026#34; âŒ å•ä¸ªé”™è¯¯: %v\\n\u0026#34;, err) } } else { fmt.Printf(\u0026#34; âœ… æ‰€æœ‰ä»»åŠ¡æˆåŠŸå®Œæˆ\\n\u0026#34;) } fmt.Println() } } func main() { fmt.Println(\u0026#34;=== å¤šé”™è¯¯å¤„ç† ===\u0026#34;) handleGroupedErrors() // é”™è¯¯åˆå¹¶ç¤ºä¾‹ fmt.Println(\u0026#34;=== é”™è¯¯åˆå¹¶ ===\u0026#34;) err1 := errors.New(\u0026#34;ç¬¬ä¸€ä¸ªé”™è¯¯\u0026#34;) err2 := errors.New(\u0026#34;ç¬¬äºŒä¸ªé”™è¯¯\u0026#34;) err3 := errors.New(\u0026#34;ç¬¬ä¸‰ä¸ªé”™è¯¯\u0026#34;) combined := ErrorCollection{err1, err2, err3} fmt.Printf(\u0026#34;åˆå¹¶é”™è¯¯ï¼š%v\\n\u0026#34;, combined) // ç©ºé”™è¯¯é›†åˆ empty := ErrorCollection{} fmt.Printf(\u0026#34;ç©ºé”™è¯¯é›†åˆï¼š%vï¼Œæ˜¯å¦ä¸ºnilï¼š%t\\n\u0026#34;, empty, empty == nil) } è¿è¡Œç»“æœï¼š\n=== å¤šé”™è¯¯å¤„ç† === å¤„ç†ä»»åŠ¡ç»„ 1 [task1 task2 task3]: âŒ å‘ç”Ÿ 2 ä¸ªé”™è¯¯: 1. ä»»åŠ¡ \u0026#39;task1\u0026#39; å¤±è´¥: ç½‘ç»œè¿æ¥å¤±è´¥ 2. ä»»åŠ¡ \u0026#39;task2\u0026#39; å¤±è´¥: æ–‡ä»¶ä¸å­˜åœ¨ å¤„ç†ä»»åŠ¡ç»„ 2 [task3 task4]: âŒ å‘ç”Ÿ 1 ä¸ªé”™è¯¯: 1. ä»»åŠ¡ \u0026#39;task4\u0026#39; å¤±è´¥: æƒé™ä¸è¶³ å¤„ç†ä»»åŠ¡ç»„ 3 [task1 task4 task5]: âŒ å‘ç”Ÿ 3 ä¸ªé”™è¯¯: 1. ä»»åŠ¡ \u0026#39;task1\u0026#39; å¤±è´¥: ç½‘ç»œè¿æ¥å¤±è´¥ 2. ä»»åŠ¡ \u0026#39;task4\u0026#39; å¤±è´¥: æƒé™ä¸è¶³ 3. ä»»åŠ¡ \u0026#39;task5\u0026#39; å¤±è´¥: æœªçŸ¥ä»»åŠ¡ === é”™è¯¯åˆå¹¶ === åˆå¹¶é”™è¯¯ï¼šå‘ç”Ÿ 3 ä¸ªé”™è¯¯: ç¬¬ä¸€ä¸ªé”™è¯¯; ç¬¬äºŒä¸ªé”™è¯¯; ç¬¬ä¸‰ä¸ªé”™è¯¯ ç©ºé”™è¯¯é›†åˆï¼šï¼Œæ˜¯å¦ä¸ºnilï¼štrue 5. å®é™…åº”ç”¨ä¸­çš„é”™è¯¯å¤„ç†\r5.1 WebæœåŠ¡é”™è¯¯å¤„ç†\rpackage main import ( \u0026#34;encoding/json\u0026#34; \u0026#34;errors\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;net/http\u0026#34; \u0026#34;time\u0026#34; ) // APIé”™è¯¯å“åº”ç»“æ„ type APIErrorResponse struct { Error bool `json:\u0026#34;error\u0026#34;` Code int `json:\u0026#34;code\u0026#34;` Message string `json:\u0026#34;message\u0026#34;` Time string `json:\u0026#34;time\u0026#34;` } // è‡ªå®šä¹‰HTTPé”™è¯¯ç±»å‹ type HTTPError struct { Code int Message string Err error } func (e HTTPError) Error() string { if e.Err != nil { return fmt.Sprintf(\u0026#34;HTTP %d: %s (åŸå› : %v)\u0026#34;, e.Code, e.Message, e.Err) } return fmt.Sprintf(\u0026#34;HTTP %d: %s\u0026#34;, e.Code, e.Message) } // é”™è¯¯å¤„ç†ä¸­é—´ä»¶ func errorHandler(next http.HandlerFunc) http.HandlerFunc { return func(w http.ResponseWriter, r *http.Request) { defer func() { if err := recover(); err != nil { fmt.Printf(\u0026#34;ææ…Œæ¢å¤ï¼š%v\\n\u0026#34;, err) sendErrorResponse(w, http.StatusInternalServerError, \u0026#34;å†…éƒ¨æœåŠ¡å™¨é”™è¯¯\u0026#34;) } }() next(w, r) } } // å‘é€é”™è¯¯å“åº” func sendErrorResponse(w http.ResponseWriter, code int, message string) { response := APIErrorResponse{ Error: true, Code: code, Message: message, Time: time.Now().Format(time.RFC3339), } w.Header().Set(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) w.WriteHeader(code) if err := json.NewEncoder(w).Encode(response); err != nil { fmt.Printf(\u0026#34;JSONç¼–ç é”™è¯¯ï¼š%v\\n\u0026#34;, err) } } // æ¨¡æ‹Ÿç”¨æˆ·æœåŠ¡ type UserService struct{} func (s *UserService) GetUser(id string) (map[string]interface{}, error) { if id == \u0026#34;\u0026#34; { return nil, HTTPError{ Code: http.StatusBadRequest, Message: \u0026#34;ç”¨æˆ·IDä¸èƒ½ä¸ºç©º\u0026#34;, } } if id == \u0026#34;admin\u0026#34; { return nil, HTTPError{ Code: http.StatusForbidden, Message: \u0026#34;ç¦æ­¢è®¿é—®ç®¡ç†å‘˜è´¦æˆ·\u0026#34;, } } if id == \u0026#34;missing\u0026#34; { return nil, HTTPError{ Code: http.StatusNotFound, Message: \u0026#34;ç”¨æˆ·ä¸å­˜åœ¨\u0026#34;, } } // æˆåŠŸæƒ…å†µ return map[string]interface{}{ \u0026#34;id\u0026#34;: id, \u0026#34;name\u0026#34;: fmt.Sprintf(\u0026#34;ç”¨æˆ·%s\u0026#34;, id), \u0026#34;age\u0026#34;: 25, }, nil } // HTTPå¤„ç†å™¨ func userHandler(w http.ResponseWriter, r *http.Request) { userID := r.URL.Query().Get(\u0026#34;id\u0026#34;) userService := \u0026amp;UserService{} user, err := userService.GetUser(userID) if err != nil { if httpErr, ok := err.(HTTPError); ok { sendErrorResponse(w, httpErr.Code, httpErr.Message) } else { sendErrorResponse(w, http.StatusInternalServerError, \u0026#34;å†…éƒ¨é”™è¯¯\u0026#34;) } return } // æˆåŠŸå“åº” w.Header().Set(\u0026#34;Content-Type\u0026#34;, \u0026#34;application/json\u0026#34;) w.WriteHeader(http.StatusOK) json.NewEncoder(w).Encode(user) } func demonstrateWebErrors() { // æ¨¡æ‹ŸHTTPè¯·æ±‚å¤„ç† testCases := []string{\u0026#34;\u0026#34;, \u0026#34;admin\u0026#34;, \u0026#34;missing\u0026#34;, \u0026#34;normal\u0026#34;} fmt.Println(\u0026#34;=== WebæœåŠ¡é”™è¯¯å¤„ç†æ¼”ç¤º ===\u0026#34;) for _, userID := range testCases { fmt.Printf(\u0026#34;è¯·æ±‚ç”¨æˆ·ID \u0026#39;%s\u0026#39;: \u0026#34;, userID) // æ¨¡æ‹Ÿè¯·æ±‚ userService := \u0026amp;UserService{} user, err := userService.GetUser(userID) if err != nil { if httpErr, ok := err.(HTTPError); ok { fmt.Printf(\u0026#34;âŒ HTTPé”™è¯¯ %d: %s\\n\u0026#34;, httpErr.Code, httpErr.Message) } else { fmt.Printf(\u0026#34;âŒ æœªçŸ¥é”™è¯¯: %v\\n\u0026#34;, err) } } else { fmt.Printf(\u0026#34;âœ… æˆåŠŸè·å–ç”¨æˆ·: %+v\\n\u0026#34;, user) } } } func main() { demonstrateWebErrors() // å¯åŠ¨HTTPæœåŠ¡å™¨ç¤ºä¾‹ï¼ˆæ³¨é‡Šæ‰é¿å…å®é™…å¯åŠ¨ï¼‰ /* http.HandleFunc(\u0026#34;/user\u0026#34;, errorHandler(userHandler)) fmt.Println(\u0026#34;æœåŠ¡å™¨å¯åŠ¨åœ¨ :8080\u0026#34;) http.ListenAndServe(\u0026#34;:8080\u0026#34;, nil) */ // é”™è¯¯æ—¥å¿—è®°å½•ç¤ºä¾‹ fmt.Println(\u0026#34;\\n=== é”™è¯¯æ—¥å¿—è®°å½• ===\u0026#34;) logError := func(operation string, err error) { fmt.Printf(\u0026#34;[%s] ERROR: %v\\n\u0026#34;, time.Now().Format(\u0026#34;2006-01-02 15:04:05\u0026#34;), err) } // æ¨¡æ‹Ÿå„ç§é”™è¯¯åœºæ™¯ errorsToLog := []error{ errors.New(\u0026#34;æ•°æ®åº“è¿æ¥å¤±è´¥\u0026#34;), fmt.Errorf(\u0026#34;æ–‡ä»¶è¯»å–é”™è¯¯: %w\u0026#34;, errors.New(\u0026#34;æƒé™ä¸è¶³\u0026#34;)), HTTPError{Code: 500, Message: \u0026#34;å†…éƒ¨æœåŠ¡å™¨é”™è¯¯\u0026#34;}, } for _, err := range errorsToLog { logError(\u0026#34;æ•°æ®å¤„ç†\u0026#34;, err) } } è¿è¡Œç»“æœï¼š\n=== WebæœåŠ¡é”™è¯¯å¤„ç†æ¼”ç¤º === è¯·æ±‚ç”¨æˆ·ID \u0026#39;\u0026#39;: âŒ HTTPé”™è¯¯ 400: ç”¨æˆ·IDä¸èƒ½ä¸ºç©º è¯·æ±‚ç”¨æˆ·ID \u0026#39;admin\u0026#39;: âŒ HTTPé”™è¯¯ 403: ç¦æ­¢è®¿é—®ç®¡ç†å‘˜è´¦æˆ· è¯·æ±‚ç”¨æˆ·ID \u0026#39;missing\u0026#39;: âŒ HTTPé”™è¯¯ 404: ç”¨æˆ·ä¸å­˜åœ¨ è¯·æ±‚ç”¨æˆ·ID \u0026#39;normal\u0026#39;: âœ… æˆåŠŸè·å–ç”¨æˆ·: map[age:25 id:normal name:ç”¨æˆ·normal] === é”™è¯¯æ—¥å¿—è®°å½• === [2024-01-15 15:30:45] ERROR: æ•°æ®åº“è¿æ¥å¤±è´¥ [2024-01-15 15:30:45] ERROR: æ–‡ä»¶è¯»å–é”™è¯¯: æƒé™ä¸è¶³ [2024-01-15 15:30:45] ERROR: HTTP 500: å†…éƒ¨æœåŠ¡å™¨é”™è¯¯ 5.2 æ•°æ®åº“æ“ä½œé”™è¯¯å¤„ç†\rpackage main import ( \u0026#34;database/sql\u0026#34; \u0026#34;errors\u0026#34; \u0026#34;fmt\u0026#34; ) // æ¨¡æ‹Ÿæ•°æ®åº“é©±åŠ¨ type MockDB struct { tables map[string][]map[string]interface{} } func NewMockDB() *MockDB { return \u0026amp;MockDB{ tables: make(map[string][]map[string]interface{}), } } func (db *MockDB) Query(query string, args ...interface{}) (*sql.Rows, error) { if query == \u0026#34;invalid sql\u0026#34; { return nil, errors.New(\u0026#34;SQLè¯­æ³•é”™è¯¯\u0026#34;) } if query == \u0026#34;timeout\u0026#34; { return nil, errors.New(\u0026#34;æŸ¥è¯¢è¶…æ—¶\u0026#34;) } // æ¨¡æ‹ŸæˆåŠŸæŸ¥è¯¢ return \u0026amp;sql.Rows{}, nil } func (db *MockDB) Exec(query string, args ...interface{}) (sql.Result, error) { if query == \u0026#34;duplicate key\u0026#34; { return nil, errors.New(\u0026#34;è¿åå”¯ä¸€çº¦æŸ\u0026#34;) } if query == \u0026#34;foreign key violation\u0026#34; { return nil, errors.New(\u0026#34;å¤–é”®çº¦æŸè¿è§„\u0026#34;) } return \u0026amp;mockResult{rowsAffected: 1}, nil } type mockResult struct { rowsAffected int64 } func (r *mockResult) LastInsertId() (int64, error) { return 1, nil } func (r *mockResult) RowsAffected() (int64, error) { return r.rowsAffected, nil } // æ•°æ®è®¿é—®å±‚ type UserRepository struct { db *MockDB } func NewUserRepository(db *MockDB) *UserRepository { return \u0026amp;UserRepository{db: db} } func (r *UserRepository) CreateUser(user map[string]interface{}) error { // éªŒè¯ç”¨æˆ·æ•°æ® if user[\u0026#34;name\u0026#34;] == nil || user[\u0026#34;name\u0026#34;] == \u0026#34;\u0026#34; { return fmt.Errorf(\u0026#34;ç”¨æˆ·åä¸èƒ½ä¸ºç©º\u0026#34;) } if user[\u0026#34;email\u0026#34;] == nil || user[\u0026#34;email\u0026#34;] == \u0026#34;\u0026#34; { return fmt.Errorf(\u0026#34;é‚®ç®±ä¸èƒ½ä¸ºç©º\u0026#34;) } // æ‰§è¡Œæ•°æ®åº“æ’å…¥ query := \u0026#34;INSERT INTO users (name, email) VALUES (?, ?)\u0026#34; _, err := r.db.Exec(query, user[\u0026#34;name\u0026#34;], user[\u0026#34;email\u0026#34;]) if err != nil { // æ ¹æ®ä¸åŒé”™è¯¯ç±»å‹è¿”å›ä¸åŒçš„ä¸šåŠ¡é”™è¯¯ if err.Error() == \u0026#34;è¿åå”¯ä¸€çº¦æŸ\u0026#34; { return fmt.Errorf(\u0026#34;é‚®ç®±åœ°å€å·²å­˜åœ¨ï¼š%w\u0026#34;, err) } if err.Error() == \u0026#34;å¤–é”®çº¦æŸè¿è§„\u0026#34; { return fmt.Errorf(\u0026#34;å…³è”æ•°æ®ä¸å­˜åœ¨ï¼š%w\u0026#34;, err) } return fmt.Errorf(\u0026#34;æ•°æ®åº“æ“ä½œå¤±è´¥ï¼š%w\u0026#34;, err) } return nil } func (r *UserRepository) FindUserByEmail(email string) (map[string]interface{}, error) { if email == \u0026#34;\u0026#34; { return nil, fmt.Errorf(\u0026#34;é‚®ç®±åœ°å€ä¸èƒ½ä¸ºç©º\u0026#34;) } query := \u0026#34;SELECT * FROM users WHERE email = ?\u0026#34; rows, err := r.db.Query(query, email) if err != nil { return nil, fmt.Errorf(\u0026#34;æŸ¥è¯¢ç”¨æˆ·å¤±è´¥ï¼š%w\u0026#34;, err) } defer rows.Close() // æ¨¡æ‹ŸæŸ¥è¯¢ç»“æœ if email == \u0026#34;notfound@example.com\u0026#34; { return nil, fmt.Errorf(\u0026#34;ç”¨æˆ·ä¸å­˜åœ¨\u0026#34;) } return map[string]interface{}{ \u0026#34;id\u0026#34;: 1, \u0026#34;name\u0026#34;: \u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;email\u0026#34;: email, }, nil } func demonstrateDatabaseErrors() { db := NewMockDB() repo := NewUserRepository(db) fmt.Println(\u0026#34;=== æ•°æ®åº“é”™è¯¯å¤„ç†æ¼”ç¤º ===\u0026#34;) // æµ‹è¯•åˆ›å»ºç”¨æˆ·çš„å„ç§é”™è¯¯æƒ…å†µ testUsers := []map[string]interface{}{ {\u0026#34;name\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;test@example.com\u0026#34;}, // åå­—ä¸ºç©º {\u0026#34;name\u0026#34;: \u0026#34;å¼ ä¸‰\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;\u0026#34;}, // é‚®ç®±ä¸ºç©º {\u0026#34;name\u0026#34;: \u0026#34;æå››\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;duplicate@example.com\u0026#34;}, // é‚®ç®±é‡å¤ {\u0026#34;name\u0026#34;: \u0026#34;ç‹äº”\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;valid@example.com\u0026#34;}, // æ­£å¸¸æƒ…å†µ } for i, user := range testUsers { fmt.Printf(\u0026#34;æµ‹è¯•%d - åˆ›å»ºç”¨æˆ· %+v: \u0026#34;, i+1, user) err := repo.CreateUser(user) if err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } else { fmt.Printf(\u0026#34;âœ… åˆ›å»ºæˆåŠŸ\\n\u0026#34;) } } // æµ‹è¯•æŸ¥è¯¢ç”¨æˆ· fmt.Println(\u0026#34;\\n=== æŸ¥è¯¢ç”¨æˆ·æµ‹è¯• ===\u0026#34;) testEmails := []string{ \u0026#34;\u0026#34;, // ç©ºé‚®ç®± \u0026#34;notfound@example.com\u0026#34;, // ç”¨æˆ·ä¸å­˜åœ¨ \u0026#34;valid@example.com\u0026#34;, // æ­£å¸¸æŸ¥è¯¢ } for _, email := range testEmails { fmt.Printf(\u0026#34;æŸ¥è¯¢é‚®ç®± \u0026#39;%s\u0026#39;: \u0026#34;, email) user, err := repo.FindUserByEmail(email) if err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } else { fmt.Printf(\u0026#34;âœ… æ‰¾åˆ°ç”¨æˆ·: %+v\\n\u0026#34;, user) } } } func main() { demonstrateDatabaseErrors() // äº‹åŠ¡é”™è¯¯å¤„ç†ç¤ºä¾‹ fmt.Println(\u0026#34;\\n=== äº‹åŠ¡é”™è¯¯å¤„ç† ===\u0026#34;) simulateTransaction := func() error { // å¼€å§‹äº‹åŠ¡ fmt.Println(\u0026#34;å¼€å§‹äº‹åŠ¡...\u0026#34;) // ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç”¨æˆ· if err := errors.New(\u0026#34;åˆ›å»ºç”¨æˆ·å¤±è´¥\u0026#34;); err != nil { fmt.Printf(\u0026#34;âŒ äº‹åŠ¡æ­¥éª¤1å¤±è´¥ï¼š%v\\n\u0026#34;, err) return fmt.Errorf(\u0026#34;äº‹åŠ¡å›æ»šï¼šåˆ›å»ºç”¨æˆ·å¤±è´¥ - %w\u0026#34;, err) } // ç¬¬äºŒæ­¥ï¼šåˆ›å»ºç”¨æˆ·èµ„æ–™ if err := errors.New(\u0026#34;åˆ›å»ºèµ„æ–™å¤±è´¥\u0026#34;); err != nil { fmt.Printf(\u0026#34;âŒ äº‹åŠ¡æ­¥éª¤2å¤±è´¥ï¼š%v\\n\u0026#34;, err) return fmt.Errorf(\u0026#34;äº‹åŠ¡å›æ»šï¼šåˆ›å»ºèµ„æ–™å¤±è´¥ - %w\u0026#34;, err) } // ç¬¬ä¸‰æ­¥ï¼šå‘é€æ¬¢è¿é‚®ä»¶ if err := errors.New(\u0026#34;å‘é€é‚®ä»¶å¤±è´¥\u0026#34;); err != nil { fmt.Printf(\u0026#34;âš ï¸ éå…³é”®æ­¥éª¤å¤±è´¥ï¼š%v\\n\u0026#34;, err) // éå…³é”®æ­¥éª¤å¤±è´¥ï¼Œå¯ä»¥é€‰æ‹©ç»§ç»­ } fmt.Println(\u0026#34;âœ… äº‹åŠ¡æäº¤æˆåŠŸ\u0026#34;) return nil } if err := simulateTransaction(); err != nil { fmt.Printf(\u0026#34;äº‹åŠ¡æœ€ç»ˆå¤±è´¥ï¼š%v\\n\u0026#34;, err) } } è¿è¡Œç»“æœï¼š\n=== æ•°æ®åº“é”™è¯¯å¤„ç†æ¼”ç¤º === æµ‹è¯•1 - åˆ›å»ºç”¨æˆ· map[email:test@example.com name:]: âŒ ç”¨æˆ·åä¸èƒ½ä¸ºç©º æµ‹è¯•2 - åˆ›å»ºç”¨æˆ· map[email: name:å¼ ä¸‰]: âŒ é‚®ç®±ä¸èƒ½ä¸ºç©º æµ‹è¯•3 - åˆ›å»ºç”¨æˆ· map[email:duplicate@example.com name:æå››]: âŒ é‚®ç®±åœ°å€å·²å­˜åœ¨ï¼šè¿åå”¯ä¸€çº¦æŸ æµ‹è¯•4 - åˆ›å»ºç”¨æˆ· map[email:valid@example.com name:ç‹äº”]: âœ… åˆ›å»ºæˆåŠŸ === æŸ¥è¯¢ç”¨æˆ·æµ‹è¯• === æŸ¥è¯¢é‚®ç®± \u0026#39;\u0026#39;: âŒ é‚®ç®±åœ°å€ä¸èƒ½ä¸ºç©º æŸ¥è¯¢é‚®ç®± \u0026#39;notfound@example.com\u0026#39;: âŒ ç”¨æˆ·ä¸å­˜åœ¨ æŸ¥è¯¢é‚®ç®± \u0026#39;valid@example.com\u0026#39;: âœ… æ‰¾åˆ°ç”¨æˆ·: map[email:valid@example.com id:1 name:å¼ ä¸‰] === äº‹åŠ¡é”™è¯¯å¤„ç† === å¼€å§‹äº‹åŠ¡... âŒ äº‹åŠ¡æ­¥éª¤1å¤±è´¥ï¼šåˆ›å»ºç”¨æˆ·å¤±è´¥ äº‹åŠ¡æœ€ç»ˆå¤±è´¥ï¼šäº‹åŠ¡å›æ»šï¼šåˆ›å»ºç”¨æˆ·å¤±è´¥ - åˆ›å»ºç”¨æˆ·å¤±è´¥ 6. é”™è¯¯å¤„ç†æœ€ä½³å®è·µ\r6.1 é”™è¯¯å¤„ç†åŸåˆ™\rpackage main import ( \u0026#34;errors\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;log\u0026#34; ) // å¥½çš„é”™è¯¯å¤„ç†å®è·µ // 1. åŠæ—¶å¤„ç†é”™è¯¯ï¼Œä¸è¦å»¶è¿Ÿ func goodErrorHandling1() error { data, err := readConfig() if err != nil { return fmt.Errorf(\u0026#34;è¯»å–é…ç½®å¤±è´¥: %w\u0026#34;, err) // ç«‹å³å¤„ç† } if err := validateConfig(data); err != nil { return fmt.Errorf(\u0026#34;é…ç½®éªŒè¯å¤±è´¥: %w\u0026#34;, err) // ç«‹å³å¤„ç† } return nil } // 2. æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯ä¿¡æ¯ func goodErrorHandling2(filename string) error { file, err := openFile(filename) if err != nil { // å¥½çš„é”™è¯¯ä¿¡æ¯åŒ…å«ä¸Šä¸‹æ–‡ return fmt.Errorf(\u0026#34;æ— æ³•æ‰“å¼€é…ç½®æ–‡ä»¶ \u0026#39;%s\u0026#39;: %w\u0026#34;, filename, err) } defer file.Close() return nil } // 3. åŒºåˆ†ä¸åŒç±»å‹çš„é”™è¯¯ func goodErrorHandling3(userID string) error { user, err := findUser(userID) if err != nil { // æ ¹æ®é”™è¯¯ç±»å‹é‡‡å–ä¸åŒè¡ŒåŠ¨ switch { case errors.Is(err, ErrUserNotFound): return fmt.Errorf(\u0026#34;ç”¨æˆ·ä¸å­˜åœ¨ï¼Œè¯·å…ˆæ³¨å†Œ\u0026#34;) case errors.Is(err, ErrDatabaseDown): return fmt.Errorf(\u0026#34;ç³»ç»Ÿç»´æŠ¤ä¸­ï¼Œè¯·ç¨åå†è¯•\u0026#34;) default: return fmt.Errorf(\u0026#34;è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥: %w\u0026#34;, err) } } if !user.IsActive { return fmt.Errorf(\u0026#34;ç”¨æˆ·è´¦å·å·²è¢«ç¦ç”¨\u0026#34;) } return nil } // 4. è®°å½•é”™è¯¯ä½†ä¸æš´éœ²å†…éƒ¨ç»†èŠ‚ func goodErrorHandling4() { if err := sensitiveOperation(); err != nil { // è®°å½•è¯¦ç»†é”™è¯¯åˆ°æ—¥å¿— log.Printf(\u0026#34;æ•æ„Ÿæ“ä½œå¤±è´¥ï¼ˆå†…éƒ¨é”™è¯¯ï¼‰ï¼š%+v\u0026#34;, err) // è¿”å›é€šç”¨é”™è¯¯ç»™ç”¨æˆ· fmt.Println(\u0026#34;æ“ä½œå¤±è´¥ï¼Œè¯·è”ç³»ç®¡ç†å‘˜\u0026#34;) } } // æ¨¡æ‹Ÿå‡½æ•° func readConfig() (interface{}, error) { return nil, errors.New(\u0026#34;æ–‡ä»¶ä¸å­˜åœ¨\u0026#34;) } func validateConfig(data interface{}) error { return errors.New(\u0026#34;é…ç½®æ ¼å¼é”™è¯¯\u0026#34;) } func openFile(filename string) (interface{}, error) { return nil, errors.New(\u0026#34;æƒé™è¢«æ‹’ç»\u0026#34;) } var ( ErrUserNotFound = errors.New(\u0026#34;ç”¨æˆ·ä¸å­˜åœ¨\u0026#34;) ErrDatabaseDown = errors.New(\u0026#34;æ•°æ®åº“å®•æœº\u0026#34;) ) func findUser(userID string) (interface{}, error) { return nil, ErrUserNotFound } type User struct { IsActive bool } func sensitiveOperation() error { return errors.New(\u0026#34;å†…éƒ¨æ•°æ®åº“å‡­è¯æ³„éœ²\u0026#34;) } // ä¸å¥½çš„é”™è¯¯å¤„ç†å®è·µ // 1. å¿½ç•¥é”™è¯¯ func badErrorHandling1() { data, _ := readConfig() // é”™è¯¯è¢«å¿½ç•¥ processConfig(data) // å¯èƒ½ä½¿ç”¨nilæ•°æ® } // 2. é”™è¯¯ä¿¡æ¯ä¸æ˜ç¡® func badErrorHandling2(filename string) error { _, err := openFile(filename) if err != nil { return err // é”™è¯¯ä¿¡æ¯å¤ªç®€å• } return nil } // 3. è¿‡åº¦åŒ…è£…é”™è¯¯ func badErrorHandling3() error { err := lowLevelError() if err != nil { return fmt.Errorf(\u0026#34;é«˜å±‚é”™è¯¯: %w\u0026#34;, fmt.Errorf(\u0026#34;ä¸­å±‚é”™è¯¯: %w\u0026#34;, fmt.Errorf(\u0026#34;åº•å±‚é”™è¯¯: %w\u0026#34;, err))) // è¿‡åº¦åŒ…è£… } return nil } func lowLevelError() error { return errors.New(\u0026#34;åº•å±‚é”™è¯¯\u0026#34;) } func processConfig(data interface{}) { // å¤„ç†é…ç½® } func main() { fmt.Println(\u0026#34;=== é”™è¯¯å¤„ç†æœ€ä½³å®è·µ ===\u0026#34;) fmt.Println(\u0026#34;å¥½çš„å®è·µç¤ºä¾‹ï¼š\u0026#34;) if err := goodErrorHandling1(); err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } if err := goodErrorHandling2(\u0026#34;config.json\u0026#34;); err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } if err := goodErrorHandling3(\u0026#34;user123\u0026#34;); err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } goodErrorHandling4() fmt.Println(\u0026#34;\\né¿å…çš„åå®è·µï¼š\u0026#34;) fmt.Println(\u0026#34;1. å¿½ç•¥é”™è¯¯å¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒ\u0026#34;) fmt.Println(\u0026#34;2. ä¸æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯éš¾ä»¥è°ƒè¯•\u0026#34;) fmt.Println(\u0026#34;3. è¿‡åº¦åŒ…è£…ä½¿é”™è¯¯é“¾è¿‡äºå¤æ‚\u0026#34;) // æ¼”ç¤ºé”™è¯¯æ—¥å¿—çš„æœ€ä½³å®è·µ fmt.Println(\u0026#34;\\n=== é”™è¯¯æ—¥å¿—æœ€ä½³å®è·µ ===\u0026#34;) logError := func(context string, err error) { // å¼€å‘ç¯å¢ƒï¼šè¯¦ç»†æ—¥å¿— log.Printf(\u0026#34;[DEBUG] %s å¤±è´¥: %+v\u0026#34;, context, err) // ç”Ÿäº§ç¯å¢ƒï¼šç®€åŒ–æ—¥å¿— log.Printf(\u0026#34;[ERROR] %s å¤±è´¥ï¼Œè¯·æŸ¥çœ‹è¯¦ç»†æ—¥å¿—\u0026#34;, context) } // æ¨¡æ‹Ÿé”™è¯¯è®°å½• sampleErr := fmt.Errorf(\u0026#34;æ•°æ®åº“è¿æ¥å¤±è´¥: %w\u0026#34;, errors.New(\u0026#34;ç½‘ç»œè¶…æ—¶\u0026#34;)) logError(\u0026#34;ç”¨æˆ·ç™»å½•\u0026#34;, sampleErr) } è¿è¡Œç»“æœï¼š\n=== é”™è¯¯å¤„ç†æœ€ä½³å®è·µ === å¥½çš„å®è·µç¤ºä¾‹ï¼š âŒ è¯»å–é…ç½®å¤±è´¥: æ–‡ä»¶ä¸å­˜åœ¨ âŒ æ— æ³•æ‰“å¼€é…ç½®æ–‡ä»¶ \u0026#39;config.json\u0026#39;: æƒé™è¢«æ‹’ç» âŒ ç”¨æˆ·ä¸å­˜åœ¨ï¼Œè¯·å…ˆæ³¨å†Œ æ“ä½œå¤±è´¥ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ é¿å…çš„åå®è·µï¼š 1. å¿½ç•¥é”™è¯¯å¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒ 2. ä¸æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯éš¾ä»¥è°ƒè¯• 3. è¿‡åº¦åŒ…è£…ä½¿é”™è¯¯é“¾è¿‡äºå¤æ‚ === é”™è¯¯æ—¥å¿—æœ€ä½³å®è·µ === 2024/01/15 15:30:45 [DEBUG] ç”¨æˆ·ç™»å½• å¤±è´¥: æ•°æ®åº“è¿æ¥å¤±è´¥: ç½‘ç»œè¶…æ—¶ 2024/01/15 15:30:45 [ERROR] ç”¨æˆ·ç™»å½• å¤±è´¥ï¼Œè¯·æŸ¥çœ‹è¯¦ç»†æ—¥å¿— 7. æ€»ç»“\rGoè¯­è¨€çš„é”™è¯¯å¤„ç†æœºåˆ¶ä½“ç°äº†å…¶\u0026quot;ç®€å•ã€æ˜ç¡®ã€å®ç”¨\u0026quot;çš„è®¾è®¡å“²å­¦ï¼š\næ ¸å¿ƒè¦ç‚¹ï¼š\né”™è¯¯æ˜¯å€¼ï¼Œåº”è¯¥è¢«æ˜¾å¼æ£€æŸ¥å’Œå¤„ç† ä½¿ç”¨erroræ¥å£ç»Ÿä¸€é”™è¯¯è¡¨ç¤º é€šè¿‡errorsåŒ…æä¾›ç°ä»£é”™è¯¯å¤„ç†åŠŸèƒ½ åˆç†ä½¿ç”¨é”™è¯¯åŒ…è£…å’Œä¸Šä¸‹æ–‡ä¿¡æ¯ æœ€ä½³å®è·µï¼š\nåŠæ—¶å¤„ç†ï¼šå‘ç°é”™è¯¯ç«‹å³å¤„ç†ï¼Œä¸è¦å»¶è¿Ÿ æä¾›ä¸Šä¸‹æ–‡ï¼šé”™è¯¯ä¿¡æ¯åº”è¯¥åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ åŒºåˆ†é”™è¯¯ç±»å‹ï¼šæ ¹æ®é”™è¯¯ç±»å‹é‡‡å–ä¸åŒå¤„ç†ç­–ç•¥ è®°å½•è¯¦ç»†æ—¥å¿—ï¼šå†…éƒ¨è®°å½•è¯¦ç»†é”™è¯¯ï¼Œå¯¹å¤–è¿”å›é€‚å½“ä¿¡æ¯ é¿å…é”™è¯¯å¿½ç•¥ï¼šé™¤éç¡®å®å¯ä»¥å¿½ç•¥ï¼Œå¦åˆ™éƒ½åº”è¯¥å¤„ç† ç°ä»£å‘å±•ï¼š\nGo 1.13+ å¼•å…¥äº†é”™è¯¯åŒ…è£…å’Œæ£€æŸ¥çš„æ–°åŠŸèƒ½ errors.Is() å’Œ errors.As() æä¾›äº†æ›´å¥½çš„é”™è¯¯æ£€æŸ¥èƒ½åŠ› fmt.Errorf() çš„ %w åŠ¨è¯æ”¯æŒé”™è¯¯åŒ…è£… è‰¯å¥½çš„é”™è¯¯å¤„ç†ä¸ä»…èƒ½æé«˜ç¨‹åºçš„å¥å£®æ€§ï¼Œè¿˜èƒ½å¤§å¤§æ”¹å–„ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”è¯¥æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„é”™è¯¯å¤„ç†ç­–ç•¥ã€‚\n","date":"2026-02-04T20:15:16+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-12/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬åäºŒç¯‡ é”™è¯¯å¤„ç†(error)ã€‘"},{"content":"1. ä»€ä¹ˆæ˜¯æ¥å£\ræ¥å£æ˜¯Goè¯­è¨€ä¸­å®ç°æŠ½è±¡å’Œå¤šæ€çš„æ ¸å¿ƒæœºåˆ¶ã€‚å¦‚æœè¯´ç»“æ„ä½“è§£å†³äº†\u0026quot;æ•°æ®æ˜¯ä»€ä¹ˆ\u0026quot;çš„é—®é¢˜ï¼Œé‚£ä¹ˆæ¥å£è§£å†³çš„å°±æ˜¯\u0026quot;èƒ½åšä»€ä¹ˆ\u0026quot;çš„é—®é¢˜ã€‚æ¥å£å®šä¹‰äº†ä¸€ç»„æ–¹æ³•ç­¾åï¼Œä»»ä½•å®ç°äº†è¿™äº›æ–¹æ³•çš„ç±»å‹éƒ½\u0026quot;å®ç°\u0026quot;äº†è¯¥æ¥å£ã€‚\n1.1 æ¥å£çš„åŸºæœ¬æ¦‚å¿µ\rè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥ç†è§£æ¥å£ï¼š\nç°å®åœºæ™¯ï¼š\nUSBæ¥å£ï¼šå®šä¹‰äº†æ•°æ®ä¼ è¾“çš„æ ‡å‡† ä»»ä½•ç¬¦åˆUSBæ ‡å‡†çš„è®¾å¤‡ï¼ˆUç›˜ã€é¼ æ ‡ã€é”®ç›˜ï¼‰éƒ½å¯ä»¥æ’å…¥ä½¿ç”¨ æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒå…·ä½“æ˜¯ä»€ä¹ˆè®¾å¤‡ï¼Œåªè¦ç¬¦åˆUSBæ ‡å‡†å°±è¡Œ ç¼–ç¨‹åœºæ™¯ï¼š\næ¥å£å®šä¹‰äº†æ–¹æ³•ç­¾åï¼ˆèƒ½åšä»€ä¹ˆï¼‰ ä»»ä½•å®ç°äº†è¿™äº›æ–¹æ³•çš„ç±»å‹éƒ½è‡ªåŠ¨å®ç°äº†è¯¥æ¥å£ æˆ‘ä»¬å¯ä»¥é¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸å…³å¿ƒå…·ä½“å®ç° 1.2 æ¥å£çš„ä»·å€¼å’Œæ„ä¹‰\ræ¥å£çš„ä¸»è¦ä½œç”¨ï¼š\nè§£è€¦åˆï¼šåˆ†ç¦»æ¥å£å®šä¹‰å’Œå…·ä½“å®ç° å¤šæ€æ€§ï¼šåŒä¸€æ¥å£å¯ä»¥æœ‰å¤šç§å®ç° æŠ½è±¡æ€§ï¼šéšè—å…·ä½“å®ç°ç»†èŠ‚ å¯æ‰©å±•æ€§ï¼šæ˜“äºæ·»åŠ æ–°çš„å®ç° æµ‹è¯•å‹å¥½ï¼šä¾¿äºç¼–å†™mockæµ‹è¯• 2. æ¥å£çš„åŸºæœ¬è¯­æ³•\r2.1 æ¥å£å®šä¹‰è¯­æ³•\rtype æ¥å£å interface { æ–¹æ³•å1(å‚æ•°åˆ—è¡¨) è¿”å›å€¼åˆ—è¡¨ æ–¹æ³•å2(å‚æ•°åˆ—è¡¨) è¿”å›å€¼åˆ—è¡¨ // ... æ›´å¤šæ–¹æ³• } 2.2 ç®€å•æ¥å£ç¤ºä¾‹\rpackage main import \u0026#34;fmt\u0026#34; // å®šä¹‰åŠ¨ç‰©æ¥å£ type Animal interface { Speak() string // è¯´è¯æ–¹æ³• Move() string // ç§»åŠ¨æ–¹æ³• GetAge() int // è·å–å¹´é¾„æ–¹æ³• } // ç‹—çš„å®ç° type Dog struct { Name string Age int } func (d Dog) Speak() string { return \u0026#34;æ±ªæ±ª\u0026#34; } func (d Dog) Move() string { return \u0026#34;è·‘æ­¥\u0026#34; } func (d Dog) GetAge() int { return d.Age } // çŒ«çš„å®ç° type Cat struct { Name string Age int } func (c Cat) Speak() string { return \u0026#34;å–µå–µ\u0026#34; } func (c Cat) Move() string { return \u0026#34;çˆ¬è¡Œ\u0026#34; } func (c Cat) GetAge() int { return c.Age } // é¸Ÿçš„å®ç° type Bird struct { Species string Age int } func (b Bird) Speak() string { return \u0026#34;å•¾å•¾\u0026#34; } func (b Bird) Move() string { return \u0026#34;é£ç¿”\u0026#34; } func (b Bird) GetAge() int { return b.Age } // ä½¿ç”¨æ¥å£çš„å‡½æ•° func MakeAnimalSpeak(animal Animal) { fmt.Printf(\u0026#34;åŠ¨ç‰©è¯´è¯ï¼š%s\\n\u0026#34;, animal.Speak()) } func ShowAnimalMove(animal Animal) { fmt.Printf(\u0026#34;åŠ¨ç‰©ç§»åŠ¨æ–¹å¼ï¼š%s\\n\u0026#34;, animal.Move()) } func main() { // åˆ›å»ºä¸åŒç±»å‹çš„åŠ¨ç‰© dog := Dog{Name: \u0026#34;æ—ºè´¢\u0026#34;, Age: 3} cat := Cat{Name: \u0026#34;å’ªå’ª\u0026#34;, Age: 2} bird := Bird{Species: \u0026#34;é¹¦é¹‰\u0026#34;, Age: 1} // éƒ½å¯ä»¥å½“ä½œAnimalæ¥å£ä½¿ç”¨ animals := []Animal{dog, cat, bird} fmt.Println(\u0026#34;=== åŠ¨ç‰©è¡¨æ¼” ===\u0026#34;) for i, animal := range animals { fmt.Printf(\u0026#34;ç¬¬%dä¸ªåŠ¨ç‰©ï¼š\\n\u0026#34;, i+1) MakeAnimalSpeak(animal) ShowAnimalMove(animal) fmt.Printf(\u0026#34;å¹´é¾„ï¼š%då²\\n\\n\u0026#34;, animal.GetAge()) } // ç›´æ¥ä½¿ç”¨å…·ä½“ç±»å‹ fmt.Println(\u0026#34;=== å…·ä½“ç±»å‹è°ƒç”¨ ===\u0026#34;) fmt.Printf(\u0026#34;ç‹—è¯´è¯ï¼š%s\\n\u0026#34;, dog.Speak()) fmt.Printf(\u0026#34;çŒ«ç§»åŠ¨ï¼š%s\\n\u0026#34;, cat.Move()) fmt.Printf(\u0026#34;é¸Ÿå¹´é¾„ï¼š%d\\n\u0026#34;, bird.GetAge()) } è¿è¡Œç»“æœï¼š\n=== åŠ¨ç‰©è¡¨æ¼” === ç¬¬1ä¸ªåŠ¨ç‰©ï¼š åŠ¨ç‰©è¯´è¯ï¼šæ±ªæ±ª åŠ¨ç‰©ç§»åŠ¨æ–¹å¼ï¼šè·‘æ­¥ å¹´é¾„ï¼š3å² ç¬¬2ä¸ªåŠ¨ç‰©ï¼š åŠ¨ç‰©è¯´è¯ï¼šå–µå–µ åŠ¨ç‰©ç§»åŠ¨æ–¹å¼ï¼šçˆ¬è¡Œ å¹´é¾„ï¼š2å² ç¬¬3ä¸ªåŠ¨ç‰©ï¼š åŠ¨ç‰©è¯´è¯ï¼šå•¾å•¾ åŠ¨ç‰©ç§»åŠ¨æ–¹å¼ï¼šé£ç¿” å¹´é¾„ï¼š1å² === å…·ä½“ç±»å‹è°ƒç”¨ === ç‹—è¯´è¯ï¼šæ±ªæ±ª çŒ«ç§»åŠ¨ï¼šçˆ¬è¡Œ é¸Ÿå¹´é¾„ï¼š1 3. æ¥å£çš„å®ç°æœºåˆ¶\r3.1 éšå¼å®ç°\rGoè¯­è¨€çš„æ¥å£å®ç°æ˜¯éšå¼çš„ï¼Œä¸éœ€è¦æ˜¾å¼å£°æ˜ï¼š\npackage main import \u0026#34;fmt\u0026#34; // å®šä¹‰æ¥å£ type Writer interface { Write(data string) (int, error) } type Reader interface { Read() (string, error) } // æ–‡ä»¶ç±»å‹å®ç° type File struct { Name string Content string Pos int } func (f *File) Write(data string) (int, error) { f.Content += data return len(data), nil } func (f *File) Read() (string, error) { if f.Pos \u0026gt;= len(f.Content) { return \u0026#34;\u0026#34;, fmt.Errorf(\u0026#34;è¯»å–ç»“æŸ\u0026#34;) } result := f.Content[f.Pos:] f.Pos = len(f.Content) return result, nil } // ç½‘ç»œè¿æ¥ç±»å‹å®ç° type NetworkConnection struct { Address string Buffer string } func (nc *NetworkConnection) Write(data string) (int, error) { nc.Buffer += data fmt.Printf(\u0026#34;ç½‘ç»œå‘é€åˆ° %s: %s\\n\u0026#34;, nc.Address, data) return len(data), nil } func (nc *NetworkConnection) Read() (string, error) { if nc.Buffer == \u0026#34;\u0026#34; { return \u0026#34;\u0026#34;, fmt.Errorf(\u0026#34;ç¼“å†²åŒºä¸ºç©º\u0026#34;) } result := nc.Buffer nc.Buffer = \u0026#34;\u0026#34; return result, nil } // ä½¿ç”¨æ¥å£çš„é€šç”¨å‡½æ•° func ProcessData(w Writer, r Reader, data string) { // å†™å…¥æ•°æ® n, err := w.Write(data) if err != nil { fmt.Printf(\u0026#34;å†™å…¥é”™è¯¯ï¼š%v\\n\u0026#34;, err) return } fmt.Printf(\u0026#34;æˆåŠŸå†™å…¥%dä¸ªå­—ç¬¦\\n\u0026#34;, n) // è¯»å–æ•°æ® content, err := r.Read() if err != nil { fmt.Printf(\u0026#34;è¯»å–é”™è¯¯ï¼š%v\\n\u0026#34;, err) return } fmt.Printf(\u0026#34;è¯»å–å†…å®¹ï¼š%s\\n\u0026#34;, content) } func main() { // æ–‡ä»¶æ“ä½œ file := \u0026amp;File{Name: \u0026#34;test.txt\u0026#34;} fmt.Println(\u0026#34;=== æ–‡ä»¶æ“ä½œ ===\u0026#34;) ProcessData(file, file, \u0026#34;Hello, File!\u0026#34;) // ç½‘ç»œæ“ä½œ conn := \u0026amp;NetworkConnection{Address: \u0026#34;192.168.1.1:8080\u0026#34;} fmt.Println(\u0026#34;\\n=== ç½‘ç»œæ“ä½œ ===\u0026#34;) ProcessData(conn, conn, \u0026#34;Hello, Network!\u0026#34;) // æ··åˆä½¿ç”¨ fmt.Println(\u0026#34;\\n=== æ··åˆæ“ä½œ ===\u0026#34;) ProcessData(file, conn, \u0026#34;Mixed operation test\u0026#34;) } è¿è¡Œç»“æœï¼š\n=== æ–‡ä»¶æ“ä½œ === æˆåŠŸå†™å…¥11ä¸ªå­—ç¬¦ è¯»å–å†…å®¹ï¼šHello, File! === ç½‘ç»œæ“ä½œ === ç½‘ç»œå‘é€åˆ° 192.168.1.1:8080: Hello, Network! æˆåŠŸå†™å…¥15ä¸ªå­—ç¬¦ è¯»å–å†…å®¹ï¼šHello, Network! === æ··åˆæ“ä½œ === æˆåŠŸå†™å…¥21ä¸ªå­—ç¬¦ ç½‘ç»œå‘é€åˆ° 192.168.1.1:8080: Hello, File! è¯»å–å†…å®¹ï¼šHello, File! 3.2 æ¥å£å€¼çš„å†…éƒ¨ç»“æ„\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;reflect\u0026#34; \u0026#34;unsafe\u0026#34; ) type Speaker interface { Speak() string } type Dog struct { Name string } func (d Dog) Speak() string { return \u0026#34;æ±ªæ±ªï¼Œæˆ‘æ˜¯\u0026#34; + d.Name } type Cat struct { Name string } func (c Cat) Speak() string { return \u0026#34;å–µå–µï¼Œæˆ‘æ˜¯\u0026#34; + c.Name } func InspectInterface(i interface{}) { v := reflect.ValueOf(i) fmt.Printf(\u0026#34;ç±»å‹ï¼š%T\\n\u0026#34;, i) fmt.Printf(\u0026#34;å€¼ï¼š%v\\n\u0026#34;, i) fmt.Printf(\u0026#34;æ˜¯å¦ä¸ºnilï¼š%t\\n\u0026#34;, i == nil) if v.Kind() == reflect.Interface { elem := v.Elem() fmt.Printf(\u0026#34;åŠ¨æ€ç±»å‹ï¼š%T\\n\u0026#34;, elem.Interface()) fmt.Printf(\u0026#34;åŠ¨æ€å€¼ï¼š%v\\n\u0026#34;, elem.Interface()) } fmt.Println(\u0026#34;---\u0026#34;) } func main() { // nilæ¥å£å€¼ var speaker1 Speaker fmt.Println(\u0026#34;1. nilæ¥å£å€¼ï¼š\u0026#34;) InspectInterface(speaker1) // å…·ä½“ç±»å‹èµ‹å€¼ dog := Dog{Name: \u0026#34;æ—ºè´¢\u0026#34;} speaker1 = dog fmt.Println(\u0026#34;2. èµ‹å€¼Dogåï¼š\u0026#34;) InspectInterface(speaker1) // ä¸åŒç±»å‹èµ‹å€¼ cat := Cat{Name: \u0026#34;å’ªå’ª\u0026#34;} speaker1 = cat fmt.Println(\u0026#34;3. èµ‹å€¼Catåï¼š\u0026#34;) InspectInterface(speaker1) // æ¥å£åˆ‡ç‰‡ speakers := []Speaker{dog, cat} fmt.Println(\u0026#34;4. æ¥å£åˆ‡ç‰‡ï¼š\u0026#34;) for i, s := range speakers { fmt.Printf(\u0026#34;ç´¢å¼•%d: %T - %s\\n\u0026#34;, i, s, s.Speak()) } } è¿è¡Œç»“æœï¼š\n1. nilæ¥å£å€¼ï¼š ç±»å‹ï¼š\u0026lt;nil\u0026gt; å€¼ï¼š\u0026lt;nil\u0026gt; æ˜¯å¦ä¸ºnilï¼štrue --- 2. èµ‹å€¼Dogåï¼š ç±»å‹ï¼šmain.Dog å€¼ï¼š{æ—ºè´¢} æ˜¯å¦ä¸ºnilï¼šfalse åŠ¨æ€ç±»å‹ï¼šmain.Dog åŠ¨æ€å€¼ï¼š{æ—ºè´¢} --- 3. èµ‹å€¼Catåï¼š ç±»å‹ï¼šmain.Cat å€¼ï¼š{å’ªå’ª} æ˜¯å¦ä¸ºnilï¼šfalse åŠ¨æ€ç±»å‹ï¼šmain.Cat åŠ¨æ€å€¼ï¼š{å’ªå’ª} --- 4. æ¥å£åˆ‡ç‰‡ï¼š ç´¢å¼•0: main.Dog - æ±ªæ±ªï¼Œæˆ‘æ˜¯æ—ºè´¢ ç´¢å¼•1: main.Cat - å–µå–µï¼Œæˆ‘æ˜¯å’ªå’ª 4. å¸¸ç”¨å†…ç½®æ¥å£\r4.1 erroræ¥å£\rpackage main import ( \u0026#34;fmt\u0026#34; ) // erroræ¥å£çš„å®šä¹‰ // type error interface { // Error() string // } // è‡ªå®šä¹‰é”™è¯¯ç±»å‹ type ValidationError struct { Field string Message string } func (e ValidationError) Error() string { return fmt.Sprintf(\u0026#34;éªŒè¯é”™è¯¯ - å­—æ®µï¼š%sï¼Œæ¶ˆæ¯ï¼š%s\u0026#34;, e.Field, e.Message) } type NetworkError struct { Code int Message string } func (e NetworkError) Error() string { return fmt.Sprintf(\u0026#34;ç½‘ç»œé”™è¯¯[%d]: %s\u0026#34;, e.Code, e.Message) } // è¿”å›errorçš„å‡½æ•° func ValidateAge(age int) error { if age \u0026lt; 0 { return ValidationError{ Field: \u0026#34;age\u0026#34;, Message: \u0026#34;å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°\u0026#34;, } } if age \u0026gt; 150 { return ValidationError{ Field: \u0026#34;age\u0026#34;, Message: \u0026#34;å¹´é¾„ä¸èƒ½è¶…è¿‡150å²\u0026#34;, } } return nil // æ²¡æœ‰é”™è¯¯ } func ConnectToServer(url string) error { if url == \u0026#34;\u0026#34; { return NetworkError{ Code: 400, Message: \u0026#34;URLä¸èƒ½ä¸ºç©º\u0026#34;, } } if url == \u0026#34;timeout.com\u0026#34; { return NetworkError{ Code: 504, Message: \u0026#34;è¿æ¥è¶…æ—¶\u0026#34;, } } return nil // è¿æ¥æˆåŠŸ } func main() { // æµ‹è¯•éªŒè¯é”™è¯¯ ages := []int{-5, 25, 200} for _, age := range ages { fmt.Printf(\u0026#34;éªŒè¯å¹´é¾„ %d: \u0026#34;, age) if err := ValidateAge(age); err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } else { fmt.Printf(\u0026#34;âœ… éªŒè¯é€šè¿‡\\n\u0026#34;) } } // æµ‹è¯•ç½‘ç»œé”™è¯¯ urls := []string{\u0026#34;\u0026#34;, \u0026#34;timeout.com\u0026#34;, \u0026#34;google.com\u0026#34;} fmt.Println(\u0026#34;\\n=== ç½‘ç»œè¿æ¥æµ‹è¯• ===\u0026#34;) for _, url := range urls { fmt.Printf(\u0026#34;è¿æ¥ %s: \u0026#34;, url) if err := ConnectToServer(url); err != nil { fmt.Printf(\u0026#34;âŒ %v\\n\u0026#34;, err) } else { fmt.Printf(\u0026#34;âœ… è¿æ¥æˆåŠŸ\\n\u0026#34;) } } // é”™è¯¯ç±»å‹æ–­è¨€ fmt.Println(\u0026#34;\\n=== é”™è¯¯ç±»å‹åˆ†æ ===\u0026#34;) err := ValidateAge(-1) if err != nil { if validationErr, ok := err.(ValidationError); ok { fmt.Printf(\u0026#34;è¿™æ˜¯éªŒè¯é”™è¯¯ï¼šå­—æ®µ=%s, æ¶ˆæ¯=%s\\n\u0026#34;, validationErr.Field, validationErr.Message) } } } è¿è¡Œç»“æœï¼š\néªŒè¯å¹´é¾„ -5: âŒ éªŒè¯é”™è¯¯ - å­—æ®µï¼šageï¼Œæ¶ˆæ¯ï¼šå¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•° éªŒè¯å¹´é¾„ 25: âœ… éªŒè¯é€šè¿‡ éªŒè¯å¹´é¾„ 200: âŒ éªŒè¯é”™è¯¯ - å­—æ®µï¼šageï¼Œæ¶ˆæ¯ï¼šå¹´é¾„ä¸èƒ½è¶…è¿‡150å² === ç½‘ç»œè¿æ¥æµ‹è¯• === è¿æ¥ : âŒ ç½‘ç»œé”™è¯¯[400]: URLä¸èƒ½ä¸ºç©º è¿æ¥ timeout.com: âŒ ç½‘ç»œé”™è¯¯[504]: è¿æ¥è¶…æ—¶ è¿æ¥ google.com: âœ… è¿æ¥æˆåŠŸ === é”™è¯¯ç±»å‹åˆ†æ === è¿™æ˜¯éªŒè¯é”™è¯¯ï¼šå­—æ®µ=age, æ¶ˆæ¯=å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•° 4.2 Stringeræ¥å£\rpackage main import ( \u0026#34;fmt\u0026#34; ) // Stringeræ¥å£å®šä¹‰ // type Stringer interface { // String() string // } type Person struct { Name string Age int City string } func (p Person) String() string { return fmt.Sprintf(\u0026#34;å§“åï¼š%sï¼Œå¹´é¾„ï¼š%då²ï¼Œæ¥è‡ªï¼š%s\u0026#34;, p.Name, p.Age, p.City) } type Product struct { Name string Price float64 Stock int } func (p Product) String() string { return fmt.Sprintf(\u0026#34;å•†å“ï¼š%sï¼Œä»·æ ¼ï¼šÂ¥%.2fï¼Œåº“å­˜ï¼š%dä»¶\u0026#34;, p.Name, p.Price, p.Stock) } type Point struct { X, Y int } func (p Point) String() string { return fmt.Sprintf(\u0026#34;(%d, %d)\u0026#34;, p.X, p.Y) } func main() { // åˆ›å»ºå„ç§å¯¹è±¡ person := Person{Name: \u0026#34;å¼ ä¸‰\u0026#34;, Age: 25, City: \u0026#34;åŒ—äº¬\u0026#34;} product := Product{Name: \u0026#34;iPhone 15\u0026#34;, Price: 5999.00, Stock: 100} point := Point{X: 10, Y: 20} // ç›´æ¥æ‰“å°ä¼šè‡ªåŠ¨è°ƒç”¨String()æ–¹æ³• fmt.Println(\u0026#34;=== è‡ªåŠ¨è°ƒç”¨String()æ–¹æ³• ===\u0026#34;) fmt.Println(person) fmt.Println(product) fmt.Println(point) // æ˜¾å¼è°ƒç”¨String()æ–¹æ³• fmt.Println(\u0026#34;\\n=== æ˜¾å¼è°ƒç”¨String()æ–¹æ³• ===\u0026#34;) fmt.Println(\u0026#34;Personå­—ç¬¦ä¸²è¡¨ç¤ºï¼š\u0026#34;, person.String()) fmt.Println(\u0026#34;Productå­—ç¬¦ä¸²è¡¨ç¤ºï¼š\u0026#34;, product.String()) fmt.Println(\u0026#34;Pointå­—ç¬¦ä¸²è¡¨ç¤ºï¼š\u0026#34;, point.String()) // åœ¨æ ¼å¼åŒ–ä¸­çš„ä½¿ç”¨ fmt.Println(\u0026#34;\\n=== æ ¼å¼åŒ–è¾“å‡º ===\u0026#34;) fmt.Printf(\u0026#34;ä¸ªäººä¿¡æ¯ï¼š%s\\n\u0026#34;, person) fmt.Printf(\u0026#34;å•†å“ä¿¡æ¯ï¼š%s\\n\u0026#34;, product) fmt.Printf(\u0026#34;åæ ‡ä¿¡æ¯ï¼š%s\\n\u0026#34;, point) // åˆ‡ç‰‡å’Œæ˜ å°„ people := []Person{ {Name: \u0026#34;æå››\u0026#34;, Age: 30, City: \u0026#34;ä¸Šæµ·\u0026#34;}, {Name: \u0026#34;ç‹äº”\u0026#34;, Age: 28, City: \u0026#34;å¹¿å·\u0026#34;}, } fmt.Println(\u0026#34;\\n=== å¯¹è±¡åˆ‡ç‰‡ ===\u0026#34;) fmt.Println(people) } è¿è¡Œç»“æœï¼š\n=== è‡ªåŠ¨è°ƒç”¨String()æ–¹æ³• === å§“åï¼šå¼ ä¸‰ï¼Œå¹´é¾„ï¼š25å²ï¼Œæ¥è‡ªï¼šåŒ—äº¬ å•†å“ï¼šiPhone 15ï¼Œä»·æ ¼ï¼šÂ¥5999.00ï¼Œåº“å­˜ï¼š100ä»¶ (10, 20) === æ˜¾å¼è°ƒç”¨String()æ–¹æ³• === Personå­—ç¬¦ä¸²è¡¨ç¤ºï¼š å§“åï¼šå¼ ä¸‰ï¼Œå¹´é¾„ï¼š25å²ï¼Œæ¥è‡ªï¼šåŒ—äº¬ Productå­—ç¬¦ä¸²è¡¨ç¤ºï¼š å•†å“ï¼šiPhone 15ï¼Œä»·æ ¼ï¼šÂ¥5999.00ï¼Œåº“å­˜ï¼š100ä»¶ Pointå­—ç¬¦ä¸²è¡¨ç¤ºï¼š (10, 20) === æ ¼å¼åŒ–è¾“å‡º === ä¸ªäººä¿¡æ¯ï¼šå§“åï¼šå¼ ä¸‰ï¼Œå¹´é¾„ï¼š25å²ï¼Œæ¥è‡ªï¼šåŒ—äº¬ å•†å“ä¿¡æ¯ï¼šå•†å“ï¼šiPhone 15ï¼Œä»·æ ¼ï¼šÂ¥5999.00ï¼Œåº“å­˜ï¼š100ä»¶ åæ ‡ä¿¡æ¯ï¼š(10, 20) === å¯¹è±¡åˆ‡ç‰‡ === [{æå›› 30 ä¸Šæµ·} {ç‹äº” 28 å¹¿å·}] 5. æ¥å£ç»„åˆå’ŒåµŒå¥—\r5.1 æ¥å£ç»„åˆ\rpackage main import \u0026#34;fmt\u0026#34; // åŸºç¡€æ¥å£ type Reader interface { Read() (string, error) } type Writer interface { Write(data string) (int, error) } type Closer interface { Close() error } // ç»„åˆæ¥å£ type ReadWriter interface { Reader // åµŒå…¥Readeræ¥å£ Writer // åµŒå…¥Writeræ¥å£ } type ReadWriteCloser interface { Reader // è¯»å–åŠŸèƒ½ Writer // å†™å…¥åŠŸèƒ½ Closer // å…³é—­åŠŸèƒ½ } // å…·ä½“å®ç° type File struct { Name string Content string Closed bool } func (f *File) Read() (string, error) { if f.Closed { return \u0026#34;\u0026#34;, fmt.Errorf(\u0026#34;æ–‡ä»¶å·²å…³é—­\u0026#34;) } return f.Content, nil } func (f *File) Write(data string) (int, error) { if f.Closed { return 0, fmt.Errorf(\u0026#34;æ–‡ä»¶å·²å…³é—­\u0026#34;) } f.Content += data return len(data), nil } func (f *File) Close() error { f.Closed = true fmt.Printf(\u0026#34;æ–‡ä»¶ %s å·²å…³é—­\\n\u0026#34;, f.Name) return nil } // ç½‘ç»œè¿æ¥å®ç° type NetworkConnection struct { Address string Buffer string Closed bool } func (nc *NetworkConnection) Read() (string, error) { if nc.Closed { return \u0026#34;\u0026#34;, fmt.Errorf(\u0026#34;è¿æ¥å·²å…³é—­\u0026#34;) } if nc.Buffer == \u0026#34;\u0026#34; { return \u0026#34;\u0026#34;, fmt.Errorf(\u0026#34;ç¼“å†²åŒºä¸ºç©º\u0026#34;) } result := nc.Buffer nc.Buffer = \u0026#34;\u0026#34; return result, nil } func (nc *NetworkConnection) Write(data string) (int, error) { if nc.Closed { return 0, fmt.Errorf(\u0026#34;è¿æ¥å·²å…³é—­\u0026#34;) } nc.Buffer += data fmt.Printf(\u0026#34;å‘é€åˆ° %s: %s\\n\u0026#34;, nc.Address, data) return len(data), nil } func (nc *NetworkConnection) Close() error { nc.Closed = true fmt.Printf(\u0026#34;ç½‘ç»œè¿æ¥ %s å·²å…³é—­\\n\u0026#34;, nc.Address) return nil } // ä½¿ç”¨ç»„åˆæ¥å£çš„å‡½æ•° func ProcessData(rwc ReadWriteCloser, data string) error { // å†™å…¥æ•°æ® _, err := rwc.Write(data) if err != nil { return err } // è¯»å–æ•°æ® content, err := rwc.Read() if err != nil { return err } fmt.Printf(\u0026#34;è¯»å–åˆ°æ•°æ®ï¼š%s\\n\u0026#34;, content) // å…³é—­èµ„æº return rwc.Close() } func main() { // æ–‡ä»¶æ“ä½œ file := \u0026amp;File{Name: \u0026#34;test.txt\u0026#34;} fmt.Println(\u0026#34;=== æ–‡ä»¶æ“ä½œ ===\u0026#34;) err := ProcessData(file, \u0026#34;Hello, File System!\u0026#34;) if err != nil { fmt.Printf(\u0026#34;æ–‡ä»¶æ“ä½œé”™è¯¯ï¼š%v\\n\u0026#34;, err) } // ç½‘ç»œæ“ä½œ conn := \u0026amp;NetworkConnection{Address: \u0026#34;192.168.1.100:8080\u0026#34;} fmt.Println(\u0026#34;\\n=== ç½‘ç»œæ“ä½œ ===\u0026#34;) err = ProcessData(conn, \u0026#34;Hello, Network!\u0026#34;) if err != nil { fmt.Printf(\u0026#34;ç½‘ç»œæ“ä½œé”™è¯¯ï¼š%v\\n\u0026#34;, err) } // éªŒè¯æ¥å£å…¼å®¹æ€§ fmt.Println(\u0026#34;\\n=== æ¥å£å…¼å®¹æ€§æµ‹è¯• ===\u0026#34;) var rw ReadWriter = file fmt.Printf(\u0026#34;Fileå®ç°äº†ReadWriteræ¥å£ï¼š%t\\n\u0026#34;, rw != nil) var reader Reader = conn fmt.Printf(\u0026#34;NetworkConnectionå®ç°äº†Readeræ¥å£ï¼š%t\\n\u0026#34;, reader != nil) } è¿è¡Œç»“æœï¼š\n=== æ–‡ä»¶æ“ä½œ === è¯»å–åˆ°æ•°æ®ï¼šHello, File System! æ–‡ä»¶ test.txt å·²å…³é—­ === ç½‘ç»œæ“ä½œ === å‘é€åˆ° 192.168.1.100:8080: Hello, Network! è¯»å–åˆ°æ•°æ®ï¼šHello, Network! ç½‘ç»œè¿æ¥ 192.168.1.100:8080 å·²å…³é—­ === æ¥å£å…¼å®¹æ€§æµ‹è¯• === Fileå®ç°äº†ReadWriteræ¥å£ï¼štrue NetworkConnectionå®ç°äº†Readeræ¥å£ï¼štrue 6. ç©ºæ¥å£å’Œç±»å‹æ–­è¨€\r6.1 ç©ºæ¥å£ interface\rpackage main import ( \u0026#34;fmt\u0026#34; ) // ç©ºæ¥å£å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å€¼ func PrintAnything(v interface{}) { fmt.Printf(\u0026#34;å€¼ï¼š%vï¼Œç±»å‹ï¼š%T\\n\u0026#34;, v, v) } func GetTypeDescription(v interface{}) string { switch v.(type) { case int: return \u0026#34;è¿™æ˜¯ä¸€ä¸ªæ•´æ•°\u0026#34; case string: return \u0026#34;è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²\u0026#34; case bool: return \u0026#34;è¿™æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼\u0026#34; case []int: return \u0026#34;è¿™æ˜¯ä¸€ä¸ªæ•´æ•°åˆ‡ç‰‡\u0026#34; case map[string]int: return \u0026#34;è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°æ•´æ•°çš„æ˜ å°„\u0026#34; default: return fmt.Sprintf(\u0026#34;è¿™æ˜¯ %T ç±»å‹çš„å€¼\u0026#34;, v) } } func main() { // ç©ºæ¥å£å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹ values := []interface{}{ 42, \u0026#34;Hello\u0026#34;, true, 3.14, []int{1, 2, 3}, map[string]int{\u0026#34;a\u0026#34;: 1, \u0026#34;b\u0026#34;: 2}, struct{ Name string }{Name: \u0026#34;å¼ ä¸‰\u0026#34;}, } fmt.Println(\u0026#34;=== ç©ºæ¥å£å­˜å‚¨ä¸åŒç±»å‹ ===\u0026#34;) for i, v := range values { fmt.Printf(\u0026#34;ç´¢å¼•%d: %v\\n\u0026#34;, i, GetTypeDescription(v)) PrintAnything(v) } // ç©ºæ¥å£çš„å®é™…åº”ç”¨ fmt.Println(\u0026#34;\\n=== å®é™…åº”ç”¨åœºæ™¯ ===\u0026#34;) // 1. é€šç”¨å®¹å™¨ container := make(map[string]interface{}) container[\u0026#34;name\u0026#34;] = \u0026#34;å¼ ä¸‰\u0026#34; container[\u0026#34;age\u0026#34;] = 25 container[\u0026#34;scores\u0026#34;] = []int{85, 92, 78} container[\u0026#34;active\u0026#34;] = true fmt.Println(\u0026#34;é€šç”¨å®¹å™¨å†…å®¹ï¼š\u0026#34;) for key, value := range container { fmt.Printf(\u0026#34; %s: %v (%T)\\n\u0026#34;, key, value, value) } // 2. å‡½æ•°å‚æ•° processData := func(data interface{}) { switch v := data.(type) { case string: fmt.Printf(\u0026#34;å¤„ç†å­—ç¬¦ä¸²ï¼š%s (é•¿åº¦: %d)\\n\u0026#34;, v, len(v)) case int: fmt.Printf(\u0026#34;å¤„ç†æ•´æ•°ï¼š%d (å¹³æ–¹: %d)\\n\u0026#34;, v, v*v) case []int: sum := 0 for _, n := range v { sum += n } fmt.Printf(\u0026#34;å¤„ç†æ•´æ•°åˆ‡ç‰‡ï¼šæ€»å’Œ=%d\\n\u0026#34;, sum) default: fmt.Printf(\u0026#34;å¤„ç†æœªçŸ¥ç±»å‹ï¼š%T\\n\u0026#34;, v) } } processData(\u0026#34;Hello World\u0026#34;) processData(5) processData([]int{1, 2, 3, 4, 5}) } è¿è¡Œç»“æœï¼š\n=== ç©ºæ¥å£å­˜å‚¨ä¸åŒç±»å‹ === ç´¢å¼•0: è¿™æ˜¯ä¸€ä¸ªæ•´æ•° å€¼ï¼š42ï¼Œç±»å‹ï¼šint ç´¢å¼•1: è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² å€¼ï¼šHelloï¼Œç±»å‹ï¼šstring ç´¢å¼•2: è¿™æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ å€¼ï¼štrueï¼Œç±»å‹ï¼šbool ç´¢å¼•3: è¿™æ˜¯ float64 ç±»å‹çš„å€¼ å€¼ï¼š3.14ï¼Œç±»å‹ï¼šfloat64 ç´¢å¼•4: è¿™æ˜¯ä¸€ä¸ªæ•´æ•°åˆ‡ç‰‡ å€¼ï¼š[1 2 3]ï¼Œç±»å‹ï¼š[]int ç´¢å¼•5: è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°æ•´æ•°çš„æ˜ å°„ å€¼ï¼šmap[a:1 b:2]ï¼Œç±»å‹ï¼šmap[string]int ç´¢å¼•6: è¿™æ˜¯ struct { Name string } ç±»å‹çš„å€¼ å€¼ï¼š{å¼ ä¸‰}ï¼Œç±»å‹ï¼šstruct { Name string } === å®é™…åº”ç”¨åœºæ™¯ === é€šç”¨å®¹å™¨å†…å®¹ï¼š active: true (bool) age: 25 (int) name: å¼ ä¸‰ (string) scores: [85 92 78] ([]int) å¤„ç†å­—ç¬¦ä¸²ï¼šHello World (é•¿åº¦: 11) å¤„ç†æ•´æ•°ï¼š5 (å¹³æ–¹: 25) å¤„ç†æ•´æ•°åˆ‡ç‰‡ï¼šæ€»å’Œ=15 6.2 ç±»å‹æ–­è¨€\rpackage main import \u0026#34;fmt\u0026#34; func ProcessValue(v interface{}) { fmt.Printf(\u0026#34;å¤„ç†å€¼ï¼š%v (ç±»å‹ï¼š%T)\\n\u0026#34;, v, v) // æ–¹æ³•1ï¼šç±»å‹æ–­è¨€ï¼ˆå•ä¸ªç±»å‹ï¼‰ if str, ok := v.(string); ok { fmt.Printf(\u0026#34; âœ… è¿™æ˜¯å­—ç¬¦ä¸²ï¼Œé•¿åº¦ï¼š%dï¼Œå†…å®¹ï¼š%s\\n\u0026#34;, len(str), str) } if num, ok := v.(int); ok { fmt.Printf(\u0026#34; âœ… è¿™æ˜¯æ•´æ•°ï¼Œå€¼ï¼š%dï¼Œå¹³æ–¹ï¼š%d\\n\u0026#34;, num, num*num) } // æ–¹æ³•2ï¼šç±»å‹é€‰æ‹©ï¼ˆswitchï¼‰ switch value := v.(type) { case string: fmt.Printf(\u0026#34; ğŸ”¤ å­—ç¬¦ä¸²å¤„ç†ï¼šè½¬å¤§å†™ï¼š%s\\n\u0026#34;, stringToUpper(value)) case int: fmt.Printf(\u0026#34; ğŸ”¢ æ•´æ•°å¤„ç†ï¼šåˆ¤æ–­å¥‡å¶ï¼š%s\\n\u0026#34;, evenOrOdd(value)) case bool: fmt.Printf(\u0026#34; ğŸ”˜ å¸ƒå°”å¤„ç†ï¼šå–åï¼š%t\\n\u0026#34;, !value) case []int: fmt.Printf(\u0026#34; ğŸ“Š åˆ‡ç‰‡å¤„ç†ï¼šæ±‚å’Œï¼š%d\\n\u0026#34;, sumSlice(value)) case nil: fmt.Printf(\u0026#34; âš ï¸ ç©ºå€¼å¤„ç†\\n\u0026#34;) default: fmt.Printf(\u0026#34; â“ æœªçŸ¥ç±»å‹å¤„ç†ï¼š%T\\n\u0026#34;, value) } fmt.Println() } func stringToUpper(s string) string { result := make([]rune, len(s)) for i, r := range s { if r \u0026gt;= \u0026#39;a\u0026#39; \u0026amp;\u0026amp; r \u0026lt;= \u0026#39;z\u0026#39; { result[i] = r - \u0026#39;a\u0026#39; + \u0026#39;A\u0026#39; } else { result[i] = r } } return string(result) } func evenOrOdd(n int) string { if n%2 == 0 { return \u0026#34;å¶æ•°\u0026#34; } return \u0026#34;å¥‡æ•°\u0026#34; } func sumSlice(nums []int) int { sum := 0 for _, n := range nums { sum += n } return sum } func main() { // æµ‹è¯•ä¸åŒç±»å‹ testData := []interface{}{ \u0026#34;Hello World\u0026#34;, 42, true, []int{1, 2, 3, 4, 5}, 3.14, nil, } fmt.Println(\u0026#34;=== ç±»å‹æ–­è¨€æ¼”ç¤º ===\u0026#34;) for _, data := range testData { ProcessValue(data) } // å®‰å…¨çš„ç±»å‹è½¬æ¢ç¤ºä¾‹ fmt.Println(\u0026#34;=== å®‰å…¨ç±»å‹è½¬æ¢ ===\u0026#34;) var unknown interface{} = \u0026#34;æµ‹è¯•å­—ç¬¦ä¸²\u0026#34; // å®‰å…¨è½¬æ¢ if str, ok := unknown.(string); ok { fmt.Printf(\u0026#34;å®‰å…¨è½¬æ¢æˆåŠŸï¼š%s\\n\u0026#34;, str) } else { fmt.Printf(\u0026#34;è½¬æ¢å¤±è´¥ï¼Œä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹\\n\u0026#34;) } // ä¸å®‰å…¨è½¬æ¢ï¼ˆä¼španicï¼‰ // str := unknown.(string) // å¦‚æœunknownä¸æ˜¯stringä¼španic // æ‰¹é‡å¤„ç†ç¤ºä¾‹ fmt.Println(\u0026#34;\\n=== æ‰¹é‡æ•°æ®å¤„ç† ===\u0026#34;) mixedData := []interface{}{1, \u0026#34;two\u0026#34;, 3.0, true, \u0026#34;five\u0026#34;} strings := make([]string, 0) numbers := make([]int, 0) for _, item := range mixedData { switch v := item.(type) { case string: strings = append(strings, v) case int: numbers = append(numbers, v) } } fmt.Printf(\u0026#34;æå–çš„å­—ç¬¦ä¸²ï¼š%v\\n\u0026#34;, strings) fmt.Printf(\u0026#34;æå–çš„æ•°å­—ï¼š%v\\n\u0026#34;, numbers) } è¿è¡Œç»“æœï¼š\n=== ç±»å‹æ–­è¨€æ¼”ç¤º === å¤„ç†å€¼ï¼šHello World (ç±»å‹ï¼šstring) âœ… è¿™æ˜¯å­—ç¬¦ä¸²ï¼Œé•¿åº¦ï¼š11ï¼Œå†…å®¹ï¼šHello World ğŸ”¤ å­—ç¬¦ä¸²å¤„ç†ï¼šè½¬å¤§å†™ï¼šHELLO WORLD å¤„ç†å€¼ï¼š42 (ç±»å‹ï¼šint) âœ… è¿™æ˜¯æ•´æ•°ï¼Œå€¼ï¼š42ï¼Œå¹³æ–¹ï¼š1764 ğŸ”¢ æ•´æ•°å¤„ç†ï¼šåˆ¤æ–­å¥‡å¶ï¼šå¶æ•° å¤„ç†å€¼ï¼štrue (ç±»å‹ï¼šbool) ğŸ”˜ å¸ƒå°”å¤„ç†ï¼šå–åï¼šfalse å¤„ç†å€¼ï¼š[1 2 3 4 5] (ç±»å‹ï¼š[]int) ğŸ“Š åˆ‡ç‰‡å¤„ç†ï¼šæ±‚å’Œï¼š15 å¤„ç†å€¼ï¼š3.14 (ç±»å‹ï¼šfloat64) â“ æœªçŸ¥ç±»å‹å¤„ç†ï¼šfloat64 å¤„ç†å€¼ï¼š\u0026lt;nil\u0026gt; (ç±»å‹ï¼š\u0026lt;nil\u0026gt;) âš ï¸ ç©ºå€¼å¤„ç† === å®‰å…¨ç±»å‹è½¬æ¢ === å®‰å…¨è½¬æ¢æˆåŠŸï¼šæµ‹è¯•å­—ç¬¦ä¸² === æ‰¹é‡æ•°æ®å¤„ç† === æå–çš„å­—ç¬¦ä¸²ï¼š[two five] æå–çš„æ•°å­—ï¼š[1] 7. æ¥å£çš„æœ€ä½³å®è·µ\r7.1 æ¥å£è®¾è®¡åŸåˆ™\rpackage main import \u0026#34;fmt\u0026#34; // å¥½çš„æ¥å£è®¾è®¡ï¼šå°è€Œä¸“ä¸€ type Shape interface { Area() float64 } type Drawable interface { Draw() } type Movable interface { Move(dx, dy float64) } // ç»„åˆä½¿ç”¨ type Graphic interface { Shape Drawable Movable } // å…·ä½“å®ç° type Rectangle struct { Width, Height float64 X, Y float64 } func (r Rectangle) Area() float64 { return r.Width * r.Height } func (r Rectangle) Draw() { fmt.Printf(\u0026#34;ç»˜åˆ¶çŸ©å½¢ï¼šå®½=%.1f, é«˜=%.1f\\n\u0026#34;, r.Width, r.Height) } func (r *Rectangle) Move(dx, dy float64) { r.X += dx r.Y += dy fmt.Printf(\u0026#34;çŸ©å½¢ç§»åŠ¨åˆ°ï¼š(%.1f, %.1f)\\n\u0026#34;, r.X, r.Y) } // ä¸å¥½çš„æ¥å£è®¾è®¡ï¼šè¿‡å¤§è¿‡æ‚ type BadInterface interface { Read() string Write(string) Close() Validate() Log(string) Notify() // ... è¿‡å¤šæ–¹æ³• } func main() { rect := Rectangle{Width: 10, Height: 5} // ä½¿ç”¨å°æ¥å£ var shape Shape = rect var drawable Drawable = rect var movable Movable = \u0026amp;rect fmt.Println(\u0026#34;=== å°æ¥å£ä½¿ç”¨ ===\u0026#34;) fmt.Printf(\u0026#34;é¢ç§¯ï¼š%.2f\\n\u0026#34;, shape.Area()) drawable.Draw() movable.Move(5, 3) // æ¥å£éš”ç¦»åŸåˆ™ç¤ºä¾‹ fmt.Println(\u0026#34;\\n=== æ¥å£éš”ç¦»åŸåˆ™ ===\u0026#34;) // åªéœ€è¦ç»˜å›¾åŠŸèƒ½ drawOnly := func(d Drawable) { d.Draw() } drawOnly(rect) // åªéœ€è¦é¢ç§¯è®¡ç®—åŠŸèƒ½ calculateOnly := func(s Shape) { fmt.Printf(\u0026#34;é¢ç§¯è®¡ç®—ç»“æœï¼š%.2f\\n\u0026#34;, s.Area()) } calculateOnly(rect) } è¿è¡Œç»“æœï¼š\n=== å°æ¥å£ä½¿ç”¨ === é¢ç§¯ï¼š50.00 ç»˜åˆ¶çŸ©å½¢ï¼šå®½=10.0, é«˜=5.0 çŸ©å½¢ç§»åŠ¨åˆ°ï¼š(5.0, 3.0) === æ¥å£éš”ç¦»åŸåˆ™ === ç»˜åˆ¶çŸ©å½¢ï¼šå®½=10.0, é«˜=5.0 é¢ç§¯è®¡ç®—ç»“æœï¼š50.00 7.2 æ¥å£åœ¨æµ‹è¯•ä¸­çš„åº”ç”¨\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) // å®šä¹‰æ¥å£ç”¨äºæµ‹è¯• type TimeProvider interface { Now() time.Time } type RealTimeProvider struct{} func (RealTimeProvider) Now() time.Time { return time.Now() } // æµ‹è¯•ç”¨çš„æ¨¡æ‹Ÿæ—¶é—´æä¾›è€… type MockTimeProvider struct { CurrentTime time.Time } func (m MockTimeProvider) Now() time.Time { return m.CurrentTime } // ä½¿ç”¨æ—¶é—´çš„æœåŠ¡ type UserService struct { timeProvider TimeProvider } func NewUserService(tp TimeProvider) *UserService { return \u0026amp;UserService{timeProvider: tp} } func (us *UserService) CreateUser(name string) string { now := us.timeProvider.Now() return fmt.Sprintf(\u0026#34;ç”¨æˆ·%såˆ›å»ºäº%s\u0026#34;, name, now.Format(\u0026#34;2006-01-02 15:04:05\u0026#34;)) } func (us *UserService) CheckExpiry(expiry time.Time) bool { return us.timeProvider.Now().After(expiry) } func main() { fmt.Println(\u0026#34;=== çœŸå®æ—¶é—´æµ‹è¯• ===\u0026#34;) // ä½¿ç”¨çœŸå®æ—¶é—´ realService := NewUserService(RealTimeProvider{}) userMsg := realService.CreateUser(\u0026#34;å¼ ä¸‰\u0026#34;) fmt.Println(userMsg) // æ£€æŸ¥è¿‡æœŸæ—¶é—´ futureTime := time.Now().Add(24 * time.Hour) isExpired := realService.CheckExpiry(futureTime) fmt.Printf(\u0026#34;æœªæ¥æ—¶é—´æ˜¯å¦è¿‡æœŸï¼š%t\\n\u0026#34;, isExpired) fmt.Println(\u0026#34;\\n=== æ¨¡æ‹Ÿæ—¶é—´æµ‹è¯• ===\u0026#34;) // ä½¿ç”¨æ¨¡æ‹Ÿæ—¶é—´è¿›è¡Œæµ‹è¯• mockTime := time.Date(2024, 1, 15, 10, 30, 0, 0, time.UTC) mockProvider := MockTimeProvider{CurrentTime: mockTime} mockService := NewUserService(mockProvider) userMsg2 := mockService.CreateUser(\u0026#34;æå››\u0026#34;) fmt.Println(userMsg2) // æµ‹è¯•è¿‡æœŸæ£€æŸ¥ pastTime := time.Date(2023, 1, 1, 0, 0, 0, 0, time.UTC) isExpired2 := mockService.CheckExpiry(pastTime) fmt.Printf(\u0026#34;è¿‡å»æ—¶é—´æ˜¯å¦è¿‡æœŸï¼š%t\\n\u0026#34;, isExpired2) futureTime2 := time.Date(2025, 1, 1, 0, 0, 0, 0, time.UTC) isExpired3 := mockService.CheckExpiry(futureTime2) fmt.Printf(\u0026#34;æœªæ¥æ—¶é—´æ˜¯å¦è¿‡æœŸï¼š%t\\n\u0026#34;, isExpired3) } è¿è¡Œç»“æœï¼š\n=== çœŸå®æ—¶é—´æµ‹è¯• === ç”¨æˆ·å¼ ä¸‰åˆ›å»ºäº2024-01-15 15:30:45 æœªæ¥æ—¶é—´æ˜¯å¦è¿‡æœŸï¼šfalse === æ¨¡æ‹Ÿæ—¶é—´æµ‹è¯• === ç”¨æˆ·æå››åˆ›å»ºäº2024-01-15 10:30:00 è¿‡å»æ—¶é—´æ˜¯å¦è¿‡æœŸï¼štrue æœªæ¥æ—¶é—´æ˜¯å¦è¿‡æœŸï¼šfalse 8. æ€»ç»“\ræ¥å£æ˜¯Goè¯­è¨€å®ç°æŠ½è±¡å’Œå¤šæ€çš„æ ¸å¿ƒæœºåˆ¶ï¼š\næ ¸å¿ƒç‰¹ç‚¹ï¼š\néšå¼å®ç°ï¼šæ— éœ€æ˜¾å¼å£°æ˜å®ç°å…³ç³» åŠ¨æ€ç±»å‹ï¼šè¿è¡Œæ—¶ç¡®å®šå…·ä½“ç±»å‹ ç©ºæ¥å£ï¼šå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹ ç»„åˆèƒ½åŠ›ï¼šæ¥å£å¯ä»¥åµŒå…¥å…¶ä»–æ¥å£ è®¾è®¡åŸåˆ™ï¼š\næ¥å£åº”è¯¥å°è€Œä¸“æ³¨ï¼Œéµå¾ªæ¥å£éš”ç¦»åŸåˆ™ ä¼˜å…ˆä½¿ç”¨ç»„åˆè€Œéç»§æ‰¿ åˆç†ä½¿ç”¨ç©ºæ¥å£å’Œç±»å‹æ–­è¨€ ä¸ºæµ‹è¯•æä¾›è‰¯å¥½çš„æ¥å£è®¾è®¡ åº”ç”¨åœºæ™¯ï¼š\nå®šä¹‰è¡Œä¸ºè§„èŒƒï¼ˆå¦‚io.Reader, io.Writerï¼‰ å®ç°ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬ æ”¯æŒå¤šæ€å’ŒåŠ¨æ€åˆ†æ´¾ ä¾¿äºå•å…ƒæµ‹è¯•å’Œmock æ¥å£æ˜¯Goè¯­è¨€\u0026quot;é¢å‘æ¥å£ç¼–ç¨‹\u0026quot;ç†å¿µçš„ä½“ç°ï¼ŒæŒæ¡å¥½æ¥å£çš„ä½¿ç”¨å¯¹äºç¼–å†™é«˜è´¨é‡çš„Goç¨‹åºè‡³å…³é‡è¦ã€‚\n","date":"2026-02-04T19:15:16+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-11/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬åä¸€ç¯‡ æ¥å£(interface)ã€‘"},{"content":"1. ä»€ä¹ˆæ˜¯æ–¹æ³•\ræ–¹æ³•æ˜¯Goè¯­è¨€ä¸­ä¸ç‰¹å®šç±»å‹å…³è”çš„å‡½æ•°ã€‚å¦‚æœè¯´å‡½æ•°æ˜¯ç‹¬ç«‹çš„åŠŸèƒ½å•å…ƒï¼Œé‚£ä¹ˆæ–¹æ³•å°±æ˜¯\u0026quot;å±äº\u0026quot;æŸä¸ªç±»å‹çš„ç‰¹æ®Šå‡½æ•°ã€‚æ–¹æ³•è®©æ•°æ®ç±»å‹å…·å¤‡äº†è¡Œä¸ºèƒ½åŠ›ï¼Œè¿™æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„é‡è¦ç‰¹å¾ã€‚\n1.1 æ–¹æ³•ä¸å‡½æ•°çš„åŒºåˆ«\rè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥ç†è§£ï¼š\n// æ™®é€šå‡½æ•° func add(a, b int) int { return a + b } // æ–¹æ³•ï¼ˆåé¢ä¼šè¯¦ç»†è®²è§£è¯­æ³•ï¼‰ // func (æ¥æ”¶è€…) æ–¹æ³•å(å‚æ•°) è¿”å›å€¼ { å‡½æ•°ä½“ } ä¸»è¦åŒºåˆ«ï¼š\nå‡½æ•°ï¼šç‹¬ç«‹å­˜åœ¨ï¼Œé€šè¿‡å‡½æ•°åè°ƒç”¨ æ–¹æ³•ï¼šä¸ç‰¹å®šç±»å‹ç»‘å®šï¼Œé€šè¿‡\u0026quot;ç±»å‹.æ–¹æ³•å\u0026quot;è°ƒç”¨ 1.2 ä¸ºä»€ä¹ˆéœ€è¦æ–¹æ³•\ræ–¹æ³•çš„ä¸»è¦ä»·å€¼ï¼š\nå°è£…æ€§ï¼šå°†æ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•ç»„ç»‡åœ¨ä¸€èµ· å¯è¯»æ€§ï¼šstudent.GetName() æ¯” getName(student) æ›´ç›´è§‚ é¢å‘å¯¹è±¡ï¼šä¸ºåç»­çš„æ¥å£å®ç°æ‰“åŸºç¡€ ä»£ç ç»„ç»‡ï¼šæ›´å¥½åœ°ç»„ç»‡ç›¸å…³åŠŸèƒ½ 2. æ–¹æ³•çš„åŸºæœ¬è¯­æ³•\r2.1 æ–¹æ³•å®šä¹‰è¯­æ³•\rfunc (æ¥æ”¶è€…) æ–¹æ³•å(å‚æ•°åˆ—è¡¨) (è¿”å›å€¼åˆ—è¡¨) { // æ–¹æ³•ä½“ } 2.2 æ¥æ”¶è€…çš„ä¸¤ç§å½¢å¼\rå€¼æ¥æ”¶è€…\rfunc (t MyType) MethodName(parameters) returnType { // tæ˜¯MyTypeç±»å‹çš„å‰¯æœ¬ // ä¿®æ”¹tä¸ä¼šå½±å“åŸå§‹æ•°æ® } æŒ‡é’ˆæ¥æ”¶è€…\rfunc (t *MyType) MethodName(parameters) returnType { // tæ˜¯æŒ‡å‘MyTypeç±»å‹çš„æŒ‡é’ˆ // ä¿®æ”¹tä¼šå½±å“åŸå§‹æ•°æ® } 2.3 ç®€å•ç¤ºä¾‹\rpackage main import \u0026#34;fmt\u0026#34; // å®šä¹‰ä¸€ä¸ªçŸ©å½¢ç»“æ„ä½“ type Rectangle struct { Width float64 Height float64 } // å€¼æ¥æ”¶è€…æ–¹æ³•ï¼šè®¡ç®—é¢ç§¯ func (r Rectangle) Area() float64 { return r.Width * r.Height } // å€¼æ¥æ”¶è€…æ–¹æ³•ï¼šè®¡ç®—å‘¨é•¿ func (r Rectangle) Perimeter() float64 { return 2 * (r.Width + r.Height) } // æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•ï¼šç¼©æ”¾çŸ©å½¢ func (r *Rectangle) Scale(factor float64) { r.Width *= factor r.Height *= factor } // æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•ï¼šè®¾ç½®å°ºå¯¸ func (r *Rectangle) SetDimensions(width, height float64) { r.Width = width r.Height = height } func main() { // åˆ›å»ºçŸ©å½¢å®ä¾‹ rect := Rectangle{Width: 10, Height: 5} fmt.Printf(\u0026#34;åŸå§‹çŸ©å½¢ï¼šå®½åº¦=%.2f, é«˜åº¦=%.2f\\n\u0026#34;, rect.Width, rect.Height) fmt.Printf(\u0026#34;é¢ç§¯ï¼š%.2f\\n\u0026#34;, rect.Area()) fmt.Printf(\u0026#34;å‘¨é•¿ï¼š%.2f\\n\u0026#34;, rect.Perimeter()) // ä½¿ç”¨æŒ‡é’ˆæ–¹æ³•ä¿®æ”¹æ•°æ® rect.Scale(2.0) fmt.Printf(\u0026#34;\\nç¼©æ”¾åçŸ©å½¢ï¼šå®½åº¦=%.2f, é«˜åº¦=%.2f\\n\u0026#34;, rect.Width, rect.Height) fmt.Printf(\u0026#34;æ–°é¢ç§¯ï¼š%.2f\\n\u0026#34;, rect.Area()) rect.SetDimensions(15, 8) fmt.Printf(\u0026#34;\\né‡æ–°è®¾ç½®åï¼šå®½åº¦=%.2f, é«˜åº¦=%.2f\\n\u0026#34;, rect.Width, rect.Height) fmt.Printf(\u0026#34;æœ€ç»ˆé¢ç§¯ï¼š%.2f\\n\u0026#34;, rect.Area()) } è¿è¡Œç»“æœï¼š\nåŸå§‹çŸ©å½¢ï¼šå®½åº¦=10.00, é«˜åº¦=5.00 é¢ç§¯ï¼š50.00 å‘¨é•¿ï¼š30.00 ç¼©æ”¾åçŸ©å½¢ï¼šå®½åº¦=20.00, é«˜åº¦=10.00 æ–°é¢ç§¯ï¼š200.00 é‡æ–°è®¾ç½®åï¼šå®½åº¦=15.00, é«˜åº¦=8.00 æœ€ç»ˆé¢ç§¯ï¼š120.00 3. æ¥æ”¶è€…çš„æ·±å…¥ç†è§£\r3.1 å€¼æ¥æ”¶è€… vs æŒ‡é’ˆæ¥æ”¶è€…\rpackage main import \u0026#34;fmt\u0026#34; type Counter struct { Count int } // å€¼æ¥æ”¶è€…æ–¹æ³• func (c Counter) GetValue() int { return c.Count } // å€¼æ¥æ”¶è€…æ–¹æ³•ï¼ˆä¸ä¼šä¿®æ”¹åŸå§‹å€¼ï¼‰ func (c Counter) IncrementByValue() { c.Count++ // è¿™é‡Œä¿®æ”¹çš„æ˜¯å‰¯æœ¬ fmt.Printf(\u0026#34;å€¼æ¥æ”¶è€…å†…éƒ¨Count: %d\\n\u0026#34;, c.Count) } // æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³• func (c *Counter) GetPointerValue() int { return c.Count } // æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•ï¼ˆä¼šä¿®æ”¹åŸå§‹å€¼ï¼‰ func (c *Counter) IncrementByPointer() { c.Count++ // è¿™é‡Œä¿®æ”¹çš„æ˜¯åŸå§‹å€¼ fmt.Printf(\u0026#34;æŒ‡é’ˆæ¥æ”¶è€…å†…éƒ¨Count: %d\\n\u0026#34;, c.Count) } func main() { counter := Counter{Count: 10} fmt.Printf(\u0026#34;åˆå§‹å€¼ï¼š%d\\n\u0026#34;, counter.Count) // å€¼æ¥æ”¶è€…è°ƒç”¨ counter.IncrementByValue() fmt.Printf(\u0026#34;å€¼æ¥æ”¶è€…è°ƒç”¨åï¼š%d\\n\u0026#34;, counter.Count) // æŒ‡é’ˆæ¥æ”¶è€…è°ƒç”¨ counter.IncrementByPointer() fmt.Printf(\u0026#34;æŒ‡é’ˆæ¥æ”¶è€…è°ƒç”¨åï¼š%d\\n\u0026#34;, counter.Count) // éªŒè¯è¿”å›å€¼ fmt.Printf(\u0026#34;GetValue(): %d\\n\u0026#34;, counter.GetValue()) fmt.Printf(\u0026#34;GetPointerValue(): %d\\n\u0026#34;, counter.GetPointerValue()) } è¿è¡Œç»“æœï¼š\nåˆå§‹å€¼ï¼š10 å€¼æ¥æ”¶è€…å†…éƒ¨Count: 11 å€¼æ¥æ”¶è€…è°ƒç”¨åï¼š10 æŒ‡é’ˆæ¥æ”¶è€…å†…éƒ¨Count: 11 æŒ‡é’ˆæ¥æ”¶è€…è°ƒç”¨åï¼š11 GetValue(): 11 GetPointerValue(): 11 3.2 æ¥æ”¶è€…çš„é€‰æ‹©åŸåˆ™\rä»€ä¹ˆæ—¶å€™ä½¿ç”¨å€¼æ¥æ”¶è€…ï¼š âœ… æ•°æ®ç±»å‹å¾ˆå°ï¼ˆå¦‚åŸºæœ¬ç±»å‹ã€å°ç»“æ„ä½“ï¼‰ âœ… æ–¹æ³•ä¸éœ€è¦ä¿®æ”¹æ¥æ”¶è€…æ•°æ® âœ… æ–¹æ³•éœ€è¦å¹¶å‘å®‰å…¨ï¼ˆå€¼ä¼ é€’æ˜¯å®‰å…¨çš„ï¼‰\nä»€ä¹ˆæ—¶å€™ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…ï¼š âœ… æ–¹æ³•éœ€è¦ä¿®æ”¹æ¥æ”¶è€…æ•°æ® âœ… æ•°æ®ç±»å‹è¾ƒå¤§ï¼ˆé¿å…æ‹·è´å¼€é”€ï¼‰ âœ… ä¸€è‡´æ€§è€ƒè™‘ï¼ˆç±»å‹çš„æ‰€æœ‰æ–¹æ³•éƒ½ç”¨æŒ‡é’ˆæ¥æ”¶è€…ï¼‰\npackage main import \u0026#34;fmt\u0026#34; type SmallData struct { Value int } type LargeData struct { Values [1000]int // å¤§æ•°ç»„ Name string Active bool } // SmallDataä½¿ç”¨å€¼æ¥æ”¶è€…ï¼ˆåˆç†ï¼‰ func (s SmallData) Double() SmallData { s.Value *= 2 return s } // LargeDataä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…ï¼ˆåˆç†ï¼‰ func (l *LargeData) Activate() { l.Active = true } func main() { // å°æ•°æ®ç±»å‹ small := SmallData{Value: 5} doubled := small.Double() fmt.Printf(\u0026#34;SmallData - åŸå§‹: %d, ç¿»å€å: %d\\n\u0026#34;, small.Value, doubled.Value) // å¤§æ•°æ®ç±»å‹ large := LargeData{Name: \u0026#34;Test\u0026#34;} fmt.Printf(\u0026#34;LargeData - ä¿®æ”¹å‰Active: %t\\n\u0026#34;, large.Active) large.Activate() fmt.Printf(\u0026#34;LargeData - ä¿®æ”¹åActive: %t\\n\u0026#34;, large.Active) } è¿è¡Œç»“æœï¼š\nSmallData - åŸå§‹: 5, ç¿»å€å: 10 LargeData - ä¿®æ”¹å‰Active: false LargeData - ä¿®æ”¹åActive: true 4. ä¸åŒç±»å‹çš„æ¥æ”¶è€…\r4.1 åŸºæœ¬ç±»å‹çš„æ–¹æ³•\rpackage main import \u0026#34;fmt\u0026#34; // ä¸ºintç±»å‹åˆ›å»ºåˆ«å type MyInt int // ä¸ºè‡ªå®šä¹‰ç±»å‹æ·»åŠ æ–¹æ³• func (mi MyInt) Double() MyInt { return mi * 2 } func (mi MyInt) IsEven() bool { return mi%2 == 0 } func (mi *MyInt) Increment() { *mi++ } // ä¸ºå†…ç½®ç±»å‹åˆ›å»ºæ–¹æ³•ï¼ˆéœ€è¦ç±»å‹åˆ«åï¼‰ type Celsius float64 type Fahrenheit float64 func (c Celsius) ToFahrenheit() Fahrenheit { return Fahrenheit(c*9/5 + 32) } func (f Fahrenheit) ToCelsius() Celsius { return Celsius((f - 32) * 5 / 9) } func main() { // è‡ªå®šä¹‰intç±»å‹ num := MyInt(10) fmt.Printf(\u0026#34;åŸå§‹å€¼ï¼š%d\\n\u0026#34;, num) fmt.Printf(\u0026#34;ç¿»å€ï¼š%d\\n\u0026#34;, num.Double()) fmt.Printf(\u0026#34;æ˜¯å¦å¶æ•°ï¼š%t\\n\u0026#34;, num.IsEven()) num.Increment() fmt.Printf(\u0026#34;é€’å¢åï¼š%d\\n\u0026#34;, num) // æ¸©åº¦è½¬æ¢ tempC := Celsius(25) tempF := tempC.ToFahrenheit() fmt.Printf(\u0026#34;\\n%dÂ°C = %.1fÂ°F\\n\u0026#34;, int(tempC), float64(tempF)) backToC := tempF.ToCelsius() fmt.Printf(\u0026#34;%.1fÂ°F = %dÂ°C\\n\u0026#34;, float64(tempF), int(backToC)) } è¿è¡Œç»“æœï¼š\nåŸå§‹å€¼ï¼š10 ç¿»å€ï¼š20 æ˜¯å¦å¶æ•°ï¼štrue é€’å¢åï¼š11 25Â°C = 77.0Â°F 77.0Â°F = 25Â°C 4.2 ç»“æ„ä½“æ–¹æ³•\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;math\u0026#34; ) type Point struct { X, Y float64 } type Circle struct { Center Point Radius float64 } // Pointçš„æ–¹æ³• func (p Point) Distance(other Point) float64 { dx := p.X - other.X dy := p.Y - other.Y return math.Sqrt(dx*dx + dy*dy) } func (p Point) Move(dx, dy float64) Point { return Point{X: p.X + dx, Y: p.Y + dy} } // Circleçš„æ–¹æ³• func (c Circle) Area() float64 { return math.Pi * c.Radius * c.Radius } func (c Circle) Circumference() float64 { return 2 * math.Pi * c.Radius } func (c *Circle) Scale(factor float64) { c.Radius *= factor } func main() { // ç‚¹çš„æ“ä½œ p1 := Point{X: 0, Y: 0} p2 := Point{X: 3, Y: 4} distance := p1.Distance(p2) fmt.Printf(\u0026#34;ä¸¤ç‚¹è·ç¦»ï¼š%.2f\\n\u0026#34;, distance) p3 := p1.Move(1, 1) fmt.Printf(\u0026#34;ç§»åŠ¨åç‚¹ï¼š(%f, %f)\\n\u0026#34;, p3.X, p3.Y) // åœ†çš„æ“ä½œ circle := Circle{ Center: Point{X: 0, Y: 0}, Radius: 5, } fmt.Printf(\u0026#34;\\nåœ†çš„åŠå¾„ï¼š%.2f\\n\u0026#34;, circle.Radius) fmt.Printf(\u0026#34;åœ†çš„é¢ç§¯ï¼š%.2f\\n\u0026#34;, circle.Area()) fmt.Printf(\u0026#34;åœ†çš„å‘¨é•¿ï¼š%.2f\\n\u0026#34;, circle.Circumference()) circle.Scale(2) fmt.Printf(\u0026#34;\\nç¼©æ”¾ååŠå¾„ï¼š%.2f\\n\u0026#34;, circle.Radius) fmt.Printf(\u0026#34;ç¼©æ”¾åé¢ç§¯ï¼š%.2f\\n\u0026#34;, circle.Area()) } è¿è¡Œç»“æœï¼š\nä¸¤ç‚¹è·ç¦»ï¼š5.00 ç§»åŠ¨åç‚¹ï¼š(1.000000, 1.000000) åœ†çš„åŠå¾„ï¼š5.00 åœ†çš„é¢ç§¯ï¼š78.54 åœ†çš„å‘¨é•¿ï¼š31.42 ç¼©æ”¾ååŠå¾„ï¼š10.00 ç¼©æ”¾åé¢ç§¯ï¼š314.16 4.3 åˆ‡ç‰‡å’Œæ˜ å°„çš„æ–¹æ³•\rpackage main import \u0026#34;fmt\u0026#34; // ä¸ºåˆ‡ç‰‡ç±»å‹åˆ›å»ºåˆ«å type IntSlice []int // ä¸ºæ˜ å°„ç±»å‹åˆ›å»ºåˆ«å type StringMap map[string]string // IntSliceçš„æ–¹æ³• func (is IntSlice) Sum() int { sum := 0 for _, v := range is { sum += v } return sum } func (is IntSlice) Average() float64 { if len(is) == 0 { return 0 } return float64(is.Sum()) / float64(len(is)) } func (is *IntSlice) Append(value int) { *is = append(*is, value) } // StringMapçš„æ–¹æ³• func (sm StringMap) Get(key string) (string, bool) { value, exists := sm[key] return value, exists } func (sm StringMap) Set(key, value string) { sm[key] = value } func (sm StringMap) Keys() []string { keys := make([]string, 0, len(sm)) for k := range sm { keys = append(keys, k) } return keys } func main() { // åˆ‡ç‰‡æ–¹æ³• numbers := IntSlice{1, 2, 3, 4, 5} fmt.Printf(\u0026#34;æ•°å­—åˆ‡ç‰‡ï¼š%v\\n\u0026#34;, numbers) fmt.Printf(\u0026#34;æ€»å’Œï¼š%d\\n\u0026#34;, numbers.Sum()) fmt.Printf(\u0026#34;å¹³å‡å€¼ï¼š%.2f\\n\u0026#34;, numbers.Average()) numbers.Append(6) numbers.Append(7) fmt.Printf(\u0026#34;æ·»åŠ å…ƒç´ åï¼š%v\\n\u0026#34;, numbers) fmt.Printf(\u0026#34;æ–°æ€»å’Œï¼š%d\\n\u0026#34;, numbers.Sum()) // æ˜ å°„æ–¹æ³• studentGrades := StringMap{ \u0026#34;å¼ ä¸‰\u0026#34;: \u0026#34;85\u0026#34;, \u0026#34;æå››\u0026#34;: \u0026#34;92\u0026#34;, \u0026#34;ç‹äº”\u0026#34;: \u0026#34;78\u0026#34;, } fmt.Printf(\u0026#34;\\nå­¦ç”Ÿ gradesï¼š%v\\n\u0026#34;, studentGrades) // è·å–å€¼ if grade, exists := studentGrades.Get(\u0026#34;æå››\u0026#34;); exists { fmt.Printf(\u0026#34;æå››çš„æˆç»©ï¼š%s\\n\u0026#34;, grade) } // è®¾ç½®æ–°å€¼ studentGrades.Set(\u0026#34;èµµå…­\u0026#34;, \u0026#34;88\u0026#34;) fmt.Printf(\u0026#34;æ·»åŠ èµµå…­åï¼š%v\\n\u0026#34;, studentGrades) // è·å–æ‰€æœ‰é”® keys := studentGrades.Keys() fmt.Printf(\u0026#34;æ‰€æœ‰å­¦ç”Ÿï¼š%v\\n\u0026#34;, keys) } è¿è¡Œç»“æœï¼š\næ•°å­—åˆ‡ç‰‡ï¼š[1 2 3 4 5] æ€»å’Œï¼š15 å¹³å‡å€¼ï¼š3.00 æ·»åŠ å…ƒç´ åï¼š[1 2 3 4 5 6 7] æ–°æ€»å’Œï¼š28 å­¦ç”Ÿ gradesï¼šmap[å¼ ä¸‰:85 æå››:92 ç‹äº”:78] æå››çš„æˆç»©ï¼š92 æ·»åŠ èµµå…­åï¼šmap[å¼ ä¸‰:85 æå››:92 ç‹äº”:78 èµµå…­:88] æ‰€æœ‰å­¦ç”Ÿï¼š[å¼ ä¸‰ æå›› ç‹äº” èµµå…­] 5. æ–¹æ³•ä¸æ¥å£çš„å…³ç³»\r5.1 æ–¹æ³•é›†çš„æ¦‚å¿µ\rpackage main import \u0026#34;fmt\u0026#34; type Shape interface { Area() float64 Perimeter() float64 } type Rectangle struct { Width float64 Height float64 } type Circle struct { Radius float64 } // Rectangleå®ç°Shapeæ¥å£ func (r Rectangle) Area() float64 { return r.Width * r.Height } func (r Rectangle) Perimeter() float64 { return 2 * (r.Width + r.Height) } // Circleå®ç°Shapeæ¥å£ func (c Circle) Area() float64 { return 3.14159 * c.Radius * c.Radius } func (c Circle) Perimeter() float64 { return 2 * 3.14159 * c.Radius } // ä½¿ç”¨æ¥å£çš„å‡½æ•° func PrintShapeInfo(s Shape) { fmt.Printf(\u0026#34;é¢ç§¯ï¼š%.2f\\n\u0026#34;, s.Area()) fmt.Printf(\u0026#34;å‘¨é•¿ï¼š%.2f\\n\u0026#34;, s.Perimeter()) } func main() { rect := Rectangle{Width: 10, Height: 5} circle := Circle{Radius: 3} fmt.Println(\u0026#34;=== çŸ©å½¢ ===\u0026#34;) PrintShapeInfo(rect) fmt.Println(\u0026#34;\\n=== åœ†å½¢ ===\u0026#34;) PrintShapeInfo(circle) // æ¥å£åˆ‡ç‰‡ shapes := []Shape{rect, circle} fmt.Println(\u0026#34;\\n=== æ‰¹é‡å¤„ç† ===\u0026#34;) for i, shape := range shapes { fmt.Printf(\u0026#34;å½¢çŠ¶%d:\\n\u0026#34;, i+1) PrintShapeInfo(shape) fmt.Println() } } è¿è¡Œç»“æœï¼š\n=== çŸ©å½¢ === é¢ç§¯ï¼š50.00 å‘¨é•¿ï¼š30.00 === åœ†å½¢ === é¢ç§¯ï¼š28.27 å‘¨é•¿ï¼š18.85 === æ‰¹é‡å¤„ç† === å½¢çŠ¶1: é¢ç§¯ï¼š50.00 å‘¨é•¿ï¼š30.00 å½¢çŠ¶2: é¢ç§¯ï¼š28.27 å‘¨é•¿ï¼š18.85 6. æ–¹æ³•çš„é«˜çº§ç”¨æ³•\r6.1 æ–¹æ³•é“¾å¼è°ƒç”¨\rpackage main import \u0026#34;fmt\u0026#34; type Calculator struct { Result float64 } func (c Calculator) Add(x float64) Calculator { c.Result += x return c } func (c Calculator) Subtract(x float64) Calculator { c.Result -= x return c } func (c Calculator) Multiply(x float64) Calculator { c.Result *= x return c } func (c Calculator) Divide(x float64) Calculator { if x != 0 { c.Result /= x } return c } func (c Calculator) GetValue() float64 { return c.Result } func main() { calc := Calculator{Result: 10} result := calc. Add(5). Multiply(2). Subtract(3). Divide(2). GetValue() fmt.Printf(\u0026#34;è®¡ç®—ç»“æœï¼š%.2f\\n\u0026#34;, result) // åˆ†æ­¥æ¼”ç¤º calc2 := Calculator{Result: 10} fmt.Printf(\u0026#34;åˆå§‹å€¼ï¼š%.2f\\n\u0026#34;, calc2.GetValue()) calc2 = calc2.Add(5) fmt.Printf(\u0026#34;åŠ 5åï¼š%.2f\\n\u0026#34;, calc2.GetValue()) calc2 = calc2.Multiply(2) fmt.Printf(\u0026#34;ä¹˜2åï¼š%.2f\\n\u0026#34;, calc2.GetValue()) calc2 = calc2.Subtract(3) fmt.Printf(\u0026#34;å‡3åï¼š%.2f\\n\u0026#34;, calc2.GetValue()) calc2 = calc2.Divide(2) fmt.Printf(\u0026#34;é™¤2åï¼š%.2f\\n\u0026#34;, calc2.GetValue()) } è¿è¡Œç»“æœï¼š\nè®¡ç®—ç»“æœï¼š13.50 åˆå§‹å€¼ï¼š10.00 åŠ 5åï¼š15.00 ä¹˜2åï¼š30.00 å‡3åï¼š27.00 é™¤2åï¼š13.50 6.2 åµŒå…¥ç±»å‹çš„æ–¹æ³•æå‡\rpackage main import \u0026#34;fmt\u0026#34; type Person struct { Name string Age int } func (p Person) GetName() string { return p.Name } func (p Person) GetAge() int { return p.Age } type Student struct { Person // åµŒå…¥Person School string Grade int } func (s Student) GetSchool() string { return s.School } type Teacher struct { Person // åµŒå…¥Person Subject string Salary float64 } func (t Teacher) GetSubject() string { return t.Subject } func main() { student := Student{ Person: Person{Name: \u0026#34;å°æ˜\u0026#34;, Age: 18}, School: \u0026#34;ç¬¬ä¸€ä¸­å­¦\u0026#34;, Grade: 12, } teacher := Teacher{ Person: Person{Name: \u0026#34;ç‹è€å¸ˆ\u0026#34;, Age: 35}, Subject: \u0026#34;æ•°å­¦\u0026#34;, Salary: 8000, } // å¯ä»¥ç›´æ¥è°ƒç”¨åµŒå…¥ç±»å‹çš„æ–¹æ³• fmt.Printf(\u0026#34;å­¦ç”Ÿå§“åï¼š%s\\n\u0026#34;, student.GetName()) // æå‡æ–¹æ³• fmt.Printf(\u0026#34;å­¦ç”Ÿå¹´é¾„ï¼š%d\\n\u0026#34;, student.GetAge()) // æå‡æ–¹æ³• fmt.Printf(\u0026#34;å­¦æ ¡ï¼š%s\\n\u0026#34;, student.GetSchool()) fmt.Printf(\u0026#34;å¹´çº§ï¼š%d\\n\u0026#34;, student.Grade) fmt.Printf(\u0026#34;\\nè€å¸ˆå§“åï¼š%s\\n\u0026#34;, teacher.GetName()) // æå‡æ–¹æ³• fmt.Printf(\u0026#34;è€å¸ˆå¹´é¾„ï¼š%d\\n\u0026#34;, teacher.GetAge()) // æå‡æ–¹æ³• fmt.Printf(\u0026#34;ç§‘ç›®ï¼š%s\\n\u0026#34;, teacher.GetSubject()) fmt.Printf(\u0026#34;è–ªèµ„ï¼š%.2f\\n\u0026#34;, teacher.Salary) // éªŒè¯ç±»å‹å…³ç³» fmt.Printf(\u0026#34;\\nå­¦ç”Ÿä¹Ÿæ˜¯Personç±»å‹ï¼š%t\\n\u0026#34;, isPerson(student)) fmt.Printf(\u0026#34;è€å¸ˆä¹Ÿæ˜¯Personç±»å‹ï¼š%t\\n\u0026#34;, isPerson(teacher)) } func isPerson(p Person) bool { return true } è¿è¡Œç»“æœï¼š\nå­¦ç”Ÿå§“åï¼šå°æ˜ å­¦ç”Ÿå¹´é¾„ï¼š18 å­¦æ ¡ï¼šç¬¬ä¸€ä¸­å­¦ å¹´çº§ï¼š12 è€å¸ˆå§“åï¼šç‹è€å¸ˆ è€å¸ˆå¹´é¾„ï¼š35 ç§‘ç›®ï¼šæ•°å­¦ è–ªèµ„ï¼š8000.00 å­¦ç”Ÿä¹Ÿæ˜¯Personç±»å‹ï¼štrue è€å¸ˆä¹Ÿæ˜¯Personç±»å‹ï¼štrue 7. æ–¹æ³•çš„æ³¨æ„äº‹é¡¹\r7.1 æ–¹æ³•åå†²çª\rpackage main import \u0026#34;fmt\u0026#34; type Base struct { Name string } func (b Base) GetName() string { return b.Name } type Derived struct { Base Name string // ä¸Baseä¸­çš„NameåŒå } func (d Derived) GetName() string { // æ˜ç¡®æŒ‡å®šè°ƒç”¨å“ªä¸ªGetName return \u0026#34;Derived: \u0026#34; + d.Name + \u0026#34;, Base: \u0026#34; + d.Base.GetName() } func main() { derived := Derived{ Base: Base{Name: \u0026#34;BaseName\u0026#34;}, Name: \u0026#34;DerivedName\u0026#34;, } fmt.Printf(\u0026#34;è°ƒç”¨æ´¾ç”Ÿç±»GetName: %s\\n\u0026#34;, derived.GetName()) fmt.Printf(\u0026#34;ç›´æ¥è®¿é—®Name: %s\\n\u0026#34;, derived.Name) fmt.Printf(\u0026#34;è®¿é—®Base.Name: %s\\n\u0026#34;, derived.Base.Name) } è¿è¡Œç»“æœï¼š\nè°ƒç”¨æ´¾ç”Ÿç±»GetName: Derived: DerivedName, Base: BaseName ç›´æ¥è®¿é—®Name: DerivedName è®¿é—®Base.Name: BaseName 7.2 ç©ºæŒ‡é’ˆè°ƒç”¨æ–¹æ³•\rpackage main import \u0026#34;fmt\u0026#34; type Data struct { Value int } func (d *Data) GetValue() int { if d == nil { return 0 // å®‰å…¨æ£€æŸ¥ } return d.Value } func (d *Data) SetValue(v int) { if d != nil { // å®‰å…¨æ£€æŸ¥ d.Value = v } } func main() { var ptr *Data = nil // ç©ºæŒ‡é’ˆè°ƒç”¨æ–¹æ³•ï¼ˆå®‰å…¨ï¼‰ fmt.Printf(\u0026#34;ç©ºæŒ‡é’ˆGetValue: %d\\n\u0026#34;, ptr.GetValue()) // ç©ºæŒ‡é’ˆè°ƒç”¨ä¿®æ”¹æ–¹æ³•ï¼ˆå®‰å…¨ï¼‰ ptr.SetValue(100) // ä¸ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºæœ‰å®‰å…¨æ£€æŸ¥ // åˆ›å»ºå®é™…å¯¹è±¡ actual := \u0026amp;Data{Value: 42} fmt.Printf(\u0026#34;å®é™…å¯¹è±¡GetValue: %d\\n\u0026#34;, actual.GetValue()) actual.SetValue(99) fmt.Printf(\u0026#34;ä¿®æ”¹åGetValue: %d\\n\u0026#34;, actual.GetValue()) } è¿è¡Œç»“æœï¼š\nç©ºæŒ‡é’ˆGetValue: 0 å®é™…å¯¹è±¡GetValue: 42 ä¿®æ”¹åGetValue: 99 8. æ€»ç»“\ræ–¹æ³•æ˜¯Goè¯­è¨€å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæœºåˆ¶ï¼š\næ ¸å¿ƒæ¦‚å¿µï¼š\næ–¹æ³•æ˜¯ä¸ç‰¹å®šç±»å‹ç»‘å®šçš„å‡½æ•° é€šè¿‡æ¥æ”¶è€…å°†æ–¹æ³•ä¸ç±»å‹å…³è” å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…æœ‰ä¸åŒçš„è¡Œä¸ºç‰¹ç‚¹ ä½¿ç”¨åŸåˆ™ï¼š\nå€¼æ¥æ”¶è€…ï¼šé€‚ç”¨äºä¸ä¿®æ”¹æ•°æ®ã€å°å‹æ•°æ®ç±»å‹ æŒ‡é’ˆæ¥æ”¶è€…ï¼šé€‚ç”¨äºéœ€è¦ä¿®æ”¹æ•°æ®ã€å¤§å‹æ•°æ®ç±»å‹ ä¿æŒç±»å‹æ‰€æœ‰æ–¹æ³•æ¥æ”¶è€…ç±»å‹çš„ä¸€è‡´æ€§ é‡è¦ç‰¹æ€§ï¼š\næ–¹æ³•æå‡ï¼šåµŒå…¥ç±»å‹çš„æ–¹æ³•å¯ä»¥è¢«ç›´æ¥è°ƒç”¨ æ¥å£å®ç°ï¼šæ–¹æ³•æ˜¯å®ç°æ¥å£çš„åŸºç¡€ é“¾å¼è°ƒç”¨ï¼šè¿”å›æ¥æ”¶è€…ç±»å‹æ”¯æŒæ–¹æ³•é“¾ æŒæ¡æ–¹æ³•çš„ä½¿ç”¨æ˜¯ç†è§£Goè¯­è¨€é¢å‘å¯¹è±¡ç‰¹æ€§çš„å…³é”®ï¼Œä¹Ÿä¸ºåç»­å­¦ä¹ æ¥å£æ‰“ä¸‹äº†åšå®åŸºç¡€ã€‚\n","date":"2026-02-04T18:15:16+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-10/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬åç¯‡ æ–¹æ³•(method)ä¸æ¥æ”¶è€…ã€‘"},{"content":"1. ä»€ä¹ˆæ˜¯ç»“æ„ä½“\rç»“æ„ä½“æ˜¯Goè¯­è¨€ä¸­ä¸€ç§é‡è¦çš„å¤åˆæ•°æ®ç±»å‹ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªä¸åŒç±»å‹çš„æ•°æ®ç»„åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªæœ‰æ„ä¹‰çš„æ•´ä½“ã€‚å¯ä»¥æŠŠç»“æ„ä½“ç†è§£ä¸ºç°å®ä¸–ç•Œä¸­äº‹ç‰©çš„æŠ½è±¡è¡¨ç¤ºã€‚\n1.1 ç»“æ„ä½“çš„åŸºæœ¬æ¦‚å¿µ\ræƒ³è±¡æˆ‘ä»¬è¦æè¿°ä¸€ä¸ªå­¦ç”Ÿçš„ä¿¡æ¯ï¼š\nå§“åï¼šå­—ç¬¦ä¸²ç±»å‹ å¹´é¾„ï¼šæ•´æ•°ç±»å‹ æˆç»©ï¼šæµ®ç‚¹æ•°ç±»å‹ æ˜¯å¦åœ¨æ ¡ï¼šå¸ƒå°”ç±»å‹ å¦‚æœæ²¡æœ‰ç»“æ„ä½“ï¼Œæˆ‘ä»¬éœ€è¦åˆ†åˆ«å®šä¹‰å¤šä¸ªå˜é‡ï¼š\nvar name string = \u0026#34;å¼ ä¸‰\u0026#34; var age int = 18 var score float64 = 95.5 var isEnrolled bool = true è¿™æ ·å¾ˆä¸æ–¹ä¾¿ç®¡ç†å’Œä½¿ç”¨ã€‚è€Œç»“æ„ä½“å¯ä»¥å°†è¿™äº›ç›¸å…³æ•°æ®ç»„ç»‡åœ¨ä¸€èµ·ï¼š\ntype Student struct { Name string Age int Score float64 IsEnrolled bool } 1.2 ä¸ºä»€ä¹ˆéœ€è¦ç»“æ„ä½“\rç»“æ„ä½“çš„ä¸»è¦ä¼˜åŠ¿ï¼š\næ•°æ®èšåˆï¼šå°†ç›¸å…³çš„æ•°æ®ç»„ç»‡åœ¨ä¸€èµ· ä»£ç æ¸…æ™°ï¼šæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ ç±»å‹å®‰å…¨ï¼šåˆ›å»ºä¸“é—¨çš„æ•°æ®ç±»å‹ é¢å‘å¯¹è±¡ï¼šä¸ºåç»­çš„æ–¹æ³•å’Œæ¥å£æ‰“åŸºç¡€ 2. ç»“æ„ä½“çš„å®šä¹‰å’Œå£°æ˜\r2.1 åŸºæœ¬å®šä¹‰è¯­æ³•\r// ç»“æ„ä½“å®šä¹‰çš„åŸºæœ¬è¯­æ³• type ç»“æ„ä½“å struct { å­—æ®µå1 æ•°æ®ç±»å‹1 å­—æ®µå2 æ•°æ®ç±»å‹2 å­—æ®µå3 æ•°æ®ç±»å‹3 // ... æ›´å¤šå­—æ®µ } 2.2 ç»“æ„ä½“å®šä¹‰ç¤ºä¾‹\rpackage main import \u0026#34;fmt\u0026#34; // å®šä¹‰å­¦ç”Ÿç»“æ„ä½“ type Student struct { Name string // å§“å Age int // å¹´é¾„ Score float64 // æˆç»© IsEnrolled bool // æ˜¯å¦åœ¨æ ¡ } // å®šä¹‰å›¾ä¹¦ç»“æ„ä½“ type Book struct { Title string // ä¹¦å Author string // ä½œè€… Price float64 // ä»·æ ¼ Pages int // é¡µæ•° ISBN string // ISBNç¼–å· } // å®šä¹‰åæ ‡ç‚¹ç»“æ„ä½“ type Point struct { X int // Xåæ ‡ Y int // Yåæ ‡ } func main() { fmt.Println(\u0026#34;ç»“æ„ä½“å®šä¹‰å®Œæˆ\u0026#34;) } 2.3 åŒ¿åç»“æ„ä½“\rpackage main import \u0026#34;fmt\u0026#34; func main() { // åŒ¿åç»“æ„ä½“å®šä¹‰å’Œä½¿ç”¨ person := struct { Name string Age int }{ Name: \u0026#34;æå››\u0026#34;, Age: 25, } fmt.Printf(\u0026#34;åŒ¿åç»“æ„ä½“ï¼š%+v\\n\u0026#34;, person) fmt.Printf(\u0026#34;å§“åï¼š%sï¼Œå¹´é¾„ï¼š%d\\n\u0026#34;, person.Name, person.Age) // åŒ¿åç»“æ„ä½“åˆ‡ç‰‡ people := []struct { Name string City string }{ {\u0026#34;ç‹äº”\u0026#34;, \u0026#34;åŒ—äº¬\u0026#34;}, {\u0026#34;èµµå…­\u0026#34;, \u0026#34;ä¸Šæµ·\u0026#34;}, {\u0026#34;å­™ä¸ƒ\u0026#34;, \u0026#34;å¹¿å·\u0026#34;}, } fmt.Println(\u0026#34;äººå‘˜åˆ—è¡¨ï¼š\u0026#34;) for _, p := range people { fmt.Printf(\u0026#34;å§“åï¼š%sï¼ŒåŸå¸‚ï¼š%s\\n\u0026#34;, p.Name, p.City) } } è¿è¡Œç»“æœï¼š\nåŒ¿åç»“æ„ä½“ï¼š{Name:æå›› Age:25} å§“åï¼šæå››ï¼Œå¹´é¾„ï¼š25 äººå‘˜åˆ—è¡¨ï¼š å§“åï¼šç‹äº”ï¼ŒåŸå¸‚ï¼šåŒ—äº¬ å§“åï¼šèµµå…­ï¼ŒåŸå¸‚ï¼šä¸Šæµ· å§“åï¼šå­™ä¸ƒï¼ŒåŸå¸‚ï¼šå¹¿å· 3. ç»“æ„ä½“çš„å®ä¾‹åŒ–\r3.1 å„ç§åˆ›å»ºæ–¹å¼\rpackage main import \u0026#34;fmt\u0026#34; type Student struct { Name string Age int Score float64 } func main() { // æ–¹å¼1ï¼šå®Œæ•´å­—æ®µåˆå§‹åŒ– student1 := Student{ Name: \u0026#34;å¼ ä¸‰\u0026#34;, Age: 18, Score: 95.5, } // æ–¹å¼2ï¼šæŒ‰å­—æ®µé¡ºåºåˆå§‹åŒ–ï¼ˆå¿…é¡»æŒ‡å®šæ‰€æœ‰å­—æ®µï¼‰ student2 := Student{\u0026#34;æå››\u0026#34;, 19, 88.0} // æ–¹å¼3ï¼šéƒ¨åˆ†å­—æ®µåˆå§‹åŒ–ï¼ˆå¿…é¡»æŒ‡å®šå­—æ®µåï¼‰ student3 := Student{ Name: \u0026#34;ç‹äº”\u0026#34;, Age: 20, // Scoreä½¿ç”¨é»˜è®¤å€¼0.0 } // æ–¹å¼4ï¼šä½¿ç”¨newå‡½æ•°åˆ›å»ºï¼ˆæ‰€æœ‰å­—æ®µä¸ºé›¶å€¼ï¼‰ student4 := new(Student) student4.Name = \u0026#34;èµµå…­\u0026#34; student4.Age = 21 student4.Score = 92.5 // æ–¹å¼5ï¼šä½¿ç”¨\u0026amp;åˆ›å»ºå¹¶åˆå§‹åŒ– student5 := \u0026amp;Student{ Name: \u0026#34;å­™ä¸ƒ\u0026#34;, Age: 17, Score: 87.5, } fmt.Printf(\u0026#34;å­¦ç”Ÿ1ï¼š%+v\\n\u0026#34;, student1) fmt.Printf(\u0026#34;å­¦ç”Ÿ2ï¼š%+v\\n\u0026#34;, student2) fmt.Printf(\u0026#34;å­¦ç”Ÿ3ï¼š%+v\\n\u0026#34;, student3) fmt.Printf(\u0026#34;å­¦ç”Ÿ4ï¼š%+v\\n\u0026#34;, *student4) fmt.Printf(\u0026#34;å­¦ç”Ÿ5ï¼š%+v\\n\u0026#34;, *student5) } è¿è¡Œç»“æœï¼š\nå­¦ç”Ÿ1ï¼š{Name:å¼ ä¸‰ Age:18 Score:95.5} å­¦ç”Ÿ2ï¼š{Name:æå›› Age:19 Score:88} å­¦ç”Ÿ3ï¼š{Name:ç‹äº” Age:20 Score:0} å­¦ç”Ÿ4ï¼š{Name:èµµå…­ Age:21 Score:92.5} å­¦ç”Ÿ5ï¼š{Name:å­™ä¸ƒ Age:17 Score:87.5} 3.2 ç»“æ„ä½“çš„é›¶å€¼\rpackage main import \u0026#34;fmt\u0026#34; type Person struct { Name string Age int Height float64 IsActive bool Scores []int Info map[string]string } func main() { // å£°æ˜ç»“æ„ä½“å˜é‡ä½†ä¸åˆå§‹åŒ– var person Person fmt.Printf(\u0026#34;ç»“æ„ä½“é›¶å€¼ï¼š%+v\\n\u0026#34;, person) fmt.Printf(\u0026#34;å­—ç¬¦ä¸²é›¶å€¼ï¼š%q\\n\u0026#34;, person.Name) fmt.Printf(\u0026#34;æ•´æ•°é›¶å€¼ï¼š%d\\n\u0026#34;, person.Age) fmt.Printf(\u0026#34;æµ®ç‚¹æ•°é›¶å€¼ï¼š%f\\n\u0026#34;, person.Height) fmt.Printf(\u0026#34;å¸ƒå°”é›¶å€¼ï¼š%t\\n\u0026#34;, person.IsActive) fmt.Printf(\u0026#34;åˆ‡ç‰‡é›¶å€¼ï¼š%vï¼Œæ˜¯å¦ä¸ºnilï¼š%t\\n\u0026#34;, person.Scores, person.Scores == nil) fmt.Printf(\u0026#34;mapé›¶å€¼ï¼š%vï¼Œæ˜¯å¦ä¸ºnilï¼š%t\\n\u0026#34;, person.Info, person.Info == nil) } è¿è¡Œç»“æœï¼š\nç»“æ„ä½“é›¶å€¼ï¼š{Name: Age:0 Height:0 IsActive:false Scores:[] Info:map[]} å­—ç¬¦ä¸²é›¶å€¼ï¼š\u0026#34;\u0026#34; æ•´æ•°é›¶å€¼ï¼š0 æµ®ç‚¹æ•°é›¶å€¼ï¼š0.000000 å¸ƒå°”é›¶å€¼ï¼šfalse åˆ‡ç‰‡é›¶å€¼ï¼š[]ï¼Œæ˜¯å¦ä¸ºnilï¼štrue mapé›¶å€¼ï¼šmap[]ï¼Œæ˜¯å¦ä¸ºnilï¼štrue 4. ç»“æ„ä½“å­—æ®µè®¿é—®å’Œä¿®æ”¹\r4.1 å­—æ®µè®¿é—®\rpackage main import \u0026#34;fmt\u0026#34; type Employee struct { Name string Age int Salary float64 Department string } func main() { // åˆ›å»ºå‘˜å·¥å®ä¾‹ emp := Employee{ Name: \u0026#34;å¼ ä¸‰\u0026#34;, Age: 28, Salary: 15000.0, Department: \u0026#34;æŠ€æœ¯éƒ¨\u0026#34;, } // è®¿é—®å­—æ®µ fmt.Printf(\u0026#34;å‘˜å·¥å§“åï¼š%s\\n\u0026#34;, emp.Name) fmt.Printf(\u0026#34;å‘˜å·¥å¹´é¾„ï¼š%d\\n\u0026#34;, emp.Age) fmt.Printf(\u0026#34;å‘˜å·¥è–ªèµ„ï¼š%.2f\\n\u0026#34;, emp.Salary) fmt.Printf(\u0026#34;æ‰€åœ¨éƒ¨é—¨ï¼š%s\\n\u0026#34;, emp.Department) // ä¿®æ”¹å­—æ®µå€¼ emp.Age = 29 emp.Salary = 16000.0 emp.Department = \u0026#34;ç ”å‘éƒ¨\u0026#34; fmt.Printf(\u0026#34;\\nä¿®æ”¹åä¿¡æ¯ï¼š\\n\u0026#34;) fmt.Printf(\u0026#34;å‘˜å·¥å§“åï¼š%s\\n\u0026#34;, emp.Name) fmt.Printf(\u0026#34;å‘˜å·¥å¹´é¾„ï¼š%d\\n\u0026#34;, emp.Age) fmt.Printf(\u0026#34;å‘˜å·¥è–ªèµ„ï¼š%.2f\\n\u0026#34;, emp.Salary) fmt.Printf(\u0026#34;æ‰€åœ¨éƒ¨é—¨ï¼š%s\\n\u0026#34;, emp.Department) } è¿è¡Œç»“æœï¼š\nå‘˜å·¥å§“åï¼šå¼ ä¸‰ å‘˜å·¥å¹´é¾„ï¼š28 å‘˜å·¥è–ªèµ„ï¼š15000.00 æ‰€åœ¨éƒ¨é—¨ï¼šæŠ€æœ¯éƒ¨ ä¿®æ”¹åä¿¡æ¯ï¼š å‘˜å·¥å§“åï¼šå¼ ä¸‰ å‘˜å·¥å¹´é¾„ï¼š29 å‘˜å·¥è–ªèµ„ï¼š16000.00 æ‰€åœ¨éƒ¨é—¨ï¼šç ”å‘éƒ¨ 4.2 æŒ‡é’ˆè®¿é—®ç»“æ„ä½“å­—æ®µ\rpackage main import \u0026#34;fmt\u0026#34; type Product struct { Name string Price float64 Stock int } func main() { // æ™®é€šç»“æ„ä½“å˜é‡ product1 := Product{Name: \u0026#34;æ‰‹æœº\u0026#34;, Price: 3999.0, Stock: 100} // ç»“æ„ä½“æŒ‡é’ˆ product2 := \u0026amp;Product{Name: \u0026#34;ç”µè„‘\u0026#34;, Price: 8999.0, Stock: 50} // è®¿é—®æ–¹å¼1ï¼šé€šè¿‡å˜é‡åç›´æ¥è®¿é—® fmt.Printf(\u0026#34;äº§å“1 - åç§°ï¼š%sï¼Œä»·æ ¼ï¼š%.2fï¼Œåº“å­˜ï¼š%d\\n\u0026#34;, product1.Name, product1.Price, product1.Stock) // è®¿é—®æ–¹å¼2ï¼šé€šè¿‡æŒ‡é’ˆè®¿é—®ï¼ˆGoè‡ªåŠ¨è§£å¼•ç”¨ï¼‰ fmt.Printf(\u0026#34;äº§å“2 - åç§°ï¼š%sï¼Œä»·æ ¼ï¼š%.2fï¼Œåº“å­˜ï¼š%d\\n\u0026#34;, product2.Name, product2.Price, product2.Stock) // è®¿é—®æ–¹å¼3ï¼šæ˜¾å¼è§£å¼•ç”¨ fmt.Printf(\u0026#34;äº§å“2æ˜¾å¼è§£å¼•ç”¨ - åç§°ï¼š%sï¼Œä»·æ ¼ï¼š%.2fï¼Œåº“å­˜ï¼š%d\\n\u0026#34;, (*product2).Name, (*product2).Price, (*product2).Stock) // ä¿®æ”¹å€¼ product1.Price = 3599.0 product2.Stock = 75 // ç­‰ä»·äº (*product2).Stock = 75 fmt.Printf(\u0026#34;\\nä¿®æ”¹åï¼š\\n\u0026#34;) fmt.Printf(\u0026#34;äº§å“1ä»·æ ¼ï¼š%.2f\\n\u0026#34;, product1.Price) fmt.Printf(\u0026#34;äº§å“2åº“å­˜ï¼š%d\\n\u0026#34;, product2.Stock) } è¿è¡Œç»“æœï¼š\näº§å“1 - åç§°ï¼šæ‰‹æœºï¼Œä»·æ ¼ï¼š3999.00ï¼Œåº“å­˜ï¼š100 äº§å“2 - åç§°ï¼šç”µè„‘ï¼Œä»·æ ¼ï¼š8999.00ï¼Œåº“å­˜ï¼š50 äº§å“2æ˜¾å¼è§£å¼•ç”¨ - åç§°ï¼šç”µè„‘ï¼Œä»·æ ¼ï¼š8999.00ï¼Œåº“å­˜ï¼š50 ä¿®æ”¹åï¼š äº§å“1ä»·æ ¼ï¼š3599.00 äº§å“2åº“å­˜ï¼š75 5. ç»“æ„ä½“åµŒå¥—\r5.1 åŸºæœ¬åµŒå¥—\rpackage main import \u0026#34;fmt\u0026#34; // åœ°å€ç»“æ„ä½“ type Address struct { Province string City string Street string ZipCode string } // å…¬å¸ç»“æ„ä½“ type Company struct { Name string Address Address // åµŒå¥—Addressç»“æ„ä½“ } // å‘˜å·¥ç»“æ„ä½“ type Employee struct { Name string Age int Company Company // åµŒå¥—Companyç»“æ„ä½“ } func main() { // åˆ›å»ºåµŒå¥—ç»“æ„ä½“ employee := Employee{ Name: \u0026#34;å¼ ä¸‰\u0026#34;, Age: 30, Company: Company{ Name: \u0026#34;ç§‘æŠ€æœ‰é™å…¬å¸\u0026#34;, Address: Address{ Province: \u0026#34;åŒ—äº¬å¸‚\u0026#34;, City: \u0026#34;åŒ—äº¬å¸‚\u0026#34;, Street: \u0026#34;ä¸­å…³æ‘å¤§è¡—1å·\u0026#34;, ZipCode: \u0026#34;100080\u0026#34;, }, }, } // è®¿é—®åµŒå¥—å­—æ®µ fmt.Printf(\u0026#34;å‘˜å·¥å§“åï¼š%s\\n\u0026#34;, employee.Name) fmt.Printf(\u0026#34;å‘˜å·¥å¹´é¾„ï¼š%d\\n\u0026#34;, employee.Age) fmt.Printf(\u0026#34;å…¬å¸åç§°ï¼š%s\\n\u0026#34;, employee.Company.Name) fmt.Printf(\u0026#34;å…¬å¸çœä»½ï¼š%s\\n\u0026#34;, employee.Company.Address.Province) fmt.Printf(\u0026#34;å…¬å¸åŸå¸‚ï¼š%s\\n\u0026#34;, employee.Company.Address.City) fmt.Printf(\u0026#34;å…¬å¸è¡—é“ï¼š%s\\n\u0026#34;, employee.Company.Address.Street) fmt.Printf(\u0026#34;é‚®æ”¿ç¼–ç ï¼š%s\\n\u0026#34;, employee.Company.Address.ZipCode) // ä¿®æ”¹åµŒå¥—å­—æ®µ employee.Company.Address.Street = \u0026#34;ä¸­å…³æ‘å¤§è¡—2å·\u0026#34; fmt.Printf(\u0026#34;\\nä¿®æ”¹åè¡—é“ï¼š%s\\n\u0026#34;, employee.Company.Address.Street) } è¿è¡Œç»“æœï¼š\nå‘˜å·¥å§“åï¼šå¼ ä¸‰ å‘˜å·¥å¹´é¾„ï¼š30 å…¬å¸åç§°ï¼šç§‘æŠ€æœ‰é™å…¬å¸ å…¬å¸çœä»½ï¼šåŒ—äº¬å¸‚ å…¬å¸åŸå¸‚ï¼šåŒ—äº¬å¸‚ å…¬å¸è¡—é“ï¼šä¸­å…³æ‘å¤§è¡—1å· é‚®æ”¿ç¼–ç ï¼š100080 ä¿®æ”¹åè¡—é“ï¼šä¸­å…³æ‘å¤§è¡—2å· 5.2 åŒ¿ååµŒå¥—ï¼ˆåŒ¿åå­—æ®µï¼‰\rpackage main import \u0026#34;fmt\u0026#34; type Person struct { Name string Age int } type Student struct { Person // åŒ¿ååµŒå¥—Personç»“æ„ä½“ School string Grade int } type Teacher struct { Person // åŒ¿ååµŒå¥—Personç»“æ„ä½“ Subject string Salary float64 } func main() { // åˆ›å»ºå­¦ç”Ÿ student := Student{ Person: Person{Name: \u0026#34;å°æ˜\u0026#34;, Age: 18}, School: \u0026#34;ç¬¬ä¸€ä¸­å­¦\u0026#34;, Grade: 12, } // åˆ›å»ºè€å¸ˆ teacher := Teacher{ Person: Person{Name: \u0026#34;ç‹è€å¸ˆ\u0026#34;, Age: 35}, Subject: \u0026#34;æ•°å­¦\u0026#34;, Salary: 8000.0, } // è®¿é—®æå‡å­—æ®µï¼ˆå¯ä»¥ç›´æ¥è®¿é—®åµŒå¥—ç»“æ„ä½“çš„å­—æ®µï¼‰ fmt.Printf(\u0026#34;å­¦ç”Ÿå§“åï¼š%s\\n\u0026#34;, student.Name) // ç­‰ä»·äº student.Person.Name fmt.Printf(\u0026#34;å­¦ç”Ÿå¹´é¾„ï¼š%d\\n\u0026#34;, student.Age) // ç­‰ä»·äº student.Person.Age fmt.Printf(\u0026#34;å­¦æ ¡ï¼š%s\\n\u0026#34;, student.School) fmt.Printf(\u0026#34;å¹´çº§ï¼š%d\\n\u0026#34;, student.Grade) fmt.Printf(\u0026#34;\\nè€å¸ˆå§“åï¼š%s\\n\u0026#34;, teacher.Name) // ç­‰ä»·äº teacher.Person.Name fmt.Printf(\u0026#34;è€å¸ˆå¹´é¾„ï¼š%d\\n\u0026#34;, teacher.Age) // ç­‰ä»·äº teacher.Person.Age fmt.Printf(\u0026#34;ç§‘ç›®ï¼š%s\\n\u0026#34;, teacher.Subject) fmt.Printf(\u0026#34;è–ªèµ„ï¼š%.2f\\n\u0026#34;, teacher.Salary) // ä¿®æ”¹æå‡å­—æ®µ student.Age = 19 teacher.Name = \u0026#34;æè€å¸ˆ\u0026#34; fmt.Printf(\u0026#34;\\nä¿®æ”¹åå­¦ç”Ÿå¹´é¾„ï¼š%d\\n\u0026#34;, student.Age) fmt.Printf(\u0026#34;ä¿®æ”¹åè€å¸ˆå§“åï¼š%s\\n\u0026#34;, teacher.Name) } è¿è¡Œç»“æœï¼š\nå­¦ç”Ÿå§“åï¼šå°æ˜ å­¦ç”Ÿå¹´é¾„ï¼š18 å­¦æ ¡ï¼šç¬¬ä¸€ä¸­å­¦ å¹´çº§ï¼š12 è€å¸ˆå§“åï¼šç‹è€å¸ˆ è€å¸ˆå¹´é¾„ï¼š35 ç§‘ç›®ï¼šæ•°å­¦ è–ªèµ„ï¼š8000.00 ä¿®æ”¹åå­¦ç”Ÿå¹´é¾„ï¼š19 ä¿®æ”¹åè€å¸ˆå§“åï¼šæè€å¸ˆ 6. ç»“æ„ä½“æ ‡ç­¾ï¼ˆStruct Tagsï¼‰\r6.1 åŸºæœ¬æ ‡ç­¾ä½¿ç”¨\rpackage main import ( \u0026#34;encoding/json\u0026#34; \u0026#34;fmt\u0026#34; ) type User struct { ID int `json:\u0026#34;id\u0026#34;` UserName string `json:\u0026#34;username\u0026#34;` Email string `json:\u0026#34;email\u0026#34;` Password string `json:\u0026#34;-\u0026#34;` // -è¡¨ç¤ºå¿½ç•¥æ­¤å­—æ®µ Active bool `json:\u0026#34;active,omitempty\u0026#34;` // omitemptyè¡¨ç¤ºç©ºå€¼æ—¶å¿½ç•¥ } func main() { user := User{ ID: 1, UserName: \u0026#34;zhangsan\u0026#34;, Email: \u0026#34;zhangsan@example.com\u0026#34;, Password: \u0026#34;123456\u0026#34;, Active: true, } // åºåˆ—åŒ–ä¸ºJSON jsonData, err := json.Marshal(user) if err != nil { fmt.Printf(\u0026#34;åºåˆ—åŒ–é”™è¯¯ï¼š%v\\n\u0026#34;, err) return } fmt.Printf(\u0026#34;JSONæ•°æ®ï¼š%s\\n\u0026#34;, jsonData) // ååºåˆ—åŒ– var newUser User jsonStr := `{\u0026#34;id\u0026#34;:2,\u0026#34;username\u0026#34;:\u0026#34;lisi\u0026#34;,\u0026#34;email\u0026#34;:\u0026#34;lisi@example.com\u0026#34;,\u0026#34;active\u0026#34;:false}` err = json.Unmarshal([]byte(jsonStr), \u0026amp;newUser) if err != nil { fmt.Printf(\u0026#34;ååºåˆ—åŒ–é”™è¯¯ï¼š%v\\n\u0026#34;, err) return } fmt.Printf(\u0026#34;ååºåˆ—åŒ–ç»“æœï¼š%+v\\n\u0026#34;, newUser) } è¿è¡Œç»“æœï¼š\nJSONæ•°æ®ï¼š{\u0026#34;id\u0026#34;:1,\u0026#34;username\u0026#34;:\u0026#34;zhangsan\u0026#34;,\u0026#34;email\u0026#34;:\u0026#34;zhangsan@example.com\u0026#34;,\u0026#34;active\u0026#34;:true} ååºåˆ—åŒ–ç»“æœï¼š{ID:2 UserName:lisi Email:lisi@example.com Password: Active:false} 6.2 å¤šä¸ªæ ‡ç­¾ç¤ºä¾‹\rpackage main import ( \u0026#34;encoding/json\u0026#34; \u0026#34;fmt\u0026#34; ) type Product struct { ID int `json:\u0026#34;id\u0026#34; db:\u0026#34;product_id\u0026#34;` Name string `json:\u0026#34;name\u0026#34; db:\u0026#34;product_name\u0026#34;` Price float64 `json:\u0026#34;price\u0026#34; db:\u0026#34;price\u0026#34;` Description string `json:\u0026#34;description,omitempty\u0026#34; db:\u0026#34;description\u0026#34;` Category string `json:\u0026#34;category\u0026#34; db:\u0026#34;category\u0026#34;` } func main() { products := []Product{ { ID: 1, Name: \u0026#34;iPhone 15\u0026#34;, Price: 5999.0, Description: \u0026#34;æœ€æ–°æ¬¾è‹¹æœæ‰‹æœº\u0026#34;, Category: \u0026#34;ç”µå­äº§å“\u0026#34;, }, { ID: 2, Name: \u0026#34;MacBook Pro\u0026#34;, Price: 12999.0, // Descriptionä¸ºç©ºï¼Œä¼šè¢«omitemptyå¿½ç•¥ Category: \u0026#34;ç”µè„‘\u0026#34;, }, } // JSONåºåˆ—åŒ– jsonData, _ := json.MarshalIndent(products, \u0026#34;\u0026#34;, \u0026#34; \u0026#34;) fmt.Printf(\u0026#34;JSONæ ¼å¼æ•°æ®ï¼š\\n%s\\n\u0026#34;, jsonData) } è¿è¡Œç»“æœï¼š\nJSONæ ¼å¼æ•°æ®ï¼š [ { \u0026#34;id\u0026#34;: 1, \u0026#34;name\u0026#34;: \u0026#34;iPhone 15\u0026#34;, \u0026#34;price\u0026#34;: 5999, \u0026#34;description\u0026#34;: \u0026#34;æœ€æ–°æ¬¾è‹¹æœæ‰‹æœº\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;ç”µå­äº§å“\u0026#34; }, { \u0026#34;id\u0026#34;: 2, \u0026#34;name\u0026#34;: \u0026#34;MacBook Pro\u0026#34;, \u0026#34;price\u0026#34;: 12999, \u0026#34;category\u0026#34;: \u0026#34;ç”µè„‘\u0026#34; } ] 7. ç»“æ„ä½“æ¯”è¾ƒ\r7.1 ç»“æ„ä½“ç›¸ç­‰æ€§æ¯”è¾ƒ\rpackage main import \u0026#34;fmt\u0026#34; type Point struct { X, Y int } type Person struct { Name string Age int Data []int // åˆ‡ç‰‡å­—æ®µ } func main() { // å¯æ¯”è¾ƒçš„ç»“æ„ä½“ p1 := Point{1, 2} p2 := Point{1, 2} p3 := Point{3, 4} fmt.Printf(\u0026#34;p1 == p2: %t\\n\u0026#34;, p1 == p2) fmt.Printf(\u0026#34;p1 == p3: %t\\n\u0026#34;, p1 == p3) // åŒ…å«ä¸å¯æ¯”è¾ƒå­—æ®µçš„ç»“æ„ä½“ person1 := Person{Name: \u0026#34;å¼ ä¸‰\u0026#34;, Age: 20, Data: []int{1, 2, 3}} person2 := Person{Name: \u0026#34;å¼ ä¸‰\u0026#34;, Age: 20, Data: []int{1, 2, 3}} // ä»¥ä¸‹ä»£ç ä¼šç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºåŒ…å«åˆ‡ç‰‡å­—æ®µ // fmt.Printf(\u0026#34;person1 == person2: %t\\n\u0026#34;, person1 == person2) // æ‰‹åŠ¨æ¯”è¾ƒ equal := person1.Name == person2.Name \u0026amp;\u0026amp; person1.Age == person2.Age \u0026amp;\u0026amp; len(person1.Data) == len(person2.Data) if equal { for i := range person1.Data { if person1.Data[i] != person2.Data[i] { equal = false break } } } fmt.Printf(\u0026#34;æ‰‹åŠ¨æ¯”è¾ƒç»“æœï¼š%t\\n\u0026#34;, equal) } è¿è¡Œç»“æœï¼š\np1 == p2: true p1 == p3: false æ‰‹åŠ¨æ¯”è¾ƒç»“æœï¼štrue 8. ç»“æ„ä½“å·¥å‚å‡½æ•°\r8.1 åˆ›å»ºç»“æ„ä½“çš„æ„é€ å‡½æ•°\rpackage main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) type User struct { ID int Username string Email string CreatedAt time.Time IsActive bool } // æ„é€ å‡½æ•°1ï¼šåˆ›å»ºæ™®é€šç”¨æˆ· func NewUser(username, email string) *User { return \u0026amp;User{ Username: username, Email: email, CreatedAt: time.Now(), IsActive: true, } } // æ„é€ å‡½æ•°2ï¼šåˆ›å»ºç®¡ç†å‘˜ç”¨æˆ· func NewAdminUser(username, email string) *User { user := NewUser(username, email) user.ID = -1 // ç®¡ç†å‘˜IDè®¾ä¸ºç‰¹æ®Šå€¼ return user } // æ„é€ å‡½æ•°3ï¼šå¸¦éªŒè¯çš„æ„é€ å‡½æ•° func NewUserWithValidation(username, email string) (*User, error) { if len(username) \u0026lt; 3 { return nil, fmt.Errorf(\u0026#34;ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦\u0026#34;) } if len(email) \u0026lt; 5 || !contains(email, \u0026#34;@\u0026#34;) { return nil, fmt.Errorf(\u0026#34;é‚®ç®±æ ¼å¼ä¸æ­£ç¡®\u0026#34;) } return \u0026amp;User{ Username: username, Email: email, CreatedAt: time.Now(), IsActive: true, }, nil } // è¾…åŠ©å‡½æ•° func contains(s, substr string) bool { for i := 0; i \u0026lt;= len(s)-len(substr); i++ { if s[i:i+len(substr)] == substr { return true } } return false } func main() { // ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºç”¨æˆ· user1 := NewUser(\u0026#34;zhangsan\u0026#34;, \u0026#34;zhangsan@example.com\u0026#34;) fmt.Printf(\u0026#34;æ™®é€šç”¨æˆ·ï¼š%+v\\n\u0026#34;, *user1) admin := NewAdminUser(\u0026#34;admin\u0026#34;, \u0026#34;admin@example.com\u0026#34;) fmt.Printf(\u0026#34;ç®¡ç†å‘˜ç”¨æˆ·ï¼š%+v\\n\u0026#34;, *admin) // å¸¦éªŒè¯çš„æ„é€ å‡½æ•° user2, err := NewUserWithValidation(\u0026#34;li\u0026#34;, \u0026#34;invalid-email\u0026#34;) if err != nil { fmt.Printf(\u0026#34;åˆ›å»ºç”¨æˆ·å¤±è´¥ï¼š%v\\n\u0026#34;, err) } user3, err := NewUserWithValidation(\u0026#34;lisi\u0026#34;, \u0026#34;lisi@example.com\u0026#34;) if err != nil { fmt.Printf(\u0026#34;åˆ›å»ºç”¨æˆ·å¤±è´¥ï¼š%v\\n\u0026#34;, err) } else { fmt.Printf(\u0026#34;éªŒè¯é€šè¿‡çš„ç”¨æˆ·ï¼š%+v\\n\u0026#34;, *user3) } } è¿è¡Œç»“æœï¼š\næ™®é€šç”¨æˆ·ï¼š{ID:0 Username:zhangsan Email:zhangsan@example.com CreatedAt:2024-01-15 10:30:45.123456789 +0800 CST IsActive:true} ç®¡ç†å‘˜ç”¨æˆ·ï¼š{ID:-1 Username:admin Email:admin@example.com CreatedAt:2024-01-15 10:30:45.123456789 +0800 CST IsActive:true} åˆ›å»ºç”¨æˆ·å¤±è´¥ï¼šç”¨æˆ·åé•¿åº¦ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦ éªŒè¯é€šè¿‡çš„ç”¨æˆ·ï¼š{ID:0 Username:lisi Email:lisi@example.com CreatedAt:2024-01-15 10:30:45.123456789 +0800 CST IsActive:true} 9. ç»“æ„ä½“ä¸å‡½æ•°\r9.1 ç»“æ„ä½“ä½œä¸ºå‡½æ•°å‚æ•°\rpackage main import \u0026#34;fmt\u0026#34; type Rectangle struct { Width float64 Height float64 } // å€¼ä¼ é€’ func calculateArea(rect Rectangle) float64 { return rect.Width * rect.Height } // æŒ‡é’ˆä¼ é€’ï¼ˆå¯ä»¥ä¿®æ”¹åŸç»“æ„ä½“ï¼‰ func scaleRectangle(rect *Rectangle, factor float64) { rect.Width *= factor rect.Height *= factor } // è¿”å›ç»“æ„ä½“ func createSquare(side float64) Rectangle { return Rectangle{Width: side, Height: side} } func main() { // åˆ›å»ºçŸ©å½¢ rect := Rectangle{Width: 10, Height: 5} fmt.Printf(\u0026#34;åŸå§‹çŸ©å½¢ï¼š%+v\\n\u0026#34;, rect) // å€¼ä¼ é€’è®¡ç®—é¢ç§¯ area := calculateArea(rect) fmt.Printf(\u0026#34;é¢ç§¯ï¼š%.2f\\n\u0026#34;, area) fmt.Printf(\u0026#34;è®¡ç®—åçŸ©å½¢ï¼š%+v\\n\u0026#34;, rect) // åŸçŸ©å½¢æœªæ”¹å˜ // æŒ‡é’ˆä¼ é€’ç¼©æ”¾ scaleRectangle(\u0026amp;rect, 2.0) fmt.Printf(\u0026#34;ç¼©æ”¾åçŸ©å½¢ï¼š%+v\\n\u0026#34;, rect) fmt.Printf(\u0026#34;ç¼©æ”¾åé¢ç§¯ï¼š%.2f\\n\u0026#34;, calculateArea(rect)) // åˆ›å»ºæ­£æ–¹å½¢ square := createSquare(8) fmt.Printf(\u0026#34;åˆ›å»ºçš„æ­£æ–¹å½¢ï¼š%+v\\n\u0026#34;, square) fmt.Printf(\u0026#34;æ­£æ–¹å½¢é¢ç§¯ï¼š%.2f\\n\u0026#34;, calculateArea(square)) } è¿è¡Œç»“æœï¼š\nåŸå§‹çŸ©å½¢ï¼š{Width:10 Height:5} é¢ç§¯ï¼š50.00 è®¡ç®—åçŸ©å½¢ï¼š{Width:10 Height:5} ç¼©æ”¾åçŸ©å½¢ï¼š{Width:20 Height:10} ç¼©æ”¾åé¢ç§¯ï¼š200.00 åˆ›å»ºçš„æ­£æ–¹å½¢ï¼š{Width:8 Height:8} æ­£æ–¹å½¢é¢ç§¯ï¼š64.00 10. æ€»ç»“\rç»“æ„ä½“æ˜¯Goè¯­è¨€ä¸­ç»„ç»‡å’Œç®¡ç†ç›¸å…³æ•°æ®çš„é‡è¦å·¥å…·ï¼š\næ ¸å¿ƒç‰¹ç‚¹ï¼š\nå°†å¤šä¸ªç›¸å…³çš„æ•°æ®å­—æ®µç»„åˆåœ¨ä¸€èµ· å¯ä»¥åµŒå¥—å…¶ä»–ç»“æ„ä½“ æ”¯æŒæ ‡ç­¾ç”¨äºåºåˆ—åŒ–ç­‰æ“ä½œ å¯ä»¥å®šä¹‰æ„é€ å‡½æ•°æ¥è§„èŒƒåŒ–åˆ›å»ºè¿‡ç¨‹ ä½¿ç”¨åœºæ™¯ï¼š\nè¡¨ç¤ºç°å®ä¸–ç•Œçš„å®ä½“ï¼ˆç”¨æˆ·ã€å•†å“ã€è®¢å•ç­‰ï¼‰ ç»„ç»‡é…ç½®ä¿¡æ¯ ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’å¤æ‚æ•°æ® å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºç¡€ æœ€ä½³å®è·µï¼š\nä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»“æ„ä½“å®ä¾‹ ä¸ºé‡è¦çš„ç»“æ„ä½“æ·»åŠ æ ‡ç­¾ åˆç†ä½¿ç”¨æŒ‡é’ˆä¼ é€’é¿å…ä¸å¿…è¦çš„æ‹·è´ æ³¨æ„åŒ…å«ä¸å¯æ¯”è¾ƒå­—æ®µçš„ç»“æ„ä½“æ¯”è¾ƒé—®é¢˜ ç»“æ„ä½“æ˜¯Goè¯­è¨€é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºç¡€ï¼ŒæŒæ¡å¥½ç»“æ„ä½“çš„ä½¿ç”¨å¯¹åç»­å­¦ä¹ æ–¹æ³•å’Œæ¥å£éå¸¸é‡è¦ã€‚\n","date":"2026-02-04T17:15:16+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-09/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬ä¹ç¯‡ ç»“æ„ä½“(struct)ã€‘"},{"content":"1. ä»€ä¹ˆæ˜¯æŒ‡é’ˆ\ræŒ‡é’ˆæ˜¯ç¼–ç¨‹ä¸­ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå®ƒå°±åƒä¸€ä¸ª\u0026quot;åœ°å€æ ‡ç­¾\u0026quot;ï¼Œå­˜å‚¨ç€å†…å­˜ä¸­æŸä¸ªå˜é‡çš„å…·ä½“ä½ç½®ä¿¡æ¯ã€‚é€šè¿‡æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®å’Œæ“ä½œå†…å­˜ä¸­çš„æ•°æ®ã€‚\n1.1 æŒ‡é’ˆçš„åŸºæœ¬æ¦‚å¿µ\ræƒ³è±¡ä¸€ä¸‹ç°å®ç”Ÿæ´»ä¸­çš„åœºæ™¯ï¼š\nä½ çš„å®¶æœ‰ä¸€ä¸ªå…·ä½“åœ°å€ï¼ˆæ¯”å¦‚ï¼šåŒ—äº¬å¸‚æœé˜³åŒºxxxè¡—é“xxxå·ï¼‰ åˆ«äººæƒ³è¦æ‰¾åˆ°ä½ å®¶ï¼Œåªéœ€è¦çŸ¥é“è¿™ä¸ªåœ°å€å°±å¯ä»¥äº† æŒ‡é’ˆå°±ç›¸å½“äºè¿™ä¸ª\u0026quot;åœ°å€\u0026quot;ï¼Œå®ƒå­˜å‚¨çš„æ˜¯å˜é‡åœ¨å†…å­˜ä¸­çš„ä½ç½® åœ¨è®¡ç®—æœºä¸­ï¼š\næ¯ä¸ªå˜é‡éƒ½ä¼šè¢«åˆ†é…ä¸€å—å†…å­˜ç©ºé—´æ¥å­˜å‚¨æ•°æ® è¿™å—å†…å­˜ç©ºé—´æœ‰ä¸€ä¸ªå”¯ä¸€çš„åœ°å€ æŒ‡é’ˆå˜é‡å­˜å‚¨çš„å°±æ˜¯è¿™ä¸ªå†…å­˜åœ°å€ 1.2 ä¸ºä»€ä¹ˆéœ€è¦æŒ‡é’ˆ\ræŒ‡é’ˆä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªé‡è¦ä½œç”¨ï¼š\nèŠ‚çœå†…å­˜ï¼šä¼ é€’å¤§å‹æ•°æ®ç»“æ„æ—¶ï¼Œä¼ é€’æŒ‡é’ˆæ¯”ä¼ é€’æ•´ä¸ªæ•°æ®æ›´é«˜æ•ˆ ç›´æ¥ä¿®æ”¹ï¼šå¯ä»¥åœ¨å‡½æ•°ä¸­ç›´æ¥ä¿®æ”¹åŸå§‹æ•°æ® åŠ¨æ€å†…å­˜ç®¡ç†ï¼šå¯ä»¥åŠ¨æ€åœ°åˆ†é…å’Œé‡Šæ”¾å†…å­˜ æ•°æ®ç»“æ„å®ç°ï¼šé“¾è¡¨ã€æ ‘ç­‰å¤æ‚æ•°æ®ç»“æ„çš„å®ç°åŸºç¡€ 2. æŒ‡é’ˆçš„å£°æ˜å’Œä½¿ç”¨\r2.1 æŒ‡é’ˆçš„å£°æ˜\r// æŒ‡é’ˆçš„å£°æ˜è¯­æ³•ï¼švar æŒ‡é’ˆå˜é‡å *æ•°æ®ç±»å‹ var ptr *int // å£°æ˜ä¸€ä¸ªæŒ‡å‘intç±»å‹çš„æŒ‡é’ˆ var ptr2 *string // å£°æ˜ä¸€ä¸ªæŒ‡å‘stringç±»å‹çš„æŒ‡é’ˆ var ptr3 *float64 // å£°æ˜ä¸€ä¸ªæŒ‡å‘float64ç±»å‹çš„æŒ‡é’ˆ 2.2 è·å–å˜é‡åœ°å€ï¼ˆ\u0026amp;æ“ä½œç¬¦ï¼‰\rpackage main import \u0026#34;fmt\u0026#34; func main() { // å£°æ˜æ™®é€šå˜é‡ var num int = 100 var name string = \u0026#34;å¼ ä¸‰\u0026#34; var score float64 = 95.5 // ä½¿ç”¨\u0026amp;æ“ä½œç¬¦è·å–å˜é‡çš„å†…å­˜åœ°å€ var ptrNum *int = \u0026amp;num var ptrName *string = \u0026amp;name var ptrScore *float64 = \u0026amp;score fmt.Printf(\u0026#34;å˜é‡numçš„å€¼ï¼š%dï¼Œåœ°å€ï¼š%p\\n\u0026#34;, num, \u0026amp;num) fmt.Printf(\u0026#34;å˜é‡nameçš„å€¼ï¼š%sï¼Œåœ°å€ï¼š%p\\n\u0026#34;, name, \u0026amp;name) fmt.Printf(\u0026#34;å˜é‡scoreçš„å€¼ï¼š%fï¼Œåœ°å€ï¼š%p\\n\u0026#34;, score, \u0026amp;score) fmt.Printf(\u0026#34;æŒ‡é’ˆptrNumå­˜å‚¨çš„åœ°å€ï¼š%pï¼ŒæŒ‡å‘çš„å€¼ï¼š%d\\n\u0026#34;, ptrNum, *ptrNum) fmt.Printf(\u0026#34;æŒ‡é’ˆptrNameå­˜å‚¨çš„åœ°å€ï¼š%pï¼ŒæŒ‡å‘çš„å€¼ï¼š%s\\n\u0026#34;, ptrName, *ptrName) fmt.Printf(\u0026#34;æŒ‡é’ˆptrScoreå­˜å‚¨çš„åœ°å€ï¼š%pï¼ŒæŒ‡å‘çš„å€¼ï¼š%f\\n\u0026#34;, ptrScore, *ptrScore) } è¿è¡Œç»“æœï¼š\nå˜é‡numçš„å€¼ï¼š100ï¼Œåœ°å€ï¼š0xc0000140a8 å˜é‡nameçš„å€¼ï¼šå¼ ä¸‰ï¼Œåœ°å€ï¼š0xc000010230 å˜é‡scoreçš„å€¼ï¼š95.500000ï¼Œåœ°å€ï¼š0xc0000140b8 æŒ‡é’ˆptrNumå­˜å‚¨çš„åœ°å€ï¼š0xc0000140a8ï¼ŒæŒ‡å‘çš„å€¼ï¼š100 æŒ‡é’ˆptrNameå­˜å‚¨çš„åœ°å€ï¼š0xc000010230ï¼ŒæŒ‡å‘çš„å€¼ï¼šå¼ ä¸‰ æŒ‡é’ˆptrScoreå­˜å‚¨çš„åœ°å€ï¼š0xc0000140b8ï¼ŒæŒ‡å‘çš„å€¼ï¼š95.500000 2.3 è®¿é—®æŒ‡é’ˆæŒ‡å‘çš„å€¼ï¼ˆ*æ“ä½œç¬¦ï¼‰\rpackage main import \u0026#34;fmt\u0026#34; func main() { var num int = 50 var ptr *int = \u0026amp;num // ptræŒ‡å‘numçš„åœ°å€ fmt.Printf(\u0026#34;numçš„å€¼ï¼š%d\\n\u0026#34;, num) fmt.Printf(\u0026#34;ptrå­˜å‚¨çš„åœ°å€ï¼š%p\\n\u0026#34;, ptr) fmt.Printf(\u0026#34;é€šè¿‡æŒ‡é’ˆè®¿é—®çš„å€¼ï¼š%d\\n\u0026#34;, *ptr) // *ptrè¡¨ç¤ºè·å–ptræŒ‡å‘åœ°å€å¤„çš„å€¼ // é€šè¿‡æŒ‡é’ˆä¿®æ”¹å€¼ *ptr = 100 fmt.Printf(\u0026#34;ä¿®æ”¹ånumçš„å€¼ï¼š%d\\n\u0026#34;, num) // numçš„å€¼ä¹Ÿè¢«ä¿®æ”¹äº† fmt.Printf(\u0026#34;é€šè¿‡æŒ‡é’ˆè®¿é—®ä¿®æ”¹åçš„å€¼ï¼š%d\\n\u0026#34;, *ptr) } è¿è¡Œç»“æœï¼š\nnumçš„å€¼ï¼š50 ptrå­˜å‚¨çš„åœ°å€ï¼š0xc0000140a8 é€šè¿‡æŒ‡é’ˆè®¿é—®çš„å€¼ï¼š50 ä¿®æ”¹ånumçš„å€¼ï¼š100 é€šè¿‡æŒ‡é’ˆè®¿é—®ä¿®æ”¹åçš„å€¼ï¼š100 3. æŒ‡é’ˆçš„é›¶å€¼å’Œnil\r3.1 æŒ‡é’ˆçš„é›¶å€¼\rpackage main import \u0026#34;fmt\u0026#34; func main() { // å£°æ˜æŒ‡é’ˆå˜é‡ä½†ä¸åˆå§‹åŒ– var ptr *int var ptr2 *string fmt.Printf(\u0026#34;æœªåˆå§‹åŒ–çš„intæŒ‡é’ˆï¼š%vï¼Œæ˜¯å¦ä¸ºnilï¼š%t\\n\u0026#34;, ptr, ptr == nil) fmt.Printf(\u0026#34;æœªåˆå§‹åŒ–çš„stringæŒ‡é’ˆï¼š%vï¼Œæ˜¯å¦ä¸ºnilï¼š%t\\n\u0026#34;, ptr2, ptr2 == nil) // å°è¯•è®¿é—®æœªåˆå§‹åŒ–æŒ‡é’ˆçš„å€¼ä¼šå¯¼è‡´panic // fmt.Println(*ptr) // è¿™è¡Œä»£ç ä¼šæŠ¥é”™ï¼ } è¿è¡Œç»“æœï¼š\næœªåˆå§‹åŒ–çš„intæŒ‡é’ˆï¼š\u0026lt;nil\u0026gt;ï¼Œæ˜¯å¦ä¸ºnilï¼štrue æœªåˆå§‹åŒ–çš„stringæŒ‡é’ˆï¼š\u0026lt;nil\u0026gt;ï¼Œæ˜¯å¦ä¸ºnilï¼štrue 3.2 nilæŒ‡é’ˆçš„å®‰å…¨æ£€æŸ¥\rpackage main import \u0026#34;fmt\u0026#34; func main() { var ptr *int // å®‰å…¨æ£€æŸ¥ if ptr != nil { fmt.Println(\u0026#34;æŒ‡é’ˆä¸ä¸ºnilï¼Œå¯ä»¥å®‰å…¨è®¿é—®\u0026#34;) fmt.Println(*ptr) } else { fmt.Println(\u0026#34;æŒ‡é’ˆä¸ºnilï¼Œä¸èƒ½è®¿é—®\u0026#34;) } // åˆå§‹åŒ–æŒ‡é’ˆå num := 42 ptr = \u0026amp;num if ptr != nil { fmt.Println(\u0026#34;æŒ‡é’ˆä¸ä¸ºnilï¼Œå¯ä»¥å®‰å…¨è®¿é—®\u0026#34;) fmt.Println(\u0026#34;æŒ‡é’ˆæŒ‡å‘çš„å€¼ï¼š\u0026#34;, *ptr) } } è¿è¡Œç»“æœï¼š\næŒ‡é’ˆä¸ºnilï¼Œä¸èƒ½è®¿é—® æŒ‡é’ˆä¸ä¸ºnilï¼Œå¯ä»¥å®‰å…¨è®¿é—® æŒ‡é’ˆæŒ‡å‘çš„å€¼ï¼š 42 4. æŒ‡é’ˆä¸å‡½æ•°\r4.1 æŒ‡é’ˆä½œä¸ºå‡½æ•°å‚æ•°\rpackage main import \u0026#34;fmt\u0026#34; // ä¼ å€¼æ–¹å¼ - ä¸ä¼šä¿®æ”¹åŸå§‹å€¼ func changeValueByValue(x int) { x = 100 fmt.Printf(\u0026#34;å‡½æ•°å†…xçš„å€¼ï¼š%d\\n\u0026#34;, x) } // ä¼ æŒ‡é’ˆæ–¹å¼ - å¯ä»¥ä¿®æ”¹åŸå§‹å€¼ func changeValueByPointer(ptr *int) { *ptr = 200 fmt.Printf(\u0026#34;å‡½æ•°å†…é€šè¿‡æŒ‡é’ˆä¿®æ”¹çš„å€¼ï¼š%d\\n\u0026#34;, *ptr) } func main() { num := 50 fmt.Printf(\u0026#34;è°ƒç”¨å‡½æ•°å‰numçš„å€¼ï¼š%d\\n\u0026#34;, num) // ä¼ å€¼è°ƒç”¨ changeValueByValue(num) fmt.Printf(\u0026#34;ä¼ å€¼è°ƒç”¨ånumçš„å€¼ï¼š%d\\n\u0026#34;, num) // ä¼ æŒ‡é’ˆè°ƒç”¨ changeValueByPointer(\u0026amp;num) fmt.Printf(\u0026#34;ä¼ æŒ‡é’ˆè°ƒç”¨ånumçš„å€¼ï¼š%d\\n\u0026#34;, num) } è¿è¡Œç»“æœï¼š\nè°ƒç”¨å‡½æ•°å‰numçš„å€¼ï¼š50 å‡½æ•°å†…xçš„å€¼ï¼š100 ä¼ å€¼è°ƒç”¨ånumçš„å€¼ï¼š50 å‡½æ•°å†…é€šè¿‡æŒ‡é’ˆä¿®æ”¹çš„å€¼ï¼š200 ä¼ æŒ‡é’ˆè°ƒç”¨ånumçš„å€¼ï¼š200 4.2 è¿”å›æŒ‡é’ˆçš„å‡½æ•°\rpackage main import \u0026#34;fmt\u0026#34; // è¿”å›æŒ‡å‘intçš„æŒ‡é’ˆ func createIntPointer(value int) *int { return \u0026amp;value } // è¿”å›æŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆ func createStudentPointer(name string, age int) *struct { Name string Age int } { student := struct { Name string Age int }{name, age} return \u0026amp;student } func main() { // è·å–æŒ‡é’ˆ ptr := createIntPointer(999) fmt.Printf(\u0026#34;æŒ‡é’ˆåœ°å€ï¼š%pï¼ŒæŒ‡å‘çš„å€¼ï¼š%d\\n\u0026#34;, ptr, *ptr) // ä¿®æ”¹é€šè¿‡æŒ‡é’ˆè®¿é—®çš„å€¼ *ptr = 888 fmt.Printf(\u0026#34;ä¿®æ”¹åçš„å€¼ï¼š%d\\n\u0026#34;, *ptr) // ç»“æ„ä½“æŒ‡é’ˆ studentPtr := createStudentPointer(\u0026#34;æå››\u0026#34;, 20) fmt.Printf(\u0026#34;å­¦ç”Ÿä¿¡æ¯ï¼š%sï¼Œ%då²\\n\u0026#34;, (*studentPtr).Name, (*studentPtr).Age) // Goè¯­è¨€æä¾›äº†ç®€åŒ–è¯­æ³• fmt.Printf(\u0026#34;å­¦ç”Ÿä¿¡æ¯ç®€åŒ–å†™æ³•ï¼š%sï¼Œ%då²\\n\u0026#34;, studentPtr.Name, studentPtr.Age) } è¿è¡Œç»“æœï¼š\næŒ‡é’ˆåœ°å€ï¼š0xc0000140a8ï¼ŒæŒ‡å‘çš„å€¼ï¼š999 ä¿®æ”¹åçš„å€¼ï¼š888 å­¦ç”Ÿä¿¡æ¯ï¼šæå››ï¼Œ20å² å­¦ç”Ÿä¿¡æ¯ç®€åŒ–å†™æ³•ï¼šæå››ï¼Œ20å² 5. æŒ‡é’ˆæ•°ç»„å’Œæ•°ç»„æŒ‡é’ˆ\r5.1 æŒ‡é’ˆæ•°ç»„\rpackage main import \u0026#34;fmt\u0026#34; func main() { // åˆ›å»ºå‡ ä¸ªå˜é‡ a, b, c := 1, 2, 3 // æŒ‡é’ˆæ•°ç»„ - æ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯æŒ‡é’ˆ ptrArray := [3]*int{\u0026amp;a, \u0026amp;b, \u0026amp;c} fmt.Println(\u0026#34;æŒ‡é’ˆæ•°ç»„çš„å†…å®¹ï¼š\u0026#34;) for i, ptr := range ptrArray { fmt.Printf(\u0026#34;ç´¢å¼•%dï¼šåœ°å€%pï¼Œå€¼%d\\n\u0026#34;, i, ptr, *ptr) } // é€šè¿‡æŒ‡é’ˆæ•°ç»„ä¿®æ”¹åŸå˜é‡ *ptrArray[0] = 10 *ptrArray[1] = 20 *ptrArray[2] = 30 fmt.Printf(\u0026#34;ä¿®æ”¹åï¼ša=%d, b=%d, c=%d\\n\u0026#34;, a, b, c) } è¿è¡Œç»“æœï¼š\næŒ‡é’ˆæ•°ç»„çš„å†…å®¹ï¼š ç´¢å¼•0ï¼šåœ°å€0xc0000140a8ï¼Œå€¼1 ç´¢å¼•1ï¼šåœ°å€0xc0000140b0ï¼Œå€¼2 ç´¢å¼•2ï¼šåœ°å€0xc0000140b8ï¼Œå€¼3 ä¿®æ”¹åï¼ša=10, b=20, c=30 5.2 æ•°ç»„æŒ‡é’ˆ\rpackage main import \u0026#34;fmt\u0026#34; func main() { // æ™®é€šæ•°ç»„ arr := [3]int{10, 20, 30} // æ•°ç»„æŒ‡é’ˆ - æŒ‡å‘æ•´ä¸ªæ•°ç»„çš„æŒ‡é’ˆ arrPtr := \u0026amp;arr fmt.Printf(\u0026#34;æ•°ç»„åœ°å€ï¼š%p\\n\u0026#34;, \u0026amp;arr) fmt.Printf(\u0026#34;æ•°ç»„æŒ‡é’ˆå­˜å‚¨çš„åœ°å€ï¼š%p\\n\u0026#34;, arrPtr) fmt.Printf(\u0026#34;é€šè¿‡æ•°ç»„æŒ‡é’ˆè®¿é—®å…ƒç´ ï¼š%d, %d, %d\\n\u0026#34;, (*arrPtr)[0], (*arrPtr)[1], (*arrPtr)[2]) // ä¿®æ”¹æ•°ç»„å…ƒç´  (*arrPtr)[0] = 100 (*arrPtr)[1] = 200 (*arrPtr)[2] = 300 fmt.Printf(\u0026#34;ä¿®æ”¹åæ•°ç»„ï¼š%v\\n\u0026#34;, arr) // Goè¯­è¨€çš„ç®€åŒ–å†™æ³• arrPtr[0] = 1000 // ç­‰ä»·äº (*arrPtr)[0] = 1000 fmt.Printf(\u0026#34;ç®€åŒ–å†™æ³•ä¿®æ”¹åï¼š%v\\n\u0026#34;, arr) } è¿è¡Œç»“æœï¼š\næ•°ç»„åœ°å€ï¼š0xc000016060 æ•°ç»„æŒ‡é’ˆå­˜å‚¨çš„åœ°å€ï¼š0xc000016060 é€šè¿‡æ•°ç»„æŒ‡é’ˆè®¿é—®å…ƒç´ ï¼š10, 20, 30 ä¿®æ”¹åæ•°ç»„ï¼š[100 200 300] ç®€åŒ–å†™æ³•ä¿®æ”¹åï¼š[1000 200 300] 6. æŒ‡é’ˆçš„æŒ‡é’ˆï¼ˆå¤šçº§æŒ‡é’ˆï¼‰\rpackage main import \u0026#34;fmt\u0026#34; func main() { num := 42 // ä¸€çº§æŒ‡é’ˆ ptr1 := \u0026amp;num fmt.Printf(\u0026#34;numå€¼ï¼š%dï¼Œåœ°å€ï¼š%p\\n\u0026#34;, num, \u0026amp;num) fmt.Printf(\u0026#34;ä¸€çº§æŒ‡é’ˆptr1ï¼š%pï¼ŒæŒ‡å‘çš„å€¼ï¼š%d\\n\u0026#34;, ptr1, *ptr1) // äºŒçº§æŒ‡é’ˆï¼ˆæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¼‰ ptr2 := \u0026amp;ptr1 fmt.Printf(\u0026#34;äºŒçº§æŒ‡é’ˆptr2ï¼š%pï¼ŒæŒ‡å‘çš„åœ°å€ï¼š%pï¼Œæœ€ç»ˆå€¼ï¼š%d\\n\u0026#34;, ptr2, *ptr2, **ptr2) // ä¸‰çº§æŒ‡é’ˆ ptr3 := \u0026amp;ptr2 fmt.Printf(\u0026#34;ä¸‰çº§æŒ‡é’ˆptr3ï¼š%pï¼Œæœ€ç»ˆå€¼ï¼š%d\\n\u0026#34;, ptr3, ***ptr3) // é€šè¿‡å¤šçº§æŒ‡é’ˆä¿®æ”¹å€¼ ***ptr3 = 999 fmt.Printf(\u0026#34;é€šè¿‡ä¸‰çº§æŒ‡é’ˆä¿®æ”¹ånumçš„å€¼ï¼š%d\\n\u0026#34;, num) } è¿è¡Œç»“æœï¼š\nnumå€¼ï¼š42ï¼Œåœ°å€ï¼š0xc0000140a8 ä¸€çº§æŒ‡é’ˆptr1ï¼š0xc0000140a8ï¼ŒæŒ‡å‘çš„å€¼ï¼š42 äºŒçº§æŒ‡é’ˆptr2ï¼š0xc000006028ï¼ŒæŒ‡å‘çš„åœ°å€ï¼š0xc0000140a8ï¼Œæœ€ç»ˆå€¼ï¼š42 ä¸‰çº§æŒ‡é’ˆptr3ï¼š0xc000006038ï¼Œæœ€ç»ˆå€¼ï¼š42 é€šè¿‡ä¸‰çº§æŒ‡é’ˆä¿®æ”¹ånumçš„å€¼ï¼š999 7. æŒ‡é’ˆçš„å®é™…åº”ç”¨ç¤ºä¾‹\r7.1 äº¤æ¢ä¸¤ä¸ªæ•°çš„å€¼\rpackage main import \u0026#34;fmt\u0026#34; // ä½¿ç”¨æŒ‡é’ˆäº¤æ¢ä¸¤ä¸ªæ•° func swap(a, b *int) { temp := *a *a = *b *b = temp } func main() { x, y := 10, 20 fmt.Printf(\u0026#34;äº¤æ¢å‰ï¼šx=%d, y=%d\\n\u0026#34;, x, y) swap(\u0026amp;x, \u0026amp;y) fmt.Printf(\u0026#34;äº¤æ¢åï¼šx=%d, y=%d\\n\u0026#34;, x, y) } è¿è¡Œç»“æœï¼š\näº¤æ¢å‰ï¼šx=10, y=20 äº¤æ¢åï¼šx=20, y=10 7.2 é“¾è¡¨èŠ‚ç‚¹ç¤ºä¾‹\rpackage main import \u0026#34;fmt\u0026#34; // å®šä¹‰é“¾è¡¨èŠ‚ç‚¹ç»“æ„ type ListNode struct { Value int Next *ListNode } // åˆ›å»ºæ–°èŠ‚ç‚¹ func NewNode(value int) *ListNode { return \u0026amp;ListNode{Value: value, Next: nil} } // åœ¨é“¾è¡¨æœ«å°¾æ·»åŠ èŠ‚ç‚¹ func AppendNode(head **ListNode, value int) { newNode := NewNode(value) if *head == nil { *head = newNode return } current := *head for current.Next != nil { current = current.Next } current.Next = newNode } // æ‰“å°é“¾è¡¨ func PrintList(head *ListNode) { current := head for current != nil { fmt.Printf(\u0026#34;%d -\u0026gt; \u0026#34;, current.Value) current = current.Next } fmt.Println(\u0026#34;nil\u0026#34;) } func main() { var head *ListNode = nil // æ·»åŠ èŠ‚ç‚¹ AppendNode(\u0026amp;head, 1) AppendNode(\u0026amp;head, 2) AppendNode(\u0026amp;head, 3) AppendNode(\u0026amp;head, 4) fmt.Println(\u0026#34;é“¾è¡¨å†…å®¹ï¼š\u0026#34;) PrintList(head) } è¿è¡Œç»“æœï¼š\né“¾è¡¨å†…å®¹ï¼š 1 -\u0026gt; 2 -\u0026gt; 3 -\u0026gt; 4 -\u0026gt; nil 8. æŒ‡é’ˆæ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ\r8.1 æ³¨æ„äº‹é¡¹\rç©ºæŒ‡é’ˆè®¿é—®å±é™©ï¼šè®¿é—®nilæŒ‡é’ˆä¼šå¯¼è‡´ç¨‹åºå´©æºƒ é‡æŒ‡é’ˆé—®é¢˜ï¼šæŒ‡å‘å·²é‡Šæ”¾å†…å­˜çš„æŒ‡é’ˆ å†…å­˜æ³„æ¼ï¼šå¿˜è®°é‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜ 8.2 æœ€ä½³å®è·µ\rpackage main import \u0026#34;fmt\u0026#34; func main() { // 1. å§‹ç»ˆæ£€æŸ¥æŒ‡é’ˆæ˜¯å¦ä¸ºnil var ptr *int if ptr != nil { fmt.Println(*ptr) // å®‰å…¨è®¿é—® } // 2. åˆå§‹åŒ–æŒ‡é’ˆ num := 100 ptr = \u0026amp;num fmt.Printf(\u0026#34;å®‰å…¨è®¿é—®ï¼š%d\\n\u0026#34;, *ptr) // 3. ä½¿ç”¨æŒ‡é’ˆæ—¶è¦è€ƒè™‘ç”Ÿå‘½å‘¨æœŸ data := make([]int, 5) ptrToSlice := \u0026amp;data fmt.Printf(\u0026#34;åˆ‡ç‰‡æŒ‡é’ˆï¼š%v\\n\u0026#34;, *ptrToSlice) // 4. å‡½æ•°è¿”å›æŒ‡é’ˆæ—¶è¦æ³¨æ„ func returnPointer() *int { value := 42 // å±€éƒ¨å˜é‡ return \u0026amp;value // å±é™©ï¼è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€ } // æ­£ç¡®çš„åšæ³• func returnPointerSafe() *int { value := new(int) // åœ¨å †ä¸Šåˆ†é…å†…å­˜ *value = 42 return value } } 9. newå‡½æ•°å’Œmakeå‡½æ•°çš„åŒºåˆ«\r9.1 newå‡½æ•°\rpackage main import \u0026#34;fmt\u0026#34; func main() { // newå‡½æ•°ä¸ºæŒ‡å®šç±»å‹åˆ†é…é›¶å€¼å†…å­˜å¹¶è¿”å›æŒ‡é’ˆ ptr1 := new(int) // *intç±»å‹ï¼Œå€¼ä¸º0 ptr2 := new(string) // *stringç±»å‹ï¼Œå€¼ä¸º\u0026#34;\u0026#34; ptr3 := new([3]int) // *[3]intç±»å‹ï¼Œå€¼ä¸º[0,0,0] fmt.Printf(\u0026#34;intæŒ‡é’ˆï¼š%pï¼Œå€¼ï¼š%d\\n\u0026#34;, ptr1, *ptr1) fmt.Printf(\u0026#34;stringæŒ‡é’ˆï¼š%pï¼Œå€¼ï¼š%s\\n\u0026#34;, ptr2, *ptr2) fmt.Printf(\u0026#34;æ•°ç»„æŒ‡é’ˆï¼š%pï¼Œå€¼ï¼š%v\\n\u0026#34;, ptr3, *ptr3) // ä¿®æ”¹å€¼ *ptr1 = 100 *ptr2 = \u0026#34;Hello\u0026#34; (*ptr3)[0] = 1 (*ptr3)[1] = 2 (*ptr3)[2] = 3 fmt.Printf(\u0026#34;ä¿®æ”¹åintå€¼ï¼š%d\\n\u0026#34;, *ptr1) fmt.Printf(\u0026#34;ä¿®æ”¹åstringå€¼ï¼š%s\\n\u0026#34;, *ptr2) fmt.Printf(\u0026#34;ä¿®æ”¹åæ•°ç»„å€¼ï¼š%v\\n\u0026#34;, *ptr3) } è¿è¡Œç»“æœï¼š\nintæŒ‡é’ˆï¼š0xc0000140a8ï¼Œå€¼ï¼š0 stringæŒ‡é’ˆï¼š0xc000010230ï¼Œå€¼ï¼š æ•°ç»„æŒ‡é’ˆï¼š0xc000016060ï¼Œå€¼ï¼š[0 0 0] ä¿®æ”¹åintå€¼ï¼š100 ä¿®æ”¹åstringå€¼ï¼šHello ä¿®æ”¹åæ•°ç»„å€¼ï¼š[1 2 3] 9.2 makeå‡½æ•°\rpackage main import \u0026#34;fmt\u0026#34; func main() { // makeå‡½æ•°ç”¨äºåˆ›å»ºåˆ‡ç‰‡ã€mapã€channel slice := make([]int, 5) // åˆ›å»ºé•¿åº¦ä¸º5çš„åˆ‡ç‰‡ mapData := make(map[string]int) // åˆ›å»ºmap ch := make(chan int) // åˆ›å»ºchannel fmt.Printf(\u0026#34;åˆ‡ç‰‡ï¼š%vï¼Œé•¿åº¦ï¼š%d\\n\u0026#34;, slice, len(slice)) fmt.Printf(\u0026#34;mapï¼š%v\\n\u0026#34;, mapData) fmt.Printf(\u0026#34;channelï¼š%v\\n\u0026#34;, ch) // åˆå§‹åŒ–æ•°æ® slice[0] = 10 slice[1] = 20 mapData[\u0026#34;one\u0026#34;] = 1 mapData[\u0026#34;two\u0026#34;] = 2 fmt.Printf(\u0026#34;åˆå§‹åŒ–ååˆ‡ç‰‡ï¼š%v\\n\u0026#34;, slice) fmt.Printf(\u0026#34;åˆå§‹åŒ–åmapï¼š%v\\n\u0026#34;, mapData) } 10. æ€»ç»“\ræŒ‡é’ˆæ˜¯Golangä¸­ä¸€ä¸ªå¼ºå¤§ä½†éœ€è¦è°¨æ…ä½¿ç”¨çš„ç‰¹æ€§ï¼š\næ ¸å¿ƒæ¦‚å¿µï¼š\næŒ‡é’ˆå­˜å‚¨çš„æ˜¯å†…å­˜åœ°å€ï¼Œè€Œä¸æ˜¯å…·ä½“çš„å€¼ ä½¿ç”¨\u0026amp;è·å–å˜é‡åœ°å€ï¼Œä½¿ç”¨*è®¿é—®æŒ‡é’ˆæŒ‡å‘çš„å€¼ æŒ‡é’ˆçš„é›¶å€¼æ˜¯nil ä¸»è¦ç”¨é€”ï¼š\nå‡½æ•°é—´å…±äº«å’Œä¿®æ”¹æ•°æ® é¿å…å¤§æ•°æ®ç»“æ„çš„æ‹·è´å¼€é”€ å®ç°å¤æ‚æ•°æ®ç»“æ„ï¼ˆé“¾è¡¨ã€æ ‘ç­‰ï¼‰ åŠ¨æ€å†…å­˜ç®¡ç† æ³¨æ„äº‹é¡¹ï¼š\nå§‹ç»ˆæ£€æŸ¥æŒ‡é’ˆæ˜¯å¦ä¸ºnil æ³¨æ„å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ é¿å…æ‚¬ç©ºæŒ‡é’ˆå’Œå†…å­˜æ³„æ¼ æŒæ¡æŒ‡é’ˆå¯¹äºæ·±å…¥ç†è§£Golangå’Œç¼–å†™é«˜æ•ˆçš„ç¨‹åºéå¸¸é‡è¦ï¼Œè™½ç„¶åˆå­¦æ—¶å¯èƒ½ä¼šè§‰å¾—å¤æ‚ï¼Œä½†é€šè¿‡å¤§é‡ç»ƒä¹ å°±èƒ½ç†Ÿç»ƒè¿ç”¨ã€‚\n","date":"2026-02-04T16:15:16+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-08/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬å…«ç¯‡ æŒ‡é’ˆ(pointer)ã€‘"},{"content":"å¤šç§Ÿæˆ·æ¶æ„å…¥é—¨æŒ‡å—ï¼šå°ç™½å¦‚ä½•å¿«é€Ÿææ‡‚ SaaS ç³»ç»Ÿçš„å…±äº«æœºåˆ¶\rå¤šç§Ÿæˆ·ï¼ˆMulti-Tenancyï¼‰æ˜¯ç°ä»£ SaaS ç³»ç»Ÿä¸­æœ€å¸¸è§ä¸”æœ€é‡è¦çš„æ¶æ„æ¨¡å¼ä¹‹ä¸€ã€‚è®¸å¤šåˆå­¦è€…åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä¼šæ„Ÿåˆ°æ¦‚å¿µæŠ½è±¡ã€å®ç°æ–¹å¼éš¾ä»¥æŠŠæ¡ã€‚æœ¬æ–‡ä»é›¶åŸºç¡€è§†è§’å‡ºå‘ï¼Œä»¥æ¸…æ™°çš„ç»“æ„ã€é€šä¿—çš„è¯­è¨€å’Œç®€æ˜è¯´æ˜ï¼Œå¸®åŠ©è¯»è€…å¿«é€Ÿå»ºç«‹å¯¹å¤šç§Ÿæˆ·çš„æ•´ä½“è®¤çŸ¥ã€‚\n1. ä»€ä¹ˆæ˜¯å¤šç§Ÿæˆ·ï¼Ÿå®ƒåˆ°åº•æ˜¯æ¶æ„è¿˜æ˜¯æ€ç»´æ–¹å¼ï¼Ÿ\rå®˜æ–¹å®šä¹‰\nå¤šç§Ÿæˆ·æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„æ¨¡å¼ï¼ŒæŒ‡å•ä¸€çš„è½¯ä»¶å®ä¾‹ï¼ˆæˆ–åŸºç¡€è®¾æ–½ï¼‰èƒ½å¤ŸåŒæ—¶ä¸ºå¤šä¸ªç‹¬ç«‹çš„ç§Ÿæˆ·ï¼ˆTenantï¼Œé€šå¸¸æŒ‡ä¸åŒçš„å®¢æˆ·ã€ä¼ä¸šã€ç»„ç»‡ï¼‰æä¾›æœåŠ¡ï¼ŒåŒæ—¶é€šè¿‡æŠ€æœ¯æ‰‹æ®µä¿è¯æ•°æ®éš”ç¦»ã€å®‰å…¨æ€§ã€éšç§åˆè§„ä»¥åŠèµ„æºçš„é«˜æ•ˆåˆ©ç”¨ã€‚\né€šä¿—ç†è§£\nå¯ä»¥å°†å¤šç§Ÿæˆ·æƒ³è±¡ä¸ºä¸€æ ‹å¤§å‹å…±äº«å…¬å¯“å¤§æ¥¼ï¼š\nå¤§æ¥¼çš„åŸºç¡€è®¾æ–½ï¼ˆç”µæ¢¯ã€æ°´ç”µã€å¤§å ‚ã€æ¶ˆé˜²ç³»ç»Ÿï¼‰ç”±æ‰€æœ‰ä½æˆ·å…±åŒä½¿ç”¨ ä½†æ¯ä½ä½æˆ·æ‹¥æœ‰ç‹¬ç«‹çš„æˆ¿é—´ï¼Œæˆ¿é—¨ä¸Šé”ï¼Œå†…éƒ¨ç‰©å“ä¸ä»–äººå®Œå…¨éš”ç¦» è¿™ç§æ–¹å¼æ— éœ€ä¸ºæ¯æˆ·å•ç‹¬å»ºé€ ä¸€æ ‹åˆ«å¢…ï¼Œå°±èƒ½è®©å¤šå®¶ä½æˆ·å…±åŒå±…ä½ï¼Œæ—¢èŠ‚çº¦æˆæœ¬åˆä¾¿äºç®¡ç† å¤šç§Ÿæˆ·æ­£æ˜¯åŸºäºåŒæ ·çš„æ€è·¯ï¼šä¸€å¥—è½¯ä»¶ç³»ç»ŸåŒæ—¶æœåŠ¡å¤šå®¶å…¬å¸ï¼Œä½†æ¯å®¶å…¬å¸çš„æ•°æ®ä¸æ“ä½œåœ¨é€»è¾‘ä¸Šå®Œå…¨éš”ç¦»ï¼Œäº’ä¸å¹²æ‰°ã€‚\nå®ƒä¸æ˜¯ä¸€ç§æŠ½è±¡çš„æ€ç»´æ–¹å¼ï¼Œè€Œæ˜¯ä¸€ç§å…·ä½“çš„ã€å¯è½åœ°çš„ç³»ç»Ÿè®¾è®¡æ–¹æ¡ˆã€‚\ngraph TD\rA[å…±äº«åŸºç¡€è®¾æ–½\u0026lt;br\u0026gt;æœåŠ¡å™¨ / ä»£ç  / åŸºç¡€æœåŠ¡] --\u0026gt; B[ç§Ÿæˆ· A\u0026lt;br\u0026gt;ç‹¬ç«‹æ•°æ®ä¸ä¸Šä¸‹æ–‡]\rA --\u0026gt; C[ç§Ÿæˆ· B\u0026lt;br\u0026gt;ç‹¬ç«‹æ•°æ®ä¸ä¸Šä¸‹æ–‡]\rA --\u0026gt; D[ç§Ÿæˆ· C\u0026lt;br\u0026gt;ç‹¬ç«‹æ•°æ®ä¸ä¸Šä¸‹æ–‡]\rclassDef shared fill:#e6f3ff,stroke:#0066cc,stroke-width:2px\rclassDef tenant fill:#fff3e6,stroke:#cc6600,stroke-width:2px\rclass A shared\rclass B,C,D tenant\r2. å¤šç§Ÿæˆ·åœ¨å®é™…é¡¹ç›®ä¸­æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ\rå¤šç§Ÿæˆ·å®ç°çš„æ ¸å¿ƒåœ¨äºéš”ç¦»ï¼Œå…¶ä¸­æœ€å…³é”®çš„éƒ¨åˆ†é€šå¸¸æ˜¯æ•°æ®åº“éš”ç¦»ï¼Œå…¶æ¬¡æ˜¯åº”ç”¨å±‚ä¸Šä¸‹æ–‡ç®¡ç†ä¸åŸºç¡€è®¾æ–½éš”ç¦»ã€‚\næ•°æ®åº“éš”ç¦»çš„ä¸‰ç§ä¸»æµæ¨¡å¼\rç‰¹ç‚¹å¯¹æ¯”è¡¨\næ–¹å¼ éš”ç¦»å¼ºåº¦ èµ„æºæˆæœ¬ ç®¡ç†å¤æ‚åº¦ å…¸å‹é€‚ç”¨åœºæ™¯ ç‹¬ç«‹æ•°æ®åº“ï¼ˆæ¯ç§Ÿæˆ·ä¸€ä¸ªåº“ï¼‰ â˜…â˜…â˜…â˜…â˜… é«˜ é«˜ é«˜åˆè§„è¦æ±‚ã€é‡‘èã€åŒ»ç–—ã€å¤§å®¢æˆ· å…±äº«æ•°æ®åº“ + ç‹¬ç«‹ Schema â˜…â˜…â˜…â˜…â˜† ä¸­ ä¸­ ä¸­å¤§å‹ SaaSï¼Œå‡ ç™¾è‡³æ•°åƒç§Ÿæˆ· å…±äº«æ•°æ®åº“ + å…±äº« Schema + è¡Œçº§éš”ç¦» â˜…â˜…â˜…â˜†â˜† ä½ ä½ å¤§è§„æ¨¡æ¶ˆè´¹çº§ SaaSï¼Œä¸‡çº§ä»¥ä¸Šç§Ÿæˆ· é€šä¿—æ¯”å–»\nç‹¬ç«‹æ•°æ®åº“ â†’ æ¯å®¶å…¬å¸ç§Ÿä¸€æ•´å±‚æ¥¼ ç‹¬ç«‹ Schema â†’ æ¯å®¶å…¬å¸ç§ŸåŒä¸€å±‚æ¥¼ä¸­çš„ç‹¬ç«‹å¥—æˆ¿ è¡Œçº§éš”ç¦» â†’ å¤§å®¶å…±ç”¨ä¸€ä¸ªå¤§ç©ºé—´ï¼Œä½†æ¯å¼ åºŠä½è´´æœ‰æ˜ç¡®æ ‡è¯†å¹¶æœ‰ä¸¥æ ¼ç®¡æ§ graph LR\rA[æ•°æ®åº“éš”ç¦»æ–¹å¼] --\u0026gt; B[ç‹¬ç«‹æ•°æ®åº“\u0026lt;br\u0026gt;æ¯ç§Ÿæˆ·ä¸€ä¸ªç‰©ç†åº“]\rA --\u0026gt; C[å…±äº«æ•°æ®åº“ + ç‹¬ç«‹ Schema\u0026lt;br\u0026gt;é€»è¾‘å‘½åç©ºé—´éš”ç¦»]\rA --\u0026gt; D[å…±äº«æ•°æ®åº“ + å…±äº« Schema\u0026lt;br\u0026gt;è¡Œçº§éš”ç¦» tenant_id]\rB --\u0026gt;|éš”ç¦»æœ€å¼º| E[æœ€é«˜åˆè§„éœ€æ±‚\u0026lt;br\u0026gt;é‡‘è/åŒ»ç–—/å¤§å®¢æˆ·]\rC --\u0026gt;|å¹³è¡¡æ–¹æ¡ˆ| F[ä¸­å¤§å‹ SaaS\u0026lt;br\u0026gt;æ•°ç™¾~æ•°åƒç§Ÿæˆ·]\rD --\u0026gt;|æˆæœ¬æœ€ä½| G[å¤§è§„æ¨¡æ¶ˆè´¹çº§ SaaS\u0026lt;br\u0026gt;ä¸‡çº§ä»¥ä¸Šç§Ÿæˆ·]\rclassDef high fill:#ffcccc,stroke:#990000\rclassDef medium fill:#ffffcc,stroke:#996600\rclassDef low fill:#ccffcc,stroke:#006600\rclass B high\rclass C medium\rclass D low\r3. å¤šç§Ÿæˆ·ä¸è§’è‰²æƒé™ï¼ˆRBACï¼‰æœ‰ä½•åŒºåˆ«ï¼Ÿ\rå¤šç§Ÿæˆ·å’Œè§’è‰²æƒé™ï¼ˆRBACï¼‰æ˜¯ä¸¤ä¸ªä¸åŒå±‚é¢çš„æ¦‚å¿µï¼Œç»å¸¸è¢«æ··æ·†ã€‚\næ ¸å¿ƒåŒºåˆ«å¯¹æ¯”\nç»´åº¦ å¤šç§Ÿæˆ· è§’è‰²æƒé™ï¼ˆRBACï¼‰ è§£å†³çš„é—®é¢˜ å¤šå®¶å…¬å¸å…±ç”¨ä¸€å¥—ç³»ç»Ÿï¼Œæ•°æ®éœ€éš”ç¦» åŒä¸€å®¶å…¬å¸å†…éƒ¨ï¼Œä¸åŒäººæƒé™ä¸åŒ éš”ç¦»çš„å¯¹è±¡ å…¬å¸ vs å…¬å¸ äºº vs äººï¼ˆåŒä¸€å…¬å¸å†…ï¼‰ æ‰€å±å±‚çº§ æ¶æ„å±‚ã€ç³»ç»Ÿè¾¹ç•Œ æƒé™æ¨¡å—ã€åŠŸèƒ½å±‚ é…ç½®ä¸»ä½“ é€šå¸¸ç”±å¹³å°æ–¹ï¼ˆSaaS å‚å•†ï¼‰è´Ÿè´£ é€šå¸¸ç”±å®¢æˆ·ï¼ˆç§Ÿæˆ·ç®¡ç†å‘˜ï¼‰è‡ªè¡Œé…ç½® ä¸€å¥è¯æ€»ç»“\nå¤šç§Ÿæˆ·å†³å®šâ€œå‡ å®¶å…¬å¸åˆç§Ÿä¸€æ ‹å¤§æ¥¼â€ï¼Œè§’è‰²æƒé™å†³å®šâ€œä¸€å®¶å…¬å¸å†…éƒ¨è°æŒæœ‰å“ªæŠŠé’¥åŒ™â€ã€‚\ngraph TD\rA[æ•´ä¸ªç³»ç»Ÿ] --\u0026gt; B[å¤šç§Ÿæˆ·å±‚\u0026lt;br\u0026gt;å…¬å¸ / ç»„ç»‡è¾¹ç•Œéš”ç¦»]\rB --\u0026gt; C[ç§Ÿæˆ·å†…éƒ¨\u0026lt;br\u0026gt;RBAC æƒé™æ§åˆ¶]\rsubgraph ç§Ÿæˆ·è¾¹ç•Œ\rC --\u0026gt; D[è§’è‰²ï¼šç®¡ç†å‘˜]\rC --\u0026gt; E[è§’è‰²ï¼šæ™®é€šå‘˜å·¥]\rC --\u0026gt; F[è§’è‰²ï¼šè´¢åŠ¡äººå‘˜]\rend\rclassDef boundary fill:#f0f8ff,stroke:#4682b4,stroke-width:2px\rclassDef rbac fill:#fffacd,stroke:#dAA520,stroke-width:2px\rclass B boundary\rclass C,D,E,F rbac\r4. å®¢æˆ·ä¸ªæ€§åŒ–éœ€æ±‚ä¼šè®©å¤šç§Ÿæˆ·å˜å¾—éå¸¸å¤æ‚å—ï¼Ÿ\rä¸ªæ€§åŒ–éœ€æ±‚ç¡®å®æ˜¯å¤šç§Ÿæˆ·è½åœ°ä¸­æœ€å¸¸è§çš„æŒ‘æˆ˜ä¹‹ä¸€ã€‚\nå®šåˆ¶åŒ–å¤æ‚åº¦å±‚çº§ï¼ˆç”±ä½åˆ°é«˜ï¼‰\nå¤–è§‚ä¸å“ç‰Œï¼ˆLogoã€ä¸»é¢˜è‰²ã€æ–‡æ¡ˆã€ç™»å½•é¡µï¼‰ å­—æ®µä¸è¡¨å•ï¼ˆå¢åˆ å­—æ®µã€æ˜¾éšè§„åˆ™ã€æ ¡éªŒè§„åˆ™ï¼‰ æµç¨‹ä¸è§„åˆ™ï¼ˆå®¡æ‰¹æµã€çŠ¶æ€æœºã€è®¡ç®—å…¬å¼ï¼‰ ä¸šåŠ¡é€»è¾‘åˆ†å‰ï¼ˆç­–ç•¥æ¨¡å¼ã€Hookã€æ’ä»¶ï¼‰ å…¨æ–°æ¨¡å—æˆ–å®Œå…¨ä¸åŒçš„ä¸šåŠ¡æ¨¡å‹ï¼ˆå¾®æœåŠ¡ã€ç‹¬ç«‹éƒ¨ç½²ï¼‰ å¤„ç†åŸåˆ™\nä¼˜å…ˆä½¿ç”¨é…ç½®è§£å†³ æ¬¡ä¹‹ä½¿ç”¨è§„åˆ™å¼•æ“æˆ–å¯ç¼–è¾‘è§„åˆ™ å°½é‡é¿å…ç¡¬ç¼–ç ï¼Œæ”¹ä¸ºç­–ç•¥æ¨¡å¼æˆ–æ’ä»¶æœºåˆ¶ æå°‘æ•°æç«¯å®šåˆ¶åœºæ™¯å¯é‡‡ç”¨æ··åˆéƒ¨ç½²æˆ–ç‹¬ç«‹éƒ¨ç½² 5. ç»“è¯­ä¸å­¦ä¹ å»ºè®®\rå¤šç§Ÿæˆ·çš„æ ¸å¿ƒä»·å€¼å¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼šä»¥æœ€å°‘çš„èµ„æºæŠ•å…¥ï¼Œå®‰å…¨ã€é«˜æ•ˆåœ°æœåŠ¡å°½å¯èƒ½å¤šçš„ç‹¬ç«‹å®¢æˆ·ã€‚\n","date":"2026-02-04T08:35:21+08:00","permalink":"https://zg-dd.github.io/stu/multi-tenancy-guide/","title":"å¤šç§Ÿæˆ·æ¶æ„å…¥é—¨æŒ‡å—ï¼šå°ç™½å¦‚ä½•å¿«é€Ÿææ‡‚ SaaS ç³»ç»Ÿçš„å…±äº«æœºåˆ¶"},{"content":"æ¦‚è¿°\rDelveï¼ˆç®€ç§° dlvï¼‰æ˜¯ Go è¯­è¨€çš„å®˜æ–¹è°ƒè¯•å™¨ï¼Œä¸“é—¨ä¸º Go çš„å¹¶å‘æ¨¡å‹å’Œè¿è¡Œæ—¶ç‰¹æ€§è®¾è®¡ã€‚å®ƒæ˜¯ç›®å‰ Go ç”Ÿæ€ä¸­æœ€ä¸»æµã€åŠŸèƒ½æœ€å¼ºå¤§çš„è°ƒè¯•å·¥å…·ã€‚\nå®‰è£…\ræ¨èå®‰è£…æ–¹å¼\rä½¿ç”¨ Go Module æ¨¡å¼å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼š\ngo install github.com/go-delve/delve/cmd/dlv@latest éªŒè¯å®‰è£…\rå®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š\ndlv version å¦‚æœ $GOPATH/bin ä¸åœ¨ä½ çš„ PATH ç¯å¢ƒå˜é‡ä¸­ï¼Œéœ€è¦å°†å…¶åŠ å…¥ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨å®Œæ•´è·¯å¾„ï¼š\n~/go/bin/dlv version æ ¸å¿ƒåŠŸèƒ½\rDelve æä¾›ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š\nè®¾ç½®æ–­ç‚¹ï¼šåœ¨ç‰¹å®šè¡Œã€å‡½æ•°åå¤„æš‚åœç¨‹åºæ‰§è¡Œ å•æ­¥æ‰§è¡Œï¼šé€è¡Œæˆ–è¿›å…¥å‡½æ•°å†…éƒ¨æ‰§è¡Œä»£ç  å˜é‡æŸ¥çœ‹ï¼šæ‰“å°å˜é‡å€¼ã€æ£€æŸ¥å¤æ‚æ•°æ®ç»“æ„ Goroutine ç®¡ç†ï¼šæŸ¥çœ‹æ‰€æœ‰ Goroutineï¼Œåœ¨ç‰¹å®š Goroutine ä¸Šä¸‹æ–‡ä¸­è°ƒè¯• è¿è¡Œæ—¶ä¿®æ”¹å˜é‡ï¼šåŠ¨æ€æ”¹å˜å˜é‡å€¼è¿›è¡Œæµ‹è¯• è°ƒç”¨æ ˆæŸ¥çœ‹ï¼šäº†è§£ç¨‹åºæ‰§è¡Œè·¯å¾„ åŸºæœ¬ç”¨æ³•\rç¤ºä¾‹ä»£ç \råˆ›å»ºæµ‹è¯•æ–‡ä»¶ main.goï¼š\npackage main import \u0026#34;fmt\u0026#34; func main() { message := \u0026#34;Hello, Delve!\u0026#34; fmt.Println(message) result := add(23, 19) fmt.Printf(\u0026#34;Result: %d\\n\u0026#34;, result) } func add(a, b int) int { sum := a + b return sum } å¯åŠ¨è°ƒè¯•ä¼šè¯\ræ¨¡å¼1ï¼šç›´æ¥è°ƒè¯•æºä»£ç \rdlv debug main.go æ¨¡å¼2ï¼šè°ƒè¯•å·²ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶\rgo build -o myapp main.go dlv exec ./myapp æ¨¡å¼3ï¼šé™„åŠ åˆ°è¿è¡Œä¸­çš„è¿›ç¨‹\r# ç¼–è¯‘å¹¶å¯åŠ¨ç¨‹åº go build -gcflags=\u0026#34;all=-N -l\u0026#34; -o myapp main.go ./myapp \u0026amp; # è·å–è¿›ç¨‹IDå¹¶é™„åŠ  PID=$! dlv attach $PID å¸¸ç”¨è°ƒè¯•å‘½ä»¤\ræ–­ç‚¹ç®¡ç†\rå‘½ä»¤ ç¼©å†™ åŠŸèƒ½ break main.main b main.main åœ¨ main å‡½æ•°è®¾æ–­ç‚¹ break main.go:10 b main.go:10 åœ¨ç¬¬10è¡Œè®¾æ–­ç‚¹ breakpoints bp åˆ—å‡ºæ‰€æœ‰æ–­ç‚¹ clear 1 - åˆ é™¤IDä¸º1çš„æ–­ç‚¹ clearall - åˆ é™¤æ‰€æœ‰æ–­ç‚¹ ç¨‹åºæ‰§è¡Œæ§åˆ¶\rå‘½ä»¤ ç¼©å†™ åŠŸèƒ½ continue c ç»§ç»­æ‰§è¡Œç›´åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ next n æ‰§è¡Œå½“å‰è¡Œï¼Œä¸è¿›å…¥å‡½æ•° step s æ‰§è¡Œå½“å‰è¡Œï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ stepout so æ‰§è¡Œå®Œå½“å‰å‡½æ•°ï¼Œè¿”å›è°ƒç”¨è€… restart r é‡æ–°è¿è¡Œç¨‹åº å˜é‡å’Œè¡¨è¾¾å¼æŸ¥çœ‹\rå‘½ä»¤ ç¼©å†™ åŠŸèƒ½ print message p message æ‰“å°å˜é‡å€¼ locals - æ‰“å°å½“å‰å‡½æ•°æ‰€æœ‰å±€éƒ¨å˜é‡ args - æ‰“å°å½“å‰å‡½æ•°å‚æ•° å…¶ä»–å®ç”¨å‘½ä»¤\rå‘½ä»¤ ç¼©å†™ åŠŸèƒ½ stack bt æ‰“å°è°ƒç”¨æ ˆ goroutines - åˆ—å‡ºæ‰€æœ‰ Goroutine goroutine 1 g 1 åˆ‡æ¢åˆ°æŒ‡å®š Goroutine exit q é€€å‡ºè°ƒè¯•å™¨ å®Œæ•´è°ƒè¯•ä¼šè¯ç¤ºä¾‹\r$ dlv debug main.go Type \u0026#39;help\u0026#39; for list of commands. # è®¾ç½®æ–­ç‚¹ (dlv) b main.main Breakpoint 1 set at 0x... for main.main() ./main.go:5 (dlv) b main.go:11 Breakpoint 2 set at 0x... for main.main() ./main.go:11 # å¼€å§‹æ‰§è¡Œ (dlv) c \u0026gt; main.main() ./main.go:5 (hits goroutine(1):1 total:1) (PC: 0x...) 1: package main 2: 3: import \u0026#34;fmt\u0026#34; 4: =\u0026gt; 5: func main() { 6: message := \u0026#34;Hello, Delve!\u0026#34; 7: fmt.Println(message) 8: result := add(23, 19) 9: fmt.Printf(\u0026#34;Result: %d\\n\u0026#34;, result) 10: } # å•æ­¥æ‰§è¡Œ (dlv) n \u0026gt; main.main() ./main.go:6 (PC: 0x...) 5: func main() { =\u0026gt; 6: message := \u0026#34;Hello, Delve!\u0026#34; 7: fmt.Println(message) 8: result := add(23, 19) 9: fmt.Printf(\u0026#34;Result: %d\\n\u0026#34;, result) 10: } # æŸ¥çœ‹å˜é‡ (dlv) p message \u0026#34;\u0026#34; (dlv) n \u0026gt; main.main() ./main.go:7 (PC: 0x...) (dlv) p message \u0026#34;Hello, Delve!\u0026#34; # æ­¥å…¥å‡½æ•° (dlv) s \u0026gt; fmt.Println(...) # æ­¥å‡ºå‡½æ•° (dlv) so Hello, Delve! \u0026gt; main.main() ./main.go:8 (PC: 0x...) # ç»§ç»­æ‰§è¡Œ (dlv) c Result: 42 \u0026gt; main.main() ./main.go:11 (hits goroutine(1):1 total:1) (PC: 0x...) (dlv) p result 42 # é€€å‡º (dlv) q é«˜çº§åŠŸèƒ½\ræ¡ä»¶æ–­ç‚¹\rè®¾ç½®åªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹è§¦å‘çš„æ–­ç‚¹ï¼š\n# å½“ i == 5 æ—¶æ‰åœ¨ç¬¬10è¡Œæš‚åœ (dlv) b main.go:10 Breakpoint 1 set at main.go:10 (dlv) cond 1 i == 5 è°ƒè¯•æµ‹è¯•ä»£ç \rDelve å¯ä»¥ç›´æ¥è°ƒè¯•æµ‹è¯•ç”¨ä¾‹ï¼š\ndlv test main_test.go åœ¨æµ‹è¯•å‡½æ•°ä¸Šè®¾ç½®æ–­ç‚¹ï¼š\n(dlv) b TestMyFunction ä¼ é€’å‘½ä»¤è¡Œå‚æ•°\rå¦‚æœç¨‹åºéœ€è¦å‘½ä»¤è¡Œå‚æ•°ï¼š\ndlv debug -- arg1 arg2 # æˆ– dlv exec ./myapp -- arg1 arg2 Goroutine è°ƒè¯•\rè°ƒè¯•å¹¶å‘ç¨‹åºæ—¶çš„ Goroutine æ“ä½œï¼š\n# æŸ¥çœ‹æ‰€æœ‰ Goroutine (dlv) goroutines # åˆ‡æ¢åˆ°ç‰¹å®š Goroutine (dlv) goroutine 5 # åœ¨å½“å‰ Goroutine ä¸Šä¸‹æ–‡ä¸­æŸ¥çœ‹å˜é‡ (dlv) p localVar å®ç”¨æŠ€å·§\r1. ç”Ÿäº§ç¯å¢ƒè°ƒè¯•\rå¯¹äºç”Ÿäº§ç¯å¢ƒç¨‹åºï¼Œç¼–è¯‘æ—¶ç¦ç”¨ä¼˜åŒ–ï¼š\ngo build -gcflags=\u0026#34;all=-N -l\u0026#34; -o myapp main.go 2. æ€§èƒ½è€ƒè™‘\rè°ƒè¯•ç‰ˆæœ¬ç¨‹åºè¿è¡Œè¾ƒæ…¢ï¼Œä»…ç”¨äºè°ƒè¯•ç›®çš„ ç”Ÿäº§ç¯å¢ƒä½¿ç”¨æ ‡å‡†ç¼–è¯‘é€‰é¡¹ 3. IDE é›†æˆ\rVS Codeï¼šå®‰è£… Go æ‰©å±•ï¼Œä½¿ç”¨å†…ç½®è°ƒè¯•ç•Œé¢ Golandï¼šåŸç”Ÿæ”¯æŒ Delveï¼Œæä¾›å›¾å½¢åŒ–è°ƒè¯•ç•Œé¢ æŒæ¡å‘½ä»¤è¡Œæ“ä½œæœ‰åŠ©äºç†è§£ IDE è°ƒè¯•è¿‡ç¨‹ 4. å¸¸è§é—®é¢˜æ’æŸ¥\ré—®é¢˜ï¼šæ–­ç‚¹æ— æ³•å‘½ä¸­\næ£€æŸ¥ä»£ç ä¼˜åŒ–é€‰é¡¹ï¼Œç¡®ä¿ä½¿ç”¨ -gcflags=\u0026quot;all=-N -l\u0026quot; ç¡®è®¤æ–­ç‚¹è®¾ç½®åœ¨æ­£ç¡®çš„è¡Œå·å’Œå‡½æ•° é—®é¢˜ï¼šå˜é‡æ˜¾ç¤ºä¼˜åŒ–å€¼\nç”±äºç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œå˜é‡å€¼å¯èƒ½æ˜¾ç¤ºä¸å‡†ç¡® ä½¿ç”¨ç¦ç”¨ä¼˜åŒ–çš„æ–¹å¼ç¼–è¯‘è°ƒè¯•ç‰ˆæœ¬ æ€»ç»“\rDelve æ˜¯ Go å¼€å‘è€…å¿…å¤‡çš„è°ƒè¯•å·¥å…·ï¼Œé€šè¿‡ç†Ÿç»ƒæŒæ¡å…¶ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥ï¼š\nå¿«é€Ÿå®šä½é—®é¢˜ï¼šé€šè¿‡æ–­ç‚¹å’Œå•æ­¥æ‰§è¡Œç²¾å‡†å®šä½ bug æ·±å…¥ç†è§£ä»£ç ï¼šè§‚å¯Ÿå˜é‡å˜åŒ–å’Œç¨‹åºæ‰§è¡Œæµç¨‹ è°ƒè¯•å¹¶å‘ç¨‹åºï¼šç®¡ç† Goroutine å’Œæ’æŸ¥å¹¶å‘é—®é¢˜ æé«˜å¼€å‘æ•ˆç‡ï¼šå‡å°‘è°ƒè¯•æ—¶é—´ï¼Œå¢åŠ å¼€å‘ä¿¡å¿ƒ å»ºè®®ä»ç®€å•ç¨‹åºå¼€å§‹ç»ƒä¹ ï¼Œé€æ­¥ç†Ÿæ‚‰å„ç§å‘½ä»¤å’Œåœºæ™¯ï¼Œæœ€ç»ˆèƒ½å¤Ÿç†Ÿç»ƒè¿ç”¨ Delve è§£å†³å¤æ‚çš„è°ƒè¯•é—®é¢˜ã€‚\n","date":"2025-11-19T11:00:42+08:00","permalink":"https://zg-dd.github.io/stu/go-delve/","title":"Go è¯­è¨€è°ƒè¯•å™¨ Delve (dlv) å­¦ä¹ ç¬”è®°"},{"content":"Docker\u0026amp;Docker Completeå¸¸ç”¨å‘½ä»¤å¤§å…¨\rä¸€ã€é•œåƒï¼ˆImageï¼‰ç®¡ç†\ré•œåƒå°±åƒæ˜¯è½¯ä»¶çš„å®‰è£…åŒ…æˆ–æ¨¡æ¿ã€‚\nå‘½ä»¤ æè¿° ç¤ºä¾‹ docker imagesdocker image ls åˆ—å‡ºæœ¬åœ°æ‰€æœ‰é•œåƒ docker images docker search \u0026lt;åç§°\u0026gt; ä»ä»“åº“æœç´¢é•œåƒ docker search nginx docker pull \u0026lt;é•œåƒå\u0026gt;:\u0026lt;æ ‡ç­¾\u0026gt; ä¸‹è½½é•œåƒï¼ˆä¸æŒ‡å®šæ ‡ç­¾åˆ™é»˜è®¤ä¸º latestï¼‰ docker pull nginx:alpine docker rmi \u0026lt;é•œåƒIDæˆ–å\u0026gt; åˆ é™¤æœ¬åœ°é•œåƒ docker rmi nginx docker image prune æ¸…ç†æœªè¢«ä½¿ç”¨çš„é•œåƒï¼ˆæ‚¬ç©ºé•œåƒï¼‰ docker image prune docker build -t \u0026lt;æ ‡ç­¾\u0026gt; . æ ¹æ® Dockerfile æ„å»ºé•œåƒï¼ˆ. ä»£è¡¨å½“å‰ç›®å½•ï¼‰ docker build -t my-app:1.0 . äºŒã€å®¹å™¨ï¼ˆContainerï¼‰ç®¡ç†\rå®¹å™¨æ˜¯ä»é•œåƒè¿è¡Œèµ·æ¥çš„å®ä¾‹ã€‚\nå‘½ä»¤ æè¿° ç¤ºä¾‹ docker run [é€‰é¡¹] \u0026lt;é•œåƒ\u0026gt; åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªæ–°å®¹å™¨ docker run -d -p 80:80 nginx docker start \u0026lt;å®¹å™¨å/ID\u0026gt; å¯åŠ¨ä¸€ä¸ªå·²åœæ­¢çš„å®¹å™¨ docker start my_nginx docker stop \u0026lt;å®¹å™¨å/ID\u0026gt; åœæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼ˆä¼˜é›…åœæ­¢ï¼‰ docker stop my_nginx docker restart \u0026lt;å®¹å™¨å/ID\u0026gt; é‡å¯å®¹å™¨ docker restart my_nginx docker rm \u0026lt;å®¹å™¨å/ID\u0026gt; åˆ é™¤ä¸€ä¸ªå·²åœæ­¢çš„å®¹å™¨ docker rm my_nginx docker container prune åˆ é™¤æ‰€æœ‰å·²åœæ­¢çš„å®¹å™¨ docker container prune docker ps åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨ docker ps docker ps -a åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢çš„ï¼‰ docker ps -a docker logs \u0026lt;å®¹å™¨å/ID\u0026gt; æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—è¾“å‡º docker logs my_nginx docker logs -f \u0026lt;å®¹å™¨å/ID\u0026gt; å®æ—¶è·Ÿè¸ªï¼ˆè·Ÿéšï¼‰æ—¥å¿—è¾“å‡º docker logs -f my_nginx docker exec -it \u0026lt;å®¹å™¨å/ID\u0026gt; \u0026lt;å‘½ä»¤\u0026gt; åœ¨è¿è¡Œä¸­çš„å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤ docker exec -it my_nginx /bin/bash ä¸‰ã€ç½‘ç»œï¼ˆNetworkï¼‰ç®¡ç†\rå‘½ä»¤ æè¿° ç¤ºä¾‹ docker network ls åˆ—å‡ºæ‰€æœ‰ç½‘ç»œ docker network ls docker network create \u0026lt;ç½‘ç»œå\u0026gt; åˆ›å»ºä¸€ä¸ªæ–°ç½‘ç»œ docker network create my_net docker network inspect \u0026lt;ç½‘ç»œå\u0026gt; æŸ¥çœ‹ç½‘ç»œè¯¦ç»†ä¿¡æ¯ docker network inspect bridge å››ã€æ•°æ®å·ï¼ˆVolumeï¼‰ç®¡ç†\ræ•°æ®å·ç”¨äºæŒä¹…åŒ–å­˜å‚¨æ•°æ®ã€‚\nå‘½ä»¤ æè¿° ç¤ºä¾‹ docker volume ls åˆ—å‡ºæ‰€æœ‰æ•°æ®å· docker volume ls docker volume create \u0026lt;å·å\u0026gt; åˆ›å»ºä¸€ä¸ªæ•°æ®å· docker volume create my_data docker volume rm \u0026lt;å·å\u0026gt; åˆ é™¤ä¸€ä¸ªæ•°æ®å· docker volume rm my_data docker volume prune æ¸…ç†æœªè¢«ä½¿ç”¨çš„æ•°æ®å· docker volume prune äº”ã€ç³»ç»Ÿä¸ä¿¡æ¯\rå‘½ä»¤ æè¿° ç¤ºä¾‹ docker info æ˜¾ç¤º Docker ç³»ç»Ÿä¿¡æ¯ docker info docker version æ˜¾ç¤º Docker ç‰ˆæœ¬ä¿¡æ¯ docker version docker stats å®æ—¶æ˜¾ç¤ºå®¹å™¨èµ„æºä½¿ç”¨ç»Ÿè®¡ docker stats docker system df æŸ¥çœ‹ Docker ç£ç›˜ä½¿ç”¨æƒ…å†µ docker system df å…­ã€Docker Compose å¸¸ç”¨å‘½ä»¤\rç”¨äºç®¡ç†å¤šå®¹å™¨åº”ç”¨ã€‚\nå‘½ä»¤ æè¿° ç¤ºä¾‹ docker compose up åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ docker compose up docker compose up -d åœ¨åå°åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ docker compose up -d docker compose down åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰å®¹å™¨ã€ç½‘ç»œ docker compose down docker compose ps åˆ—å‡ºæœ¬é¡¹ç›®ä¸‹çš„æ‰€æœ‰å®¹å™¨ docker compose ps docker compose logs æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çš„æ—¥å¿— docker compose logs docker compose logs -f \u0026lt;æœåŠ¡å\u0026gt; å®æ—¶è·Ÿè¸ªç‰¹å®šæœåŠ¡çš„æ—¥å¿— docker compose logs -f web docker compose exec \u0026lt;æœåŠ¡å\u0026gt; \u0026lt;å‘½ä»¤\u0026gt; åœ¨æŒ‡å®šæœåŠ¡çš„å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ docker compose exec db mysql -u root -p å‘½ä»¤ä¸­çš„å¸¸ç”¨é€‰é¡¹ï¼ˆFlagsï¼‰é‡Šä¹‰\ré€‰é¡¹ å…¨ç§° å«ä¹‰ ç¤ºä¾‹ -d --detach åå°è¿è¡Œå®¹å™¨ docker run -d nginx -it -i -t äº¤äº’å¼è¿è¡Œï¼ˆåˆ†é…ä¼ªç»ˆç«¯ï¼Œé€šå¸¸ä¸ /bin/bash è¿ç”¨ï¼‰ docker run -it ubuntu /bin/bash -p --publish ç«¯å£æ˜ å°„ï¼ˆä¸»æœºç«¯å£:å®¹å™¨ç«¯å£ï¼‰ docker run -p 8080:80 nginx -v --volume æŒ‚è½½æ•°æ®å·æˆ–ç›®å½• docker run -v /host/data:/container/data nginx -e --env è®¾ç½®ç¯å¢ƒå˜é‡ docker run -e MY_VAR=value nginx --name ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§° docker run --name my_nginx nginx --rm å®¹å™¨é€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤ï¼ˆå¸¸ç”¨äºæµ‹è¯•ï¼‰ docker run --rm alpine echo \u0026quot;hello\u0026quot; ğŸš€ æœ€å¸¸ç”¨å‘½ä»¤æ€»ç»“ï¼ˆå¿«é€Ÿä¸Šæ‰‹ï¼‰\rçœ‹çŠ¶æ€: docker ps (çœ‹å®¹å™¨), docker images (çœ‹é•œåƒ) æ‹‰é•œåƒ: docker pull \u0026lt;åå­—\u0026gt; å¯å®¹å™¨: docker run -d -p ... --name ... \u0026lt;é•œåƒå\u0026gt; åœå®¹å™¨: docker stop \u0026lt;åå­—\u0026gt; è¿›å®¹å™¨: docker exec -it \u0026lt;åå­—\u0026gt; /bin/bash çœ‹æ—¥å¿—: docker logs -f \u0026lt;åå­—\u0026gt; åˆ å®¹å™¨: docker rm \u0026lt;åå­—\u0026gt; åˆ é•œåƒ: docker rmi \u0026lt;åå­—\u0026gt; å»ºè®®: å°†è¿™ä»½åˆ—è¡¨ä¿å­˜ä¸‹æ¥ï¼Œä½œä¸ºæ—¥å¸¸æ“ä½œçš„é€ŸæŸ¥æ‰‹å†Œã€‚\n","date":"2025-09-25T11:57:50+08:00","permalink":"https://zg-dd.github.io/stu/docker-command/","title":"Docker å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥"},{"content":"ç½‘ç»œé€šè®¯æ ¸å¿ƒçŸ¥è¯†\rä¸€ã€æ ¸å¿ƒæ¦‚å¿µ\r1. Socket\ræ˜¯ä»€ä¹ˆï¼šè¿›ç¨‹é—´é€šä¿¡(IPC)çš„æ‰©å±•æœºåˆ¶\nç”¨é€”ï¼šå»ºç«‹ç½‘ç»œé€šä¿¡é€šé“ï¼ˆTCP/UDPï¼‰\næµç¨‹ï¼š\næœåŠ¡ç«¯ï¼šsocket â†’ bind â†’ listen â†’ accept å®¢æˆ·ç«¯ï¼šsocket â†’ connect â†’ write/read â†’ close\næ³¨æ„äº‹é¡¹ï¼šéœ€å¤„ç†å­—èŠ‚åºè½¬æ¢(htonl/ntohl) 2. TCP vs UDP\rç‰¹æ€§ TCP UDP è¿æ¥æ–¹å¼ é¢å‘è¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰ æ— è¿æ¥ å¯é æ€§ å¯é ä¼ è¾“ï¼ˆé‡ä¼ æœºåˆ¶ï¼‰ ä¸å¯é ä¼ è¾“ æ•°æ®å½¢å¼ æµå¼å¥—æ¥å­— æ•°æ®æŠ¥å¥—æ¥å­— é€‚ç”¨åœºæ™¯ æ–‡ä»¶ä¼ è¾“ã€ç½‘é¡µæµè§ˆ å®æ—¶è§†é¢‘ã€DNSæŸ¥è¯¢ äºŒã€æœåŠ¡å™¨æ¨¡å‹\r1. è¿­ä»£æœåŠ¡å™¨\rç¼ºé™·ï¼šå•çº¿ç¨‹é˜»å¡ï¼Œæ— æ³•å¹¶å‘å¤„ç†è¯·æ±‚\n2. è¿›ç¨‹/çº¿ç¨‹æ¨¡å‹\rè¿›ç¨‹æ–¹æ¡ˆï¼š\néœ€ç”¨waitpid()é¿å…åƒµå°¸è¿›ç¨‹ æ³¨æ„ï¼šå­è¿›ç¨‹ç»“æŸéœ€çˆ¶è¿›ç¨‹å›æ”¶èµ„æº åƒµå°¸è¿›ç¨‹å¤„ç†è¯¦è§£ï¼š\näº§ç”ŸåŸå› ï¼š\nå­è¿›ç¨‹ç»ˆæ­¢ä½†æœªè¢«çˆ¶è¿›ç¨‹wait() ä¼šå ç”¨ç³»ç»Ÿè¿›ç¨‹è¡¨èµ„æº å¤„ç†æ–¹æ³•ï¼š\nåŒæ­¥å›æ”¶ï¼š waitpid(pid, NULL, 0); // é˜»å¡ç­‰å¾… å¼‚æ­¥å›æ”¶ï¼ˆæ¨èï¼‰ï¼š signal(SIGCHLD, [](int) { while(waitpid(-1, NULL, WNOHANG) \u0026gt; 0); }); ç‰¹æ®Šæƒ…å½¢ï¼š\nçˆ¶è¿›ç¨‹å…ˆç»ˆæ­¢æ—¶ï¼Œåƒµå°¸è¿›ç¨‹ç”±initè¿›ç¨‹æ¥ç®¡å¹¶å›æ”¶ æ‰¹é‡å›æ”¶æ—¶éœ€å¾ªç¯è°ƒç”¨waitpid() çº¿ç¨‹æ–¹æ¡ˆï¼š\néœ€å¤„ç†å…±äº«å˜é‡åŠ é”é—®é¢˜ çº¿ç¨‹åŒæ­¥æ›´å¤æ‚ï¼ˆä¸´ç•ŒåŒº/é”æœºåˆ¶ï¼‰ 3. è¿›ç¨‹æ± ä¼˜åŒ–\rç±»å‹ ç‰¹ç‚¹ é™æ€è¿›ç¨‹æ±  é¢„åˆ›å»ºè¿›ç¨‹ï¼Œé™åˆ¶å¹¶å‘ä¸Šé™ åŠ¨æ€è¿›ç¨‹æ±  ç»´æŠ¤æœ€å°/æœ€å¤§ç©ºé—²è¿›ç¨‹æ•° ä¸‰ã€é«˜æ€§èƒ½I/Oæ¨¡å‹\r1. ä¼ ç»Ÿé˜»å¡æ¨¡å‹\rç‰¹ç‚¹ï¼š\nå•çº¿ç¨‹é˜»å¡ç­‰å¾…I/Oå°±ç»ª èµ„æºåˆ©ç”¨ç‡ä½ 2. Select/Poll\rç‰¹æ€§ Select Poll å®ç°åŸç† ä½å›¾è½®è¯¢FD(æè¿°ç¬¦é›†) é“¾è¡¨è½®è¯¢FD(æè¿°ç¬¦é›†) æœ€å¤§è¿æ¥æ•° 1024ï¼ˆFD_SETSIZEé™åˆ¶ï¼‰ æ— ç¡¬æ€§é™åˆ¶ æ•ˆç‡ç¼ºé™· O(n)çº¿æ€§æ‰«æ O(n)çº¿æ€§æ‰«æ è·¨å¹³å°æ€§ æ‰€æœ‰å¹³å°æ”¯æŒ æ‰€æœ‰å¹³å°æ”¯æŒ 3. Epoll\ræ ¸å¿ƒæœºåˆ¶ï¼š\näº‹ä»¶æ³¨å†Œï¼šé€šè¿‡epoll_ctlç»´æŠ¤çº¢é»‘æ ‘ å°±ç»ªåˆ—è¡¨ï¼šå†…æ ¸ç»´æŠ¤å°±ç»ªFDåŒå‘é“¾è¡¨ è§¦å‘æ¨¡å¼ï¼š LTï¼ˆLevel Triggerï¼‰ï¼šç±»ä¼¼Pollçš„è§¦å‘æ–¹å¼ ETï¼ˆEdge Triggerï¼‰ï¼šçŠ¶æ€å˜åŒ–æ—¶å•æ¬¡é€šçŸ¥ æ€§èƒ½ä¼˜åŠ¿ï¼š\nO(1)äº‹ä»¶é€šçŸ¥å¤æ‚åº¦ ç™¾ä¸‡çº§è¿æ¥æ”¯æŒï¼ˆC1000Kåœºæ™¯ï¼‰ 4. NIOï¼ˆNon-blocking I/Oï¼‰\ræ ¸å¿ƒç»„ä»¶ï¼š\nChannelï¼šå…¨åŒå·¥é€šä¿¡ç®¡é“ï¼ˆSocketChannel/FileChannelï¼‰ Bufferï¼šç»“æ„åŒ–æ•°æ®å®¹å™¨ï¼ˆByteBuffer/CharBufferï¼‰ Selectorï¼šå¤šè·¯å¤ç”¨å™¨ï¼ˆåŸºäºç³»ç»Ÿepoll/kqueueå®ç°ï¼‰ å·¥ä½œæµç¨‹ï¼š\nstart\r: åˆ›å»ºSelector;\r: æ³¨å†ŒChannelåˆ°Selector;\rrepeat\r: select()æŸ¥è¯¢å°±ç»ªäº‹ä»¶;\r: å¤„ç†SelectionKeyäº‹ä»¶;\rrepeat while (æœ‰äº‹ä»¶?) stop 5. AIOï¼ˆAsynchronous I/Oï¼‰\rå®ç°åŸç†ï¼š\nå†…æ ¸å®ŒæˆI/Oæ“ä½œåä¸»åŠ¨å›è°ƒ æ— éœ€ç”¨æˆ·çº¿ç¨‹è½®è¯¢ å…¸å‹åœºæ™¯ï¼š\nå¤§æ–‡ä»¶å¼‚æ­¥è¯»å†™ é«˜å»¶è¿Ÿç½‘ç»œæ“ä½œ 6. å®Œæ•´å¯¹æ¯”è¡¨\ræ¨¡å‹ é˜»å¡æ€§ çº¿ç¨‹è¦æ±‚ è§¦å‘æ–¹å¼ é€‚ç”¨åœºæ™¯ é˜»å¡I/O å®Œå…¨é˜»å¡ 1:1 - ä½å¹¶å‘ç®€å•åœºæ™¯ Select éé˜»å¡ 1:N è½®è¯¢é€šçŸ¥ è·¨å¹³å°ä¸­ç­‰å¹¶å‘ Poll éé˜»å¡ 1:N è½®è¯¢é€šçŸ¥ è¿æ¥æ•°\u0026lt;10K Epoll éé˜»å¡ 1:N äº‹ä»¶é©±åŠ¨ Linuxé«˜å¹¶å‘ç³»ç»Ÿ NIO éé˜»å¡ 1:N å°±ç»ªé€‰æ‹© é«˜åååº”ç”¨ AIO å¼‚æ­¥ 0:1 å®Œæˆå›è°ƒ å»¶è¿Ÿæ•æ„Ÿå‹æ“ä½œ è¡¥å……è¯´æ˜\rå†…æ ¸æ”¯æŒï¼š\nWindowsï¼šIOCPæ˜¯çœŸæ­£çš„å¼‚æ­¥I/O Linuxï¼š5.1+å†…æ ¸çš„io_uringæ¥è¿‘çœŸå¼‚æ­¥ æ€§èƒ½ä¸´ç•Œç‚¹ï¼š\nC10Kï¼šSelect/Pollè¾¾åˆ°æ€§èƒ½ç“¶é¢ˆ C100Kï¼šå¿…é¡»ä½¿ç”¨Epoll/NIO C1000Kï¼šéœ€è¦Epoll+é›¶æ‹·è´ä¼˜åŒ– ç¼–ç¨‹å¤æ‚åº¦ï¼š\né˜»å¡I/O \u0026lt; Select \u0026lt; Poll \u0026lt; Epoll \u0026lt; NIO \u0026lt; AIO å››ã€å®è·µè¦ç‚¹\r1. å®ˆæŠ¤è¿›ç¨‹\rå…³é”®æ­¥éª¤ï¼š\nfork() setsid()\néœ€é‡å®šå‘æ ‡å‡†I/Oè‡³/dev/null 2. UDPæœåŠ¡å™¨\rç‰¹ç‚¹ï¼š\næ— éœ€listen()/accept() ç›´æ¥ä½¿ç”¨recvfrom()/sendto() 3. å…¶ä»–\rReuse Addressï¼šé¿å…TIME_WAITçŠ¶æ€å ç”¨ç«¯å£ æƒŠç¾¤æ•ˆåº”ï¼šå¤šè¿›ç¨‹Acceptäº’ç›¸ç«äº‰å¯¼è‡´ï¼Œéœ€å†…æ ¸é”ä¼˜åŒ–\næœåŠ¡å™¨ç±»å‹ï¼š IOå¯†é›†å‹ï¼šLNMP(nginx) CPUå¯†é›†å‹ï¼šLAMP(Apache) åç¨‹ï¼šæ˜¯ç”¨æˆ·æ€çº¿ç¨‹ï¼Œç”¨æˆ·æ€è°ƒåº¦ï¼Œé¿å…å†…æ ¸åˆ‡æ¢å¼€é”€ï¼Œçº¿ç¨‹æ˜¯å†…æ ¸è°ƒç”¨ã€‚å¯¹æ¯”çº¿ç¨‹ï¼šåˆ‡æ¢é€Ÿåº¦æ›´å¿«ï¼Œèµ„æºæ¶ˆè€—æ›´ä½ äº”ã€å­¦ä¹ å»ºè®®\r1. è¯Šæ–­å·¥å…·\rnetstat -anp # æŸ¥çœ‹ç½‘ç»œè¿æ¥ 2. ç»å…¸ä¹¦ç±\rã€ŠUnixç½‘ç»œç¼–ç¨‹ã€‹ ã€ŠUnixç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹ ","date":"2025-08-15T19:08:51+08:00","permalink":"https://zg-dd.github.io/stu/socket/","title":"ç½‘ç»œé€šè®¯æ ¸å¿ƒçŸ¥è¯†"},{"content":" ä¸ªäººå­¦ä¹ ç¬”è®°\n1. MCPçš„å®šä¹‰\rMCPå…¨ç§°ï¼ˆModel Content Protocol, æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æ˜¯2024å¹´ç”±Anthropicå…¬å¸æ¨å‡ºçš„ä¸€é¡¹å¼€æ”¾æ ‡å‡†åè®®ï¼Œæ—¨åœ¨å¤§æ¨¡å‹ï¼ˆLLMï¼‰ä¸å¤–éƒ¨å·¥å…·ã€æ•°æ®æºå’ŒæœåŠ¡æä¾›ç»Ÿä¸€çš„äº¤äº’æ¡†æ¶ã€‚å…¶æ ¸å¿ƒç›®æ ‡æ˜¯è§£å†³AIç”Ÿæ€ä¸­çš„â€œæ•°æ®å­¤å²›â€é—®é¢˜ï¼Œé€šè¿‡æ ‡å‡†åŒ–æ¥å£å®ç°æ¨¡å‹ä¸å¤–éƒ¨èµ„æºçš„æ— ç¼è¿æ¥ï¼Œç±»ä¼¼äºâ€œAIé¢†åŸŸçš„USB-Cæ¥å£â€æˆ–è€…â€œä¸‡èƒ½é€‚é…å™¨â€ã€‚\n2. æ ¸å¿ƒç‰¹æ€§ä¸æŠ€æœ¯åŸç†\r2.1 æ ‡å‡†åŒ–ä¸‰å±‚æ¶æ„\rä¸»æœºï¼ˆHostï¼‰ï¼šè¿è¡ŒAIæ¨¡å‹çš„æ ¸å¿ƒåº”ç”¨ï¼ˆå¦‚Claudeã€Desktopã€IDEæ’ä»¶ï¼‰ å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼šä¸æœåŠ¡å™¨å»ºç«‹1:1è¿æ¥ï¼Œå°è£…è¯·æ±‚å¹¶è½¬å‘ æœåŠ¡å™¨ï¼ˆServerï¼‰ï¼šè½»é‡çº§é€‚é…å™¨ï¼Œè¿æ¥å…·ä½“å·¥å…·æˆ–æ•°æ®æºï¼ˆå¦‚æ•°æ®åº“ã€APIã€æ–‡ä»¶ç³»ç»Ÿï¼‰ 2.2 é€šä¿¡æœºåˆ¶ï¼šJSON-RPC 2.0åè®®\ræœ¬åœ°é€šä¿¡ï¼šé€šè¿‡stdio(æ ‡å‡†è¾“å…¥è¾“å‡º)ä¼ è¾“JSON-RPCæ¶ˆæ¯ï¼Œé€‚ç”¨äºæœ¬åœ°å·¥å…·è°ƒç”¨ è¿œç¨‹é€šä¿¡ï¼šåŸºäºSSE(Server-Sent Events)å’ŒStreamable HTTPçš„HTTPé•¿è¿æ¥ï¼Œæ”¯æŒå¼‚æ­¥æ•°æ®æµ æ¶ˆæ¯æ ¼å¼ï¼šæ‰€æœ‰è¯·æ±‚å’Œå“åº”å‡éµå¾ªJSON-RPC 2.0è§„èŒƒ 2.3 åŠ¨æ€å‘ç°æœºåˆ¶\rå·¥å…·çº§åŠ¨æ€å‘ç°ï¼šå·¥å…·é€šè¿‡è‡ªæè¿°æ¥å£ï¼ˆå¦‚OpenAPIï¼‰å£°æ˜èƒ½åŠ›ï¼ŒAIæ¨¡å‹å¯è‡ªåŠ¨è¯†åˆ«å¹¶è°ƒç”¨ï¼Œæ— éœ€è¦ç¡¬ç¼–ç é›†æˆ æœåŠ¡çº§åŠ¨æ€å‘ç°ï¼ˆä¸æ‡‚ï¼‰ï¼š URIé©±åŠ¨å‘ç°ï¼Œå®¢æˆ·ç«¯é€šè¿‡è§£æè‡ªå®šä¹‰URIï¼ˆå¦‚mcp://api.service.comï¼‰å‘ç°è¿œç¨‹æœåŠ¡ï¼šå®¢æˆ·ç«¯è®¿é—®URIå¯¹åº”çš„å…ƒæ•°æ®ç«¯ç‚¹ï¼ˆå¦‚https://api.service.com/llms.txtï¼‰ã€‚æœåŠ¡ç«¯è¿”å›JSONæè¿°æ–‡ä»¶ï¼ŒåŒ…å«åŠŸèƒ½åˆ—è¡¨ï¼ŒAPIæ–‡æ¡£å’Œè®¤è¯æ–¹å¼ã€‚Clientæ ¹æ®å…ƒæ•°æ®è‡ªåŠ¨é…ç½®å·¥å…·è°ƒç”¨æƒé™ã€‚åº”ç”¨åœºæ™¯ï¼šç”¨æˆ·ç²˜è´´ä¸€ä¸ªMCP URIåˆ°èŠå¤©çª—å£ï¼ŒLLMè‡ªåŠ¨è¯†åˆ«å¹¶é›†æˆè¯¥æœåŠ¡ï¼ˆå¦‚è‚¡ç¥¨APIï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ã€‚ 3. å®‰å…¨ä¸æƒé™æ§åˆ¶\ræœ¬åœ°åŒ–æ‰§è¡Œï¼šé»˜è®¤MCP Serverè¿è¡Œåœ¨æœ¬åœ°ï¼Œé¿å…æ•æ„Ÿæ•°æ®å¤–æ³„ æ“ä½œç¡®è®¤æœºåˆ¶ï¼šé«˜é£é™©æ“ä½œï¼ˆå¦‚åˆ é™¤æ–‡ä»¶ï¼‰éœ€ç”¨æˆ·æ‰‹åŠ¨æˆæƒ ä¼ä¸šçº§å®‰å…¨å‘˜æ‰©å±•ï¼šæ”¯æŒJWTä»¤ç‰Œã€RBACæƒé™æ¨¡å‹å’ŒIPsecéš§é“åŠ å¯†ï¼Œæ»¡è¶³é‡‘èã€åŒ»ç–—ç­‰åœºæ™¯éœ€æ±‚ 4. ä¸ä¼ ç»ŸæŠ€æœ¯çš„åŒºåˆ«\rç‰¹æ€§ MCP ä¼ ç»ŸAPI Function Callingâ€‹ é›†æˆæ–¹å¼â€‹ ç»Ÿä¸€åè®®ï¼ŒåŠ¨æ€å‘ç°å·¥å…· æ¯ä¸ªAPIç‹¬ç«‹å®šåˆ¶ éœ€ç¡¬ç¼–ç ç»‘å®šç‰¹å®šå‡½æ•° é€šä¿¡æ¨¡å¼â€‹ åŒå‘å®æ—¶äº¤äº’ å•å‘è¯·æ±‚-å“åº” åŒæ­¥æ‰§è¡Œï¼Œæ— å®æ—¶æ¨é€ çµæ´»æ€§â€‹ å³æ’å³ç”¨ï¼Œæ”¯æŒå¤šå·¥å…·ç»„åˆ æ‰©å±•éœ€é‡æ–°å¼€å‘ ä¾èµ–æ¨¡å‹ä¾›åº”å•†æ¥å£ 5. æ€»ç»“\rMCPåè®®é€šè¿‡ â€œå®¢æˆ·ç«¯-æœåŠ¡å™¨è§£è€¦â€ + â€œJSON-RPCé€šä¿¡â€ + â€œåŠ¨æ€å‘ç°æœºåˆ¶â€ï¼Œ è§£å†³äº†LLMä¸å¤–éƒ¨èµ„æºäº¤äº’çš„ä¸‰å¤§ç—›ç‚¹ï¼š çµæ´»æ€§ï¼šå·¥å…·å¯çƒ­æ’æ‹”ï¼ŒæœåŠ¡å¯åŠ¨æ€æ‰©å±•ï¼› å®‰å…¨æ€§ï¼šæœ¬åœ°åŒ–æ‰§è¡Œä¸æƒé™æ§åˆ¶å…¼é¡¾æ•ˆç‡ä¸éšç§ï¼› æ ‡å‡†åŒ–ï¼šç»Ÿä¸€åè®®é™ä½é›†æˆæˆæœ¬ï¼Œæ¨åŠ¨AIç”Ÿæ€å¼€æ”¾ã€‚\nMCPé€šè¿‡åè®®å±‚è§£è€¦AIæ¨¡å‹ä¸å·¥å…·ï¼Œæ¨åŠ¨AIä»â€œå¯¹è¯åŠ©æ‰‹â€å‡çº§ä¸ºâ€œæ‰§è¡Œä»£ç†â€ï¼Œæˆä¸ºæ„å»ºå¤æ‚Agentç³»ç»Ÿçš„åº•å±‚åŸºç¡€ã€‚éšç€ä¼ä¸šæ™ºèƒ½åŒ–å‡çº§åŠ é€Ÿï¼ˆå¦‚é•¿è™¹è™¹ä¿¡EADPå¹³å°é›†æˆMCPï¼‰ï¼Œè¯¥åè®®å·²æˆä¸ºæ„å»ºä¸‹ä¸€ä»£AI Agentçš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ã€‚\n","date":"2025-08-06T15:14:07+08:00","permalink":"https://zg-dd.github.io/stu/mcp-protocol-core/","title":"MCP åè®®å…¥é—¨ä¸æ ¸å¿ƒæœºåˆ¶"},{"content":"åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œä½¿ç”¨ MyBatis ä½œä¸ºæŒä¹…å±‚æ¡†æ¶æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æŸ¥çœ‹ SQL æ—¥å¿—ä»¥è°ƒè¯•å’Œä¼˜åŒ–æŸ¥è¯¢ã€‚ç„¶è€Œï¼ŒMyBatis çš„æ—¥å¿—è¾“å‡ºé€šå¸¸åŒ…å«å ä½ç¬¦å’Œå‚æ•°ä¿¡æ¯ï¼Œè¿™ä½¿å¾—ç›´æ¥æ‰§è¡Œè¿™äº› SQL è¯­å¥å˜å¾—å›°éš¾ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªç®€å•çš„ HTML å’Œ JavaScript è„šæœ¬ï¼Œç”¨äºè§£æ MyBatis çš„ SQL æ—¥å¿—å¹¶ç”Ÿæˆå¯æ‰§è¡Œçš„ SQL è¯­å¥ã€‚\n1. è„šæœ¬åŠŸèƒ½æ¦‚è¿°\rè¯¥è„šæœ¬çš„ä¸»è¦åŠŸèƒ½æ˜¯ï¼š\nè§£æ SQL æ—¥å¿—ï¼šä» MyBatis æ—¥å¿—ä¸­æå– SQL è¯­å¥å’Œå‚æ•°ã€‚ å‚æ•°æ›¿æ¢ï¼šå°† SQL è¯­å¥ä¸­çš„å ä½ç¬¦ ? æ›¿æ¢ä¸ºå®é™…çš„å‚æ•°å€¼ã€‚ ç”Ÿæˆå¯æ‰§è¡Œ SQLï¼šè¾“å‡ºå®Œæ•´çš„ SQL è¯­å¥ï¼Œä¾¿äºåœ¨æ•°æ®åº“ä¸­ç›´æ¥æ‰§è¡Œã€‚ 2. å®ç°ç»†èŠ‚\r2.1 HTML ç»“æ„\rè„šæœ¬çš„ HTML éƒ¨åˆ†æä¾›äº†ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç•Œé¢ï¼ŒåŒ…å«è¾“å…¥åŒºåŸŸã€è§£ææŒ‰é’®å’Œè¾“å‡ºåŒºåŸŸã€‚\nè¾“å…¥åŒºåŸŸï¼šç”¨æˆ·å¯ä»¥åœ¨æ­¤ç²˜è´´ MyBatis çš„ SQL æ—¥å¿—ã€‚ è§£ææŒ‰é’®ï¼šç‚¹å‡»åè§¦å‘ JavaScript å‡½æ•°è¿›è¡Œè§£æã€‚ è¾“å‡ºåŒºåŸŸï¼šæ˜¾ç¤ºè§£æåçš„å¯æ‰§è¡Œ SQL è¯­å¥ã€‚ 2.2 JavaScript é€»è¾‘\rJavaScript éƒ¨åˆ†å®ç°äº†æ—¥å¿—è§£æçš„æ ¸å¿ƒé€»è¾‘ï¼š\næ—¥å¿—åˆ†å‰²ï¼šé€šè¿‡æ¢è¡Œç¬¦å°†æ—¥å¿—åˆ†å‰²ä¸ºå¤šè¡Œï¼Œé€è¡Œå¤„ç†ã€‚ SQL è¯­å¥æå–ï¼šè¯†åˆ«åŒ…å« Preparing: çš„è¡Œï¼Œæå– SQL è¯­å¥ã€‚ å‚æ•°è§£æï¼šè¯†åˆ«åŒ…å« Parameters: çš„è¡Œï¼Œæå–å‚æ•°å¹¶æ ¹æ®ç±»å‹è¿›è¡Œå¤„ç†ã€‚ å­—ç¬¦ä¸²å’Œæ—¶é—´æˆ³ï¼šç”¨å•å¼•å·åŒ…è£¹ï¼Œå¤„ç†è½¬ä¹‰å­—ç¬¦ã€‚ ç©ºå€¼ï¼šæ›¿æ¢ä¸º NULLã€‚ å…¶ä»–ç±»å‹ï¼šç›´æ¥æ›¿æ¢ã€‚ ç»“æœè¾“å‡ºï¼šå°†æ›¿æ¢åçš„ SQL è¯­å¥æ˜¾ç¤ºåœ¨è¾“å‡ºåŒºåŸŸã€‚ 3. è„šæœ¬ä»£ç \råˆ›å»ºä¸€ä¸ª.htmlæ–‡ä»¶ï¼Œç¼–è¾‘ï¼Œå°†è„šæœ¬å†…å®¹è´´è‡³æ–‡ä»¶å†…ï¼Œä¿å­˜ï¼Œç”¨æµè§ˆå™¨æ‰“å¼€æ–‡ä»¶å³å¯ä½¿ç”¨\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Mybatis SQLæ—¥å¿—è§£æ\u0026lt;/title\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; function f(obj) { try { var textVa = obj.value; var logs = textVa.split(\u0026#39;\\n\u0026#39;); // Split by newline var results = []; var currentStatement = null; logs.forEach(function(log) { // Check if this line contains \u0026#34;Preparing:\u0026#34; or \u0026#34;Parameters:\u0026#34; if (log.indexOf(\u0026#39;Preparing:\u0026#39;) !== -1) { if (currentStatement !== null) { // If we have a current statement, push it to the results results.push(currentStatement); } // Start a new statement currentStatement = log.substring(log.indexOf(\u0026#39;Preparing:\u0026#39;) + \u0026#34;Preparing:\u0026#34;.length).trim(); } else if (log.indexOf(\u0026#39;Parameters:\u0026#39;) !== -1 \u0026amp;\u0026amp; currentStatement !== null) { // If we find parameters and have a current statement, parse the parameters var parametersStr = log.substring(log.indexOf(\u0026#39;Parameters:\u0026#39;) + \u0026#34;Parameters:\u0026#34;.length).trim(); var parameters = parametersStr.split(/,(?![^()]*\\))/g); // Use regex to split correctly for (var i = 0; i \u0026lt; parameters.length; i++) { var paramValue = parameters[i].trim(); if (paramValue === \u0026#34;null\u0026#34;) { currentStatement = currentStatement.replace(\u0026#34;?\u0026#34;, \u0026#34;NULL\u0026#34;); } else { var typeStr = paramValue.substring(paramValue.indexOf(\u0026#34;(\u0026#34;) + 1, paramValue.indexOf(\u0026#34;)\u0026#34;)); paramValue = paramValue.substring(0, paramValue.indexOf(\u0026#34;(\u0026#34;)).trim(); if (typeStr === \u0026#34;String\u0026#34; || typeStr === \u0026#34;Timestamp\u0026#34;) { paramValue = \u0026#34;\u0026#39;\u0026#34; + paramValue.replace(\u0026#34;\u0026#39;\u0026#34;, \u0026#34;\u0026#39;\u0026#39;\u0026#34;) + \u0026#34;\u0026#39;\u0026#34;; } currentStatement = currentStatement.replace(\u0026#34;?\u0026#34;, paramValue); } } // Add the final statement to the results and reset currentStatement results.push(currentStatement); currentStatement = null; } }); // If there\u0026#39;s a remaining statement, push it to the results if (currentStatement !== null) { results.push(currentStatement); } document.getElementById(\u0026#34;d1\u0026#34;).value = results.join(\u0026#34;\\n\\n\u0026#34;); } catch (e) { console.error(e); alert(\u0026#34;è§£æSQLæ—¶å‘ç”Ÿé”™è¯¯ï¼š\u0026#34; + e.message); } } function copySQL() { var SQL = document.getElementById(\u0026#34;d1\u0026#34;); navigator.clipboard.writeText(SQL.value).then(function() { var msg = document.getElementById(\u0026#34;msg\u0026#34;); msg.innerHTML = \u0026#34;å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿\u0026#34;; setTimeout(function () { msg.innerHTML = \u0026#34;\u0026#34;; }, 3000); }).catch(function(err) { console.error(\u0026#34;å¤åˆ¶å¤±è´¥ï¼š\u0026#34;, err); alert(\u0026#34;å¤åˆ¶SQLæ—¶å‘ç”Ÿé”™è¯¯ï¼š\u0026#34; + err.message); }); } function clearLog(obj) { obj.value = \u0026#34;\u0026#34;; } \u0026lt;/script\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h2\u0026gt;\u0026lt;font color=\u0026#34;#00bfff\u0026#34;\u0026gt; è¾“å…¥Mybatis SQLæ—¥å¿—ï¼š\u0026lt;/font\u0026gt;\u0026lt;/h2\u0026gt; \u0026lt;textarea id=\u0026#34;sqlLog\u0026#34; rows=\u0026#34;12\u0026#34; cols=\u0026#34;140\u0026#34; style=\u0026#34;font-size:12px;font-family: \u0026#39;CourierNew\u0026#39;;font-weight: bold;width: 98%;\u0026#34;\u0026gt;\u0026lt;/textarea\u0026gt; \u0026lt;div style=\u0026#34;border:0px deepskyblue solid;width:1425px;height:50px;text-align:right;\u0026#34;\u0026gt; \u0026lt;button style=\u0026#34;color:mediumblue;width:100px;height:60px\u0026#34; type=\u0026#34;button\u0026#34; onclick=\u0026#34;clearLog(document.getElementById(\u0026#39;sqlLog\u0026#39;))\u0026#34;\u0026gt;æ¸…ç©º\u0026lt;/button\u0026gt; \u0026lt;button style=\u0026#34;color:mediumblue;width:100px;height:60px\u0026#34; type=\u0026#34;submit\u0026#34; onclick=\u0026#34;f(document.getElementById(\u0026#39;sqlLog\u0026#39;))\u0026#34;\u0026gt;è§£æSQL\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;h2\u0026gt;\u0026lt;font color=\u0026#34;#32cd32\u0026#34;\u0026gt;è§£æä¸ºå¯æ‰§è¡ŒSQLï¼š\u0026lt;/font\u0026gt;\u0026lt;/h2\u0026gt; \u0026lt;textarea id=\u0026#34;d1\u0026#34; rows=\u0026#34;12\u0026#34; cols=\u0026#34;140\u0026#34; style=\u0026#34;font-size:12px;font-family: \u0026#39;CourierNew\u0026#39;;font-weight: bold;width: 98%;\u0026#34;\u0026gt;\u0026lt;/textarea\u0026gt; \u0026lt;div style=\u0026#34;border:0px deepskyblue solid;width:1425px;height:50px;text-align:right;\u0026#34;\u0026gt; \u0026lt;button style=\u0026#34;color:mediumblue;width:100px;height:60px\u0026#34; type=\u0026#34;button\u0026#34; onclick=\u0026#34;copySQL()\u0026#34;\u0026gt;å¤åˆ¶SQL\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026#34;msg\u0026#34; style=\u0026#34;color:cornflowerblue;border:0px black solid;width:800px;height:20px;text-align:right;font-style: initial;font-size: large\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 4. ä½¿ç”¨æ–¹æ³•\rå°† MyBatis çš„ SQL æ—¥å¿—ç²˜è´´åˆ°è¾“å…¥åŒºåŸŸã€‚ ç‚¹å‡»\u0026quot;è§£æSQL\u0026quot;æŒ‰é’®ã€‚ åœ¨è¾“å‡ºåŒºåŸŸæŸ¥çœ‹å¹¶å¤åˆ¶è§£æåçš„ SQL è¯­å¥ã€‚ 4.1 ç¤ºä¾‹\rå‡è®¾è¾“å…¥çš„æ—¥å¿—ä¸ºï¼š\nPreparing: INSERT INTO users (name, email) VALUES (?, ?)\rParameters: John(String), null è§£æåçš„è¾“å‡ºä¸ºï¼š\nINSERT INTO users (name, email) VALUES (\u0026#39;John\u0026#39;, NULL) 5. æ€»ç»“\ré€šè¿‡è¿™ä¸ªç®€å•çš„è„šæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿå°† MyBatis çš„ SQL æ—¥å¿—è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„ SQL è¯­å¥ï¼Œæå¤§åœ°æ–¹ä¾¿äº†å¼€å‘å’Œè°ƒè¯•å·¥ä½œã€‚å¸Œæœ›è¿™ä¸ªå·¥å…·èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼\n","date":"2025-02-19T21:52:49+08:00","permalink":"https://zg-dd.github.io/blog/mybatis-sql-log-parser/","title":"MyBatis SQL æ—¥å¿—è§£æè„šæœ¬"},{"content":" åœ¨Javaé¡¹ç›®ä¸­ï¼ŒPOï¼ˆPlain Old Java Objectï¼‰å¯¹è±¡éå¸ƒå„ä¸ªè§’è½ï¼Œä¸”å¸¸å¸¸ä¼´éšç€å¤§é‡çš„æ—¥å¿—è®°å½•éœ€æ±‚ã€‚ä¼ ç»Ÿçš„åšæ³•æ˜¯é€šè¿‡toStringæ–¹æ³•ç›´æ¥æ‰“å°è¿™äº›å¯¹è±¡ï¼Œç„¶è€Œè¿™ç§æ–¹å¼è¾“å‡ºçš„æ—¥å¿—ä¿¡æ¯å¾€å¾€ä¸å¤Ÿç»“æ„åŒ–ï¼Œç»™æ—¥å¿—æ’æŸ¥å¸¦æ¥äº†è¯¸å¤šä¸ä¾¿ã€‚ä¸ºäº†æå‡æ—¥å¿—çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€æ¬¾é«˜æ•ˆå·¥å…·ï¼Œè¯¥å·¥å…·èƒ½å¤Ÿå°†é¡¹ç›®ä¸­çº¦90%çš„æ—¥å¸¸POå¯¹è±¡æ—¥å¿—è‡ªåŠ¨è½¬æ¢ä¸ºç»“æ„åŒ–çš„JSONæ ¼å¼æ•°æ®ã€‚è¿™ä¸€è½¬å˜æå¤§åœ°ç®€åŒ–äº†ç³»ç»Ÿè¿ç»´äººå‘˜çš„å·¥ä½œï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿæ›´è¿…é€Ÿã€æ›´å‡†ç¡®åœ°å®šä½å’Œè§£å†³é—®é¢˜ã€‚\n1. è§£å†³çš„é—®é¢˜\rç¤ºä¾‹ 1ï¼šç®€å•å¯¹è±¡\nè¾“å…¥ï¼šUser(id=1, name=\u0026quot;Alice\u0026quot;, age=25)\nè¾“å‡ºï¼š{\u0026quot;User\u0026quot;: {\u0026quot;id\u0026quot;: 1, \u0026quot;name\u0026quot;: \u0026quot;Alice\u0026quot;, \u0026quot;age\u0026quot;: 25}} ç¤ºä¾‹ 2ï¼šåµŒå¥—å¯¹è±¡\nè¾“å…¥ï¼šOrder(id=1001, items=[Item(id=2001, name=\u0026quot;Book\u0026quot;)])\nè¾“å‡ºï¼š{\u0026quot;Order\u0026quot;: {\u0026quot;id\u0026quot;: 1001, \u0026quot;items\u0026quot;: [{\u0026quot;Item\u0026quot;: {\u0026quot;id\u0026quot;: 2001, \u0026quot;name\u0026quot;: \u0026quot;Book\u0026quot;}}]}}\nç¤ºä¾‹ 3ï¼šå¤æ‚ Map\nè¾“å…¥ï¼šConfig(settings={key1=\u0026quot;value1\u0026quot;, key2=[1, 2, 3]})\nè¾“å‡ºï¼š{\u0026quot;Config\u0026quot;: {\u0026quot;settings\u0026quot;: {\u0026quot;key1\u0026quot;: \u0026quot;value1\u0026quot;, \u0026quot;key2\u0026quot;: [1, 2, 3]}}} ç¤ºä¾‹4ï¼šè‡ªå®šä¹‰å¤æ‚å¯¹è±¡\nè¾“å…¥ï¼šUser(username=å¼ ä¸‰, password=123456, students=[Student(name=æå››, age=18, score=0.0, courses=null), Student(name=ç‹äº”, age=20, score=0.0, courses=[æ•°å­¦, è‹±è¯­, ç‰©ç†])], map={aa=123, bb=456, cc=ä½ å¥½})\nè¾“å‡ºï¼š{\r\u0026quot;User\u0026quot;: {\r\u0026quot;username\u0026quot;: \u0026quot;å¼ ä¸‰\u0026quot;,\r\u0026quot;password\u0026quot;: 123456,\r\u0026quot;students\u0026quot;: [\r{\r\u0026quot;Student\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;æå››\u0026quot;,\r\u0026quot;age\u0026quot;: 18,\r\u0026quot;score\u0026quot;: 0.0,\r\u0026quot;courses\u0026quot;: null\r}\r},\r{\r\u0026quot;Student\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;ç‹äº”\u0026quot;,\r\u0026quot;age\u0026quot;: 20,\r\u0026quot;score\u0026quot;: 0.0,\r\u0026quot;courses\u0026quot;: [\r\u0026quot;æ•°å­¦\u0026quot;,\r\u0026quot;è‹±è¯­\u0026quot;,\r\u0026quot;ç‰©ç†\u0026quot;\r]\r}\r}\r],\r\u0026quot;map\u0026quot;: {\r\u0026quot;aa\u0026quot;: 123,\r\u0026quot;bb\u0026quot;: 456,\r\u0026quot;cc\u0026quot;: \u0026quot;ä½ å¥½\u0026quot;\r}\r}\r} 2. ä¸‹è½½åœ°å€\rä¸‹è½½è„šæœ¬\n","date":"2025-02-19T21:48:01+08:00","permalink":"https://zg-dd.github.io/blog/java-pojo-log-json/","title":"Java PO æ—¥å¿— JSON åŒ–å·¥å…·"},{"content":"1. é—­åŒ…\r1.1 é—­åŒ…çš„å®šä¹‰\ré—­åŒ…å‡½æ•°ï¼ˆClosureï¼‰æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚åœ¨Goè¯­è¨€ä¸­ï¼Œé—­åŒ…å‡½æ•°æ˜¯æŒ‡ä¸€ä¸ªå‡½æ•°ä¸å…¶å¼•ç”¨çš„ç¯å¢ƒçš„ç»„åˆã€‚é—­åŒ…å‡½æ•°å¯ä»¥è®¿é—®å¹¶ä¿®æ”¹å…¶å¤–éƒ¨å‡½æ•°ä¸­çš„å˜é‡ï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚\n1.2 é—­åŒ…çš„ç‰¹ç‚¹\ré—­åŒ…å‡½æ•°å¯ä»¥è®¿é—®å…¶å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚ é—­åŒ…å‡½æ•°å¯ä»¥ä¿®æ”¹å…¶å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚ é—­åŒ…å‡½æ•°å¯ä»¥ä¿æŒå…¶å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åä»ç„¶å­˜åœ¨ã€‚ 1.3 é—­åŒ…çš„ç¤ºä¾‹\rpackage main import \u0026#34;fmt\u0026#34; /** * é—­åŒ… * ä¸€ä¸ªå‡½æ•°å’Œä¸å…¶ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒç»„åˆè€Œæˆçš„å®ä½“ */ func adder() func(int) int { sum := 0 // è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å¼•ç”¨äº†sumå˜é‡ return func(x int) int { // å‡½æ•°å¼•ç”¨äº†sumå˜é‡ sum += x return sum } } func main() { // è°ƒç”¨adderå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¼•ç”¨äº†sumå˜é‡ pos, neg := adder(), adder() for i := 0; i \u0026lt; 10; i++ { // è°ƒç”¨è¿”å›çš„å‡½æ•°ï¼Œå‡½æ•°å¼•ç”¨äº†sumå˜é‡ fmt.Println(pos(i), neg(-2*i)) } /** - `adder` å‡½æ•°è¿”å›ä¸€ä¸ªé—­åŒ…ã€‚æ¯ä¸ªé—­åŒ…éƒ½ç»‘å®šäº†è‡ªå·±çš„ `sum` å˜é‡ã€‚ - `pos` å’Œ `neg` æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„é—­åŒ…ï¼Œå®ƒä»¬å„è‡ªç»´æŠ¤è‡ªå·±çš„ `sum`ã€‚ è¿è¡Œç»“æœ 0 0 1 -2 3 -6 6 -12 10 -20 15 -30 21 -42 28 -56 36 -72 45 -90 */ } 2. ç±»å‹(type)\r2.1 è‡ªå®šä¹‰ç±»å‹\rGo å…è®¸ä½¿ç”¨ type å…³é”®å­—å®šä¹‰æ–°çš„ç±»å‹ã€‚\n2.2 ç±»å‹ç¤ºä¾‹\rpackage main import \u0026#34;fmt\u0026#34; // è‡ªå®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œç±»å‹åï¼šaddFun type addFun func(int) int // è‡ªå®šä¹‰ä¸€ä¸ªintç±»å‹ï¼Œç±»å‹åï¼šselfint type selfint int func adder2(x int) addFun { return func(y int) int { return x + y } } func main() { // å®šä¹‰ä¸€ä¸ªegå‡½æ•°ï¼Œå…¶ç±»å‹ä¸ºaddFunï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹ var eg addFun = adder2(10) // è°ƒç”¨egå‡½æ•° ,egå‡½æ•°æ˜¯adder2å‡½æ•°çš„è¿”å›é—­åŒ…å‡½æ•°ï¼Œæ‰§è¡Œeg ==\u0026gt; adder2(10) + y ==\u0026gt; 10 + 15 = 25 fmt.Println(eg(15)) var num1 selfint = 10 var num2 int = 20 // è‡ªå®šä¹‰ç±»å‹selfintï¼Œä¸èƒ½ç›´æ¥ä¸intç±»å‹è¿›è¡Œè¿ç®—ï¼Œéœ€è¦è½¬æ¢ fmt.Println(num1 + selfint(num2)) // æˆ–è€…ä½¿ç”¨ç±»å‹è½¬æ¢ fmt.Println(int(num1) + num2) /** * è¿è¡Œç»“æœï¼š * 25 * 30 * 30 */ } 3. å»¶è¿Ÿæ‰§è¡Œï¼ˆDeferï¼‰\r3.1 defer çš„ç”¨æ³•\rdefer è¯­å¥ä¼šå°†å…¶åé¢çš„å‡½æ•°è°ƒç”¨æ¨è¿Ÿåˆ°å¤–å±‚å‡½æ•°è¿”å›ä¹‹åæ‰§è¡Œã€‚\n3.2 defer ç¤ºä¾‹\rpackage main import \u0026#34;fmt\u0026#34; func main() { // defer æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºå»¶è¿Ÿæ‰§è¡Œä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œç›´åˆ°åŒ…å«è¯¥ defer è¯­å¥çš„å‡½æ•°æ‰§è¡Œå®Œæ¯•ã€‚ defer fmt.Println(\u0026#34;world\u0026#34;) fmt.Println(\u0026#34;hello\u0026#34;) /* * è¿è¡Œç»“æœï¼š * hello * world */ } 4. ææ…Œï¼ˆPanicï¼‰å’Œæ¢å¤ï¼ˆRecoverï¼‰\rPanicç›¸å½“ä¸æŠ›å‡ºå¼‚å¸¸ï¼ŒRecoverç›¸å½“äºæ•è·å¼‚å¸¸ï¼ŒGolangä¸­æ²¡æœ‰try..catch\n4.1 panic å’Œ recover çš„ç”¨æ³•\rpanic ç”¨äºè¡¨ç¤ºç¨‹åºé‡åˆ°äº†æ— æ³•å¤„ç†çš„é”™è¯¯ã€‚ recover ç”¨äºä» panic ä¸­æ¢å¤ã€‚ 4.2 panic å’Œ recover ç¤ºä¾‹\rpackage main import \u0026#34;fmt\u0026#34; func main() { // å®šä¹‰ä¸€ä¸ªå»¶æ—¶å‡½æ•°å¹¶æ‰§è¡Œ defer func() { // å»¶æ—¶å‡½æ•°ï¼Œç­‰å¾…ä¸»çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œæ•è·panic if r := recover(); r != nil { // æ‰“å°panicä¿¡æ¯ fmt.Println(\u0026#34;Recovered from\u0026#34;, r) } }() // æ‰§è¡Œè¯­å¥ Starting the program fmt.Println(\u0026#34;Starting the program\u0026#34;) // è§¦å‘panic ç›¸å½“äºè§¦å‘javaçš„throw new Exception() panic(\u0026#34;Something went wrong!\u0026#34;) // ä¸‹é¢è¯­å¥ä¸ä¼šè¢«æ‰§è¡Œ fmt.Println(\u0026#34;This line will not be executed\u0026#34;) /* * è¿è¡Œç»“æœï¼š * - `panic` è§¦å‘äº†ä¸€ä¸ªææ…Œï¼Œç¨‹åºä¼šä¸­æ­¢æ‰§è¡Œã€‚ - `recover` æ•è·äº†ææ…Œï¼Œç¨‹åºç»§ç»­æ‰§è¡Œã€‚ * Starting the program * Recovered from Something went wrong! */ } 5. timeåŒ…\rtimeåŒ…æ˜¯Goè¯­è¨€æ ‡å‡†åº“ä¸­æä¾›çš„ä¸€ä¸ªç”¨äºå¤„ç†æ—¶é—´çš„åŒ…ï¼Œå®ƒæä¾›äº†æ—¶é—´ç›¸å…³çš„å‡½æ•°å’Œæ•°æ®ç±»å‹ï¼Œå¯ä»¥ç”¨äºè·å–å½“å‰æ—¶é—´ã€æ ¼å¼åŒ–æ—¶é—´ã€è§£ææ—¶é—´ç­‰æ“ä½œã€‚ timeåŒ…ä¸­çš„Nowå‡½æ•°å¯ä»¥è·å–å½“å‰æ—¶é—´ï¼Œå®ƒè¿”å›ä¸€ä¸ªTimeç±»å‹çš„å€¼ï¼Œè¡¨ç¤ºå½“å‰æ—¶é—´ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š\n// 1. è·å–å½“å‰æ—¶é—´ currentTime := time.Now() fmt.Println(\u0026#34;å½“å‰æ—¶é—´ï¼š\u0026#34;, currentTime) // 2. è·å–å½“å‰æ—¶é—´çš„å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ç­‰ä¿¡æ¯ year := currentTime.Year() month := currentTime.Month() day := currentTime.Day() hour := currentTime.Hour() minute := currentTime.Minute() second := currentTime.Second() fmt.Printf(\u0026#34;å½“å‰æ—¶é—´ï¼š%då¹´%dæœˆ%dæ—¥ %dæ—¶%dåˆ†%dç§’\\n\u0026#34;, year, month, day, hour, minute, second) // 3. æ ¼å¼åŒ–æ—¶é—´ // timeåŒ…æä¾›äº†Formatå‡½æ•°ç”¨äºæ ¼å¼åŒ–æ—¶é—´ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ ¼å¼å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºæ ¼å¼åŒ–åçš„æ—¶é—´ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š fmt.Println(\u0026#34;æ ¼å¼åŒ–æ—¶é—´ï¼š\u0026#34;, currentTime.Format(\u0026#34;2006-01-02 15:04:05\u0026#34;)) // 4. è§£ææ—¶é—´ // timeåŒ…æä¾›äº†Parseå‡½æ•°ç”¨äºè§£ææ—¶é—´ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ ¼å¼å­—ç¬¦ä¸²å’Œä¸€ä¸ªæ—¶é—´å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªTimeç±»å‹çš„å€¼è¡¨ç¤ºè§£æåçš„æ—¶é—´ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š timeStr := \u0026#34;2023-01-01 12:00:00\u0026#34; parsedTime, err := time.Parse(\u0026#34;2006-01-02 15:04:05\u0026#34;, timeStr) if err != nil { fmt.Println(\u0026#34;è§£ææ—¶é—´å¤±è´¥ï¼š\u0026#34;, err) return } fmt.Println(\u0026#34;è§£ææ—¶é—´ï¼š\u0026#34;, parsedTime) // 5. æ—¶é—´é—´éš” // timeåŒ…æä¾›äº†Durationç±»å‹è¡¨ç¤ºæ—¶é—´é—´éš”ï¼Œå®ƒè¡¨ç¤ºä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹é—´çš„æ—¶é—´å·®ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š duration := time.Duration(10) * time.Second fmt.Println(\u0026#34;æ—¶é—´é—´éš”ï¼š\u0026#34;, duration) // 6. æ—¶é—´æ“ä½œ // timeåŒ…æä¾›äº†Addå‡½æ•°ç”¨äºå°†æ—¶é—´é—´éš”æ·»åŠ åˆ°æ—¶é—´ä¸Šï¼Œè¿”å›ä¸€ä¸ªæ–°çš„æ—¶é—´ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š newTime := currentTime.Add(duration) fmt.Println(\u0026#34;æ–°æ—¶é—´ï¼š\u0026#34;, newTime) // 7. æ—¶é—´æ¯”è¾ƒ // timeåŒ…æä¾›äº†Beforeã€Afterå’ŒEqualå‡½æ•°ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæ—¶é—´çš„å¤§å°å…³ç³»ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š if currentTime.Before(parsedTime) { fmt.Println(\u0026#34;å½“å‰æ—¶é—´åœ¨è§£ææ—¶é—´ä¹‹å‰\u0026#34;) } else if currentTime.After(parsedTime) { fmt.Println(\u0026#34;å½“å‰æ—¶é—´åœ¨è§£ææ—¶é—´ä¹‹å\u0026#34;) } else { fmt.Println(\u0026#34;å½“å‰æ—¶é—´ä¸è§£ææ—¶é—´ç›¸ç­‰\u0026#34;) } if currentTime.Equal(parsedTime) { fmt.Println(\u0026#34;å½“å‰æ—¶é—´ä¸è§£ææ—¶é—´ç›¸ç­‰\u0026#34;) } /** * ä»¥ä¸Šè¿è¡Œç»“æœï¼š * å½“å‰æ—¶é—´ï¼š 2023-10-13 10:18:00.0000007 +0800 CST m=+0.000014679 * å½“å‰æ—¶é—´ï¼š 2023å¹´10æœˆ13æ—¥ 10æ—¶18åˆ†0ç§’ * æ ¼å¼åŒ–æ—¶é—´ï¼š 2023-10-13 10:18:00 * è§£ææ—¶é—´ï¼š 2023-01-01 12:00:00 +0000 UTC * æ—¶é—´é—´éš”ï¼š 10s * æ–°æ—¶é—´ï¼š 2023-10-13 10:28:00.0000007 +0800 CST m=+10.000014679 * å½“å‰æ—¶é—´åœ¨è§£ææ—¶é—´ä¹‹å‰ * å½“å‰æ—¶é—´ä¸è§£ææ—¶é—´ä¸ç›¸ç­‰ */ æ€»ç»“ï¼š\nè·å–å½“å‰æ—¶é—´ï¼š\ttime.Now() è·å–æ—¶é—´çš„è¯¦ç»†ä¿¡æ¯ï¼š currentTime.Year() | currentTime.Month() | currentTime.Day() | currentTime.Hour() | currentTime.Minute() | currentTime.Second() æ ¼å¼åŒ–æ—¶é—´ï¼š currentTime.Format(\u0026ldquo;2006-01-02 15:04:05\u0026rdquo;) è§£ææ—¶é—´ï¼š time.Parse(\u0026ldquo;2006-01-02 15:04:05\u0026rdquo;, timeStr) æ—¶é—´é—´éš”ï¼š time.Duration(10) * time.Second æ—¶é—´æ“ä½œï¼š currentTime.Add(duration) æ—¶é—´æ¯”è¾ƒï¼š currentTime.Before(parsedTime) | currentTime.After(parsedTime) | currentTime.Equal(parsedTime) ","date":"2025-02-13T17:45:37+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-07/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬ä¸ƒç¯‡ é—­åŒ…\u0026type defer panic recoveräº†è§£\u0026timeåŒ…ã€‘"},{"content":"1. Mapæ•°æ®ç±»å‹\rMapç»“æ„æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œå…¶ä¸­æ¯ä¸ªé”®éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”æ¯ä¸ªé”®éƒ½æ˜ å°„åˆ°ä¸€ä¸ªå€¼ã€‚ Mapæ˜¯æ— åºçš„ï¼Œå³å…ƒç´ çš„é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚ Mapçš„åˆå§‹å€¼æ˜¯nilï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦ä½¿ç”¨makeå‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªMapã€‚ Mapç»“æ„ä¸ºå¼•ç”¨æ•°æ®ç±»å‹\n1.1. Mapå£°æ˜å’Œåˆå§‹åŒ–\r// Mapçš„å£°æ˜,å…¶ä¸­keyTypeæ˜¯é”®çš„ç±»å‹ï¼ŒvalueTypeæ˜¯å€¼çš„ç±»å‹ // 1. å…ˆå£°æ˜ var å˜é‡å map[keyType]valueType var map1 map[string]int // 2. ä½¿ç”¨makeå‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªMap map1 = make(map[string]int) map1[\u0026#34;a\u0026#34;] = 1 map1[\u0026#34;b\u0026#34;] = 2 map1[\u0026#34;c\u0026#34;] = 3 // 2. å£°æ˜å³åˆ›å»º ,å¹¶èµ‹å€¼ var å˜é‡å = make(map[keyType]valueType) var map2 = make(map[string]int) map2[\u0026#34;a\u0026#34;] = 4 map2[\u0026#34;b\u0026#34;] = 5 map2[\u0026#34;c\u0026#34;] = 6 // 3. ç®€çŸ­å£°æ˜ å˜é‡å := map[keyType]valueType map3 := map[string]int{} map3[\u0026#34;a\u0026#34;] = 7 map3[\u0026#34;b\u0026#34;] = 8 map3[\u0026#34;c\u0026#34;] = 9 // 4. å£°æ˜å³åˆ›å»º,å¹¶èµ‹å€¼ var map4 = map[string]int{\u0026#34;a\u0026#34;: 10, \u0026#34;b\u0026#34;: 11, \u0026#34;c\u0026#34;: 12} // 5. ç®€çŸ­å£°æ˜,å¹¶èµ‹å€¼ map5 := map[string]int{\u0026#34;a\u0026#34;: 13, \u0026#34;b\u0026#34;: 14, \u0026#34;c\u0026#34;: 15} // 6. å£°æ˜ä¸€ä¸ªmapå’Œå®šä¹‰ä¸€ä¸ªmap,å…¶å€¼çš„åŒºåˆ« var map6 map[string]int var map7 = map[string]int{} fmt.Printf(\u0026#34;map1 ç±»å‹ï¼š%T å€¼ï¼š%v map1 æ˜¯å¦ä¸º nil %v \\n\u0026#34;, map1, map1, map1 == nil) fmt.Printf(\u0026#34;map2 ç±»å‹ï¼š%T å€¼ï¼š%v map2 æ˜¯å¦ä¸º nil %v \\n\u0026#34;, map2, map2, map2 == nil) fmt.Printf(\u0026#34;map3 ç±»å‹ï¼š%T å€¼ï¼š%v map3 æ˜¯å¦ä¸º nil %v \\n\u0026#34;, map3, map3, map3 == nil) fmt.Printf(\u0026#34;map4 ç±»å‹ï¼š%T å€¼ï¼š%v map4 æ˜¯å¦ä¸º nil %v \\n\u0026#34;, map4, map4, map4 == nil) fmt.Printf(\u0026#34;map5 ç±»å‹ï¼š%T å€¼ï¼š%v map5 æ˜¯å¦ä¸º nil %v \\n\u0026#34;, map5, map5, map5 == nil) fmt.Printf(\u0026#34;map6 ç±»å‹ï¼š%T å€¼ï¼š%v map6 æ˜¯å¦ä¸º nil %v \\n\u0026#34;, map6, map6, map6 == nil) // map6 æ˜¯ nilï¼Œä¸èƒ½ä½¿ç”¨ï¼Œå› ä¸ºä»…åšäº†å£°æ˜ï¼Œæ²¡æœ‰åˆå§‹åŒ– fmt.Printf(\u0026#34;map7 ç±»å‹ï¼š%T å€¼ï¼š%v map7 æ˜¯å¦ä¸º nil %v \\n\u0026#34;, map7, map7, map7 == nil) // map7 æ˜¯ä¸€ä¸ªç©ºçš„mapï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ /** * Mapè·å–é•¿åº¦å‡½æ•° len()ï¼Œç»“æœä¸ºé”®å€¼å¯¹ä¸ªæ•° */ map8 := map[string]string{ \u0026#34;one\u0026#34;: \u0026#34;java\u0026#34;, \u0026#34;two\u0026#34;: \u0026#34;python\u0026#34;, \u0026#34;three\u0026#34;: \u0026#34;go\u0026#34;, } fmt.Println(len(map1)) /** * ä»¥ä¸Šè¿è¡Œç»“æœ * map1 ç±»å‹ï¼šmap[string]int å€¼ï¼šmap[a:1 b:2 c:3] map1 æ˜¯å¦ä¸º nil false * map2 ç±»å‹ï¼šmap[string]int å€¼ï¼šmap[a:4 b:5 c:6] map2 æ˜¯å¦ä¸º nil false * map3 ç±»å‹ï¼šmap[string]int å€¼ï¼šmap[a:7 b:8 c:9] map3 æ˜¯å¦ä¸º nil false * map4 ç±»å‹ï¼šmap[string]int å€¼ï¼šmap[a:10 b:11 c:12] map4 æ˜¯å¦ä¸º nil false * map5 ç±»å‹ï¼šmap[string]int å€¼ï¼šmap[a:13 b:14 c:15] map5 æ˜¯å¦ä¸º nil false * map6 ç±»å‹ï¼šmap[string]int å€¼ï¼š\u0026lt;nil\u0026gt; map6 æ˜¯å¦ä¸º nil true * map7 ç±»å‹ï¼šmap[string]int å€¼ï¼šmap[] map7 æ˜¯å¦ä¸º nil false * 3 */ 1.2. Map éå†\r/** * Mapçš„éå† */ map1 := map[string]string{ \u0026#34;one\u0026#34;: \u0026#34;java\u0026#34;, \u0026#34;two\u0026#34;: \u0026#34;python\u0026#34;, \u0026#34;three\u0026#34;: \u0026#34;go\u0026#34;, } // 1. foriéå†æ–¹å¼ fmt.Println(\u0026#34;1. foriéå†æ–¹å¼\u0026#34;) keys := make([]string, 0, len(map1)) for k := range map1 { keys = append(keys, k) } for i := 0; i \u0026lt; len(keys); i++ { fmt.Printf(\u0026#34;key=%v value=%v\\n\u0026#34;, keys[i], map1[keys[i]]) } // 2. forrangeéå†æ–¹å¼ fmt.Println(\u0026#34;2. forrangeéå†æ–¹å¼\u0026#34;) for k, v := range map1 { fmt.Printf(\u0026#34;key=%v value=%v\\n\u0026#34;, k, v) } /** * ç»“æœï¼š * 1. foriéå†æ–¹å¼ * key=one value=java * key=two value=python * key=three value=go * 2. forrangeéå†æ–¹å¼ * key=one value=java * key=two value=python * key=three value=go */ 1.3 Mapå¢åˆ æ”¹æŸ¥\rmap1 := map[string]string{ \u0026#34;one\u0026#34;: \u0026#34;java\u0026#34;, \u0026#34;two\u0026#34;: \u0026#34;python\u0026#34;, \u0026#34;three\u0026#34;: \u0026#34;go\u0026#34;, } // mapçš„å¢åˆ æ”¹æŸ¥ // å¢ map1[\u0026#34;four\u0026#34;] = \u0026#34;php\u0026#34; fmt.Printf(\u0026#34;map1: %v\\n\u0026#34;, map1) // åˆ  delete(map1, \u0026#34;one\u0026#34;) fmt.Printf(\u0026#34;map1: %v\\n\u0026#34;, map1) // æ”¹ map1[\u0026#34;two\u0026#34;] = \u0026#34;c++\u0026#34; // æŸ¥ value, ok := map1[\u0026#34;two\u0026#34;] // okä¸ºtrueè¡¨ç¤ºå­˜åœ¨,ä¸ºfalseè¡¨ç¤ºä¸å­˜åœ¨ if ok { fmt.Println(value) } value1, ok1 := map1[\u0026#34;five\u0026#34;] // okä¸ºtrueè¡¨ç¤ºå­˜åœ¨,ä¸ºfalseè¡¨ç¤ºä¸å­˜åœ¨ if ok1 { fmt.Println(value1) } else { fmt.Println(\u0026#34;fiveä¸å­˜åœ¨\u0026#34;) } /* * ç»“æœ * map1: map[four:php three:go two:python] * map1: map[three:go two:python] * c++ * fiveä¸å­˜åœ¨ */ 2. function (å‡½æ•°)\rå‡½æ•°æ˜¯ä¸€æ®µå¯é‡å¤ä½¿ç”¨çš„ä»£ç å—ï¼Œç”¨æ¥å®Œæˆç‰¹å®šçš„åŠŸèƒ½\nå‡½æ•°çš„ç‰¹ç‚¹æœ‰ä¸‹ï¼š\nå‡½æ•°çš„ä½œç”¨ï¼šæé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œæé«˜ä»£ç çš„ç»´æŠ¤æ€§ .ã€‘å‡½æ•°çš„è¿”å›å€¼ï¼šå‡½æ•°çš„è¿”å›å€¼æ˜¯é€šè¿‡returnè¯­å¥æ¥å®ç°çš„ï¼Œreturnè¯­å¥å¯ä»¥è¿”å›ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥è¿”å›å¤šä¸ªå€¼ å‡½æ•°çš„å‚æ•°ï¼šå‡½æ•°çš„å‚æ•°æ˜¯é€šè¿‡å‡½æ•°çš„å‚æ•°åˆ—è¡¨æ¥å®ç°çš„ï¼Œå‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„ä¸ªæ•° å‡½æ•°å˜é‡ä½œç”¨åŸŸï¼šå‡½æ•°å˜é‡ä½œç”¨åŸŸæ˜¯æŒ‡åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ï¼Œè¯¥å˜é‡åªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œå‡½æ•°å¤–éƒ¨æ— æ³•è®¿é—®è¯¥å˜é‡ å‡½æ•°çš„è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨ï¼šå‡½æ•°çš„è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨æ˜¯å‡½æ•°çš„ç»„æˆéƒ¨åˆ†ï¼Œå‡½æ•°çš„è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨æ˜¯å‡½æ•°çš„è¾“å‡ºå’Œè¾“å…¥ï¼Œå‡½æ•°çš„è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨æ˜¯å‡½æ•°çš„æ¥å£ï¼Œå‡½æ•°çš„è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨æ˜¯å‡½æ•°çš„å¥‘çº¦ 2.1 å‡½æ•°å„ç§å®šä¹‰æ–¹å¼\rpackage main import \u0026#34;fmt\u0026#34; /* * å‡½æ•°åˆè¯† ä»€ä¹ˆæ˜¯å‡½æ•°ï¼šå‡½æ•°æ˜¯ä¸€æ®µå¯é‡å¤ä½¿ç”¨çš„ä»£ç å—ï¼Œç”¨æ¥å®Œæˆç‰¹å®šçš„åŠŸèƒ½ å‡½æ•°çš„ä½œç”¨ï¼šæé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œæé«˜ä»£ç çš„ç»´æŠ¤æ€§ å‡½æ•°çš„å®šä¹‰ï¼šfunc å‡½æ•°å(å‚æ•°åˆ—è¡¨) è¿”å›å€¼åˆ—è¡¨ {å‡½æ•°ä½“} å‡½æ•°çš„è°ƒç”¨ï¼šå‡½æ•°å(å‚æ•°åˆ—è¡¨) å‡½æ•°çš„è¿”å›å€¼ï¼šå‡½æ•°çš„è¿”å›å€¼æ˜¯é€šè¿‡returnè¯­å¥æ¥å®ç°çš„ï¼Œreturnè¯­å¥å¯ä»¥è¿”å›ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥è¿”å›å¤šä¸ªå€¼ å‡½æ•°çš„å‚æ•°ï¼šå‡½æ•°çš„å‚æ•°æ˜¯é€šè¿‡å‡½æ•°çš„å‚æ•°åˆ—è¡¨æ¥å®ç°çš„ï¼Œå‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„ä¸ªæ•° å‡½æ•°çš„è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨ï¼šå‡½æ•°çš„è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨æ˜¯å‡½æ•°çš„ç»„æˆéƒ¨åˆ†ï¼Œå‡½æ•°çš„è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨æ˜¯å‡½æ•°çš„è¾“å‡ºå’Œè¾“å…¥ï¼Œå‡½æ•°çš„è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨æ˜¯å‡½æ•°çš„æ¥å£ï¼Œå‡½æ•°çš„è¿”å›å€¼å’Œå‚æ•°åˆ—è¡¨æ˜¯å‡½æ•°çš„å¥‘çº¦ * */ // å‡½æ•°å®šä¹‰ // func å‡½æ•°å(å‚æ•°åˆ—è¡¨) è¿”å›å€¼åˆ—è¡¨ { // å‡½æ•°ä½“ // } /* * 1. æ— å‚æ•°æ— è¿”å›å€¼ */ func sayHello() { fmt.Println(\u0026#34;hello world\u0026#34;) } /* * 2. æœ‰å‚æ•°æ— è¿”å›å€¼ * @param name string */ func sayHello2(name string) { fmt.Println(\u0026#34;hello\u0026#34;, name) } /** * 2. æœ‰å‚æ•°æœ‰è¿”å›å€¼ * @param a int * @param b int * @return int */ func add(a int, b int) int { return a + b } /* * 3. çœç•¥å‚æ•°ç±»å‹ï¼Œæ­¤æ—¶açš„ç±»å‹ä¸bçš„ç±»å‹ä¿æŒä¸€è‡´ * @param a int * @param b int * @return int */ func add2(a, b int) int { return a + b } /** * 4. çœç•¥è¿”å›å€¼ï¼Œæ­¤æ—¶å‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¸ºint * @param a int * @param b int * @return int */ func add3(a, b int) (c int) { // c := a + b c = a + b return // return c } /** * 5. å¤šä¸ªè¿”å›å€¼ * @param a int * @param b int * @return int ä¹‹å’Œ * @return int ä¹‹å·® */ func add4(a, b int) (int, int) { return a + b, a - b } /** * 6. å‘½åè¿”å›å€¼ * @param a int * @param b int * @return int ä¹‹å’Œ * @return int ä¹‹å·® */ func add5(a, b int) (sum, diff int) { sum = a + b diff = a - b return } /** * 7. å¯å˜å‚æ•° * @param a ...int * @return int */ func add6(a ...int) int { sum := 0 for _, v := range a { sum += v } return sum } /** * 8. å‡½æ•°åšå½¢å‚ * @param a int * @param b int * @param op func(int, int) int è¡¨ç¤ºå‚æ•°ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªintç±»å‹çš„å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªintç±»å‹çš„å€¼ */ func opreate(a, b int, op func(int, int) int) int { return op(a, b) // è°ƒç”¨å‡½æ•° } /** * 9. å‡½æ•°åšè¿”å›å€¼ * @param a int * @param b int * @return func() string */ func add7(a, b int) func() string { // å†…éƒ¨å®šä¹‰ä¸€ä¸ªå‡½æ•° f := func() string { return fmt.Sprintf(\u0026#34;%d + %d = %d\u0026#34;, a, b, a+b) // è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² } // è¿™é‡Œåªæ˜¯å®šä¹‰å‡½æ•°ï¼Œæ²¡æœ‰è°ƒç”¨å‡½æ•°ï¼Œè°ƒç”¨å‡½æ•°éœ€è¦ä½¿ç”¨f() return f // è¿”å›å‡½æ•° } /** * 10. åŒ¿åå‡½æ•° * è§£é‡Šï¼šåŒ¿åå‡½æ•°æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ï¼ŒåŒ¿åå‡½æ•°å¯ä»¥èµ‹å€¼ç»™å˜é‡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨ * * @param a int æ•°å€¼1 * @param b int æ•°å€¼2 * @return func() string è¿”å›ç±»å‹ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ç±»å‹ä¸ºstring */ func add8(a, b int) func() string { return func() string { // åŒ¿åå‡½æ•°çš„å®šä¹‰ï¼Œæ²¡æœ‰å‡½æ•°å return fmt.Sprintf(\u0026#34;%d + %d = %d\u0026#34;, a, b, a+b) // è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸² } // åŒ¿åå‡½æ•°çš„è°ƒç”¨ } // mainå‡½æ•° å…¥å£å‡½æ•° func main() { sayHello() sayHello2(\u0026#34;å¼ ä¸‰\u0026#34;) fmt.Printf(\u0026#34;add %d\\n\u0026#34;, add(1, 2)) fmt.Printf(\u0026#34;add2 %d\\n\u0026#34;, add2(3, 4)) fmt.Printf(\u0026#34;add3 %d\\n\u0026#34;, add3(5, 6)) sum1, diff1 := add4(7, 8) fmt.Printf(\u0026#34;add4 %d %d\\n\u0026#34;, sum1, diff1) sum2, diff2 := add5(9, 10) fmt.Printf(\u0026#34;add5 %d %d\\n\u0026#34;, sum2, diff2) fmt.Printf(\u0026#34;add6 %d\\n\u0026#34;, add6(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)) fmt.Printf(\u0026#34;opreate %d\\n\u0026#34;, opreate(1, 2, add)) fmt.Printf(\u0026#34;opreate %d\\n\u0026#34;, opreate(2, 4, func(i1, i2 int) int { // è‡ªå®šä¹‰åŒ¿åå‡½æ•°åšå‚æ•° return i1 * i2 // è¿”å›ä¸¤ä¸ªæ•°çš„ä¹˜ç§¯ })) fmt.Printf(\u0026#34;add7 %s\\n\u0026#34;, add7(1, 2)()) fmt.Printf(\u0026#34;add8 %s\\n\u0026#34;, add8(3, 4)()) /** * ä»¥ä¸Šè¿è¡Œç»“æœï¼š * hello world * hello å¼ ä¸‰ * add 3 * add2 7 * add3 11 * add4 15 -3 * add5 19 -1 * add6 55 * opreate 3 * opreate 8 * add7 1 + 2 = 3 * add8 3 + 4 = 7 */ } ","date":"2025-02-11T20:05:09+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-06/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬å…­ç¯‡ å¤åˆæ•°æ®ç±»å‹map\u0026å‡½æ•°åˆè¯†ã€‘"},{"content":"1. æ•°ç»„ï¼ˆArrayï¼‰\ræ•°ç»„: ä¸€ç³»åˆ—å›ºå®šé•¿åº¦ã€åŒä¸€ç±»å‹æ•°æ®çš„é›†åˆã€‚æ•°ç»„ä¸ºå€¼ç±»å‹\n1.1 æ•°ç»„çš„å®šä¹‰\rvar å˜é‡å = [å…ƒç´ ä¸ªæ•°]\u0026lt;æ•°æ®ç±»å‹\u0026gt; // å£°æ˜ + åˆå§‹åŒ–ï¼Œæ­¤æ—¶å¯å°†[å…ƒç´ ä¸ªæ•°]æ›¿æ¢ä¸º[...]ï¼Œè¡¨ç¤ºåˆå§‹åŒ–ä»»æ„å¤šä¸ªæ•°æ® var å˜é‡å = [å…ƒç´ ä¸ªæ•°]\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} å˜é‡å:= [å…ƒç´ ä¸ªæ•°]\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} ç¤ºä¾‹ï¼š\n// æ•°ç»„çš„å®šä¹‰ var arr1 [4]int // lenè·å–æ•°æ®é•¿åº¦ fmt.Printf(\u0026#34;ç±»å‹ï¼š%T; \\tæ•°ç»„é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr1, len(arr1), arr1) ç»“æœï¼š\nç±»å‹ï¼š[4]int; æ•°ç»„é•¿åº¦ï¼š4; æ•°æ®ï¼š[0 0 0 0] 1.2 åˆå§‹åŒ–æ•°ç»„\r// æ•°ç»„çš„å®šä¹‰ var arr1 [4]int // lenè·å–æ•°æ®é•¿åº¦ fmt.Printf(\u0026#34;ç±»å‹ï¼š%T; \\tæ•°ç»„é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr1, len(arr1), arr1) /* æ•°ç»„åˆå§‹åŒ– */ // 1.æ–¹å¼ä¸€ arr1[0] = 1 arr1[3] = 4 fmt.Printf(\u0026#34;æ–¹å¼ä¸€: ç±»å‹ï¼š%T; \\tæ•°ç»„é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr1, len(arr1), arr1) // 2. æ–¹å¼äºŒ var å˜é‡å = [å…ƒç´ ä¸ªæ•°]\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} var arr2 = [3]float64{1, 2, 4.6} fmt.Printf(\u0026#34;æ–¹å¼äºŒ: ç±»å‹ï¼š%T; \\tæ•°ç»„é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr2, len(arr2), arr2) // 3. æ–¹å¼ä¸‰ å˜é‡å:= [å…ƒç´ ä¸ªæ•°]\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} arr3 := [3]string{\u0026#34;java\u0026#34;, \u0026#34;Golang\u0026#34;, \u0026#34;Python\u0026#34;} fmt.Printf(\u0026#34;æ–¹å¼ä¸‰: ç±»å‹ï¼š%T; \\tæ•°ç»„é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr3, len(arr3), arr3) // 4. æ–¹å¼å›› var å˜é‡å = [...]\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} æˆ– å˜é‡å:= [...]\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} arr4 := [...]int{2, 4, 6, 7, 8} fmt.Printf(\u0026#34;æ–¹å¼å››: ç±»å‹ï¼š%T; \\tæ•°ç»„é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr4, len(arr4), arr4) // 5. æ–¹å¼äº” æŒ‡å®šä¸‹æ ‡ç´¢å¼•åˆå§‹åŒ–ç´¢å¼• arr5 := [...]float64{0: 2, 2: 3.5, 5: 4.6, 7: 9} fmt.Printf(\u0026#34;æ–¹å¼äº”: ç±»å‹ï¼š%T; \\tæ•°ç»„é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr5, len(arr5), arr5) ç»“æœï¼š\nç±»å‹ï¼š[4]int; æ•°ç»„é•¿åº¦ï¼š4; æ•°æ®ï¼š[0 0 0 0] æ–¹å¼ä¸€: ç±»å‹ï¼š[4]int; æ•°ç»„é•¿åº¦ï¼š4; æ•°æ®ï¼š[1 0 0 4] æ–¹å¼äºŒ: ç±»å‹ï¼š[3]float64; æ•°ç»„é•¿åº¦ï¼š3; æ•°æ®ï¼š[1 2 4.6] æ–¹å¼ä¸‰: ç±»å‹ï¼š[3]string; æ•°ç»„é•¿åº¦ï¼š3; æ•°æ®ï¼š[java Golang Python] æ–¹å¼å››: ç±»å‹ï¼š[5]int; æ•°ç»„é•¿åº¦ï¼š5; æ•°æ®ï¼š[2 4 6 7 8] æ–¹å¼äº”: ç±»å‹ï¼š[8]float64; æ•°ç»„é•¿åº¦ï¼š8; æ•°æ®ï¼š[2 0 3.5 0 0 4.6 0 9] 1.3 æ•°æ®çš„å¾ªç¯éå†\r/* æ•°ç»„çš„å¾ªç¯éå† */ arr6 := [3]string{\u0026#34;java\u0026#34;, \u0026#34;Golang\u0026#34;, \u0026#34;Python\u0026#34;} // 1. ä½¿ç”¨foriå¾ªç¯ fmt.Printf(\u0026#34;foriå¾ªç¯ \u0026#34;) for i := 0; i \u0026lt; len(arr6); i++ { fmt.Printf(\u0026#34;ä¸‹æ ‡%v: å€¼ï¼š%v; \\t\u0026#34;, i, arr6[i]) } fmt.Println() // 2. ä½¿ç”¨for range fmt.Printf(\u0026#34;for rangeå¾ªç¯ \u0026#34;) for index, value := range arr6 { fmt.Printf(\u0026#34;ä¸‹æ ‡%v: å€¼ï¼š%v; \\t\u0026#34;, index, value) } ç»“æœï¼š\nforiå¾ªç¯ ä¸‹æ ‡0: å€¼ï¼šjava; ä¸‹æ ‡1: å€¼ï¼šGolang; ä¸‹æ ‡2: å€¼ï¼šPython; for rangeå¾ªç¯ ä¸‹æ ‡0: å€¼ï¼šjava; ä¸‹æ ‡1: å€¼ï¼šGolang; ä¸‹æ ‡2: å€¼ï¼šPython; 1.4 å¤šç»´æ•°ç»„\r// 2ç»´æ•°ç»„ä¸ºä¾‹ var å˜é‡å = [è¡Œä¸ªæ•°][åˆ—ä¸ªæ•°]æ•°æ®ç±»å‹{{}} var arr7 = [3][3]int{ {1, 2, 3}, // æ¯ä¸€è¡Œæ•°æ® {4, 5, 6}, {7, 8, 9}, } fmt.Printf(\u0026#34;ç±»å‹ï¼š%T; \\tæ•°ç»„é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr7, len(arr7), arr7) // å¯ä»¥å¿½ç•¥è¡Œçš„æ•°æ®ä¸ªæ•°ï¼Œåˆ—çš„æ•°æ®ä¸ªæ•°ä¸å…è®¸å¿½ç•¥ var arr8 = [...][2]string{ {\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;}, {\u0026#34;c\u0026#34;, \u0026#34;d\u0026#34;}, } fmt.Printf(\u0026#34;ç±»å‹ï¼š%T; \\tæ•°ç»„é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr8, len(arr8), arr8) // äºŒç»´æ•°ç»„å¾ªç¯ for i := 0; i \u0026lt; len(arr7); i++ { for j := 0; j \u0026lt; len(arr7[i]); j++ { fmt.Printf(\u0026#34;%vè¡Œ%våˆ—: å€¼ï¼š%v; \\t\u0026#34;, i+1, j+1, arr7[i][j]) } fmt.Println() } for row, rowValue := range arr8 { for col, value := range rowValue { fmt.Printf(\u0026#34;%vè¡Œ%våˆ—: å€¼ï¼š%v; \\t\u0026#34;, row+1, col+1, value) } fmt.Println() } ç»“æœï¼š\nç±»å‹ï¼š[3][3]int; æ•°ç»„é•¿åº¦ï¼š3; æ•°æ®ï¼š[[1 2 3] [4 5 6] [7 8 9]] ç±»å‹ï¼š[2][2]string; æ•°ç»„é•¿åº¦ï¼š2; æ•°æ®ï¼š[[a b] [c d]] 1è¡Œ1åˆ—: å€¼ï¼š1; 1è¡Œ2åˆ—: å€¼ï¼š2; 1è¡Œ3åˆ—: å€¼ï¼š3; 2è¡Œ1åˆ—: å€¼ï¼š4; 2è¡Œ2åˆ—: å€¼ï¼š5; 2è¡Œ3åˆ—: å€¼ï¼š6; 3è¡Œ1åˆ—: å€¼ï¼š7; 3è¡Œ2åˆ—: å€¼ï¼š8; 3è¡Œ3åˆ—: å€¼ï¼š9; 1è¡Œ1åˆ—: å€¼ï¼ša; 1è¡Œ2åˆ—: å€¼ï¼šb; 2è¡Œ1åˆ—: å€¼ï¼šc; 2è¡Œ2åˆ—: å€¼ï¼šd; 2. åˆ‡ç‰‡ï¼ˆSliceï¼‰\råˆ‡ç‰‡ï¼šåŸºäºæ•°ç»„å®ç°çš„ä¸€å±‚å°è£…ï¼Œå¯å˜é•¿åº¦çš„åºåˆ—ï¼Œå¯è‡ªåŠ¨æ‰©å®¹ã€‚åˆ‡ç‰‡ä¸ºå¼•ç”¨ç±»å‹\n2.1 åˆ‡ç‰‡å£°æ˜ã€åˆå§‹åŒ–\rvar å˜é‡å = []\u0026lt;æ•°æ®ç±»å‹\u0026gt; // å£°æ˜ + åˆå§‹åŒ– var å˜é‡å = []\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} å˜é‡å:= []\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} ç¤ºä¾‹ï¼š\n// åˆ‡ç‰‡çš„å®šä¹‰ var arr1 []int // lenè·å–æ•°æ®é•¿åº¦ fmt.Printf(\u0026#34;ç±»å‹ï¼š%T; \\tåˆ‡ç‰‡é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr1, len(arr1), arr1) /* åˆ‡ç‰‡åˆå§‹åŒ– */ // 1. æ–¹å¼ä¸€ var å˜é‡å = []\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} var arr2 = []float64{1, 2, 4.6} fmt.Printf(\u0026#34;æ–¹å¼ä¸€: ç±»å‹ï¼š%T; \\tåˆ‡ç‰‡é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr2, len(arr2), arr2) // 2. æ–¹å¼äºŒ å˜é‡å:= []\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} arr3 := []string{\u0026#34;java\u0026#34;, \u0026#34;Golang\u0026#34;, \u0026#34;Python\u0026#34;} fmt.Printf(\u0026#34;æ–¹å¼äºŒ: ç±»å‹ï¼š%T; \\tåˆ‡ç‰‡é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr3, len(arr3), arr3) // 3. æ–¹å¼ä¸‰ var å˜é‡å = []\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} æˆ– å˜é‡å:= []\u0026lt;æ•°æ®ç±»å‹\u0026gt;{} arr4 := []int{2, 4, 6, 7, 8} fmt.Printf(\u0026#34;æ–¹å¼ä¸‰: ç±»å‹ï¼š%T; \\tåˆ‡ç‰‡é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr4, len(arr4), arr4) // 4. æ–¹å¼å›› æŒ‡å®šä¸‹æ ‡ç´¢å¼•åˆå§‹åŒ–ç´¢å¼• arr5 := []float64{0: 2, 2: 3.5, 5: 4.6, 7: 9} fmt.Printf(\u0026#34;æ–¹å¼å››: ç±»å‹ï¼š%T; \\tåˆ‡ç‰‡é•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr5, len(arr5), arr5) // 5. åˆ‡ç‰‡çš„å¾ªç¯å’Œæ•°ç»„ä¸€è‡´ï¼Œè¿™é‡Œä¸ä¾‹ä¸¾ ç»“æœï¼š\nç±»å‹ï¼š[]int; åˆ‡ç‰‡é•¿åº¦ï¼š0; æ•°æ®ï¼š[] æ–¹å¼ä¸€: ç±»å‹ï¼š[]float64; åˆ‡ç‰‡é•¿åº¦ï¼š3; æ•°æ®ï¼š[1 2 4.6] æ–¹å¼äºŒ: ç±»å‹ï¼š[]string; åˆ‡ç‰‡é•¿åº¦ï¼š3; æ•°æ®ï¼š[java Golang Python] æ–¹å¼ä¸‰: ç±»å‹ï¼š[]int; åˆ‡ç‰‡é•¿åº¦ï¼š5; æ•°æ®ï¼š[2 4 6 7 8] æ–¹å¼å››: ç±»å‹ï¼š[]float64; åˆ‡ç‰‡é•¿åº¦ï¼š8; æ•°æ®ï¼š[2 0 3.5 0 0 4.6 0 9] 2.2 åŸºäºæ•°ç»„åˆ›å»ºåˆ‡ç‰‡\rç¤ºä¾‹ï¼š\n// åŸºäºæ•°ç»„å®šä¹‰åˆ‡ç‰‡ var arr1 = [5]int{10, 29, 49, 58, 32} fmt.Printf(\u0026#34;ç±»å‹ï¼š%T; \\té•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, arr1, len(arr1), arr1) // 1. åˆ‡ç‰‡è·å–ï¼Œarr1[:]è·å–arr1ä¸­æ‰€æœ‰çš„æ•°æ® s1 := arr1[:] // åˆ‡ç‰‡æ•°æ®ç±»å‹ä¸º[]int,æ•°ç»„æ•°æ®ç±»å‹ä¸º[5]int fmt.Printf(\u0026#34;è·å–æ‰€æœ‰æ•°æ®--ç±»å‹ï¼š%T; \\té•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, s1, len(s1), s1) // 2. åˆ‡ç‰‡è·å–ï¼Œarr1[2:]è·å–arr1ä¸­ä»ä¸‹æ ‡ä¸º2å¼€å§‹ä¹‹åæ‰€æœ‰çš„æ•°æ®ã€åŒ…å«ä¸‹æ ‡2ã€‘ s2 := arr1[2:] fmt.Printf(\u0026#34;è·å–ä¸‹æ ‡ä¸º2å¼€å§‹ä¹‹åæ‰€æœ‰çš„æ•°æ®--ç±»å‹ï¼š%T; \\té•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, s1, len(s2), s2) // 3. åˆ‡ç‰‡è·å–ï¼Œarr1[:2]è·å–arr1ä¸­ä»ä¸‹æ ‡ä¸º2ä¹‹å‰æ‰€æœ‰çš„æ•°æ®ã€ä¸åŒ…å«ä¸‹æ ‡2ã€‘ s3 := arr1[:2] fmt.Printf(\u0026#34;è·å–ä¸‹æ ‡ä¸º2ä¹‹å‰æ‰€æœ‰çš„æ•°æ®--ç±»å‹ï¼š%T; \\té•¿åº¦ï¼š%v; \\tæ•°æ®ï¼š%v\\n\u0026#34;, s3, len(s3), s3) ç»“æœï¼š\nç±»å‹ï¼š[5]int; é•¿åº¦ï¼š5; æ•°æ®ï¼š[10 29 49 58 32] è·å–æ‰€æœ‰æ•°æ®--ç±»å‹ï¼š[]int; é•¿åº¦ï¼š5; æ•°æ®ï¼š[10 29 49 58 32] è·å–ä¸‹æ ‡ä¸º2å¼€å§‹ä¹‹åæ‰€æœ‰çš„æ•°æ®--ç±»å‹ï¼š[]int; é•¿åº¦ï¼š3; æ•°æ®ï¼š[49 58 32] è·å–ä¸‹æ ‡ä¸º2ä¹‹å‰æ‰€æœ‰çš„æ•°æ®--ç±»å‹ï¼š[]int; é•¿åº¦ï¼š2; æ•°æ®ï¼š[10 29] æ€»ç»“ï¼šæ•°æ®çš„æ‹†åˆ†ï¼šarr[start:end] ä¸­ï¼Œå«ä¹‰ä¸ºï¼šè·å–arrå¯¹åº”ä¸‹æ ‡åŒºé—´[start,end)çš„å€¼ï¼Œstart,endå¯çœç•¥ï¼Œè¡¨ç¤ºå…¶å‰æˆ–åçš„æ‰€æœ‰å€¼ã€‚\n2.2 åˆ‡ç‰‡çš„é•¿åº¦(len)å’Œå®¹é‡(cap)*\råˆ‡ç‰‡æ‹¥æœ‰è‡ªå·±çš„é•¿åº¦å’Œå®¹é‡ï¼š é•¿åº¦ï¼šåˆ‡ç‰‡çš„é•¿åº¦æ˜¯åˆ‡ç‰‡æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°ã€‚ç”¨**len()å‡½æ•°è·å– å®¹é‡ï¼šåˆ‡ç‰‡çš„å®¹é‡ä»ä»–ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œåˆ°åº•å±‚æ•°ç»„å…ƒç´ æœ«å°¾çš„ä¸ªæ•°ã€‚ç”¨cap()**å‡½æ•°è·å–\na := []int{2, 3, 4, 5, 6, 7} fmt.Printf(\u0026#34;ç±»å‹ï¼š%T, é•¿åº¦ï¼š%v, å®¹é‡ï¼š%v, æ•°æ®ï¼š%v\\n\u0026#34;, a, len(a), cap(a), a) b := a[3:] fmt.Printf(\u0026#34;ç±»å‹ï¼š%T, é•¿åº¦ï¼š%v, å®¹é‡ï¼š%v, æ•°æ®ï¼š%v\\n\u0026#34;, b, len(b), cap(b), b) c := a[:3] fmt.Printf(\u0026#34;ç±»å‹ï¼š%T, é•¿åº¦ï¼š%v, å®¹é‡ï¼š%v, æ•°æ®ï¼š%v\\n\u0026#34;, c, len(c), cap(c), c) ç»“æœï¼š\nç±»å‹ï¼š[]int, é•¿åº¦ï¼š6, å®¹é‡ï¼š6, æ•°æ®ï¼š[2 3 4 5 6 7] ç±»å‹ï¼š[]int, é•¿åº¦ï¼š3, å®¹é‡ï¼š3, æ•°æ®ï¼š[5 6 7] ç±»å‹ï¼š[]int, é•¿åº¦ï¼š3, å®¹é‡ï¼š6, æ•°æ®ï¼š[2 3 4] 3. nilå€¼\rnilæ˜¯ä¸€ä¸ªé¢„å…ˆå£°æ˜çš„æ ‡è¯†ç¬¦ï¼Œè¡¨ç¤ºæŒ‡é’ˆã€é€šé“ã€å‡½æ•°ã€æ¥å£ã€é›†åˆæˆ–åˆ‡ç‰‡ç±»å‹çš„é›¶å€¼ã€‚\næ•°æ®ç±»å‹ å£°æ˜é»˜è®¤å€¼ bool int,float 0 string \u0026quot;\u0026quot; æŒ‡é’ˆï¼ˆpointersï¼‰ nil æ•°ç»„ï¼ˆarrayï¼‰ åŸºæœ¬ç±»å‹é»˜è®¤å€¼çš„æ•°ç»„ åˆ‡ç‰‡ï¼ˆslicesï¼‰ nil é›†åˆï¼ˆmapsï¼‰ nil é€šé“ï¼ˆchannelsï¼‰ nil å‡½æ•°ï¼ˆfunctionï¼‰ nil // æ•°ç»„é»˜è®¤å€¼ var arr [3]int fmt.Println(arr) // åˆ‡ç‰‡é»˜è®¤å€¼ var slices1 []int var slices2 = []int{1} fmt.Println(slices1, slices1 == nil, slices2 == nil) ç»“æœï¼š\n[0 0 0] [] true false 4. å€¼ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹\rå€¼ç±»å‹: å€¼ç±»å‹èµ‹å€¼çš„ä¸¤ä¸ªå˜é‡ä¸ºç‹¬ç«‹ä¸ªä½“ï¼ŒAå˜åŒ–ä¸ä¼šå¼•èµ·Bçš„åŒæ­¥æ›´æ–° å¼•ç”¨æ•°æ®ç±»å‹ï¼šå¼•ç”¨æ•°æ®ç±»å‹èµ‹å€¼çš„ä¸¤ä¸ªå˜é‡ä¸ºå¼•ç”¨åŒä¸€ä¸ªå˜é‡ï¼ŒAå˜åŒ–ä¼šå¼•èµ·Bçš„å˜åŒ–ã€‚å®é™…ä¸Šæ˜¯å› ä¸ºæŒ‡å‘åŒä¸€ç‰‡å†…å­˜ç©ºé—´ã€‚å…¸å‹çš„ç¤ºä¾‹å³ï¼šåˆ‡ç‰‡ ç¤ºä¾‹ï¼š\na1 := [...]int{2, 3, 4, 5} // æ•°ç»„ å€¼å¤åˆ¶ a2 := []int{2, 3, 4, 5} // åˆ‡ç‰‡ å¼•ç”¨èµ‹å€¼ b1 := a1 // èµ‹å€¼ç»™b1 b2 := a2 // èµ‹å€¼ç»™b2 b1[0] = 6 // åŒæ ·ä¿®æ”¹ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ä¸º6 b2[0] = 6 // åŒæ ·ä¿®æ”¹ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ä¸º6 fmt.Printf(\u0026#34;a1=%v,b1=%v \\n\u0026#34;, a1, b1) // å€¼ç±»å‹èµ‹å€¼ï¼šb1çš„ä¿®æ”¹ä¸ä¼šå½±å“a1 fmt.Printf(\u0026#34;a2=%v,b2=%v \\n\u0026#34;, a2, b2) // å¼•ç”¨ç±»å‹èµ‹å€¼ï¼šb2çš„ä¿®æ”¹å½±å“äº†a2 ç»“æœï¼š\na1=[2 3 4 5],b1=[6 3 4 5] a2=[6 3 4 5],b2=[6 3 4 5] 5. åˆ‡ç‰‡å¸¸ç”¨å‡½æ•°\r5.1 åˆ›å»ºåˆ‡ç‰‡ï¼šmake\rmakeåˆ›å»ºåˆ‡ç‰‡ï¼Œmake([]int, 10, 11) åˆ†é…ä¸€ä¸ªåº•å±‚æ•°ç»„å¤§å°ä¸º10ï¼Œè¿”å›é•¿åº¦ä¸º11ã€å®¹é‡ä¸º10çš„åˆ‡ç‰‡intç±»å‹åˆ‡ç‰‡\nvar slice1 = make([]int, 10, 11) slice1[2] = 6 slice1[9] = 20 fmt.Printf(\u0026#34;ç±»å‹ï¼š%T, é•¿åº¦ï¼š%v, å®¹é‡ï¼š%v, æ•°æ®ï¼š%v\\n\u0026#34;, slice1, len(slice1), cap(slice1), slice1) /* ç»“æœï¼š ç±»å‹ï¼š[]int, é•¿åº¦ï¼š10, å®¹é‡ï¼š11, æ•°æ®ï¼š[0 0 6 0 0 0 0 0 0 20] */ 5.2 æ‰©å®¹åˆ‡ç‰‡ï¼šappend\råˆ‡ç‰‡æ‰©å®¹ï¼š append(slice, elem1, elem2)æˆ–è€…append(slice, anotherSlice...)ï¼Œsliceè¡¨ç¤ºéœ€è¦æ‰©å®¹çš„åˆ‡ç‰‡ï¼Œelem*è¡¨ç¤ºæ·»åŠ çš„å…ƒç´ ï¼ŒanotherSliceè¡¨ç¤ºå…¶ä»–åˆ‡ç‰‡\n// åˆ‡ç‰‡çš„æ‰©å®¹ä¸èƒ½é€šè¿‡slice[2]ä¸‹æ ‡è¶Šç•Œæ–¹å¼ï¼Œä¼šæŠ¥é”™ä¸‹æ ‡è¶Šç•Œï¼šindex out of range [2] with length 0 var slice2 = make([]int, 0, 0) // åˆ‡ç‰‡ä¸­è¿½åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æœ€ç»ˆå…ƒç´  slice2 = append(slice2, 12, 14, 24) fmt.Printf(\u0026#34;ç±»å‹ï¼š%T, é•¿åº¦ï¼š%v, å®¹é‡ï¼š%v, æ•°æ®ï¼š%v\\n\u0026#34;, slice2, len(slice2), cap(slice2), slice2) slice3 := []int{3, 4, 5} // åˆ‡ç‰‡çš„åˆå¹¶ï¼Œslice3...ä»£è¡¨slice3ä¸­æ‰€æœ‰çš„å…ƒç´ åˆ—ä¸¾ var slice4 = append(slice2, slice3...) fmt.Printf(\u0026#34;ç±»å‹ï¼š%T, é•¿åº¦ï¼š%v, å®¹é‡ï¼š%v, æ•°æ®ï¼š%v\\n\u0026#34;, slice2, len(slice4), cap(slice4), slice4) /* ç»“æœï¼š ç±»å‹ï¼š[]int, é•¿åº¦ï¼š3, å®¹é‡ï¼š3, æ•°æ®ï¼š[12 14 24] ç±»å‹ï¼š[]int, é•¿åº¦ï¼š6, å®¹é‡ï¼š6, æ•°æ®ï¼š[12 14 24 3 4 5] */ 5.3 å¤åˆ¶åˆ‡ç‰‡ã€æ·±å…‹éš†ã€‘ï¼šcopy\ræ·±å…‹éš†ï¼šæŒ‡çš„æ˜¯å…‹éš†å‰åçš„å¯¹è±¡ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„ä¸ªä½“ï¼Œåç»­ä¿®æ”¹å˜æ›´äº’ä¸å½±å“ æµ…å…‹éš†ï¼šæŒ‡çš„æ˜¯å…‹éš†å‰åçš„å¯¹è±¡ä¸ºåŒä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œåç»­ä¿®æ”¹AåŒæ ·å½±å“Bçš„å€¼ copy(dst, src []Type)ï¼Œdstæ˜¯destinationï¼Œè¡¨ç¤ºç›®çš„å˜é‡ï¼Œsrcæ˜¯sourceï¼Œè¡¨ç¤ºå¯¹è±¡æºï¼Œå³å°†srcå¤åˆ¶ç»™dst\n// åˆ‡ç‰‡çš„æ‰©å®¹ä¸èƒ½é€šè¿‡slice[2]ä¸‹æ ‡è¶Šç•Œæ–¹å¼ï¼Œä¼šæŠ¥é”™ä¸‹æ ‡è¶Šç•Œï¼šindex out of range [2] with length 0 var slice2 = make([]int, 0, 0) // åˆ‡ç‰‡ä¸­è¿½åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æœ€ç»ˆå…ƒç´  slice2 = append(slice2, 12, 14, 24) fmt.Printf(\u0026#34;ç±»å‹ï¼š%T, é•¿åº¦ï¼š%v, å®¹é‡ï¼š%v, æ•°æ®ï¼š%v\\n\u0026#34;, slice2, len(slice2), cap(slice2), slice2) slice3 := []int{3, 4, 5} // åˆ‡ç‰‡çš„åˆå¹¶ï¼Œslice3...ä»£è¡¨slice3ä¸­æ‰€æœ‰çš„å…ƒç´ åˆ—ä¸¾ var slice4 = append(slice2, slice3...) fmt.Printf(\u0026#34;ç±»å‹ï¼š%T, é•¿åº¦ï¼š%v, å®¹é‡ï¼š%v, æ•°æ®ï¼š%v\\n\u0026#34;, slice2, len(slice4), cap(slice4), slice4) // åˆ‡ç‰‡çš„å¤åˆ¶æ·±å…‹éš† slice4Copy := make([]int, len(slice4)) copy(slice4Copy, slice4) slice4Copy[0] = 6666 fmt.Println(slice4, slice4Copy) /* ç»“æœï¼š ç±»å‹ï¼š[]int, é•¿åº¦ï¼š3, å®¹é‡ï¼š3, æ•°æ®ï¼š[12 14 24] ç±»å‹ï¼š[]int, é•¿åº¦ï¼š6, å®¹é‡ï¼š6, æ•°æ®ï¼š[12 14 24 3 4 5] [12 14 24 3 4 5] [6666 14 24 3 4 5] */ 5.4 åˆ‡ç‰‡çš„åˆ é™¤\rGoè¯­è¨€ä¸­æ²¡æœ‰å†…ç½®åˆ é™¤åˆ‡ç‰‡æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨appendæ–¹æ³•ï¼Œä¸åˆ‡ç‰‡å†åˆ‡ç‰‡ç»“åˆå®ç°\n// åˆ‡ç‰‡çš„åˆ é™¤ s1 := []int{1, 2, 3, 4, 5, 6} // åˆ é™¤å…ƒç´ çš„ç´¢å¼•ä¸‹æ ‡ delIndx := 3 // é€šè¿‡åˆ‡ç‰‡appendæ–¹æ³•ï¼Œä¸åˆ‡ç‰‡å†åˆ‡ç‰‡ç»“åˆå®ç°ï¼Œå³æˆªå–[0,3)å’Œ[4,5]çš„åˆ‡ç‰‡æ•°æ®å†åˆå¹¶è¾¾åˆ°åˆ é™¤æ•ˆæœ s1 = append(s1[:delIndx], s1[delIndx+1:]...) fmt.Println(s1) /* ç»“æœï¼š [1 2 3 5 6] */ 5.5 sortæ’åº\r5.5.1 å‡åºæ’åº\rä½¿ç”¨sort.Intsã€sort.Float64sã€sort.Stringsè¿›è¡Œæ’åº\nintList := []int{3, 4, 32, 32, 423, 12} float64List := []float64{3.13, 4.2, 5.3, 1.1} stringList := []string{\u0026#34;D\u0026#34;, \u0026#34;S\u0026#34;, \u0026#34;A\u0026#34;, \u0026#34;C\u0026#34;} // å‡åºæ’åº sort.Ints(intList) sort.Float64s(float64List) sort.Strings(stringList) fmt.Println(intList) fmt.Println(float64List) fmt.Println(stringList) /* ç»“æœï¼š [3 4 12 32 32 423] [1.1 3.13 4.2 5.3] [A C D S] */ 5.5.2 é™åºæ’åº\rç»“åˆsort.XXXSliceã€sort.Reverseå’Œsort.Sortå®ç°\nintList := []int{3, 4, 32, 32, 423, 12} float64List := []float64{3.13, 4.2, 5.3, 1.1} stringList := []string{\u0026#34;D\u0026#34;, \u0026#34;S\u0026#34;, \u0026#34;A\u0026#34;, \u0026#34;C\u0026#34;} /* é™åºæ’åº 1. sort.IntSlice(intList)è¡¨ç¤ºå¯¹intListè½¬æˆinterfaceï¼Œç®€å•ç†è§£ä¸ºå°†åˆ‡ç‰‡è½¬ä¸ºæ’åºå™¨æ¥å£,è¿”å›ç»“æœç±»å‹ï¼šdata sort.Interface 2. sort.Reverse(data sort.Interface)è¡¨ç¤ºç¿»è½¬åˆ‡ç‰‡ï¼Œè¿”å›ç»“æœç±»å‹ï¼šdata sort.Interface 3. sort.Sort(data sort.Interface) è¡¨ç¤ºå°†ç»“æœæ’åºè¿”å›æ•°æ® é»˜è®¤å½“åšå›ºå®šå†™æ³•ï¼šsort.Sort(sort.Reverse(sort.XXXSlice(intList))) å¦å¤–ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ’åºç®—æ³•å®ç°é™åºæ’åº */ sort.Sort(sort.Reverse(sort.IntSlice(intList))) sort.Sort(sort.Reverse(sort.Float64Slice(float64List))) sort.Sort(sort.Reverse(sort.StringSlice(stringList))) fmt.Println(intList) fmt.Println(float64List) fmt.Println(stringList) /* ç»“æœ: [423 32 32 12 4 3] [5.3 4.2 3.13 1.1] [S D C A] */ 6. æ‰©å±•æŠ€å·§\r6.1 è¯­æ³•æç¤º\rå¯¹ä¸€ä¸ªå˜é‡è¾“å…¥â€œ.â€ç¬¦å·æ—¶ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨æç¤ºè¯­æ³•å‘½ä»¤ï¼Œåç¼€æºå¸¦!çš„è¡¨ç¤ºä¸ºåŠŸèƒ½å¿«æ·æç¤ºï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„åŠæˆå“ä»£ç \næˆªå›¾ä¸­æç¤ºè¯­åŠŸèƒ½\nåŠŸèƒ½æç¤ºè¯­å¥ å«ä¹‰ append! åˆ‡ç‰‡è¿½åŠ æ•°æ® copy! copyå…‹éš†åˆ‡ç‰‡ for! foriå¾ªç¯ forr! for rangeå¾ªç¯ ifnotnil! if not nil æ¡ä»¶åˆ¤æ–­ last! ç­‰ä»·äºa[len(a -1)]è·å–æœ€åä¸€ä¸ªå…ƒç´  len! ç­‰ä»·äºlen(a)è·å–é•¿åº¦ print! æ‰“å°å˜é‡ range! ç­‰ä»·äºforr! reverse! ç¿»è½¬åˆ‡ç‰‡ sort! è‡ªå®šå®šæ’åº var! å°†aèµ‹å€¼äºæ–°çš„å˜é‡ 6.2 æ–¹æ³•å‚æ•°ã€å«ä¹‰ä½¿ç”¨æ¢ç©¶\ré¼ æ ‡ç§»åŠ¨è‡³æ–¹æ³•å1sä»¥ä¸Šï¼Œæ˜¾ç¤ºæ–¹æ³•åå‚æ•°ã€è¿”å›å€¼ï¼Œå«ä¹‰ï¼Œæè¿°è¯¦æƒ…ç­‰ä¿¡æ¯ ç”¨ctrlæŒ‰é”®+é¼ æ ‡å·¦é”®ï¼Œç‚¹å‡»æ–¹æ³•åï¼Œå³å¯è¿›å…¥æ–¹æ³•åå‚æ•°ã€è¿”å›å€¼ï¼Œå«ä¹‰ï¼Œæè¿°è¯¦æƒ…ç­‰ä¿¡æ¯ï¼Œå¦‚æœä¸æ‡‚è‹±æ–‡ï¼Œå¯ä»¥é€šè¿‡ç¿»è¯‘å·¥å…·è®¤è¯†é€æ­¥äº†è§£å­¦ä¹  ","date":"2025-01-08T22:05:33+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-05/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬äº”ç¯‡ å¤åˆæ•°æ®ç±»å‹ï¼šæ•°ç»„\u0026åˆ‡ç‰‡ã€‘"},{"content":"1. è¿ç®—ç¬¦\r1.1 ç®—æœ¯è¿ç®—ç¬¦\rç¬¦å· æè¿° + åŠ æ³• - å‡æ³• * ä¹˜æ³• / é™¤æ³• % å–ä½™ ç¤ºä¾‹ï¼š\n/* 1. ç®—æœ¯è¿ç®—ç¬¦ */ num1 := 5 num2 := 3 fmt.Printf(\u0026#34;%v + %v = %v\\n\u0026#34;, num1, num2, num1+num2) // åŠ æ³•è¿ç®— fmt.Printf(\u0026#34;%v - %v = %v\\n\u0026#34;, num1, num2, num1-num2) // å‡æ³•è¿ç®— fmt.Printf(\u0026#34;%v * %v = %v\\n\u0026#34;, num1, num2, num1*num2) // ä¹˜æ³•è¿ç®— fmt.Printf(\u0026#34;%v / %v = %v\\n\u0026#34;, num1, num2, num1/num2) // é™¤æ³•è¿ç®—ï¼šé™¤æ³•è¿ç®—ï¼Œå–æ•´æ•°éƒ¨åˆ†ï¼Œfloatç±»å‹è¿ç®—å–å…¨éƒ¨å€¼ // %% è½¬ä¹‰ï¼Œè¾“å‡º% fmt.Printf(\u0026#34;%v %% %v = %v\\n\u0026#34;, num1, num2, num1%num2) // å–ä½™è¿ç®—ï¼šå–ä½™æ•° /* Goä¸­è‡ªå¢ï¼Œè‡ªå‡è¿ç®—ä¸ºè¯­å¥ï¼Œä¸å±äºè¿ç®—ç¬¦ï¼Œä¸èƒ½èµ‹å€¼ï¼Œè¿™ä¸€ç‚¹ä¸åŒäºå…¶ä»–è¯­è¨€ ++ è‡ªå¢ -- è‡ªå‡ */ num2++ fmt.Printf(\u0026#34;num2è‡ªå¢åï¼š%v \\n\u0026#34;, num2) num2-- fmt.Printf(\u0026#34;num2è‡ªå‡åï¼š%v \\n\u0026#34;, num2) ç»“æœï¼š\n5 + 3 = 8 5 - 3 = 2 5 * 3 = 15 5 / 3 = 1 5 % 3 = 2 num2è‡ªå¢åï¼š4 num2è‡ªå‡åï¼š3 1.2 å…³ç³»è¿ç®—ç¬¦\rç¬¦å· æè¿° == ç­‰äº != ä¸ç­‰äº \u0026gt; å¤§äº \u0026gt;= å¤§äºç­‰äº \u0026lt; å°äº \u0026lt;= å°äºç­‰äº ç¤ºä¾‹ï¼š\n/* 2. å…³ç³»è¿ç®—ç¬¦ */ num3, num4 := 8, 6 fmt.Printf(\u0026#34;%v == %v = %v\\n\u0026#34;, num3, num4, num3 == num4) // false fmt.Printf(\u0026#34;%v != %v = %v\\n\u0026#34;, num3, num4, num3 != num4) // true fmt.Printf(\u0026#34;%v \u0026gt; %v = %v\\n\u0026#34;, num3, num4, num3 \u0026gt; num4) // true fmt.Printf(\u0026#34;%v \u0026gt;= %v = %v\\n\u0026#34;, num3, num4, num3 \u0026gt;= num4) // true fmt.Printf(\u0026#34;%v \u0026lt; %v = %v\\n\u0026#34;, num3, num4, num3 \u0026lt; num4) // false fmt.Printf(\u0026#34;%v \u0026lt;= %v = %v\\n\u0026#34;, num3, num4, num3 \u0026lt;= num4) // false ç»“æœï¼š\n8 == 6 = false 8 != 6 = true 8 \u0026gt; 6 = true 8 \u0026gt;= 6 = true 8 \u0026lt; 6 = false 8 \u0026lt;= 6 = false 1.3 é€»è¾‘è¿ç®—ç¬¦\rç¬¦å· æè¿° \u0026amp;\u0026amp; é€»è¾‘ä¸ || é€»è¾‘æˆ– ! å–é ç¤ºä¾‹ï¼š\n/* 3. é€»è¾‘è¿ç®—ç¬¦ \u0026amp;\u0026amp;: çœŸ \u0026amp;\u0026amp; å‡ = false å‡ \u0026amp;\u0026amp; çœŸ = false å‡ \u0026amp;\u0026amp; å‡ = false çœŸ \u0026amp;\u0026amp; çœŸ = true ||: çœŸ || å‡ = true å‡ || çœŸ = true çœŸ || çœŸ = true å‡ || å‡ = false !: !çœŸ = false !å‡ = true */ num5, num6 := 16, 20 fmt.Printf(\u0026#34;å€¼ = %v\\n\u0026#34;, num5 \u0026gt; 15 \u0026amp;\u0026amp; num6 \u0026lt; 20) // false fmt.Printf(\u0026#34;å€¼ = %v\\n\u0026#34;, num5 \u0026lt; 15 \u0026amp;\u0026amp; num6 == 20) // false fmt.Printf(\u0026#34;å€¼ = %v\\n\u0026#34;, num5 \u0026gt; 15 \u0026amp;\u0026amp; num6 == 20) // true fmt.Printf(\u0026#34;å€¼ = %v\\n\u0026#34;, num5 \u0026gt; 15 || num6 \u0026lt; 20) // true fmt.Printf(\u0026#34;å€¼ = %v\\n\u0026#34;, num5 \u0026lt; 15 || num6 == 20) // true fmt.Printf(\u0026#34;å€¼ = %v\\n\u0026#34;, num5 \u0026gt; 15 || num6 == 20) // true fmt.Printf(\u0026#34;å€¼ = %v\\n\u0026#34;, num5 \u0026lt; 15 || num6 \u0026gt; 20) // false fmt.Printf(\u0026#34;å€¼ = %v\\n\u0026#34;, !(num5 \u0026lt; 15)) // true fmt.Printf(\u0026#34;å€¼ = %v\\n\u0026#34;, !(num6 == 20)) // false ç»“æœï¼š\nå€¼ = false å€¼ = false å€¼ = true å€¼ = true å€¼ = true å€¼ = true å€¼ = false å€¼ = true å€¼ = false 1.4 èµ‹å€¼è¿ç®—ç¬¦\rç¬¦å· æè¿° = èµ‹å€¼ï¼Œè¡¨è¾¾å¼å³å˜èµ‹å€¼ç»™å·¦è¾¹ += å…ˆåŠ åèµ‹å€¼ -= å…ˆå‡åèµ‹å€¼ *= å…ˆä¹˜åèµ‹å€¼ /= å…ˆé™¤åèµ‹å€¼ %= å…ˆå–ä½™åèµ‹å€¼ \u0026laquo;= å…ˆå·¦ç§»åèµ‹å€¼(é«˜çº§ç”¨æ³•) \u0026raquo;= å…ˆå³ç§»åèµ‹å€¼(é«˜çº§ç”¨æ³•) \u0026amp;= å…ˆæŒ‰ä½ä¸åèµ‹å€¼(é«˜çº§ç”¨æ³•) |= å…ˆæŒ‰ä½æˆ–åèµ‹å€¼(é«˜çº§ç”¨æ³•) ^= å…ˆæŒ‰ä½å¼‚æˆ–åèµ‹å€¼(é«˜çº§ç”¨æ³•) ç¤ºä¾‹ï¼š\n/* 1.4 èµ‹å€¼è¿ç®—ç¬¦ */ num6, num7 := 3, 6 num7 += num6 // ç­‰ä»·äº num7 := num7 + num6 fmt.Printf(\u0026#34;num7 += num6 ç»“æœä¸ºï¼š %v\\n\u0026#34;, num7) num7 = 6 // èµ‹å€¼åˆå§‹å€¼ num7 -= num6 // ç­‰ä»·äº num7 := num7 - num6 fmt.Printf(\u0026#34;num7 -= num6 ç»“æœä¸ºï¼š %v\\n\u0026#34;, num7) num7 = 6 // èµ‹å€¼åˆå§‹å€¼ num7 *= num6 // ç­‰ä»·äº num7 := num7 * num6 fmt.Printf(\u0026#34;num7 *= num6 ç»“æœä¸ºï¼š %v\\n\u0026#34;, num7) num7 = 6 // èµ‹å€¼åˆå§‹å€¼ num7 /= num6 // ç­‰ä»·äº num7 := num7 / num6 fmt.Printf(\u0026#34;num7 /= num6 ç»“æœä¸ºï¼š %v\\n\u0026#34;, num7) num7 = 6 // èµ‹å€¼åˆå§‹å€¼ num7 %= num6 // ç­‰ä»·äº num7 := num7 % num6 fmt.Printf(\u0026#34;num7 %%= num6 ç»“æœä¸ºï¼š %v\\n\u0026#34;, num7) ç»“æœï¼š\nnum7 += num6 ç»“æœä¸ºï¼š 9 num7 -= num6 ç»“æœä¸ºï¼š 3 num7 *= num6 ç»“æœä¸ºï¼š 18 num7 /= num6 ç»“æœä¸ºï¼š 2 num7 %= num6 ç»“æœä¸ºï¼š 0 é«˜çº§ç”¨æ³•åœ¨äºŒè¿›åˆ¶è¿ç®—ä¸­ä¸¾ä¾‹ï¼Œç‚¹å‡»æ­¤å¤„è·³è½¬\n1.5 å…¶ä»–è¿ç®—ç¬¦\rç¬¦å· æè¿° \u0026amp; è¿”å›å˜é‡å­˜å‚¨åœ°å€ * æŒ‡é’ˆå˜é‡ è®¡ç®—æœºä¸Šæ˜¯é€šè¿‡åœ°å€ç©ºé—´å­˜å‚¨å˜é‡ã€‚ åœ°å€æ˜¯æŒ‡å­˜å‚¨å˜é‡çš„å†…å­˜ä½ç½®ï¼Œå³å˜é‡çš„åœ°å€ï¼Œä¸€èˆ¬ç”±16è¿›åˆ¶æ•°å€¼è¡¨ç¤ºï¼› æŒ‡é’ˆæ˜¯æŒ‡å‘å˜é‡åœ°å€çš„å˜é‡ï¼› å˜é‡çš„å€¼ï¼šåœ¨å½“å‰å†…å­˜ç©ºé—´ä½ç½®ä¸Šå­˜å‚¨äº†å˜é‡è¡¨ç¤ºçš„å€¼ã€‚\nç¤ºä¾‹\n/* 1.5 å…¶ä»–è¿ç®—ç¬¦ \u0026amp;ï¼šç”¨äºè·å–å˜é‡çš„åœ°å€å€¼ *: ç”¨æˆ·è·å–åœ°å€ä¸Šå­˜å‚¨çš„å€¼ */ // var p *int num8 := 100 p = \u0026amp;num8 // å°†num8çš„åœ°å€èµ‹å€¼äºp ,è·å–æŒ‡é’ˆçš„å€¼ç”¨*p fmt.Printf(\u0026#34;påœ°å€å€¼=%v,pçš„å€¼=%v\u0026#34;, p, *p) ç»“æœï¼š\npåœ°å€å€¼=0xc00000a0d8,pçš„å€¼=100 2. äºŒè¿›åˆ¶è¿ç®—\rä»¥ä¸‹æ‰€æœ‰çš„æ“ä½œè¿ç®—éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶æ•°å€¼æ“ä½œ\nç¬¦å· æè¿° \u0026amp; æŒ‰ä½ä¸ | æŒ‰ä½æˆ– ^ å¼‚æˆ– \u0026laquo; å·¦ç§» \u0026raquo; å³ç§» è¿ç®—é€»è¾‘ï¼š\np q p\u0026amp;q p|q p^q 0 0 0 0 0 1 0 0 1 1 0 1 0 1 1 1 1 1 1 0 \u0026amp;è¿ç®—ï¼šè¿ç®—ä¸¤è¾¹å…¨ä¸º1æ—¶å€¼ä¸º1ï¼Œå…¶ä½™ä½0 |è¿ç®—ï¼šè¿ç®—ä¸¤è¾¹å…¨ä¸º0æ—¶å€¼ä¸º0ï¼Œå…¶ä½™ä¸º1 ^è¿ç®—ï¼šè¿ç®—ä¸¤è¾¹æ•°å€¼ä¸åŒä¸º1ï¼Œç›¸åŒä¸º0 \u0026laquo;è¿ç®—ï¼šä¾‹å¦‚ p\u0026laquo;q ï¼Œpçš„äºŒè¿›åˆ¶å€¼å·¦ç§»qä½ã€‚å³è¾¹ç©ºä½è¡¥0 \u0026gt;\u0026gt;è¿ç®—ï¼šä¾‹å¦‚ p\u0026raquo;q ï¼Œpçš„äºŒè¿›åˆ¶å€¼å³ç§»qä½ã€‚åˆ é™¤å·¦è¾¹ç©ºä½0 äºŒè¿›åˆ¶è¿ç®—åœ¨æ“ä½œåœ°å€è¿ç®—ï¼ŒIPè¿ç®—ç­‰åå‘äºç¡¬ä»¶æœ‰ç€æ•ˆç‡é«˜ï¼Œè¿ç®—å¿«çš„ç‰¹ç‚¹\nç¤ºä¾‹ï¼š\n/* 1.6 äºŒè¿›åˆ¶è¿ç®— \u0026amp;è¿ç®—ï¼šè¿ç®—ä¸¤è¾¹å…¨ä¸º1æ—¶å€¼ä¸º1ï¼Œå…¶ä½™ä½0 |è¿ç®—ï¼šè¿ç®—ä¸¤è¾¹å…¨ä¸º0æ—¶å€¼ä¸º0ï¼Œå…¶ä½™ä¸º1 ^è¿ç®—ï¼šè¿ç®—ä¸¤è¾¹æ•°å€¼ä¸åŒä¸º1ï¼Œç›¸åŒä¸º0 \u0026lt;\u0026lt;è¿ç®—ï¼šä¾‹å¦‚ p\u0026lt;\u0026lt;q ï¼Œpçš„äºŒè¿›åˆ¶å€¼å·¦ç§»qä½ã€‚å³è¾¹ç©ºä½è¡¥0 \u0026gt;\u0026gt;è¿ç®—ï¼šä¾‹å¦‚ p\u0026gt;\u0026gt;q ï¼Œpçš„äºŒè¿›åˆ¶å€¼å³ç§»qä½ã€‚åˆ é™¤å·¦è¾¹ç©ºä½0 */ var num1 = 0b101011 var num2 = 0b110001 fmt.Printf(\u0026#34;%b \u0026amp; %b = %b \\n\u0026#34;, num1, num2, num1\u0026amp;num2) fmt.Printf(\u0026#34;%b | %b = %b \\n\u0026#34;, num1, num2, num1|num2) fmt.Printf(\u0026#34;%b ^ %b = %b \\n\u0026#34;, num1, num2, num1^num2) fmt.Printf(\u0026#34;%b \u0026lt;\u0026lt; %d = %b \\n\u0026#34;, num1, 2, num1\u0026lt;\u0026lt;2) fmt.Printf(\u0026#34;%b \u0026gt;\u0026gt; %d = %b \\n\u0026#34;, num2, 2, num2\u0026gt;\u0026gt;2) // ä½¿ç”¨é«˜çº§èµ‹å€¼è¿ç®—ç¬¦è®¡ç®— num2 = 0b110001 // åˆå§‹åŒ– num2 \u0026amp;= num1 fmt.Printf(\u0026#34;ç”¨\u0026amp;= è®¡ç®—ï¼š%b \u0026amp; 110001 = %b \\n\u0026#34;, num1, num2) num2 = 0b110001 // åˆå§‹åŒ– num2 |= num1 fmt.Printf(\u0026#34;ç”¨|= è®¡ç®—ï¼š%b | 110001 = %b \\n\u0026#34;, num1, num2) num2 = 0b110001 // åˆå§‹åŒ– num2 ^= num1 fmt.Printf(\u0026#34;ç”¨^= è®¡ç®—ï¼š%b ^ 110001 = %b \\n\u0026#34;, num1, num2) num1 = 0b110001 // åˆå§‹åŒ– num1 \u0026lt;\u0026lt;= 2 fmt.Printf(\u0026#34;ç”¨\u0026lt;\u0026lt;= è®¡ç®—ï¼š110001 \u0026lt;\u0026lt; %d = %b \\n\u0026#34;, 2, num1) num2 = 0b110001 // åˆå§‹åŒ– num2 \u0026gt;\u0026gt;= 2 fmt.Printf(\u0026#34;ç”¨\u0026gt;\u0026gt;= è®¡ç®—ï¼š110001 \u0026gt;\u0026gt; %d = %b \\n\u0026#34;, 2, num2) ç»“æœï¼š\n101011 \u0026amp; 110001 = 100001 101011 | 110001 = 111011 101011 ^ 110001 = 11010 101011 \u0026lt;\u0026lt; 2 = 10101100 110001 \u0026gt;\u0026gt; 2 = 1100 ç”¨\u0026amp;= è®¡ç®—ï¼š101011 \u0026amp; 110001 = 100001 ç”¨|= è®¡ç®—ï¼š101011 | 110001 = 111011 ç”¨^= è®¡ç®—ï¼š101011 ^ 110001 = 11010 ç”¨\u0026lt;\u0026lt;= è®¡ç®—ï¼š110001 \u0026lt;\u0026lt; 2 = 11000100 ç”¨\u0026gt;\u0026gt;= è®¡ç®—ï¼š110001 \u0026gt;\u0026gt; 2 = 1100 \u0026amp;å’Œ|å¦™ç”¨\nä¾‹ï¼šå‡è®¾ï¼Œç”¨5ä½äºŒè¿›åˆ¶è¡¨ç¤ºåº§ä½çš„ç©ºé—²å’Œå ç”¨ï¼Œé‚£ä¹ˆå…¨éƒ¨ç©ºé—²ä¸ºï¼š00000ï¼Œå…¨éƒ¨å ç”¨ä¸ºï¼š11111ã€‚é‚£ä¹ˆæœ‰ä¸¤ç§åœºæ™¯ï¼š1. æŒ‡å®šç¬¬1,3,5ä¸ºç©ºé—²çŠ¶æ€ï¼›2.æŒ‡å®šç¬¬2,4åº§ä½ä¸ºå ç”¨çŠ¶æ€çš„å®ç°æ–¹å¼å¦‚ä¸‹ï¼š\n// é»˜è®¤åº§ä½ä»£è¡¨ï¼šå ç”¨ï¼Œç©ºé—²ï¼Œç©ºé—²ï¼Œå ç”¨ï¼Œå ç”¨ var seat = 0b10011 // å°†1,3,5çš„ä½ç½®ç½®ä¸ºç©ºé—²0ï¼Œå³ç›®æ ‡ç»“æœï¼šç©ºé—²ï¼Œç©ºé—²ï¼Œç©ºé—²ï¼Œå ç”¨ï¼Œç©ºé—² var initValue1 = 0b01010 // è§£é‡Šï¼šä¸ç®¡åŸå€¼æ˜¯0æˆ–è€…1ï¼Œåªè¦initValue1ç¬¬1,3,5ä½ç½®ä¸º0,\u0026amp;çš„æœ€ç»ˆç»“æœéƒ½ä¸º0ï¼Œè€ŒinitValue1ç¬¬2,4ä½ç½®ä¸º1,ä¿è¯\u0026amp;ç»“æœä¿ç•™åŸæ¥çš„å€¼ä¸å˜ fmt.Printf(\u0026#34;å°†1,3,5çš„ä½ç½®ç½®ä¸º0:%b \\n\u0026#34;, seat\u0026amp;initValue1) // ç»“æœ10ï¼Œå³00010ï¼Œå‰ç¼€0çœç•¥ // å°†2,4çš„ä½ç½®ç½®ä¸ºå ç”¨1ï¼Œå³ç›®æ ‡ç»“æœï¼šå ç”¨ï¼Œå ç”¨ï¼Œç©ºé—²ï¼Œå ç”¨ï¼Œå ç”¨ var initValue2 = 0b01010 // è§£é‡Šï¼šä¸ç®¡åŸå€¼æ˜¯0æˆ–è€…1ï¼Œåªè¦initValue2ç¬¬2,4ä½ç½®ä¸º1,|çš„æœ€ç»ˆç»“æœéƒ½ä¸º1ï¼Œè€ŒinitValue1ç¬¬1,3,5ä½ç½®ä¸º0,ä¿è¯|ç»“æœä¿ç•™åŸæ¥çš„å€¼ä¸å˜ fmt.Printf(\u0026#34;å°†2,4çš„ä½ç½®ç½®ä¸º1:%b \\n\u0026#34;, seat|initValue2) // ç»“æœ11011 å°†1,3,5çš„ä½ç½®ç½®ä¸º0:10 å°†2,4çš„ä½ç½®ç½®ä¸º1:11011 ç”±ä¸Šè¿°ç¤ºä¾‹å¯è§ï¼Œä½¿ç”¨åŒä¸€ä¸ªäºŒè¿›åˆ¶01010å€¼ï¼Œå°±èƒ½æ“ä½œä¸¤ç§ä¸åŒçš„åœºæ™¯è¿ç®—ï¼Œè¿™åœ¨ä¿¡å·ç¯æ§åˆ¶ã€å¼€å…³æ§åˆ¶ç­‰ä¸¤ç§å–åæ“ä½œåœºæ™¯ä¸­éå¸¸é€‚ç”¨\n3. æµç¨‹æ§åˆ¶\r3.1 æ¡ä»¶è¡¨è¾¾å¼if\ræ¡ä»¶åˆ¤æ–­ï¼šæŒ‰ç…§ç¨‹åºé¡ºåºæ‰§è¡Œï¼Œä»…å¯æ‰§è¡Œæ»¡è¶³ä¸€ä¸ªæ¡ä»¶çš„è¯­å¥å†…å®¹ã€‚\nç¤ºä¾‹ï¼š\n/* ä¸‹åˆ—æ ¼å¼ä¸¥æ ¼æŒ‰ç…§ä¹¦å†™è§„èŒƒï¼Œå¦åˆ™æŠ¥é”™ 1. æ¡ä»¶åˆ¤æ–­ï¼š if æ¡ä»¶åˆ¤æ–­1 { } else if æ¡ä»¶åˆ¤æ–­2 { } else if ... { } else { } */ // å†™æ³•1 , æ­¤æ—¶scoreä½œç”¨äºåœ¨å½“å‰èŒƒå›´ä½œç”¨åŸŸ score := 60 if score \u0026gt;= 90 { // \u0026gt;= 90 fmt.Println(\u0026#34;æˆç»©å“è¶Š\u0026#34;) } else if score \u0026gt;= 80 { // \u0026gt;= 80 \u0026amp;\u0026amp; \u0026lt; 90 fmt.Println(\u0026#34;æˆç»©ä¼˜ç§€\u0026#34;) } else if score \u0026gt;= 70 { // \u0026gt;= 70 \u0026amp;\u0026amp; \u0026lt; 80 fmt.Println(\u0026#34;æˆç»©è‰¯å¥½\u0026#34;) } else if score \u0026gt;= 60 { // \u0026gt;= 60 \u0026amp;\u0026amp; \u0026lt; 70 fmt.Println(\u0026#34;æˆç»©åˆæ ¼\u0026#34;) } else { // \u0026lt; 60 fmt.Println(\u0026#34;æˆç»©ä¸åˆæ ¼\u0026#34;) } // å†™æ³•2ï¼š æ­¤æ—¶score1ä½œç”¨äºåœ¨å½“å‰ifå†…éƒ¨ä½œç”¨åŸŸ if score1 := 80; score1 \u0026gt;= 90 { // \u0026gt;= 90 fmt.Println(\u0026#34;æˆç»©å“è¶Š\u0026#34;) } else if score1 \u0026gt;= 80 { // \u0026gt;= 80 \u0026amp;\u0026amp; \u0026lt; 90 fmt.Println(\u0026#34;æˆç»©ä¼˜ç§€\u0026#34;) } else if score1 \u0026gt;= 70 { // \u0026gt;= 70 \u0026amp;\u0026amp; \u0026lt; 80 fmt.Println(\u0026#34;æˆç»©è‰¯å¥½\u0026#34;) } else if score1 \u0026gt;= 60 { // \u0026gt;= 60 \u0026amp;\u0026amp; \u0026lt; 70 fmt.Println(\u0026#34;æˆç»©åˆæ ¼\u0026#34;) } else { // \u0026lt; 60 fmt.Println(\u0026#34;æˆç»©ä¸åˆæ ¼\u0026#34;) } // æ­¤æ—¶ä½¿ç”¨score1ä¼šæŠ¥é”™ fmt.Println(strconv.Itoa(score)) ç»“æœï¼š\næˆç»©åˆæ ¼ æˆç»©ä¼˜ç§€ 80 åœ¨è¿™é‡Œæ’å…¥ä»£ç ç‰‡ 3.2 forå¾ªç¯\r/* ()å†…å®¹å¯ä»¥çœç•¥ for (åˆå§‹è¯­å¥;)(æ¡ä»¶è¡¨è¾¾å¼;)(ç»“æŸè¯­å¥) { å¾ªç¯ä½“ } æ‰§è¡Œé¡ºåºï¼š 1. æ‰§è¡Œåˆå§‹è¯­å¥ 2. æ¡ä»¶è¡¨è¾¾å¼ 3. å¾ªç¯ä½“ 4. ç»“æŸè¯­å¥ 5. æ¡ä»¶è¡¨è¾¾å¼,åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶ 6. å¦‚æœæ»¡è¶³æ¡ä»¶ä¸ºtrueï¼šç¬¬3,4,5æ­¥å¾ªç¯æ‰§è¡Œï¼Œç›´åˆ°æ¡ä»¶è¡¨è¾¾å¼ä¸ºfalseç»“æŸ */ var str = \u0026#34;hello world\u0026#34; // å†™æ³•1 for i := 0; i \u0026lt; len(str); i++ { fmt.Printf(\u0026#34;%c \u0026#34;, str[i]) } fmt.Println() // å†™æ³•2 i := 0 for i \u0026lt; len(str) { fmt.Printf(\u0026#34;%c \u0026#34;, str[i]) i++ } fmt.Println() // å†™æ³•3 Goä¸­æ²¡æœ‰whileæ§åˆ¶è¯­å¥ï¼Œè¯¥å†™æ³•å¯æ›¿ä»£ i = 0 for { if i \u0026gt;= len(str) { break } fmt.Printf(\u0026#34;%c \u0026#34;, str[i]) i++ } ç»“æœï¼š\nh e l l o w o r l d h e l l o w o r l d h e l l o w o r l d 3.3 for range(é”®å€¼å¾ªç¯)\rç¤ºä¾‹ï¼š\n/* for ...range æ ¼å¼ for é”®,å€¼ := range å˜é‡{ å¾ªç¯ä½“ } */ text := \u0026#34;ä½ å¥½,program\u0026#34; for k, v := range text { fmt.Printf(\u0026#34;k=%v,v=%c\\n\u0026#34;, k, v) } ç»“æœï¼š\nk=0,v=ä½  k=3,v=å¥½ k=6,v=, k=7,v=p k=8,v=r k=9,v=o k=10,v=g k=11,v=r k=12,v=a k=13,v=m 3.4 switch\u0026hellip;case\rä¸ifæ¡ä»¶åˆ¤æ–­ç±»å‹ï¼Œswitch\u0026hellip;caseæ›´å¤šç”¨äºåˆ¤æ–­æšä¸¾ç±»å‹\n/* switch æšä¸¾å€¼{ case å›ºå®šå€¼1: (break) case å›ºå®šå€¼2: (break) case å›ºå®šå€¼3: (break) ... default: } æ‰§è¡Œé¡ºåºï¼š1. æšä¸¾å€¼ 2. case å‘½ä¸­ï¼Œå“ªä¸€ä¸ªcaseå‘½ä¸­ï¼Œæ‰§è¡Œå“ªä¸ªcaseä¸‹çš„è¯­å¥ */ // å†™æ³•1 var week = 3 switch week { case 1: fmt.Println(\u0026#34;å‘¨ä¸€\u0026#34;) case 2: fmt.Println(\u0026#34;å‘¨äºŒ\u0026#34;) case 3: fmt.Println(\u0026#34;å‘¨ä¸‰\u0026#34;) case 4: fmt.Println(\u0026#34;å‘¨å››\u0026#34;) case 5: fmt.Println(\u0026#34;å‘¨äº”\u0026#34;) case 6: fmt.Println(\u0026#34;å‘¨å…­\u0026#34;) case 7: fmt.Println(\u0026#34;å‘¨æ—¥\u0026#34;) default: fmt.Println(\u0026#34;ä¸å­˜åœ¨\u0026#34;) } // å†™æ³•2ï¼ŒåŒæ ·week1ä»…ä½œç”¨åŸŸåœ¨switchå†…éƒ¨ switch week1 := 0; week1 { case 1: fmt.Println(\u0026#34;å‘¨ä¸€\u0026#34;) case 2: fmt.Println(\u0026#34;å‘¨äºŒ\u0026#34;) case 3: fmt.Println(\u0026#34;å‘¨ä¸‰\u0026#34;) case 4: fmt.Println(\u0026#34;å‘¨å››\u0026#34;) case 5: fmt.Println(\u0026#34;å‘¨äº”\u0026#34;) case 6: fmt.Println(\u0026#34;å‘¨å…­\u0026#34;) case 7: fmt.Println(\u0026#34;å‘¨æ—¥\u0026#34;) default: fmt.Println(\u0026#34;ä¸å­˜åœ¨\u0026#34;) } // å†™æ³•3, case å¯ä»¥å†™å¤šä¸ªæšä¸¾å€¼ switch num := 10; num { case 0, 2, 4, 6, 8, 10: fmt.Println(\u0026#34;å¶æ•°\u0026#34;) case 1, 3, 5, 7, 9: fmt.Println(\u0026#34;å¥‡æ•°\u0026#34;) } // å†™æ³•4ï¼Œcase ä¸­å¯ä»¥å†™æ¡ä»¶è¡¨è¾¾å¼ score := 80 switch { case score \u0026gt;= 90: fmt.Println(\u0026#34;å“è¶Š\u0026#34;) case score \u0026gt;= 80: fmt.Println(\u0026#34;ä¼˜ç§€\u0026#34;) case score \u0026gt;= 70: fmt.Println(\u0026#34;è‰¯å¥½\u0026#34;) case score \u0026gt;= 60: fmt.Println(\u0026#34;åŠæ ¼\u0026#34;) default: fmt.Println(\u0026#34;ä¸åŠæ ¼\u0026#34;) } ç»“æœï¼š\nå‘¨ä¸‰ ä¸å­˜åœ¨ å¶æ•° ä¼˜ç§€ Goè¯­è¨€çš„switch..caseä¸­ï¼Œbreaké»˜è®¤å­˜åœ¨çš„ï¼Œå³ä»…èƒ½æ‰§è¡Œcaseï¼Œä¸èƒ½è¯­å¥ç©¿é€ã€‚å¦‚æœéœ€è¦è¯­å¥ç©¿é€ï¼Œå¯ä½¿ç”¨fallthroughè¯­å¥ï¼Œä¸€æ¬¡ä½¿ç”¨ä»…èƒ½ç©¿é€ä¸€å±‚ ä¾‹ï¼š\nswitch week1 := 5; week1 { case 1: fmt.Println(\u0026#34;å‘¨ä¸€\u0026#34;) case 2: fmt.Println(\u0026#34;å‘¨äºŒ\u0026#34;) case 3: fmt.Println(\u0026#34;å‘¨ä¸‰\u0026#34;) case 4: fmt.Println(\u0026#34;å‘¨å››\u0026#34;) case 5: fmt.Println(\u0026#34;å‘¨äº”\u0026#34;) fallthrough case 6: fmt.Println(\u0026#34;å‘¨å…­\u0026#34;) case 7: fmt.Println(\u0026#34;å‘¨æ—¥\u0026#34;) default: fmt.Println(\u0026#34;ä¸å­˜åœ¨\u0026#34;) } ç»“æœï¼š\nå‘¨äº” å‘¨å…­ 3.5 break,continue,goto\rbreakè¡¨ç¤ºè·³å‡ºå½“å‰å¾ªç¯ continueè¡¨ç¤ºè·³è¿‡æ¡£æ¬¡å¾ªç¯æ‰§è¡Œ goto è¡¨ç¤ºè·³è‡³æŒ‡å®šè¯­å¥æ‰§è¡Œ ç¤ºä¾‹ï¼š\nlable1: // å›ºå®šå†™æ³• \u0026lt;éšæ„æ ‡ç­¾å\u0026gt;: for i := 0; i \u0026lt;= 3; i++ { if i == 0 { continue // è·³è¿‡å½“æ¬¡å¾ªç¯ 0è·³è¿‡ } if i == 1 { continue lable1 // è·³è‡³lable1ä½ç½® ,1è·³è¿‡, ç»§ç»­æ‰§è¡Œ } fmt.Printf(\u0026#34;i=%d \\n\u0026#34;, i) } lable2: for j := 0; j \u0026lt;= 3; j++ { if j == 3 { fmt.Printf(\u0026#34;è·³å‡º \\n\u0026#34;) break // 3è·³å‡ºå¾ªç¯ } if j == 1 { break lable2 // è·³è‡³lable2ä½ç½®, 1è·³è¿‡ï¼Œä¸æ‰§è¡Œå½“å‰å¾ªç¯ä½“ } fmt.Printf(\u0026#34;j=%d \\n\u0026#34;, j) } /* gotoå¯ä»¥ä»»æ„æŒ‡å®šæ ‡ç­¾ä½ç½®ï¼Œè·³è‡³æŒ‡å®šä½ç½®æ‰§è¡Œ è§£é‡Šï¼š 1. æ‰§è¡Œè¯­å¥1, 2. i è‡ªå¢ä¸º1 2. gotoè·³è‡³lable4ï¼Œæ‰§è¡Œè¯­å¥3 3. gotoè·³è‡³lable3ï¼Œæ‰§è¡Œè¯­å¥1 4. i è‡ªå¢ä¸º2 5. gotoè·³è‡³lable5ï¼Œæ‰§è¡Œè¯­å¥4 æœ€ç»ˆè·³è¿‡äº†æ‰§è¡Œè¯­å¥2 */ i := 0 lable3: fmt.Println(\u0026#34;æ‰§è¡Œè¯­å¥1\u0026#34;) i++ if i == 2 { // æ‰§è¡Œ2æ¬¡ä¹‹å goto lable5 } goto lable4 fmt.Println(\u0026#34;æ‰§è¡Œè¯­å¥2\u0026#34;) // è¢«è·³è¿‡ lable4: fmt.Println(\u0026#34;æ‰§è¡Œè¯­å¥3\u0026#34;) goto lable3 lable5: fmt.Println(\u0026#34;æ‰§è¡Œè¯­å¥4\u0026#34;) ç»“æœï¼š\ni=2 i=3 j=0 æ‰§è¡Œè¯­å¥1 æ‰§è¡Œè¯­å¥3 æ‰§è¡Œè¯­å¥1 æ‰§è¡Œè¯­å¥4 ","date":"2025-01-01T11:03:08+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-04/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬å››ç¯‡ è¿ç®—ç¬¦\u0026æµç¨‹æ§åˆ¶ã€‘"},{"content":"1. æ€»è§ˆ\rGoè¯­è¨€ä¸­æ•°æ®ç±»å‹åˆ†ä¸ºï¼šåŸºæœ¬æ•°æ®ç±»å‹å’Œå¤åˆæ•°æ®ç±»å‹\nåŸºæœ¬æ•°æ®ç±»å‹ï¼šæ•´å‹ï¼Œæµ®ç‚¹å‹ï¼Œå¸ƒå°”å‹ï¼Œå­—ç¬¦ä¸² å¤åˆæ•°æ®ç±»å‹ï¼šæ•°ç»„ï¼Œåˆ‡ç‰‡ï¼Œç»“æ„ä½“ï¼Œå‡½æ•°ï¼Œmapï¼Œé€šé“ï¼ˆchannelï¼‰ã€æ¥å£ç­‰\n2. åŸºæœ¬æ•°æ®ç±»å‹\r2.1 æ•´å‹\rç±»å‹ èŒƒå›´ å ç”¨ç©ºé—´ æœ‰æ— ç¬¦å· int8 $-2^7$~$2^7-1$ 1ä¸ªå­—èŠ‚ æœ‰ int16 $-2^{15}$~$2^{15}-1$ 2ä¸ªå­—èŠ‚ æœ‰ int32 $-2^{31}$~$2^{31}-1$ 4ä¸ªå­—èŠ‚ æœ‰ int64 $-2^{63}$~$2^{63}-1$ 8ä¸ªå­—èŠ‚ æœ‰ uint8 $0$~$2^8-1$ 1ä¸ªå­—èŠ‚ æ—  uint16 $0$~$2^{16}-1$ 2ä¸ªå­—èŠ‚ æ—  uint32 $0$~$2^{32}-1$ 4ä¸ªå­—èŠ‚ æ—  uint64 $0$~$2^{64}-1$ 8ä¸ªå­—èŠ‚ æ—  ç‰¹æ®Šç±»å‹ï¼š\nç±»å‹ æè¿° uint 32ä½æ“ä½œç³»ç»Ÿä¸Šä¸ºuint32,64ä½æ“ä½œç³»ç»Ÿä¸Šä¸ºuint64 int 32ä½æ“ä½œç³»ç»Ÿä¸Šä¸ºint32,64ä½æ“ä½œç³»ç»Ÿä¸Šä¸ºint64 uintptr æ— ç¬¦å·æ•´å‹ï¼Œç”¨äºå­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆ ç®€å•ç¤ºä¾‹ï¼š\nvar ( num1 int = 666 num2 uint = 666 // ä»¥ä¸‹èµ‹å€¼å¯é€‰æœ€å¤§å€¼ï¼Œmath ä¸ºmathåŒ…ï¼Œä½¿ç”¨å³è‡ªåŠ¨å¼•å…¥ num1 int = 666 num2 uint = 666 // ä»¥ä¸‹èµ‹å€¼å¯é€‰æœ€å¤§å€¼ num3 int8 = math.MaxInt8 num4 int16 = math.MaxInt16 num5 int32 = math.MaxInt32 num6 int64 = math.MaxInt64 num7 uint8 = math.MaxUint8 num8 uint16 = math.MaxUint16 num9 uint32 = math.MaxUint32 num10 uint64 = math.MaxUint64 ) fmt.Println(num1, num2, num3, num4, num5, num6, num7, num8, num9, num10) ç»“æœï¼š\n666 666 127 32767 2147483647 9223372036854775807 255 65535 4294967295 18446744073709551615 2.2 æµ®ç‚¹å‹\rGoè¯­è¨€æ”¯æŒä¸¤ç§æµ®ç‚¹æ•°ï¼šfloat32å’Œfloat64ï¼Œéµå¾ªIEEE 745æ ‡å‡†ã€‚32ä½æ“ä½œç³»ç»Ÿä¸­ï¼Œé»˜è®¤ä¸ºfloat32ï¼›64ä½æ“ä½œç³»ç»Ÿä¸­é»˜è®¤ä¸ºfloat64ã€‚\nfloat32ï¼š-3.4e38~3.4e38 ï¼Œå ç”¨4ä¸ªå­—èŠ‚ float64ï¼š-1.8e308~1.8e308ï¼Œå ç”¨8ä¸ªå­—èŠ‚ // 1. åŸºæœ¬å®šä¹‰ var num1 float32 = 1.06 num2 := 3.1415926 // ä¿ç•™å°æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨%.nfæˆ–è€…%0.nf æŒ‡å®šä¿ç•™nä½å°æ•°ï¼Œ fmt.Printf(\u0026#34;åŸæ ·è¾“å‡ºï¼š%v; é»˜è®¤ä¿ç•™6ä½å°æ•°: %f; æŒ‡å®šä¿ç•™3ä¸ºå°æ•°: %0.3f \\n\u0026#34;, num1, num2, num2) // 2. å…¶ä»–å¸¸ç”¨æ ·ä¾‹ var ( num3 float32 = 3.1415926 num4 float64 = 1.113 num5 = 3.14e2 // ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºï¼Œ3.14*10^2 çš„å€¼ï¼šä¸º314 num6 = 3.14e-2 // ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•è¡¨ç¤ºï¼Œ3.14*10-2 çš„å€¼ï¼šä¸º0.0314 ) fmt.Println(num3, num4, num5, num6) ç»“æœï¼š\nåŸæ ·è¾“å‡ºï¼š1.06; é»˜è®¤ä¿ç•™6ä½å°æ•°: 3.141593; æŒ‡å®šä¿ç•™3ä¸ºå°æ•°: 3.142 3.1415925 1.113 314 0.0314 2.2 å¸ƒå°”å‹\rboolå€¼ä»…æœ‰ä¸¤ä¸ªå€¼ï¼štrueå’Œfalseã€‚å£°æ˜ä¸èµ‹å€¼ï¼Œé»˜è®¤ä¸ºfalse\nvar ( bool1 bool bool2 = true ) fmt.Println(bool1, bool2) ç»“æœï¼š\nfalse true 2.3 å­—ç¬¦\rå­—ç¬¦æ˜¯å•ä¸ªæ•°å€¼ï¼Œå±äºintç±»å‹ï¼ŒGoè¯­è¨€ä¸­æœ‰ä¸¤ç§è¡¨ç¤ºï¼šbyteå’Œrune\nbyte: intç±»å‹ï¼Œä»£è¡¨ASCIIç çš„å€¼ rune: intç±»å‹ï¼Œä»£è¡¨UTF-8ç¼–ç  æ³¨ï¼šUTF-8çš„å›½é™…é€šç”¨ç¼–ç ï¼Œæ˜¯ASCIIç çš„æ‰©å±•ï¼ŒåŒ…æ‹¬äº†å„å›½çš„å¸¸ç”¨çš„è¯­è¨€æ–‡å­—\u0026lt;/font å¸¸ç”¨ç¤ºä¾‹ï¼š\nvar a = \u0026#39;A\u0026#39; var a = \u0026#39;A\u0026#39; // ä½¿ç”¨%cè¾“å‡ºå­—ç¬¦ fmt.Printf(\u0026#34;å­—ç¬¦ASCIIå€¼:%v; åŸæ ·ç¼–ç :%c \\n\u0026#34;, a, a) var ( b = \u0026#39;B\u0026#39; c = \u0026#39;ä½ \u0026#39; d = \u0026#34;this\u0026#34; // å¯ä»¥è·å–å­—ç¬¦ä¸²ä¸­çš„å•ä¸ªå­—ç¬¦ ) fmt.Printf(\u0026#34;%c,%c,%c,%c,%c,%c\u0026#34;, b, c, d[0], d[1], d[2], d[3]) ç»“æœï¼š\nå­—ç¬¦ASCIIå€¼:65; åŸæ ·ç¼–ç :A B,ä½ ,t,h,i,s 2.4 å­—ç¬¦ä¸²\r2.4.1 å¸¸ç”¨å®šä¹‰æ–¹å¼\r// å­—ç¬¦ä¸²å®šä¹‰ var val1 string = \u0026#34;hello world\u0026#34; var val2 = \u0026#34;ä½ å¥½ go\u0026#34; val3 := \u0026#34;Good\u0026#34; fmt.Println(val1, val2, val3) // å­—ç¬¦ä¸²val2ä¸­2ä¸ªä¸­æ–‡ï¼Œ3ä¸ªè‹±æ–‡(ç©ºæ ¼ä¹Ÿç®—)ï¼›å…±2*3+3=9ä¸ªå­—ç¬¦ï¼Œå¯é€šè¿‡lenå‡½æ•°è·å– fmt.Println(len(val2)) // å¤šè¡Œå­—ç¬¦ä¸²ï¼šä¼šåŸæ ·è¾“å‡º var info = `å§“åï¼šå¼ ä¸‰ å¹´é¾„ï¼š18` fmt.Println(info) ç»“æœï¼š\nhello world ä½ å¥½ go Good 9 å§“åï¼šå¼ ä¸‰ å¹´é¾„ï¼š18 å­—ç¬¦ä¸²ä¸­ï¼Œè‹±æ–‡å­—æ¯å ä¸€ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡å ç”¨3ä¸ªå­—èŠ‚ã€‚å¯ä½¿ç”¨lenå‡½æ•°æ‰“å°å­—ç¬¦ä¸²å­—èŠ‚é•¿åº¦\n2.4.2 è½¬ç§»å­—ç¬¦\rè½¬ä¹‰ç¬¦å·ä½¿ç”¨\\è¡¨ç¤º å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦æœ‰ï¼š\n\\rï¼šå›è½¦ç¬¦ï¼ˆè¿”å›è¡Œé¦–ï¼‰ \\nï¼šæ¢è¡Œç¬¦ï¼ˆè·³è‡³ä¸‹ä¸€è¡ŒåŒåˆ—ï¼‰ \\tï¼šåˆ¶è¡¨ç¬¦ï¼ˆå¯ç”¨äºæ•´é½è¾“å‡ºä¸€ç³»åˆ—å€¼ï¼‰ \\'ï¼šå•å¼•å·ï¼Œè¾“å‡º' \\\u0026quot;ï¼šåŒå¼•å·ï¼Œè¾“å‡º\u0026quot; \\\\ï¼šåæ–œæ ï¼Œè¾“å‡º\\ var val1 string = \u0026#34;hello\\r\u0026#34; var val2 string = \u0026#34;world\\n\u0026#34; var val3 string = \u0026#34;hello world\\t\u0026#34; var val4 string = \u0026#34;\u0026#39;hello\u0026#39; \\\\ \\\u0026#34;world\\\u0026#34;\u0026#34; /* var1ï¼š\\r å›è½¦ç¬¦ï¼Œhelloè¾“å‡ºç»“æŸåå›è½¦ï¼Œå…‰æ ‡ç§»åŠ¨è‡³å½“å‰è¡Œé¦–ï¼Œæ„å‘³ç€æ¸…ç©ºhelloå€¼ val2: \\n æ¢è¡Œç¬¦ï¼Œworldè¾“å‡ºä¹‹åæ¢è¡Œ val3: \\t åˆ¶è¡¨ç¬¦ï¼Œhello worldç®€æ˜“ç†è§£ä¸ºä¸€ä¸ªå¤§çš„ç©ºæ ¼ï¼Œæ ¼å¼ç¾è§‚ï¼Œè‡ªå¸¦å¯¹é½ val4: Goè¯­è¨€ä¸­\u0026#39;å¯ä»¥ç›´æ¥å†™åœ¨\u0026#34;å†…éƒ¨ï¼Œ\\\\è¾“å‡º\\, \\\u0026#34; è½¬ä¹‰å­—ç¬¦ï¼Œè¾“å‡º\u0026#34; */ fmt.Println(val1, val2, val3, val4) ç»“æœï¼š\nworld hello world \u0026#39;hello\u0026#39; \\ \u0026#34;world\u0026#34; 2.4.3 å¸¸ç”¨æ–¹æ³•\ræ–¹æ³•ååŸºæœ¬ä¸Šä¸ºå¸¸ç”¨è‹±æ–‡åç¼©å†™ï¼Œå„è¯­è¨€åŸºæœ¬é€šç”¨ï¼Œä½¿ç”¨å¤šäº†è‡ªç„¶ç†Ÿè®°\næ–¹æ³• æè¿° len è·å–å­—ç¬¦ä¸²é•¿åº¦ +æˆ–fmt.Springf æ‹¼æ¥å­—ç¬¦ä¸² strings.Split æ‹†åˆ†å­—ç¬¦ä¸² strings.Contains è·å–å­—ç¬¦ä¸²é•¿åº¦ strings.HasPrefix,strings.HasSuffix è·å–å­—ç¬¦ä¸²é•¿åº¦ strings.Index,strings.LastIndex è·å–å­—ç¬¦ä¸²é•¿åº¦ strings.Join è·å–å­—ç¬¦ä¸²é•¿åº¦ strings.ToLower å­—ç¬¦ä¸²å…¨è½¬å°å†™ strings.ToUpper å­—ç¬¦ä¸²å…¨è½¬å¤§å†™ ç¤ºä¾‹ï¼š\nvar val = \u0026#34;Hello World\u0026#34; // 1. lenæ±‚é•¿åº¦ length := len(val) fmt.Printf(\u0026#34;%sé•¿åº¦: %d\\n\u0026#34;, val, length) // 2. + æ‹¼æ¥å­—ç¬¦ä¸²ï¼ŒSprintä¸­Sä»£è¡¨è¿”å›å­—ç¬¦ä¸²ï¼ŒåŒç†å«æœ‰ï¼šSprinfã€Sprinlnï¼Œä¸Prinfã€Prinlnç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºSå¼€å¤´å‡½æ•°ä»£è¡¨è¿”å›å­—ç¬¦ä¸²ï¼Œå¯ç”¨å˜é‡æ¥æ”¶ str1 := val + \u0026#34;å°æ˜\u0026#34; str2 := fmt.Sprint(val, \u0026#34;å°çº¢\u0026#34;) fmt.Printf(\u0026#34;+æ‹¼æ¥ï¼š%s;\\tSprintå‡½æ•°æ‹¼æ¥: %s \\n\u0026#34;, str1, str2) // 3. å­—ç¬¦ä¸²æ‹†åˆ†ç»“æœä¸ºï¼šåˆ‡ç‰‡ï¼ˆç±»ä¼¼äºæ•°ç»„ï¼‰ï¼›å‚æ•°ä¸º(\u0026lt;åŸå­—ç¬¦ä¸²\u0026gt;, \u0026lt;åˆ‡ç‰‡å­—ç¬¦ä¸²\u0026gt;)ï¼Œç¤ºä¾‹ä¸­å°†Hello Worldä»¥ç©ºæ ¼æ‹†åˆ†ä¸ºHelloå’ŒWorld splitVal := strings.Split(val, \u0026#34; \u0026#34;) // åˆ‡ç‰‡ç»“æœä¸º[Hello World] // 4. Joinå°†åˆ‡ç‰‡æ‹¼æ¥æˆæ–°çš„å­—ç¬¦ä¸²ï¼›å‚æ•°ä¸º(\u0026lt;åŸå­—ç¬¦ä¸²\u0026gt;, \u0026lt;è¿æ¥ç¬¦\u0026gt;) newStr := strings.Join(splitVal, \u0026#34;,\u0026#34;) // fmt.Printf(\u0026#34;åˆ‡ç‰‡å€¼ï¼š%v;\\tJoinè¿æ¥æˆæ–°çš„å­—ç¬¦ä¸²: %s \\n\u0026#34;, splitVal, newStr) // 5.å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å­ä¸²ï¼ŒContainså‚æ•°ä¸º(\u0026lt;åŸå­—ç¬¦ä¸²\u0026gt;,\u0026lt;å­ä¸²\u0026gt;) bool1 := strings.Contains(val, \u0026#34;Hello\u0026#34;) bool2 := strings.Contains(val, \u0026#34;Hello\u0026#34;) fmt.Printf(\u0026#34;æ˜¯å¦åŒ…å«Helloï¼š%v;\\tæ˜¯å¦åŒ…å«olleH: %v \\n\u0026#34;, bool1, bool2) // 6. å‰ç¼€åˆ¤æ–­ï¼šHasPrefix ,å‚æ•°ä¸º(\u0026lt;åŸå­—ç¬¦ä¸²\u0026gt;,\u0026lt;å­ä¸²\u0026gt;); åç¼€åˆ¤æ–­ï¼šHasSuffixï¼Œå‚æ•°(\u0026lt;åŸå­—ç¬¦ä¸²\u0026gt;,\u0026lt;å­ä¸²\u0026gt;) bool3 := strings.HasPrefix(val, \u0026#34;He\u0026#34;) bool4 := strings.HasPrefix(val, \u0026#34;llo\u0026#34;) bool5 := strings.HasSuffix(val, \u0026#34;World\u0026#34;) bool6 := strings.HasSuffix(val, \u0026#34;Wor\u0026#34;) fmt.Printf(\u0026#34;å‰ç¼€åŒ…å«Heï¼š%v;\\tå‰ç¼€åŒ…å«llo: %v\\tåç¼€åŒ…å«Worldï¼š%v;\\tåç¼€åŒ…å«Wor: %v \\n\u0026#34;, bool3, bool4, bool5, bool6) // 7. è¿”å›å­ä¸²åœ¨åŸå­—ç¬¦ä¸²é¦–æ¬¡å‡ºç°çš„ä½ç½®ï¼ŒIndexï¼Œä»å‰å‘åæŸ¥æ‰¾ï¼›LastIndexï¼Œä»åå‘å‰æŸ¥æ‰¾ï¼Œå‚æ•°éƒ½ä¸º(\u0026lt;åŸå­—ç¬¦ä¸²\u0026gt;,\u0026lt;å­ä¸²\u0026gt;)ã€‚ç»“æœï¼šæŸ¥è¯¢åˆ°ï¼Œè¿”å›ä¸‹æ ‡å€¼ï¼ŒæŸ¥è¯¢ä¸åˆ°ï¼Œè¿”å›-1ã€‚æ³¨ï¼šä¸‹æ ‡ä»0å¼€å§‹ index1 := strings.Index(val, \u0026#34;o\u0026#34;) index2 := strings.LastIndex(val, \u0026#34;o\u0026#34;) index3 := strings.Index(val, \u0026#34;a\u0026#34;) fmt.Printf(\u0026#34;oä»å‰åˆ°åæŸ¥è¯¢åœ¨ç¬¬%vä½;\\toä»ååˆ°å‰æŸ¥è¯¢åœ¨ç¬¬%vä½\\taä»å‰åˆ°åæŸ¥è¯¢åœ¨ç¬¬%vä½\\n\u0026#34;, index1, index2, index3) // 8. strings.ToLowerå’Œstrings.ToUpper str3 := strings.ToLower(val) str4 := strings.ToUpper(val) fmt.Printf(\u0026#34;å…¨å°å†™ï¼š %v;\\tå…¨å¤§å†™ï¼š%v\\n\u0026#34;, str3, str4) è¿è¡Œç»“æœ\nHello Worldé•¿åº¦: 11 +æ‹¼æ¥ï¼šHello Worldå°æ˜; Sprintå‡½æ•°æ‹¼æ¥: Hello Worldå°çº¢ åˆ‡ç‰‡å€¼ï¼š[Hello World]; Joinè¿æ¥æˆæ–°çš„å­—ç¬¦ä¸²: Hello,World æ˜¯å¦åŒ…å«Helloï¼štrue; æ˜¯å¦åŒ…å«olleH: true å‰ç¼€åŒ…å«Heï¼štrue; å‰ç¼€åŒ…å«llo: false åç¼€åŒ…å«Worldï¼štrue; åç¼€åŒ…å«Wor: false oä»å‰åˆ°åæŸ¥è¯¢åœ¨ç¬¬4ä½; oä»ååˆ°å‰æŸ¥è¯¢åœ¨ç¬¬7ä½ aä»å‰åˆ°åæŸ¥è¯¢åœ¨ç¬¬-1ä½ å…¨å°å†™hello world; å…¨å¤§å†™HELLO WORLD æ¸©é¦¨æç¤ºï¼šè¿™é‡Œçš„lenã€splitã€containsã€prefixã€suffixã€indexã€joinã€lowerã€upperç­‰æ‰€è¡¨ç¤ºçš„å«ä¹‰åœ¨å„ä¸ªç¼–ç¨‹è¯­è¨€å¤§åŒå°å¼‚ï¼Œåªè¦é€šä¸€é—¨è¯­è¨€ï¼Œå…¶ä»–ä¹Ÿå°±ç®€å•äº†\n2.4.3 å­—ç¬¦ä¸²ä¸­å­—ç¬¦æ›¿æ¢\r// å­—ç¬¦ä¸²ä¸­æ›¿æ¢å­—ç¬¦ var val1 = \u0026#34;hello xioaming\u0026#34; byteStr := []byte(val1) // è‹±æ–‡å­—ç¬¦ è½¬æˆbyteæ•°ç»„ç±»å‹å³å¯ï¼Œç„¶åæ›¿æ¢å€¼ byteStr[0] = \u0026#39;a\u0026#39; fmt.Println(string(byteStr)) // string(byteStr)ä¸ºå°†æ•°ç»„è½¬æˆå­—ç¬¦ä¸²è¿”å›ï¼Œfmt.Printlnå†æ‰“å°è¾“å‡ºç»“æœ var val2 = \u0026#34;ä½ å¥½å°æ˜\u0026#34; runeStr := []rune(val2) // åŒ…å«ä¸­æ–‡å­—ç¬¦ éœ€è¦è½¬æˆruneæ•°ç»„ç±»å‹å³å¯ï¼Œç„¶åæ›¿æ¢å€¼ runeStr[0] = \u0026#39;æˆ‘\u0026#39; fmt.Println(string(runeStr)) ç»“æœï¼š\naello xioaming æˆ‘å¥½å°æ˜ 3. ç±»å‹è½¬æ¢\ræ•°å­—ç±»å‹è£…æ¢æœ‰ä¸¤ç§ï¼šä½ç²¾åº¦è½¬é«˜ç²¾åº¦ï¼Œé«˜ç²¾åº¦è½¬ä½ç²¾åº¦ æ³¨ï¼šé«˜ç²¾åº¦è½¬ä½ç²¾åº¦ï¼Œæ…ç”¨ï¼Œç”±äºç±»å‹è¡¨ç¤ºèŒƒå›´ä¸åŒï¼Œå¯èƒ½é€ æˆç²¾åº¦ä¸¢å¤±\n3.1 æ•´å‹ä¸æ•´å‹è½¬åŒ–\rç¤ºä¾‹ï¼š\n// è¿›åº¦è½¬æ¢å¯é€šè¿‡ int8(\u0026lt;æ•´å‹\u0026gt;),int16(\u0026lt;æ•´å‹\u0026gt;),int32(\u0026lt;æ•´å‹\u0026gt;),int64(\u0026lt;æ•´å‹\u0026gt;)è½¬æ¢ // 1. ä½ç²¾åº¦è½¬é«˜ç²¾åº¦ var a int8 = 127 b := int64(a) fmt.Printf(\u0026#34;a=%v,ç±»å‹ï¼š%T\\tb=%v,ç±»å‹ï¼š%T \\n\u0026#34;, a, a, b, b) // 2. é«˜ç²¾åº¦è½¬ä½ç²¾åº¦ var c int64 = 127 d := int16(c) fmt.Printf(\u0026#34;a=%v,ç±»å‹ï¼š%T\\tb=%v,ç±»å‹ï¼š%T \\n\u0026#34;, c, c, d, d) ç»“æœï¼š\na=127,ç±»å‹ï¼šint8 b=127,ç±»å‹ï¼šint64 a=127,ç±»å‹ï¼šint64 b=127,ç±»å‹ï¼šint16 3.2 æµ®ç‚¹æ•°ä¸æ•´å‹è½¬æ¢\rç¤ºä¾‹ï¼š\n// 3. æ•´å‹è½¬æµ®ç‚¹å‹ï¼Œå¯é€šè¿‡ float32(\u0026lt;æ•´å‹\u0026gt;),float64(\u0026lt;æ•´å‹\u0026gt;)ï¼Œæµ®ç‚¹æ•°è½¬æµ®ç‚¹æ•°æ®ä¹Ÿå¯ä»¥è¿™æ ·æ“ä½œ var e int16 = 256 f := float32(e) fmt.Printf(\u0026#34;a=%v,ç±»å‹ï¼š%T\\tb=%v,ç±»å‹ï¼š%T \\n\u0026#34;, e, e, f, f) // 4. æµ®ç‚¹å‹è½¬æ•´å‹ var g float64 = 3.145 h := int16(g) // æ³¨ï¼šç±»å‹ä¼šä¸¢å¤±ï¼Œä¸æ˜¯å››èˆäº”å…¥ï¼Œç›´æ¥æˆªå–æ•´æ•°éƒ¨åˆ† fmt.Printf(\u0026#34;a=%v,ç±»å‹ï¼š%T\\tb=%v,ç±»å‹ï¼š%T \\n\u0026#34;, g, g, h, h) ç»“æœï¼š\na=256,ç±»å‹ï¼šint16 b=256,ç±»å‹ï¼šfloat32 a=3.145,ç±»å‹ï¼šfloat64 b=3,ç±»å‹ï¼šint16 3.3 å…¶ä»–ç±»å‹ä¸stringç±»å‹è½¬æ¢\rvar ( intV = 123 folatV = 3.145 boolV = true charV = \u0026#39;A\u0026#39; ) // 1. é€šè¿‡ fmt.Sprintfè¿›è¡Œè½¬æ¢ str1 := fmt.Sprintf(\u0026#34;%d\u0026#34;, intV) // è½¬æ¢int str2 := fmt.Sprintf(\u0026#34;%f\u0026#34;, folatV) // è½¬æ¢float str3 := fmt.Sprintf(\u0026#34;%t\u0026#34;, boolV) // è½¬æ¢ bool str4 := fmt.Sprintf(\u0026#34;%c\u0026#34;, charV) // è½¬æ¢ å­—ç¬¦ fmt.Println(str1, str2, str3, str4) ç»“æœï¼š\n123 3.145000 true A 3.4 strconv å­—ç¬¦ä¸²ç±»å‹è½¬æ¢å·¥å…·\r3.4.1 strconv.Atoi(å­—ç¬¦ä¸²è½¬int) å’Œ strconv.Itoa(intè½¬å­—ç¬¦ä¸²)\rç®€å•è®°å¿†ï¼ši(int) ï¼Œitoaä¸­iåœ¨é¦–å­—æ¯ï¼Œè¡¨ç¤ºintè½¬stringã€‚atoiä¸­iåœ¨æœ«å°¾ï¼Œè¡¨ç¤ºstringè½¬int\nvar str = \u0026#34;123\u0026#34; // 1. å°†stringè½¬æ¢ä¸ºintç±»å‹ï¼Œstrconv.Atoi(\u0026lt;string\u0026gt;)ï¼Œ è¿”å›ç±»å‹æœ‰ä¸¤ä¸ªï¼š\u0026lt;è½¬æ¢æ•°æ®,å¼‚å¸¸err\u0026gt; num1, _ := strconv.Atoi(str) fmt.Printf(\u0026#34;è½¬åŒ–å€¼ï¼š%v\\tç±»å‹ï¼š%T\\n\u0026#34;, num1, num1) // 2. å°†intç±»å‹è½¬æ¢ä¸ºstring, strconv.Itoa(\u0026lt;int\u0026gt;),ç±»å‹å¿…é¡»intï¼Œè¿”å›ç±»å‹æœ‰ä¸€ä¸ªï¼š\u0026lt;string\u0026gt; var num2 int64 = 456 str2 := strconv.Itoa(int(num2)) fmt.Printf(\u0026#34;è½¬åŒ–å€¼ï¼š%v\\tç±»å‹ï¼š%T\\n\u0026#34;, str2, str2) ç»“æœï¼š\nè½¬åŒ–å€¼ï¼š123 ç±»å‹ï¼šint è½¬åŒ–å€¼ï¼š456 ç±»å‹ï¼šstring 3.4.2 strconv.Parse å­—ç¬¦ä¸²è§£æä¸ºå…¶ä»–ç±»å‹\rstrconv.Parseèƒ½å°†å°†å­—ç¬¦ä¸²è§£æä¸ºæŒ‡å®šç±»å‹ï¼Œå‰æï¼šå…è®¸è½¬æ¢\nvar ( str1 = \u0026#34;256\u0026#34; str2 = \u0026#34;3.145\u0026#34; str3 = \u0026#34;true\u0026#34; ) // ä»¥ä¸‹çš„bitSizeå‚æ•°æ„Ÿè§‰æ„ä¹‰ä¸å¤§ï¼Œè¿”å›å€¼æœ‰ç‰¹å®šçš„è¿”å›ç±»å‹ /* 1. ParseInt params å‚æ•°1: stringæ•°æ® å‚æ•°2ï¼šbase æŒ‡å®šè¿›åˆ¶ï¼Œå–å€¼èŒƒå›´æ˜¯ 2 åˆ° 36ã€‚å¦‚æœ base ä¸º 0 å‚æ•°3ï¼šbitSize æŒ‡å®šç»“æœå¿…é¡»èƒ½æ— æº¢å‡ºèµ‹å€¼çš„æ•´æ•°ç±»å‹ï¼Œ0ã€8ã€16ã€32ã€64 åˆ†åˆ«ä»£è¡¨ intã€int8ã€int16ã€int32ã€int64 return int64: è¿”å›å§‹ç»ˆä¸ºint64æ•°å€¼ err: è½¬æ¢å¤±è´¥åè¿”å›çš„å¤±è´¥ä¿¡æ¯ */ num1, _ := strconv.ParseInt(str1, 10, 0) fmt.Printf(\u0026#34;è½¬åŒ–å€¼ï¼š%v\\tç±»å‹ï¼š%T\\n\u0026#34;, num1, num1) /* 2. ParseFloat params å‚æ•°1: stringæ•°æ® å‚æ•°2ï¼šbitSize æŒ‡å®šäº†è¿”å›å€¼çš„ç±»å‹ï¼Œ32 è¡¨ç¤º float32ï¼Œ64 è¡¨ç¤º float64ï¼› return float64: è¿”å›å§‹ç»ˆä¸ºfloat64æ•°å€¼ err: è½¬æ¢å¤±è´¥åè¿”å›çš„å¤±è´¥ä¿¡æ¯ */ num2, _ := strconv.ParseFloat(str2, 32) fmt.Printf(\u0026#34;è½¬åŒ–å€¼ï¼š%0.3f\\tç±»å‹ï¼š%T\\n\u0026#34;, num2, num2) /* 3. ParseBool params å‚æ•°1: stringæ•°æ® return bool: è¿”å›å§‹ç»ˆä¸ºboolæ•°å€¼ err: è½¬æ¢å¤±è´¥åè¿”å›çš„å¤±è´¥ä¿¡æ¯ */ boo, _ := strconv.ParseBool(str3) fmt.Printf(\u0026#34;è½¬åŒ–å€¼ï¼š%v\\tç±»å‹ï¼š%T\\n\u0026#34;, boo, boo) ç»“æœï¼š\nè½¬åŒ–å€¼ï¼š256 ç±»å‹ï¼šint64 è½¬åŒ–å€¼ï¼š3.145 ç±»å‹ï¼šfloat64 è½¬åŒ–å€¼ï¼štrue ç±»å‹ï¼šbool 3.4.3 strconv.Format æ•°å­—æ ¼å¼åŒ–ä¸ºstring\rvar ( intV = 123 floatV = 3.145e2 booV = true ) // ä»¥ä¸‹çš„bitSizeå‚æ•°æ„Ÿè§‰æ„ä¹‰ä¸å¤§ï¼Œè¿”å›å€¼æœ‰ç‰¹å®šçš„è¿”å›ç±»å‹ /* 1. FormatInt params å‚æ•°1: int64æ•°æ® å‚æ•°2ï¼šbase æŒ‡å®šè¿›åˆ¶ï¼Œå–å€¼èŒƒå›´æ˜¯ 2 åˆ° 36ã€‚å¦‚æœ base ä¸º 0 return string: è¿”å›å§‹ç»ˆä¸ºstringæ•°å€¼ */ str1 := strconv.FormatInt(int64(intV), 10) fmt.Printf(\u0026#34;è½¬åŒ–å€¼ï¼š%v\\tç±»å‹ï¼š%T\\n\u0026#34;, str1, str1) /* 2. FormatFloat params å‚æ•°1: float64æ•°æ® å‚æ•°2ï¼šæ ¼å¼åŒ–ç±»å‹ \u0026#39;b\u0026#39; (-ddddpÂ±ddd, äºŒè¿›åˆ¶æŒ‡æ•°), \u0026#39;e\u0026#39; (-d.ddddeÂ±dd, åè¿›åˆ¶eæŒ‡æ•°), \u0026#39;E\u0026#39; (-d.ddddEÂ±dd, åè¿›åˆ¶EæŒ‡æ•°), \u0026#39;f\u0026#39; (-ddd.dddd, æ— æŒ‡æ•°), \u0026#39;g\u0026#39; (\u0026#39;e\u0026#39;è¡¨ç¤ºå¤§æŒ‡æ•°ï¼Œ\u0026#39;f\u0026#39;è¡¨ç¤ºå…¶ä»–æŒ‡æ•°), \u0026#39;G\u0026#39; (\u0026#39;E\u0026#39;è¡¨ç¤ºå¤§æŒ‡æ•°ï¼Œ\u0026#39;F\u0026#39;è¡¨ç¤ºå…¶ä»–æŒ‡æ•°), \u0026#39;x\u0026#39; (-0xd.ddddpÂ±ddd, åå…­è¿›åˆ¶åˆ†æ•°å’ŒäºŒè¿›åˆ¶æŒ‡æ•° å°å†™), \u0026#39;X\u0026#39; (-0Xd.ddddPÂ±ddd, åå…­è¿›åˆ¶åˆ†æ•°å’ŒäºŒè¿›åˆ¶æŒ‡æ•° å¤§å†™). å‚æ•°3ï¼šä¿ç•™çš„å°æ•°ç‚¹ä½æ•°ï¼Œå››èˆäº”å…¥ã€‚-1ä»£è¡¨ä¸å¯¹å°æ•°ç‚¹æ ¼å¼åŒ–å¤„ç† å‚æ•°4ï¼šbitSize æŒ‡å®šäº†è¿”å›å€¼çš„ç±»å‹ï¼Œ32 è¡¨ç¤º float32ï¼Œ64 è¡¨ç¤º float64ï¼› return string: è¿”å›å§‹ç»ˆä¸ºstringæ•°å€¼ */ str2 := strconv.FormatFloat(floatV, \u0026#39;f\u0026#39;, -1, 64) fmt.Printf(\u0026#34;è½¬åŒ–å€¼ï¼š%v\\tç±»å‹ï¼š%T\\n\u0026#34;, str2, str2) /* 3. FormatFloat params å‚æ•°1: boolæ•°æ® return string: è¿”å›å§‹ç»ˆä¸ºstringæ•°å€¼ */ str3 := strconv.FormatBool(booV) fmt.Printf(\u0026#34;è½¬åŒ–å€¼ï¼š%v\\tç±»å‹ï¼š%T\\n\u0026#34;, str3, str3) ç»“æœï¼š\nè½¬åŒ–å€¼ï¼š123 ç±»å‹ï¼šstring è½¬åŒ–å€¼ï¼š314.5 ç±»å‹ï¼šstring è½¬åŒ–å€¼ï¼štrue ç±»å‹ï¼šstring 3.4.4 å…¶ä»–æ–¹æ³•\rå…¶ä»–è¿˜åŒ…å«strconv.Append(å­—ç¬¦æ¢è¿½åŠ )ã€strconv.IsPrintï¼ˆæ˜¯å¦å¯æ‰“å°ï¼‰ å’Œ strconv.IsGraphicï¼ˆæ˜¯å¦å›¾å½¢å­—ç¬¦ï¼‰ã€strconv.Quoteï¼ˆå­—ç¬¦ä¸²è½¬ä¹‰ï¼‰ å’Œ strconv.Unquoteï¼ˆå–å‡ºè½¬ä¹‰ï¼‰ã€strconv.CanBackquoteï¼ˆåˆ¤æ–­æ˜¯å¦å¯ä»¥è¡¨ç¤ºä¸ºå•è¡Œåå¼•å·å­—ç¬¦ä¸²ï¼‰ç­‰ã€‚ è¿™é‡Œå­¦ä¹ åˆ°è¿™ï¼Œä¸åšè¯¦ç»†ç¤ºä¾‹åˆ†æï¼Œæœ‰å°è±¡å³å¯ï¼Œéœ€è¦æ—¶å†å­¦ä¹ ï¼›å¯å‚è€ƒé“¾æ¥\n","date":"2024-12-21T19:37:51+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-03/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬ä¸‰ç¯‡ åŸºæœ¬æ•°æ®ç±»å‹\u0026ç±»å‹è½¬æ¢ã€‘"},{"content":" å‰è¨€ï¼šåŒ…æ˜¯æŒ‡ç”±å®˜æ–¹æˆ–è€…è‡ªå®šä¹‰çš„ä¸€ç³»åˆ—åŠŸèƒ½é›†åˆä½“ã€‚ä½¿ç”¨å‰éœ€è¦å…ˆå¼•å…¥ï¼Œä¾‹å¦‚ä»Šæ—¥æ‰€è®²çš„fmtåŒ…ã€‚å¼•å…¥æ–¹å¼å¦‚ä¸‹ï¼š import \u0026quot;fmt\u0026quot;\n1. fmt åŒ…\rfmt åŒ…æ˜¯ä¸€ä¸ªéå¸¸é‡è¦ä¸”å¹¿æ³›ä½¿ç”¨çš„æ ‡å‡†åº“åŒ…ï¼Œå®ƒæä¾›äº†æ ¼å¼åŒ–I/Oï¼ˆè¾“å…¥/è¾“å‡ºï¼‰åŠŸèƒ½ï¼Œç±»ä¼¼äºCè¯­è¨€ä¸­çš„ printf å’Œ scanfã€‚é€šè¿‡è¿™ä¸ªåŒ…ï¼Œä½ å¯ä»¥è¯»å–è¾“å…¥å¹¶å°†æ•°æ®æ ¼å¼åŒ–è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæˆ–å…¶ä»–å†™å…¥å™¨ï¼ˆwritersï¼‰\n1.1 æ‰“å°ï¼ˆprintï¼‰\ræ‰“å°åŠŸèƒ½ï¼Œç®€å•æ¥è¯´å°±æ˜¯ç³»ç»Ÿè¾“å‡ºåŠŸèƒ½ï¼Œè‹±æ–‡ç®€ä¹‰ä¸ºPrintï¼Œé©¼å³°å‘½åï¼Œé¦–å­—æ¯å¤§å†™ï¼Œåç¼€lnæ¢è¡Œå«ä¹‰ã€‚åç¼€fè¡¨ç¤ºå¯æ ¼å¼åŒ–æ‰“å°\n1.1.1 Print æ‰“å°\r// package åŒ…å£°æ˜ï¼š å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ–‡ä»¶å¤¹ package main // import å¯¼å…¥ï¼šä¸€èˆ¬æŒ‡å¯¼å…¥å®˜æ–¹æˆ–è‡ªå®šä¹‰åŠŸèƒ½åŒ… import \u0026#34;fmt\u0026#34; // mainå‡½æ•° å…¥å£å‡½æ•° func main() { /** * æ‰“å°è¾“å‡ºåŠŸèƒ½ */ fmt.Print(\u0026#39;C\u0026#39;) // æ‰“å°å­—ç¬¦ï¼Œå•å¼•å·ï¼Œè¯­æ³•çµæ´»æ˜“å­¦ fmt.Print(\u0026#34;a\u0026#34;) // æ‰“å°å­—ç¬¦ä¸² fmt.Print(\u0026#34;Hello World\u0026#34;) // æ‰“å°å­—ç¬¦ä¸²ï¼ŒåŒå¼•å· fmt.Print(123) // æ‰“å°æ•´æ•° fmt.Print(3.1415926) // æ‰“å°å°æ•° fmt.Print(true) // æ‰“å°å¸ƒå°”å€¼ } ä¸Šè¿°ç»“æœï¼š\n67aHello World1233.1415926true æ€»ç»“ï¼šPrintä»…æ‰“å°åŠŸèƒ½ï¼Œå¯æ‰“å°ä»»æ„ç±»å‹ï¼Œç»†å¿ƒçš„æœ‹å‹å¯èƒ½å‘ç°ï¼Œå•å¼•å·å­—ç¬¦ä¸²'C'è¾“å‡ºç»“æœä¸º67ï¼Œå•å¼•å·ä»£è¡¨å•ä¸ªå­—ç¬¦ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯ASCIIå€¼ï¼ŒåŒå¼•å·è¡¨ç¤ºæ‰“å°å­—ç¬¦ä¸²ã€‚å¦‚æœä½¿ç”¨'ABC'ã€‚è¿è¡Œç»“æœä¼šæŠ¥é”™more than one character in rune literalã€‚ä¸­æ–‡æ„æ€æ˜¯ï¼šç¬¦æ–‡æ–‡å­—ä¸­æœ‰å¤šä¸ªå­—ç¬¦ã€‚\n1.1.2 Println æ‰“å°åæ¢è¡Œ\rä¸Šè¿°ä»£ç å¦‚æœä½¿ç”¨Println æ‰“å°ï¼Œä»£ç å¦‚ä¸‹ï¼š æ³¨ï¼šä»¥ä¸‹ä»£ç ä»¥ååªæ˜¾ç¤ºå…³é”®ä»£ç æ®µï¼Œmainå‡½æ•°ä¸äºˆå±•ç¤ºã€‚\nfmt.Println(\u0026#39;C\u0026#39;) // æ‰“å°å­—ç¬¦ï¼Œå•å¼•å·ï¼Œè¯­æ³•çµæ´»æ˜“å­¦ fmt.Println(\u0026#34;a\u0026#34;) // æ‰“å°å­—ç¬¦ä¸² fmt.Println(\u0026#34;Hello World\u0026#34;,\u0026#34;ä½ å¥½\u0026#34;) // æ‰“å°å­—ç¬¦ä¸²ï¼ŒåŒå¼•å· fmt.Println(123) // æ‰“å°æ•´æ•° fmt.Println(3.1415926) // æ‰“å°å°æ•° fmt.Println(true) // æ‰“å°å¸ƒå°”å€¼ æ•ˆæœæ¸…æ™°æ˜äº†ï¼Œå¦‚ä¸‹ï¼š\n67 a Hello World ä½ å¥½ 123 3.1415926 true 1.1.3 Printf æ‰“å°æ ¼å¼åŒ–å‚æ•°\rå¯æŒ‡å®šæ ¼å¼æ‰“å°ã€‚å¸¸ç”¨æ ¼å¼ç±»å‹å¦‚ä¸‹ï¼š\næ ¼å¼åŒ–ç¬¦å· æè¿° é‡è¦ç¨‹åº¦(ä¸ªäººè§‚ç‚¹) %T æ‰“å°å˜é‡ç±»å‹ é«˜ %v ä»¥é»˜è®¤æ ¼å¼è¾“å‡ºå˜é‡ é«˜ %t è¾“å‡º true æˆ– false é«˜ %b äºŒè¿›åˆ¶è¡¨ç¤º é«˜ %c Unicode å¯¹åº”å­—ç¬¦ ä½ %d åè¿›åˆ¶è¡¨ç¤º é«˜ %o å…«è¿›åˆ¶è¡¨ç¤º é«˜ %x åå…­è¿›åˆ¶è¡¨ç¤ºï¼ˆå°å†™å­—æ¯ï¼‰ é«˜ %X åå…­è¿›åˆ¶è¡¨ç¤ºï¼ˆå¤§å†™å­—æ¯ï¼‰ ä½ %U Unicode æ ¼å¼è¾“å‡º ä½ %f åè¿›åˆ¶æµ®ç‚¹æ•° é«˜ %e ç§‘å­¦è®¡æ•°æ³•ï¼ˆå°å†™ eï¼‰ ä½ %E ç§‘å­¦è®¡æ•°æ³•ï¼ˆå¤§å†™ Eï¼‰ ä½ %g è‡ªåŠ¨é€‰æ‹© %f æˆ– %e çš„ç®€æ´è¡¨ç¤º é«˜ %s æ™®é€šå­—ç¬¦ä¸² é«˜ %q å¸¦åŒå¼•å·çš„å­—ç¬¦ä¸²æˆ–å­—ç¬¦ ä½ %p æŒ‡é’ˆåœ°å€ ä½ ç¤ºä¾‹ä»£ç ï¼š\nfmt.Printf(\u0026#34;å¸ƒå°”å€¼ï¼š%t \\n\u0026#34;, false) // æ‰“å°å¸ƒå°”å€¼ fmt.Printf(\u0026#34;Unicode 65å¯¹åº”å­—ç¬¦ï¼š%c \\n\u0026#34;, 65) // Unicode å¯¹åº”å­—ç¬¦ fmt.Printf(\u0026#34;é»˜è®¤æ ¼å¼65ï¼š%v \\n\u0026#34;, 65) // äºŒè¿›åˆ¶æ‰“å° fmt.Printf(\u0026#34;äºŒè¿›åˆ¶65ï¼š%b \\n\u0026#34;, 65) // äºŒè¿›åˆ¶æ‰“å° fmt.Printf(\u0026#34;åè¿›åˆ¶65ï¼š%d \\n\u0026#34;, 65) // åè¿›åˆ¶æ‰“å° fmt.Printf(\u0026#34;å…«è¿›åˆ¶65ï¼š%o \\n\u0026#34;, 65) // å…«è¿›åˆ¶æ‰“å° fmt.Printf(\u0026#34;åå…­è¿›åˆ¶1024ï¼ˆå°ï¼‰ï¼š%x \\n\u0026#34;, 1024) // åå…­è¿›åˆ¶å°å†™æ‰“å° fmt.Printf(\u0026#34;åå…­è¿›åˆ¶1024ï¼ˆå¤§ï¼‰ï¼š%X \\n\u0026#34;, 1024) // åå…­è¿›åˆ¶å¤§å†™æ‰“å° fmt.Printf(\u0026#34;\u0026#39;C\u0026#39; Unicodeå€¼ï¼š%U \\n\u0026#34;, \u0026#39;C\u0026#39;) // Unicodeè¾“å‡º fmt.Printf(\u0026#34;æµ®ç‚¹æ•°ï¼š%f \\n\u0026#34;, 3.1415926) // åè¿›åˆ¶æµ®ç‚¹æ•° fmt.Printf(\u0026#34;ç§‘å­¦è®¡æ•°æ³•ï¼ˆå°ï¼‰ï¼š%e \\n\u0026#34;, 3.1415926) // ç§‘å­¦è®¡æ•°æ³•ï¼ˆå°å†™ eï¼‰ fmt.Printf(\u0026#34;ç§‘å­¦è®¡æ•°æ³•ï¼ˆå¤§ï¼‰ï¼š%E \\n\u0026#34;, 3.1415926) // ç§‘å­¦è®¡æ•°æ³•ï¼ˆå¤§å†™ eï¼‰ è¿è¡Œç»“æœï¼š\nå¸ƒå°”å€¼ï¼šfalse Unicode 65å¯¹åº”å­—ç¬¦ï¼šA é»˜è®¤æ ¼å¼65ï¼š65 äºŒè¿›åˆ¶65ï¼š1000001 åè¿›åˆ¶65ï¼š65 å…«è¿›åˆ¶65ï¼š101 åå…­è¿›åˆ¶1024ï¼ˆå°ï¼‰ï¼š400 åå…­è¿›åˆ¶1024ï¼ˆå¤§ï¼‰ï¼š400 \u0026#39;C\u0026#39; Unicodeå€¼ï¼šU+0043 æµ®ç‚¹æ•°ï¼š3.141593 ç§‘å­¦è®¡æ•°æ³•ï¼ˆå°ï¼‰ï¼š3.141593e+00 ç§‘å­¦è®¡æ•°æ³•ï¼ˆå¤§ï¼‰ï¼š3.141593E+00 1.2 è¾“å…¥(Scan)\rè¾“å…¥ç”¨Scanè¡¨ç¤ºï¼Œåç¼€fè¡¨ç¤ºæ ¼å¼åŒ–è¾“å…¥\n1.2.1 Scan è¾“å…¥\rç¤ºä¾‹ï¼š\n// åŸºæœ¬å˜é‡å£°æ˜ï¼švar \u0026lt;å˜é‡å\u0026gt; \u0026lt;ç±»å‹\u0026gt; var name string // å£°æ˜å­—ç¬¦ä¸²ç±»å‹ var age int // å£°æ˜æ•´æ•°ç±»å‹ fmt.Print(\u0026#34;è¯·è¾“å…¥å§“åå’Œå¹´é¾„ï¼š\u0026#34;) fmt.Scan(\u0026amp;name, \u0026amp;age) // å½•å…¥å§“åå’Œå¹´é¾„ fmt.Printf(\u0026#34;name=%s,age=%d \\n\u0026#34;, name, age) // æ ¼å¼åŒ–è¾“å‡ºå§“åå’Œå¹´é¾„ è¿è¡Œç»“æœï¼š\nè¯·è¾“å…¥å§“åå’Œå¹´é¾„ï¼šå¼ ä¸‰ 18 name=å¼ ä¸‰,age=18 1.2.2 Scanf æ ¼å¼åŒ–è¾“å…¥\rç¤ºä¾‹ï¼š\n// åŸºæœ¬å˜é‡å£°æ˜ï¼švar \u0026lt;å˜é‡å\u0026gt; \u0026lt;ç±»å‹\u0026gt; var name string // å£°æ˜å­—ç¬¦ä¸²ç±»å‹ var age int // å£°æ˜æ•´æ•°ç±»å‹ fmt.Print(\u0026#34;è¯·è¾“å…¥å§“åå’Œå¹´é¾„ï¼š\u0026#34;) fmt.Scanf(\u0026#34;%s %d\u0026#34;, \u0026amp;name, \u0026amp;age) fmt.Printf(\u0026#34;name=%s,age=%d \\n\u0026#34;, name, age) è¿è¡Œå¦‚ä¸‹ç¤ºä¾‹ï¼Œä½“éªŒåˆ°ï¼šGoè¯­è¨€çµæ´»å¤šå˜ï¼Œé€‚åˆ0åŸºç¡€å­¦ä¹ \nPS F:\\go_project\u0026gt; go run main.go è¯·è¾“å…¥å§“åå’Œå¹´é¾„ï¼šå¼ ä¸‰ name=å¼ ä¸‰,age=0 PS F:\\go_project\u0026gt; go run main.go è¯·è¾“å…¥å§“åå’Œå¹´é¾„ï¼šå¼ ä¸‰ 18 name=å¼ ä¸‰,age=18 PS F:\\go_project\u0026gt; go run main.go è¯·è¾“å…¥å§“åå’Œå¹´é¾„ï¼šå¼ ä¸‰ æå›› name=å¼ ä¸‰,age=0 PS F:\\go_project\u0026gt; go run main.go è¯·è¾“å…¥å§“åå’Œå¹´é¾„ï¼šå¼ ä¸‰ æå›› 18 name=å¼ ä¸‰,age=0 PS F:\\go_project\u0026gt; go run main.go è¯·è¾“å…¥å§“åå’Œå¹´é¾„ï¼šå¼ ä¸‰ 18 æå›› name=å¼ ä¸‰,age=18 PS F:\\go_project\u0026gt; go run main.go è¯·è¾“å…¥å§“åå’Œå¹´é¾„ï¼š18 å¼ ä¸‰ name=18,age=0 PS F:\\go_project\u0026gt; 2. å˜é‡\rå˜é‡ï¼Œå­˜å‚¨æ•°æ®çš„å®¹å™¨ï¼Œå¯ä»¥å­˜æ”¾ä»»ä½•æ•°æ®å€¼ã€‚å˜é‡åç”±å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ç»„æˆï¼Œæ•°å­—ä¸èƒ½å¼€å¤´ã€‚Goä¸­çš„å…³é”®å­—å’Œä¿ç•™å­—ä¸èƒ½ä½œä¸ºå˜é‡å\n2.1 å˜é‡çš„å£°æ˜\rå£°æ˜å˜é‡ï¼ŒæŒ‡çš„æ˜¯å®šä¹‰å˜é‡ æ€»å…±æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š\n// var \u0026lt;å˜é‡å\u0026gt; \u0026lt;æ•°æ®ç±»å‹\u0026gt; var a string // var \u0026lt;å˜é‡å\u0026gt;=\u0026lt;å€¼\u0026gt; var b = \u0026#34;å¼ ä¸‰\u0026#34; fmt.Printf(\u0026#34;a=%v,b=%v\u0026#34;, a, b) // aæ²¡æœ‰èµ‹å€¼ï¼Œé»˜è®¤ä¸ºç©º ç»“æœï¼š\na=,b=å¼ ä¸‰ é»˜è®¤åˆå§‹å€¼æµ‹è¯•ï¼š\nvar a string // å­—ç¬¦ä¸²ï¼Œé»˜è®¤ä¸ºç©º var b int // æ•´å‹ï¼Œé»˜è®¤ä¸º0 var c bool // å¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸ºfalse var d float32 // æµ®ç‚¹ç±»å‹ï¼Œé»˜è®¤ä¸º0 fmt.Printf(\u0026#34;a=%v, b=%v, c=%v, d=%v\u0026#34;, a, b, c, d) // aæ²¡æœ‰èµ‹å€¼ï¼Œé»˜è®¤ä¸ºç©º ç»“æœ\na=, b=0, c=false, d=0 æç¤ºï¼šGoè¯­è¨€ä¸­å˜é‡å£°æ˜å¿…é¡»ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™æç¤º declared and not usedï¼Œæ„æ€æ˜¯å£°æ˜äº†å¹¶æ²¡æœ‰ä½¿ç”¨\n2.2 å˜é‡åˆå§‹åŒ–ï¼Œèµ‹å€¼\r// å˜é‡åˆå§‹åŒ–å£°æ˜çš„ä¸‰ç§æ–¹å¼ // 1.1 å…ˆå£°æ˜å˜é‡ æ ¼å¼ï¼š var \u0026lt;å˜é‡å\u0026gt; \u0026lt;å˜é‡ç±»å‹\u0026gt; var name string // 1.2 åèµ‹å€¼ æ ¼å¼ï¼š\u0026lt;å˜é‡å\u0026gt; = \u0026lt;å€¼\u0026gt; name = \u0026#34;å¼ ä¸‰\u0026#34; // 2. å£°æ˜çš„åŒæ—¶è¿›è¡Œèµ‹å€¼ æ ¼å¼ï¼švar \u0026lt;å˜é‡å\u0026gt; = \u0026lt;å€¼\u0026gt; var age = 18 // 3.çŸ­å˜é‡å£°æ˜æ³• æ ¼å¼ï¼š\u0026lt;å˜é‡å\u0026gt; := \u0026lt;å€¼\u0026gt; sex := \u0026#34;ç”·\u0026#34; score := 80 fmt.Print(name, age, sex, score) ç»“æœï¼š\nå¼ ä¸‰18ç”·80 2.2 å£°æ˜å¤šä¸ªå˜é‡\r// 1. ä¸€æ¬¡å£°æ˜ç›¸åŒç±»å‹ var \u0026lt;å˜é‡å1\u0026gt;,\u0026lt;å˜é‡å2\u0026gt;... \u0026lt;æ•°æ®ç±»å‹\u0026gt; var a1, a2, a3 string a1 = \u0026#34;å¼ ä¸‰\u0026#34; a2 = \u0026#34;æå››\u0026#34; a3 = \u0026#34;ç‹äº”\u0026#34; fmt.Println(a1, a2, a3) /* * 2. å…ˆå£°æ˜ï¼Œåèµ‹å€¼ var ( \u0026lt;å˜é‡å1\u0026gt; \u0026lt;æ•°æ®ç±»å‹\u0026gt; \u0026lt;å˜é‡å2\u0026gt; \u0026lt;æ•°æ®ç±»å‹\u0026gt; ... ) */ var ( name string age int ) name = \u0026#34;èµµå…­\u0026#34; age = 20 fmt.Println(name, age) /* 3. å£°æ˜å³èµ‹å€¼ var ( \u0026lt;å˜é‡å1\u0026gt; = \u0026lt;å€¼\u0026gt; \u0026lt;å˜é‡å2\u0026gt; = \u0026lt;å€¼\u0026gt; ... ) */ var ( num1 = 1 num2 = 2 ) fmt.Println(num1, num2) // 4. çŸ­å˜é‡å£°æ˜æ³• \u0026lt;å˜é‡å1\u0026gt;,\u0026lt;å˜é‡å2\u0026gt;,\u0026lt;å˜é‡å3\u0026gt; := \u0026lt;å€¼1\u0026gt;,\u0026lt;å€¼2\u0026gt;,\u0026lt;å€¼3\u0026gt; num3, num4, num5 := 3, 4, \u0026#34;Hello\u0026#34; fmt.Println(num3, num4, num5) ç»“æœï¼šæç¤ºï¼šPrintlnå…·æœ‰åŠ ç©ºæ ¼åŠæ¢è¡ŒåŠŸèƒ½\nå¼ ä¸‰ æå›› ç‹äº” èµµå…­ 20 1 2 3 4 Hello varå£°æ˜å¯ç”¨äºå…¨å±€å®šä¹‰ä½¿ç”¨ï¼ŒçŸ­å˜é‡å£°æ˜åªèƒ½ç”¨äºå±€éƒ¨å˜é‡ã€‚\n2.3 åŒ¿åå˜é‡\råŒ¿åå˜é‡é¡¾åæ€ä¹‰æ²¡æœ‰å˜é‡åï¼Œä¸€æ¬¡æ€§æ¥æ”¶ï¼Œç”¨_è¡¨ç¤º\nç¤ºä¾‹ï¼š\npackage main import \u0026#34;fmt\u0026#34; // å…ˆä¸¾ç¤ºä¾‹ï¼Œå‡½æ•°çš„å®šä¹‰åç»­å­¦ä¹ è®²è§£ func getUserInfo() (string, int) { return \u0026#34;zhangsan\u0026#34;, 10 } // mainå‡½æ•° å…¥å£å‡½æ•° func main() { // varå£°æ˜æ¥æ”¶ var name, age = getUserInfo() fmt.Println(name, age) // _åŒ¿åå˜é‡ï¼Œç”¨äºä¸¢å¼ƒèµ‹å€¼ var _, age1 = getUserInfo() fmt.Println(age1) var name1, _ = getUserInfo() fmt.Println(name1) } ç»“æœï¼š\nzhangsan 10 10 zhangsan åŒ¿åå˜é‡ä¸å ç”¨å‘½åç©ºé—´ï¼Œå¯ä»¥é‡å¤ä½¿ç”¨ï¼Œä½†æ˜¯varï¼Œ:=å£°æ˜çš„å˜é‡åç§°ä¸å¯é‡å¤\n3. å¸¸é‡\rå˜é‡æ˜¯å¯ä»¥ä¿®æ”¹ï¼Œå˜æ›´çš„å€¼ï¼Œè€Œå¸¸é‡æ˜¯ä¸å¯æ”¹å˜çš„å€¼ï¼Œç”¨constå£°æ˜\n3.1 å¸¸é‡çš„å£°æ˜\r// const å®šä¹‰ä¸€ä¸ªå¸¸é‡ * æœ€å¸¸ç”¨ const A = \u0026#34;TEST1\u0026#34; fmt.Println(A) // å®šä¹‰å¤šä¸ªå¸¸é‡ const ( B = \u0026#34;TEST2\u0026#34; C = \u0026#34;TEST3\u0026#34; D = \u0026#34;TEST4\u0026#34; ) fmt.Println(B, C, D) // å®šä¹‰å¤šä¸ªå¸¸é‡ï¼Œç»™å®šä¸€ä¸ªå€¼ const ( E = \u0026#34;TEST5\u0026#34; F G // å€¼é»˜è®¤ä¸ä¸Šä¸€ä¸ªç›¸åŒ H = \u0026#34;TEST6\u0026#34; I // å€¼é»˜è®¤ä¸ä¸Šä¸€ä¸ªç›¸åŒ ) fmt.Println(E, F, G, H, I) ç»“æœï¼š\nTEST1 TEST2 TEST3 TEST4 TEST5 TEST5 TEST5 TEST6 TEST6 3.2 iota è‡ªå¢é•¿\riotaä¸ºGoä¸­çš„è®¡æ•°å™¨ï¼Œå¸¸ä¸constç»“åˆä½¿ç”¨\nç¤ºä¾‹ï¼š\n// iota è®¡æ•°å™¨ä½¿ç”¨ const ( n1 = iota // 0 n2 // 1 _ // åŒ¿åè·³è¿‡è®¡æ•° n3 // 3 n4 = iota // 4 n5 // 5 n6 = 100 // 100 æ’é˜Ÿèµ‹å€¼ n7 = iota // 7 n8, n9, n10 = iota, iota, iota + 1 // 8,8,9 å¤šå˜é‡å£°æ˜iotaä¸ä¼šè®¡æ•°å åŠ ï¼Œ ) fmt.Println(n1, n2, n3, n4, n5, n6, n7, n8, n9, n10) ç»“æœï¼š\n0 1 3 4 5 100 7 8 8 9 4. æ€»ç»“ï¼šGoå¸¸é‡å˜é‡å‘½åè§„åˆ™\rå˜é‡åå¿…é¡»ç”±æ•°å­—ï¼Œå­—æ¯ï¼Œä¸‹åˆ’çº¿_ç»„æˆ æ ‡è¯†ç¬¦å¼€å¤´ä¸èƒ½æ˜¯æ•°å­— æ ‡è¯†ç¬¦ä¸èƒ½æ˜¯ä¿ç•™å­—å’Œå…³é”®å­—(varã€ifã€forç­‰) å˜é‡çš„åå­—æ˜¯ä¸¥æ ¼åŒºåˆ†å¤§å°å†™çš„ï¼Œnameã€Nameã€NAmeä»¥åŠNAMEæ˜¯ä¸åŒçš„å››ä¸ªå˜é‡ã€‚Goè¯­æ³•æ”¯æŒï¼Œä½†ä¸æ¨èè¿™æ ·å†™ã€‚ å˜é‡å®šä¹‰å°½å¯èƒ½è§åæ€æ„ å˜é‡åä¸€èˆ¬é‡‡ç”¨é©¼å³°å‘½åæ³•ã€‚é©¼å³°å‘½åï¼šé¦–å­—æ¯å°å†™ï¼Œåç»­æ¯ä¸ªå•å­é¦–å­—æ¯å¤§å†™ï¼Œä¾‹å¦‚ï¼šmaxAgeã€‚å¦‚æœæ˜¯ä¸“å±åè¯ï¼Œä¾‹å¦‚DNS,IPç­‰ï¼Œå¯ç›´æ¥é‡‡ç”¨å¤§å†™ã€‚ ","date":"2024-12-21T19:36:53+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-02/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬äºŒç¯‡ fmtåŒ…\u0026å˜é‡ã€å¸¸é‡çš„å®šä¹‰ã€‘"},{"content":" å¼•è¨€ï¼šGoï¼ˆåˆç§°ä¸ºGolangï¼‰æ˜¯ä¸€ç§å¼€æºçš„ç¼–ç¨‹è¯­è¨€ï¼Œç”±Googleå¼€å‘ï¼Œäº2009å¹´é¦–æ¬¡å…¬å¼€å‘å¸ƒã€‚å®ƒæ—¨åœ¨æä¾›ç®€æ´ã€é«˜æ•ˆã€å¯é çš„è½¯ä»¶å¼€å‘è§£å†³æ–¹æ¡ˆã€‚Golangæ˜¯ä¸€ç§é™æ€å¼ºç±»å‹ã€ç¼–è¯‘å‹è¯­è¨€ï¼ŒGolangå…·æœ‰å¾ˆå¼ºçš„è¡¨è¾¾èƒ½åŠ›ï¼Œå¾—ç›Šäºå…¶å¹¶å‘æœºåˆ¶ï¼Œç”¨å®ƒç¼–å†™çš„ç¨‹åºèƒ½å¤Ÿéå¸¸æœ‰æ•ˆåœ°åˆ©ç”¨å¤šæ ¸ä¸è”ç½‘çš„è®¡ç®—æœºï¼Œå…¶æ–°é¢–çš„ç±»å‹ç³»ç»Ÿåˆ™ä½¿ç¨‹åºç»“æ„å˜å¾—çµæ´»è€Œæ¨¡å—åŒ–ã€‚ Go ä»£ç ç¼–è¯‘æˆæœºå™¨ç ä¸ä»…éå¸¸è¿…é€Ÿï¼Œè¿˜å…·æœ‰æ–¹ä¾¿çš„åƒåœ¾æ”¶é›†æœºåˆ¶å’Œå¼ºå¤§çš„è¿è¡Œæ—¶åå°„æœºåˆ¶ã€‚\nä½“éªŒæ„Ÿæ‚Ÿï¼šå¾…å­¦ä¹ å®Œæˆåè¡¥å……\u0026hellip;\n1. å­¦ä¹ æ–‡æ¡£\rä¸­æ–‡æ–‡æ¡£åœ°å€ï¼šhttps://go.p2hp.com/ ã€ä¸æ¨èï¼Œè½åäºå®˜æ–¹æ–‡æ¡£ã€‘\nå®˜æ–¹æ–‡æ¡£ï¼šhttps://go.dev/ ã€æ¨èï¼Œæœ€æ–°ï¼Œå­¦ä¹ ä½¿ç”¨è‹±æ–‡ã€‘\nè¾¹å­¦è¾¹ç»ƒï¼š ä¸­æ–‡åœ°å€ | è‹±æ–‡åœ°å€\nBç«™å­¦ä¹ è§†é¢‘åœ°å€\n2. Window æœ¬åœ°å®‰è£…Go\r2.1 å®‰è£…\rå®‰è£…æ­¥éª¤ä¾æ¬¡è§ä¸‹åˆ—å›¾ç¤ºï¼š ç‚¹å‡»ç®­å¤´ä½ç½®ä¸‹è½½å®‰è£…åŒ…ï¼Œç‚¹å‡»å®‰è£…ã€‚æ³¨ï¼šåŸåˆ™ä¸Šæ¥è¯´ï¼Œå¼€å‘äººå‘˜ä¸å»ºè®®å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œå­˜åœ¨ä¸€å®šBUGï¼Œä½†è¿™é‡Œå­¦ä¹ ä½¿ç”¨è¶³ä»¥ã€‚ åŒå‡»ä¸‹è½½çš„go1.23.4.windows-amd64.msiæ–‡ä»¶è¿›è¡Œå®‰è£…\n2.2 éªŒè¯\rwindowsæ‰¾ç¯å¢ƒå˜é‡ å¦å¤–ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤æ–¹å¼éªŒè¯GOæ˜¯å¦å®‰è£…å®Œæˆã€‚\nwin + R ç»„åˆæŒ‰é”®å”¤é†’è¿è¡Œçª—å£ã€‚è¾“å…¥: cmdã€‚ç‚¹å‡»ç¡®è®¤æˆ–å›è½¦ï¼š è¾“å…¥ä¸‹é¢å‘½ä»¤ï¼ŒéªŒè¯goæ˜¯å¦å®‰è£…æˆåŠŸ # go ç‰ˆæœ¬å· go version # go ç¯å¢ƒå˜é‡ go env å‹æƒ…æç¤ºï¼šå½“ä¸å°å¿ƒç‚¹å‡»ã€é¼ æ ‡å·¦é”®ã€‘ï¼Œæ˜¾ç¤ºå¦‚ä¸‹ä¿¡æ¯ã€å…³é”®ä¿¡æ¯ä¸ºå·¦ä¸Šè§’çš„é€‰æ‹©ã€‘ã€‚è¿™ä¸ªæƒ…å†µä¸‹è¡¨ç¤ºcmdå‘½ä»¤å½“å‰çª—å£ä¸ºé€‰æ‹©çª—å£ï¼Œæ­¤æ—¶å‘½ä»¤çª—å£è¿è¡Œçš„ä¸€åˆ‡ç¨‹åºå¤„äºæš‚åœçŠ¶æ€ï¼Œç‚¹å‡»ã€é¼ æ ‡å³é”®ã€‘å¯æ¢å¤ã€‚ 3. å¼€å‘ç¯å¢ƒâ€”â€”VsCode\r3.1 VsCode å®‰è£…\rå®‰è£…åœ°å€\nä¸‹è½½å¥½çš„æ–‡ä»¶å°†æ–‡ä»¶è§£å‹ï¼Œä¸€å®šç‚¹å‡»è§£å‹æ–‡ä»¶æˆ–è€…è§£å‹åˆ°\u0026quot;VsCode-win***\u0026quot;ï¼Œå¦åˆ™å†…éƒ¨æ–‡ä»¶å¹³é“ºå½“å‰ç›®å½•ï¼Œå‡Œä¹±ä¸å ªã€‚å°†è§£å‹çš„æ–‡ä»¶å¤¹éšæ„æ”¾åœ¨è‡ªå·±å–œæ¬¢çš„æŒ‡å®šç£ç›˜æ–‡ä»¶ä¸‹ã€‚\nç‚¹å‡»è§£å‹æ–‡ä»¶æ‰ä¼šæœ‰è¿™ä¸€æ­¥ï¼š\nè½¯ä»¶å¿«æ·æ–¹å¼æ”¾äºæ¡Œé¢ã€‚\næ‰“å¼€è½¯ä»¶ï¼ŒåŠŸèƒ½ç®€è¦ä»‹ç»\n3.2 å®‰è£…æ’ä»¶\r3.2.1 language è¯­è¨€æ±‰åŒ–æ’ä»¶å®‰è£…\r3.2.2 Goæ’ä»¶å®‰è£…\råŒç†å°†Goæ’ä»¶å®‰è£…å®Œæˆ\n4. Hello World å…¥é—¨\r4.1 å»ºå·¥ç¨‹\rVsCodeæ‰“å¼€é¡¹ç›®å·¥ç¨‹\né‡åˆ°ä¸‹é¢ç•Œé¢ï¼Œç‚¹å‡»ä¿¡ä»»å³å¯\n4.2 åˆ›å»ºé¡¹ç›®æ–‡ä»¶\r4.3 ç¼–å†™Hello Worldç¨‹åº\r// package åŒ…å£°æ˜ï¼š å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ–‡ä»¶å¤¹ package main // import å¯¼å…¥ï¼šä¸€èˆ¬æŒ‡å¯¼å…¥å®˜æ–¹æˆ–è‡ªå®šä¹‰åŠŸèƒ½åŒ… import \u0026#34;fmt\u0026#34; // mainå‡½æ•° å…¥å£å‡½æ•° func main() { // æ‰“å°Hello Worldå­—ç¬¦ä¸²ï¼Œå¯ä¸å†™åˆ†å·ï¼Œè¯­æ³•çµæ´» fmt.Println(\u0026#34;Hello World\u0026#34;) } 4.4 VsCodeæ— ä»£ç æç¤ºè§£å†³æ–¹æ¡ˆ\ræ‰“å¼€cmdæ§åˆ¶ç»ˆç«¯ï¼Œè¾“å…¥GOä»£ç†åœ°å€\ngo env -w GOPROXY=https://goproxy.io/ ç„¶åé‡å¯VsCodeï¼Œå¤šè¯•å‡ æ¬¡é‡å¯ï¼Œç­‰å¾…å®‰è£…ï¼Œå°è¯•ç‚¹å‡»å³å¯è§£å†³\n4.5 è¿è¡Œç¨‹åº\ræ‰“å¼€ç»ˆç«¯(æœ¬è´¨å°±æ˜¯windowsçš„cmdçª—å£)ï¼Œè¿è¡Œgoæ–‡ä»¶å‘½ä»¤\n// è¯­æ³•å‘½ä»¤ï¼šgo run \u0026lt;æ–‡ä»¶å\u0026gt;ï¼Œè¿è¡ŒæŒ‡å®šgoæ–‡ä»¶çš„ç¨‹åº go run main.go // è¿è¡Œç»“æœ // Hello World 4.6 æ„å»ºæ‰“åŒ…ç¨‹åº\r// ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ go build \u0026lt;æ–‡ä»¶å\u0026gt;ã€‚å°†æ–‡ä»¶æ‰“åŒ…æˆå¯è¿è¡Œçš„exeæ–‡ä»¶ã€‚ go build main.go æ„å»ºå®Œæˆä¹‹åæ–‡ä»¶å¯åŒå‡»è¿è¡Œåœ¨windowsä¸Šã€‚ å½“å‰ç¤ºä¾‹è¿è¡Œåæ— ååº”ã€‚åŸå› æ˜¯ç¨‹åºè¿è¡Œå®Œæˆä¹‹åè‡ªåŠ¨å…³é—­äº†ç»ˆç«¯çª—å£ã€‚\n","date":"2024-12-21T10:51:49+08:00","permalink":"https://zg-dd.github.io/stu/golang-stu-01/","title":"Golangå­¦ä¹ å†ç¨‹ã€ç¬¬ä¸€ç¯‡ å…¥é—¨ã€‘"},{"content":"show-busy-java-threads.sh\n#!/bin/bash # @Function # Find out the highest cpu consumed threads of java, and print the stack of these threads. # # @Usage # $ ./show-busy-java-threads.sh # # @author Jerry Lee # javaç›®å½• JAVA_HOME=/usr/local/java/jdk1.8.0_202 readonly PROG=`basename $0` readonly -a COMMAND_LINE=(\u0026#34;$0\u0026#34; \u0026#34;$@\u0026#34;) usage() { cat \u0026lt;\u0026lt;EOF Usage: ${PROG} [OPTION]... Find out the highest cpu consumed threads of java, and print the stack of these threads. Example: ${PROG} -c 10 Options: -p, --pid find out the highest cpu consumed threads from the specifed java process, default from all java process. -c, --count set the thread count to show, default is 5 -h, --help display this help and exit EOF exit $1 } readonly ARGS=`getopt -n \u0026#34;$PROG\u0026#34; -a -o c:p:h -l count:,pid:,help -- \u0026#34;$@\u0026#34;` [ $? -ne 0 ] \u0026amp;\u0026amp; usage 1 eval set -- \u0026#34;${ARGS}\u0026#34; while true; do case \u0026#34;$1\u0026#34; in -c|--count) count=\u0026#34;$2\u0026#34; shift 2 ;; -p|--pid) pid=\u0026#34;$2\u0026#34; shift 2 ;; -h|--help) usage ;; --) shift break ;; esac done count=${count:-5} redEcho() { [ -c /dev/stdout ] \u0026amp;\u0026amp; { # if stdout is console, turn on color output. echo -ne \u0026#34;\\033[1;31m\u0026#34; echo -n \u0026#34;$@\u0026#34; echo -e \u0026#34;\\033[0m\u0026#34; } || echo \u0026#34;$@\u0026#34; } yellowEcho() { [ -c /dev/stdout ] \u0026amp;\u0026amp; { # if stdout is console, turn on color output. echo -ne \u0026#34;\\033[1;33m\u0026#34; echo -n \u0026#34;$@\u0026#34; echo -e \u0026#34;\\033[0m\u0026#34; } || echo \u0026#34;$@\u0026#34; } blueEcho() { [ -c /dev/stdout ] \u0026amp;\u0026amp; { # if stdout is console, turn on color output. echo -ne \u0026#34;\\033[1;36m\u0026#34; echo -n \u0026#34;$@\u0026#34; echo -e \u0026#34;\\033[0m\u0026#34; } || echo \u0026#34;$@\u0026#34; } # Check the existence of jstack command! if ! which jstack \u0026amp;\u0026gt; /dev/null; then [ -z \u0026#34;$JAVA_HOME\u0026#34; ] \u0026amp;\u0026amp; { redEcho \u0026#34;Error: jstack not found on PATH!\u0026#34; exit 1 } ! [ -f \u0026#34;$JAVA_HOME/bin/jstack\u0026#34; ] \u0026amp;\u0026amp; { redEcho \u0026#34;Error: jstack not found on PATH and $JAVA_HOME/bin/jstack file does NOT exists!\u0026#34; exit 1 } ! [ -x \u0026#34;$JAVA_HOME/bin/jstack\u0026#34; ] \u0026amp;\u0026amp; { redEcho \u0026#34;Error: jstack not found on PATH and $JAVA_HOME/bin/jstack is NOT executalbe!\u0026#34; exit 1 } export PATH=\u0026#34;$JAVA_HOME/bin:$PATH\u0026#34; fi readonly uuid=`date +%s`_${RANDOM}_$$ cleanupWhenExit() { rm /tmp/${uuid}_* \u0026amp;\u0026gt; /dev/null } trap \u0026#34;cleanupWhenExit\u0026#34; EXIT printStackOfThreads() { local line local count=1 while IFS=\u0026#34; \u0026#34; read -a line ; do local pid=${line[0]} local threadId=${line[1]} local threadId0x=\u0026#34;0x`printf %x ${threadId}`\u0026#34; local user=${line[2]} local pcpu=${line[4]} local jstackFile=/tmp/${uuid}_${pid} [ ! -f \u0026#34;${jstackFile}\u0026#34; ] \u0026amp;\u0026amp; { { if [ \u0026#34;${user}\u0026#34; == \u0026#34;${USER}\u0026#34; ]; then jstack ${pid} \u0026gt; ${jstackFile} else if [ $UID == 0 ]; then sudo -u ${user} jstack ${pid} \u0026gt; ${jstackFile} else redEcho \u0026#34;[$((count++))] Fail to jstack Busy(${pcpu}%) thread(${threadId}/${threadId0x}) stack of java process(${pid}) under user(${user}).\u0026#34; redEcho \u0026#34;User of java process($user) is not current user($USER), need sudo to run again:\u0026#34; yellowEcho \u0026#34; sudo ${COMMAND_LINE[@]}\u0026#34; echo continue fi fi } || { redEcho \u0026#34;[$((count++))] Fail to jstack Busy(${pcpu}%) thread(${threadId}/${threadId0x}) stack of java process(${pid}) under user(${user}).\u0026#34; echo rm ${jstackFile} continue } } blueEcho \u0026#34;[$((count++))] Busy(${pcpu}%) thread(${threadId}/${threadId0x}) stack of java process(${pid}) under user(${user}):\u0026#34; sed \u0026#34;/nid=${threadId0x} /,/^$/p\u0026#34; -n ${jstackFile} done } ps -Leo pid,lwp,user,comm,pcpu --no-headers | { [ -z \u0026#34;${pid}\u0026#34; ] \u0026amp;\u0026amp; awk \u0026#39;$4==\u0026#34;java\u0026#34;{print $0}\u0026#39; || awk -v \u0026#34;pid=${pid}\u0026#34; \u0026#39;$1==pid,$4==\u0026#34;java\u0026#34;{print $0}\u0026#39; } | sort -k5 -r -n | head --lines \u0026#34;${count}\u0026#34; | printStackOfThreads ","date":"2024-09-10T13:48:55+08:00","permalink":"https://zg-dd.github.io/blog/java-high-cpu-threads/","title":"Java é«˜CPUçº¿ç¨‹æ’æŸ¥è„šæœ¬"},{"content":" Byte Buddyæ˜¯javaçš„å­—èŠ‚ç å¢å¼ºå™¨ï¼Œä¸€ä¸ªä¼˜é›…çš„è¿è¡Œæ—¶javaä»£ç ç”Ÿæˆåº“ï¼Œä½¿ç”¨æ—¶éœ€è¦æ…é‡\næ–‡æ¡£åœ°å€ï¼šhttp://bytebuddy.net/#/tutorial-cn\n1. å¼•å…¥ByteBuddy\r\u0026lt;!-- https://mvnrepository.com/artifact/net.bytebuddy/byte-buddy --\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;net.bytebuddy\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;byte-buddy\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.14.17\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; 2. ByteBuddyå­¦ä¹ \r2.1 ç±»çš„åˆ›å»º\rä»»ä½•ç±»çš„å®ä¾‹åˆ›å»ºéƒ½æ˜¯ä»ByteBuddyçš„å®ä¾‹å¼€å§‹\nDynamicType.Unloaded\u0026lt;Object\u0026gt; dynamicType = new ByteBuddy() .subclass(Object.class)// å¢å¼ºæ–¹å¼ï¼šç›®æ ‡ç±»ç”Ÿæˆå­ç±» .name(\u0026#34;example.Type\u0026#34;) // è‡ªå®šä¹‰ç”Ÿæˆçš„ç±»åï¼šåŒ…å+ç±»å .make();// ç¼–è¯‘ç”Ÿæˆè¯¥ç±» 2.2 æŒ‡å®šç±»çš„åŒ…å\rDynamicType.Unloaded\u0026lt;?\u0026gt; dynamicType = byteBuddy .with(new NamingStrategy.AbstractBase() { @Override protected String name(TypeDescription superClass) { return \u0026#34;example.\u0026#34; + superClass.getSimpleName(); // å¯è‡ªå®šä¹‰åŒ…åå’Œç±»å‹ } }) .subclass(Object.class) .make(); 2.3 ç±»çš„ä¿å­˜\rDynamicType.Unloaded\u0026lt;Object\u0026gt; dynamicType = new ByteBuddy() dynamicType.saveIn(new File(\u0026#34;æ–‡ä»¶è·¯å¾„\u0026#34;));// å°†ç±»Classæ–‡ä»¶ä¿å­˜æ–‡ä»¶å¤¹ 2.4 ç±»çš„æ³¨å…¥\rå¯ä»¥å°†åŠ¨æ€çš„ç”Ÿæˆçš„ç±»æ³¨å…¥åˆ°æŒ‡å®šjaråŒ…ä¸­\nDynamicType.Unloaded\u0026lt;Object\u0026gt; dynamicType = new ByteBuddy() dynamicType.inject(new File(\u0026#34;jar\u0026#34;));// å°†ç±»Classæ–‡ä»¶æ³¨å…¥åˆ°jaråŒ…ä¸­ 2.5 ByteBuddyå¢å¼ºæ–¹å¼\rByteBuddyå…±æœ‰ä¸‰ç§å¢å¼ºæ–¹å¼ï¼š\nsubclassï¼šä¸ºç›®æ ‡ç±»ç”Ÿæˆå­ç±»è¿›è¡Œå¢å¼º rebaseï¼šå½“å¯¹ç±»å‹å˜åŸºæ—¶ï¼ŒByte Buddy ä¼šä¿ç•™æ‰€æœ‰è¢«å˜åŸºç±»çš„æ–¹æ³•å®ç°ã€‚Byte Buddy ä¼šç”¨å…¼å®¹çš„ç­¾åå¤åˆ¶æ‰€æœ‰æ–¹æ³•çš„å®ç°ä¸ºä¸€ä¸ªç§æœ‰çš„é‡å‘½åè¿‡çš„æ–¹æ³•ï¼Œ è€Œä¸åƒç±»é‡å®šä¹‰æ—¶ä¸¢å¼ƒè¦†å†™çš„æ–¹æ³•ã€‚ç”¨è¿™ç§æ–¹å¼çš„è¯ï¼Œä¸å­˜åœ¨æ–¹æ³•å®ç°çš„ä¸¢å¤±ï¼Œè€Œä¸”å˜åŸºçš„æ–¹æ³•å¯ä»¥é€šè¿‡è°ƒç”¨è¿™äº›é‡å‘½åçš„æ–¹æ³•ï¼ˆç›®å‰å¹¶æœªå‘ç°èµ·ä½œç”¨ï¼‰ redefineï¼šé‡æ–°å®šä¹‰æ–¹æ³•ï¼Œä¼šæ›¿æ¢å·²å­˜åœ¨çš„æ–¹æ³•å®ç°ã€‚ 2.6 ç±»çš„åŠ è½½ç­–ç•¥\rClassLoadingStrategy.Defaultå®šä¹‰äº†å†…ç½®ç­–ç•¥ï¼Œå¦‚æœä¸é€‰æ‹©ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é»˜è®¤æ¨å¯¼å‡ºä¸€ä¸ªç­–ç•¥ã€‚\nWRAPPER ç­–ç•¥ï¼š 1. åˆ›å»ºä¸€ä¸ªæ–°çš„ ClassLoader æ¥åŠ è½½åŠ¨æ€ç”Ÿæˆçš„ç±»å‹ã€‚ 2. é€‚åˆå¤§å¤šæ•°æƒ…å†µï¼Œè¿™æ ·ç”Ÿäº§çš„åŠ¨æ€ç±»ä¸ä¼šè¢«ApplicationClassLoaderåŠ è½½åˆ°ï¼Œä¸ä¼šå½±å“åˆ°é¡¹ç›®ä¸­å·²ç»å­˜åœ¨çš„ç±»ã€‚ WRAPPER_PERSISTENTï¼šè¯¥ç­–ç•¥ä¸WRAPPERç›¸åŒï¼Œä½†é€šè¿‡ClassLoader.getResourceAsStreamï¼ˆStringï¼‰å…¬å¼€è¡¨ç¤ºç±»çš„å­—èŠ‚æ•°ç»„ã€‚ä¸ºæ­¤ï¼Œæ‰€æœ‰ç±»æ–‡ä»¶éƒ½åœ¨åŒ…è£…ç±»åŠ è½½å™¨ä¸­ä½œä¸ºå­—èŠ‚æ•°ç»„æŒä¹…åŒ–ã€‚ CHILD_FIRSTï¼šåˆ›å»ºä¸€ä¸ªå­ç±»ä¼˜å…ˆåŠ è½½çš„ ClassLoaderï¼Œå³æ‰“ç ´äº†åŒäº²å§”æ´¾æ¨¡å‹ã€‚ CHILD_FIRST_PERSISTENTï¼šè¯¥ç­–ç•¥ä¸CHILD_FIRSTç›¸åŒï¼Œä½†é€šè¿‡ClassLoader.getResourceAsStreamï¼ˆStringï¼‰å…¬å¼€è¡¨ç¤ºç±»çš„å­—èŠ‚æ•°ç»„ã€‚ä¸ºæ­¤ï¼Œæ‰€æœ‰ç±»æ–‡ä»¶éƒ½åœ¨åŒ…è£…ç±»åŠ è½½å™¨ä¸­ä½œä¸ºå­—èŠ‚æ•°ç»„æŒä¹…åŒ–ã€‚ INJECTION ç­–ç•¥ï¼šä½¿ç”¨åå°„ï¼Œå°†åŠ¨æ€ç”Ÿæˆçš„ç±»å‹ç›´æ¥æ³¨å…¥åˆ°å½“å‰ ClassLoader ä¸­ã€‚ 2.7 è¿è¡Œæ—¶å®ä¾‹åŒ–\rDynamicType.Unloaded\u0026lt;Object\u0026gt; dynamicType = new ByteBuddy() .subclass(Object.class)// å¢å¼ºæ–¹å¼ï¼šç›®æ ‡ç±»ç”Ÿæˆå­ç±» .name(\u0026#34;example.Type\u0026#34;) // è‡ªå®šä¹‰ç”Ÿæˆçš„ç±»åï¼šåŒ…å+ç±»å .make();// ç¼–è¯‘ç”Ÿæˆè¯¥ç±» 2.8 å­—æ®µå’Œæ–¹æ³•çš„å£°æ˜\rDynamicType.Unloaded\u0026lt;?\u0026gt; dynamicType = new ByteBuddy() // å¢å¼ºæ–¹å¼ .subclass(Object.class) // ç±»å .name(\u0026#34;subclass.Example\u0026#34;) // å®šä¹‰å­—æ®µï¼Œç±»å‹ã€å¯è§è¡Œ // å¤šä¸ªå¯ä½¿ç”¨|å¹¶åˆ— .defineField(\u0026#34;username\u0026#34;, String.class, Modifier.PUBLIC | Modifier.STATIC) // å®šä¹‰getæ–¹æ³• .defineMethod(\u0026#34;getUserName\u0026#34;, String.class, Modifier.PUBLIC) .intercept(FieldAccessor.ofField(\u0026#34;username\u0026#34;)) // è·å–å±æ€§usernameçš„å€¼ .make(); 2.9 FixedValueå›ºå®šå€¼\rFixedValueå¯ä»¥å£°æ˜ä»»æ„å›ºå®šå€¼ï¼Œç”¨äºå¯¹å­—æ®µï¼Œæ–¹æ³•çš„å®šä¹‰ï¼Œå›ºå®šå€¼æœ€ç»ˆä¼šå†™å…¥ç±»çš„å¸¸é‡æ± ä¸­ã€‚\n2.10 ElementMatchers å…ƒç´ é€‰æ‹©å™¨\rElementMatchersåŒ…å«äº†å¤§é‡åŒ¹é…è§„åˆ™ï¼Œç”¨äºè¦†å†™åŸç±»ï¼Œå¸¸ç”¨çš„æœ‰ï¼š\nisDeclaredBy åŒ¹é…æŸä¸€ä¸ªç±»ä¸­çš„æ‰€æœ‰æ–¹æ³• named æŒ‡å®šæ–¹æ³•å takesArguments æŒ‡å®šå‚æ•°ä¸ªæ•° å¦‚ä¸‹ç¤ºä¾‹ï¼š\npublic class Foo { public String bar() { return null; } public String foo() { return null; } public String foo(Object o) { return null; } } // æ„å»ºä¸€ä¸ªå®ç°ç±» DynamicType.Unloaded\u0026lt;?\u0026gt; dynamicType = new ByteBuddy() .with(new NamingStrategy.AbstractBase() { @Override protected String name(TypeDescription superClass) { return \u0026#34;subclass.subclass\u0026#34; + superClass.getSimpleName(); } }) .subclass(Foo.class) .method(ElementMatchers.isDeclaredBy(Foo.class)).intercept(FixedValue.value(\u0026#34;One!\u0026#34;)) .method(ElementMatchers.named(\u0026#34;foo\u0026#34;)).intercept(FixedValue.value(\u0026#34;Two!\u0026#34;)) .method(ElementMatchers.named(\u0026#34;foo\u0026#34;).and(ElementMatchers.takesArguments(1))) .intercept(FixedValue.value(\u0026#34;Three!\u0026#34;)) .make(); // æœ€ç»ˆç”Ÿæˆçš„ç±»å¦‚ä¸‹ public class subclassFoo extends Foo { public String foo(Object var1) {return \u0026#34;Three!\u0026#34;;} public String foo() {return \u0026#34;Two!\u0026#34;;} public String bar() {return \u0026#34;One!\u0026#34;;} public subclassFoo() {} } è¯¥ç¤ºä¾‹ä¸­ bar()æ–¹æ³•ä»…è¢«ElementMatchers.isDeclaredBy(Foo.class)åŒ¹é…åˆ°ï¼Œæœ€ç»ˆè¦†å†™äº†One! foo()æ–¹æ³•è¢«ElementMatchers.named(\u0026ldquo;foo\u0026rdquo;)å’ŒElementMatchers.named(\u0026ldquo;foo\u0026rdquo;).and(ElementMatchers.takesArguments(1))åŒ¹é…åˆ°ï¼Œè¦†å†™äº†Tow! foo(Object var1)ç„¶åå†è¢«ElementMatchers.named(\u0026ldquo;foo\u0026rdquo;).and(ElementMatchers.takesArguments(1))åŒ¹é…ï¼Œå†æ¬¡è¦†å†™ï¼Œå¾—åˆ°Three!\n2.11 MethodDelegation(æ–¹æ³•å§”æ‰˜)\ræ–¹æ³•å§”æ‰˜ç»™ï¼Œå®ƒå¯¹æ–¹æ³•è°ƒç”¨åšå‡ºååº”æ—¶æä¾›äº†æœ€å¤§ç¨‹åº¦çš„è‡ªç”±ã€‚Sourceä¸­çš„æ–¹æ³•å¯ä»¥å§”æ‰˜ç»™Targetæ–¹æ³•è°ƒç”¨(Sourceå’ŒTargetçš„æ–¹æ³•åå¯ä»¥ä¸ä¸€è‡´)ï¼›æ³¨ï¼šæ‰€æœ‰çš„å§”æ‰˜æ–¹æ³•å¿…é¡»æ˜¯staticå£°æ˜ ç®€å•ç¤ºä¾‹ï¼š\n// å˜åŸºå¯¹è±¡ public class MemoryDatabase { public void hello(String name) { System.out.println(\u0026#34;MemoryDatabase.hello origin\u0026#34;); } public List\u0026lt;String\u0026gt; load(String info) { System.out.println(\u0026#34;MemoryDatabase.load orignï¼š\u0026#34; + info); return Arrays.asList(info, info); } } // å§”æ‰˜ç±» public class LoggerInterceptor { public static void hello(String name) { System.out.println(\u0026#34;LoggerInterceptor.hello \u0026#34; + name + \u0026#34;!\u0026#34;); } public static List\u0026lt;String\u0026gt; load(String info) { System.out.println(\u0026#34;LoggerInterceptor.load before\u0026#34;); try { // å‚æ•°å¢å¼º List\u0026lt;String\u0026gt; list = Arrays.asList(info + \u0026#34;: foo\u0026#34;, info + \u0026#34;: bar\u0026#34;); System.out.println(\u0026#34;LoggerInterceptor.load after\u0026#34;); return list; } finally { System.out.println(\u0026#34;LoggerInterceptor.load finally\u0026#34;); } } } // æµ‹è¯•æ–¹æ³• MemoryDatabase loggingDatabase = new MemoryDatabase(); loggingDatabase.hello(\u0026#34;hello MemoryDatabase\u0026#34;); System.out.println(\u0026#34;MemoryDatabase.load return valueï¼š\u0026#34; + loggingDatabase.load(\u0026#34;hello MemoryDatabase\u0026#34;)); // å°†MemoryDatabaseç±»çš„æŒ‡å®šæ–¹æ³•è¿›è¡Œå§”æ‰˜å˜åŸº new ByteBuddy() .redefine(MemoryDatabase.class) .method(named(\u0026#34;hello\u0026#34;)).intercept(MethodDelegation.to(LoggerInterceptor.class)) .method(named(\u0026#34;load\u0026#34;)).intercept(MethodDelegation.to(LoggerInterceptor.class)) .make() .load(MemoryDatabase.class.getClassLoader(), ClassReloadingStrategy.fromInstalledAgent())// ClassReloadingStrategy.fromInstalledAgent()è¡¨ç¤ºä½¿ç”¨ä»£ç†ä¿®æ”¹æºæ–¹æ³• .getLoaded(); System.out.println(\u0026#34;å˜åŸºåã€‚ã€‚ã€‚\u0026#34;); loggingDatabase = new MemoryDatabase(); loggingDatabase.hello(\u0026#34;hello MemoryDatabase\u0026#34;); System.out.println(\u0026#34;MemoryDatabase.load return valueï¼š\u0026#34; + loggingDatabase.load(\u0026#34;hello MemoryDatabase\u0026#34;)); // è¿è¡Œç»“æœ MemoryDatabase.hello origin MemoryDatabase.load orignï¼šhello MemoryDatabase MemoryDatabase.load return valueï¼š[hello MemoryDatabase, hello MemoryDatabase] å˜åŸºåã€‚ã€‚ã€‚ LoggerInterceptor.hello hello MemoryDatabase! LoggerInterceptor.load before LoggerInterceptor.load after LoggerInterceptor.load finally MemoryDatabase.load return valueï¼š[hello MemoryDatabase: foo, hello MemoryDatabase: bar] ä¸Šé¢è¿™ä¸ªç®€å•ç¤ºä¾‹å¯ä»¥çœ‹å‡ºï¼Œæ–¹æ³•å§”æ‰˜å¯ä»¥å°†åŸæ¥çš„æ–¹æ³•ç›´æ¥æ›¿æ¢æ‰ï¼Œè¿›è¡Œå˜åŸºä¿®æ”¹ã€‚åœ¨è¿›è¡Œä¿®æ”¹æºç ä¸­èµ·åˆ°äº†é‡è¦ä½œç”¨ã€‚æ³¨ï¼šsubclassæ˜¯å¯¹çˆ¶ç±»çš„å¢å¼ºï¼Œä¸ä¼šå¯¹æºç±»é€ æˆå½±å“ï¼Œredefineå’Œrebaseæ˜¯éœ€è¦ä»£ç†æƒé™çš„ï¼Œéœ€è¦å†å¯åŠ¨ç±»åŠ è½½å‰æ·»åŠ VMå‚æ•°ï¼š-javaagent:è·¯å¾„åœ°å€\\byte-buddy-agent-1.14.17.jarbyte-buddy-agentæŒ‡çš„æ˜¯ä»£ç jarï¼Œç½‘ä¸Šæœç´¢å³å¯ä¸‹è½½ã€‚ä¸‹é¢å°±ä¸€ä¸€å¼€å§‹å­¦ä¹ æ–¹æ³•å§”æ‰˜çš„å„ç§åœºæ™¯ï¼š\n@SuperCall\npublic class MemoryDatabase { public List\u0026lt;String\u0026gt; load(String info) { System.out.println(\u0026#34;MemoryDatabase.load orignï¼š\u0026#34; + info); return Arrays.asList(info, info); } } public class LoggerInterceptor { public static List\u0026lt;String\u0026gt; log(@SuperCall Callable\u0026lt;List\u0026lt;String\u0026gt;\u0026gt; zuper) { System.out.println(\u0026#34;LoggerInterceptor.log before\u0026#34;); try { // å‚æ•°å¢å¼º List\u0026lt;String\u0026gt; call = zuper.call(); System.out.println(\u0026#34;LoggerInterceptor.log after\u0026#34;); return call; } catch (Exception e) { throw new RuntimeException(e); } finally { System.out.println(\u0026#34;LoggerInterceptor.log finally\u0026#34;); } } } // æµ‹è¯•TEST: MemoryDatabase loggingDatabase = new ByteBuddy() .subclass(MemoryDatabase.class) .method(isDeclaredBy(MemoryDatabase.class)).intercept(MethodDelegation.to(LoggerInterceptor.class)) .make() .load(MemoryDatabase.class.getClassLoader()) .getLoaded().newInstance(); System.out.println(\u0026#34;MemoryDatabase.load return valueï¼š\u0026#34; + loggingDatabase.load(\u0026#34;hello MemoryDatabase\u0026#34;)); ä¸Šé¢çš„ç¤ºä¾‹å°†MemoryDatabase.loadå§”æ‰˜ç»™äº†LoggerInterceptor.logï¼›@SuperCallå£°æ˜è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªä»£ç†æ–¹æ³•ï¼ŒæŒ‡çš„å°±æ˜¯MemoryDatabase.loadã€‚å…¶ä¸­Callable\u0026lt;List\u0026gt;è¡¨ç¤ºloadæ–¹æ³•çš„è¿”å›ç±»å‹ã€‚è¿™ç§æ–¹å¼å…¶å®å°±æ˜¯spring aopçš„å®ç°æ–¹å¼ã€‚\n@Super\npublic class MemoryDatabase { public List\u0026lt;String\u0026gt; load(String info) { System.out.println(\u0026#34;MemoryDatabase.load orignï¼š\u0026#34; + info); return Arrays.asList(info, info); } } public class LoggerInterceptor { // infoè¡¨ç¤ºæ–¹æ³•å‚æ•°ï¼Œzuperæ³¨è§£@Superå£°æ˜ï¼Œè¡¨ç¤ºä»£ç†å¯¹è±¡ public static List\u0026lt;String\u0026gt; log(String info, @Super MemoryDatabase zuper) { System.out.println(\u0026#34;LoggerInterceptor.log before\u0026#34;); try { // å‚æ•°å¢å¼º List\u0026lt;String\u0026gt; strings = zuper.load(info + \u0026#34; Interceptor\u0026#34;); System.out.println(\u0026#34;LoggerInterceptor.log after\u0026#34;); return strings; } catch (Exception e) { throw new RuntimeException(e); } finally { System.out.println(\u0026#34;LoggerInterceptor.log finally\u0026#34;); } } } // æµ‹è¯•TEST: MemoryDatabase loggingDatabase = new ByteBuddy() .subclass(MemoryDatabase.class) .method(isDeclaredBy(MemoryDatabase.class)).intercept(MethodDelegation.to(LoggerInterceptor.class)) .make() .load(MemoryDatabase.class.getClassLoader()) .getLoaded().newInstance(); System.out.println(\u0026#34;MemoryDatabase.load return valueï¼š\u0026#34; + loggingDatabase.load(\u0026#34;hello MemoryDatabase\u0026#34;)); @Superæ˜¯æ˜ç¡®æŒ‡å®šäº†ä»£ç†å®ä¾‹ã€‚è¿›è¡Œç²¾ç¡®åŒ–çš„å®ç°\n@RuntimeType\npublic class MemoryDatabase { public List\u0026lt;String\u0026gt; load(String info) { System.out.println(\u0026#34;MemoryDatabase.load orignï¼š\u0026#34; + info); return Arrays.asList(info, info); } public List\u0026lt;Integer\u0026gt; load(Integer info) { System.out.println(\u0026#34;MemoryDatabase.load orignï¼š\u0026#34; + info); return Arrays.asList(info, info); } } public class LoggerInterceptor { // @RuntimeTypeè¿è¡Œæ—¶æŒ‡å®šå…·ä½“å‚æ•°ç±»å‹ public static List\u0026lt;String\u0026gt; log(@RuntimeType Object info, @Super MemoryDatabase zuper) { // å‚æ•°å¢å¼º List\u0026lt;String\u0026gt; strings = zuper.load(info + \u0026#34; Interceptor\u0026#34;); System.out.println(\u0026#34;LoggerInterceptor.log :\u0026#34; + info); return strings; } } @RuntimeTypeè¿è¡Œæ—¶æŒ‡å®šå‚æ•°ï¼Œå¯ä»¥å®ç°æ–¹æ³•é‡è½½çš„æ•ˆæœ\n@Pipe æŒç»­å­¦ä¹ æ›´æ–°ä¸­ã€‚ã€‚ã€‚\nå€Ÿé‰´æ–‡ç« ï¼šhttps://blog.csdn.net/zhou920786312/article/details/130649115\n","date":"2024-07-21T17:14:51+08:00","permalink":"https://zg-dd.github.io/stu/byte-buddy-tutorial/","title":"Byte Buddyæ•™ç¨‹ï¼šJavaå­—èŠ‚ç å¢å¼ºä¸åŠ¨æ€ä»£ç ç”ŸæˆæŒ‡å—"},{"content":"reflectasm java é«˜æ€§èƒ½åå°„å·¥å…·\rå¤§ä½¬æ–‡ç« \nå®˜ç½‘ç¤ºä¾‹\nmaven å¼•å…¥ \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;com.esotericsoftware\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;reflectasm\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.11.9\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; å®ä½“ç±» public class User { public Integer id; public String userName; public String password; public String address; public Integer getId() {return id;} public void setId(Integer id) {this.id = id;} public String getUserName() {return userName;} public void setUserName(String userName) {this.userName = userName;} public String getPassword() {return password;} public void setPassword(String password) {this.password = password;} public String getAddress() {return address;} public void setAddress(String addresss) {this.address = addresss;} public String toString() { return \u0026#34;User{\u0026#34; + \u0026#34;id=\u0026#34; + id + \u0026#34;, userName=\u0026#39;\u0026#34; + userName + \u0026#39;\\\u0026#39;\u0026#39; + \u0026#34;, password=\u0026#39;\u0026#34; + password + \u0026#39;\\\u0026#39;\u0026#39; + \u0026#34;, addresss=\u0026#39;\u0026#34; + address + \u0026#39;\\\u0026#39;\u0026#39; + \u0026#39;}\u0026#39;; } } æµ‹è¯•ç¤ºä¾‹ public class ReflectasmDemo { public static void main(String[] args) { // ä»…è·å–æ— å‚æ„é€  ConstructorAccess\u0026lt;User\u0026gt; constructorAccess = ConstructorAccess.get(User.class); // å¯è·å–publicã€protectedã€é»˜è®¤çš„ã€finalä¿®é¥°çš„å±æ€§, ä¸åŒ…å«private staticè¯­å¥å­—æ®µ FieldAccess fieldAccess = FieldAccess.get(User.class); // å¯è·å–é™¤privateä¿®é¥°ä»¥å¤–çš„æ–¹æ³• MethodAccess methodAccess = MethodAccess.get(User.class); long start, end; { start = System.currentTimeMillis(); for (int i = 0; i \u0026lt; 10000; i++) { User user = new User(); user.setId(i); user.setUserName(\u0026#34;user\u0026#34; + 1); user.setPassword(\u0026#34;password\u0026#34; + 1); user.setAddress(\u0026#34;address\u0026#34; + 1); } end = System.currentTimeMillis(); System.out.println(\u0026#34;å¯¹è±¡æ„é€ è€—æ—¶ï¼š\u0026#34; + (end - start)); } { start = System.currentTimeMillis(); try { Class\u0026lt;User\u0026gt; aClass = User.class; Method setUserName = aClass.getMethod(\u0026#34;setUserName\u0026#34;, String.class); Method setPassword = aClass.getMethod(\u0026#34;setPassword\u0026#34;, String.class); Method setAddresss = aClass.getMethod(\u0026#34;setAddress\u0026#34;, String.class); for (int i = 0; i \u0026lt; 10000; i++) { User user = aClass.newInstance(); Method setId = aClass.getMethod(\u0026#34;setId\u0026#34;, Integer.class); setId.invoke(user, i); setUserName.invoke(user, \u0026#34;user\u0026#34; + 1); setPassword.invoke(user, \u0026#34;password\u0026#34; + 1); setAddresss.invoke(user, \u0026#34;address\u0026#34; + 1); } } catch (Exception e) { e.printStackTrace(); } end = System.currentTimeMillis(); System.out.println(\u0026#34;åå°„æ„é€ ï¼š\u0026#34; + (end - start)); } { start = System.currentTimeMillis(); for (int i = 0; i \u0026lt; 10000; i++) { User user = constructorAccess.newInstance(); fieldAccess.set(user, \u0026#34;id\u0026#34;, i); fieldAccess.set(user, \u0026#34;userName\u0026#34;, \u0026#34;user\u0026#34; + 1); fieldAccess.set(user, \u0026#34;password\u0026#34;, \u0026#34;password\u0026#34; + 1); fieldAccess.set(user, \u0026#34;address\u0026#34;, \u0026#34;address\u0026#34; + 1); } end = System.currentTimeMillis(); System.out.println(\u0026#34;reflectasm ä½¿ç”¨Field åç§° æ„é€ ï¼š\u0026#34; + (end - start)); } { start = System.currentTimeMillis(); int setIdIndex = fieldAccess.getIndex(\u0026#34;id\u0026#34;); int setUserNameIndex = fieldAccess.getIndex(\u0026#34;userName\u0026#34;); int setPasswordIndex = fieldAccess.getIndex(\u0026#34;password\u0026#34;); int setAddressIndex = fieldAccess.getIndex(\u0026#34;address\u0026#34;); for (int i = 0; i \u0026lt; 10000; i++) { User user = constructorAccess.newInstance(); fieldAccess.set(user, setIdIndex, i); fieldAccess.set(user, setUserNameIndex, \u0026#34;user\u0026#34; + 1); fieldAccess.set(user, setPasswordIndex, \u0026#34;password\u0026#34; + 1); fieldAccess.set(user, setAddressIndex, \u0026#34;address\u0026#34; + 1); } end = System.currentTimeMillis(); System.out.println(\u0026#34;reflectasm ä½¿ç”¨Field Index æ„é€ ï¼š\u0026#34; + (end - start)); } { start = System.currentTimeMillis(); for (int i = 0; i \u0026lt; 10000; i++) { User user = constructorAccess.newInstance(); methodAccess.invoke(user, \u0026#34;setId\u0026#34;, i); methodAccess.invoke(user, \u0026#34;setUserName\u0026#34;, \u0026#34;user\u0026#34; + 1); methodAccess.invoke(user, \u0026#34;setPassword\u0026#34;, \u0026#34;password\u0026#34; + 1); methodAccess.invoke(user, \u0026#34;setAddress\u0026#34;, \u0026#34;address\u0026#34; + 1); } end = System.currentTimeMillis(); System.out.println(\u0026#34;reflectasm ä½¿ç”¨method åç§° æ„é€ ï¼š\u0026#34; + (end - start)); } { start = System.currentTimeMillis(); int setIdIndex = methodAccess.getIndex(\u0026#34;setId\u0026#34;, Integer.class); int setUserNameIndex = methodAccess.getIndex(\u0026#34;setUserName\u0026#34;, String.class); int setPasswordIndex = methodAccess.getIndex(\u0026#34;setPassword\u0026#34;, String.class); int setAddressIndex = methodAccess.getIndex(\u0026#34;setAddress\u0026#34;, String.class); for (int i = 0; i \u0026lt; 10000; i++) { User user = constructorAccess.newInstance(); methodAccess.invoke(user, setIdIndex, i); methodAccess.invoke(user, setUserNameIndex, \u0026#34;user\u0026#34; + 1); methodAccess.invoke(user, setPasswordIndex, \u0026#34;password\u0026#34; + 1); methodAccess.invoke(user, setAddressIndex, \u0026#34;address\u0026#34; + 1); } end = System.currentTimeMillis(); System.out.println(\u0026#34;reflectasm ä½¿ç”¨method Index æ„é€ ï¼š\u0026#34; + (end - start)); } } } æµ‹è¯•ç»“æœ å¯¹è±¡æ„é€ è€—æ—¶ï¼š6\råå°„æ„é€ ï¼š15\rreflectasm ä½¿ç”¨Field åç§° æ„é€ ï¼š2\rreflectasm ä½¿ç”¨Field Index æ„é€ ï¼š2\rreflectasm ä½¿ç”¨method åç§° æ„é€ ï¼š3\rreflectasm ä½¿ç”¨method Index æ„é€ ï¼š1 ç»“è®º å‡ ç§æ„å»ºæ–¹å¼æ€§èƒ½ç”±é«˜åˆ°ä½æ’åºï¼š reflectasm ä½¿ç”¨Field Index \u0026gt;= reflectasm ä½¿ç”¨Field åç§° \u0026gt; reflectasm ä½¿ç”¨method Index \u0026gt;= reflectasm ä½¿ç”¨method åç§° \u0026gt; newå¯¹è±¡ \u0026gt; jdkåå°„ ","date":"2024-04-13T21:17:40+08:00","permalink":"https://zg-dd.github.io/stu/reflectasm-intro/","title":"ReflectASM - Javaé«˜æ€§èƒ½åå°„å·¥å…·è¯¦è§£"},{"content":"é¡¹ç›®åœºæ™¯ï¼š\rä¸šåŠ¡ï¼šæŸ¥è¯¢åŠŸèƒ½ï¼Œéœ€è¦å…³è”å¤šå¼ è¡¨ï¼Œä¸ºä¸€å¯¹å¤šæˆ–å¤šå¯¹å¤šã€‚ éœ€æ±‚ï¼šè¦æ±‚åˆ†é¡µï¼Œåˆ†é¡µç»Ÿè®¡æ€»æ•°ã€‚ ä½¿ç”¨æŠ€æœ¯ï¼šMybatisï¼ŒPageHelper\né—®é¢˜æè¿°\ræ­£å¸¸æŸ¥è¯¢ä¸€å¼ è¡¨çš„æƒ…å†µä¸‹ï¼Œå®˜æ–¹æ¨èï¼š\n//è·å–ç¬¬1é¡µï¼Œ10æ¡å†…å®¹ï¼Œé»˜è®¤æŸ¥è¯¢æ€»æ•°count PageHelper.startPage(1, 10); List\u0026lt;User\u0026gt; list = userMapper.selectAll(); //ç”¨PageInfoå¯¹ç»“æœè¿›è¡ŒåŒ…è£… PageInfo page = new PageInfo(list); ä½†æ˜¯è¿™ç§æ–¹å¼å®é™…ä¸ŠPageHelperä¼šè‡ªåŠ¨ç”Ÿæˆï¼š\nselect count(0) from (selectAll() sqlè¯­å¥) table_count æ™®é€šæŸ¥è¯¢è¿”å›æ­£å¸¸ç»Ÿè®¡æ•°é‡ã€‚ä¸€å¯¹å¤šã€å¤šå¯¹å¤šå…³è”è¿”å›çš„countä¸ä¸€å®šæ­£ç¡®\nåŸå› åˆ†æï¼š\rå…³è”æŸ¥è¯¢çš„ç»“æœæ˜¯ä»¥æœ€å°å•ä½ä¸ºä¸€æ¡æ•°æ®è¿›è¡Œç»Ÿè®¡çš„ã€‚è¿™é‡Œçš„æœ€å°å•ä½ä¸¾ä¾‹ï¼šå­¦ç”Ÿè¡¨å’Œæˆç»©è¡¨å…³è”ï¼Œä¸€ä¸ªå­¦ç”Ÿæœ‰å¤šä¸ªè¯¾ç¨‹æˆç»©ï¼Œé‚£ä¹ˆæŸ¥è¯¢å­¦ç”Ÿçš„æˆç»©æ—¶ï¼Œä¸€ä½å­¦ç”Ÿ+ä¸€é—¨è¯¾ç¨‹çš„æˆç»©å°±ä¸ºæœ€å°å•ä½ã€‚ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æ ¹æ®æˆç»©æœç´¢å­¦ç”Ÿï¼Œä½†æ˜¯éœ€è¦äº†è§£æœ‰å¤šå°‘ä¸ªå­¦ç”Ÿã€‚ è¿™ä¸ªæ—¶å€™PageHelperå°±æ— æ³•è‡ªåŠ¨å®ç°äº†ï¼Œéœ€è¦è‡ªå®šä¹‰countè§£å†³ã€‚\nè§£å†³æ–¹æ¡ˆï¼š\rä»¥ä¸‹è¯´æ˜æˆ‘çš„é”™è¯¯ç»å†\né”™è¯¯æ–¹å¼1ï¼š /** * è¿™é‡Œçš„getUserList_COUNT SQLæ¨¡æ¿æ˜¯ï¼š * SELECT count(*) FROM (getUserList SQLè¯­å¥) table_count * è¿”å›å€¼ç±»å‹ï¼šLong */ // false è¡¨ç¤ºä¸ä½¿ç”¨ç»Ÿè®¡æ€»æ•°ï¼Œè‡ªå®šä¹‰ç»Ÿè®¡æ•°é‡ PageHelper.startPage(1, 10, false).doCount(() -\u0026gt; stopShipMapper.getUserList_COUNT(params)); // paramsè¿™é‡ŒæŒ‡çš„æ˜¯è‡ªå®šä¹‰çš„å‚æ•°å¯¹è±¡ï¼Œå¯æœ‰å¯æ— ï¼Œä¸šåŠ¡éœ€æ±‚è€Œå·² List\u0026lt;User\u0026gt; userList = stopShipMapper.getUserList(params); PageInfo\u0026lt;User\u0026gt; info = new PageInfo\u0026lt;\u0026gt;(userList); æŠ¥é”™ï¼šåœ¨ç³»ç»Ÿä¸­å‘ç°äº†å¤šä¸ªåˆ†é¡µæ’ä»¶,è¯·æ£€æŸ¥ç³»ç»Ÿé…ç½®! ç½‘ä¸Šå¤šæ•°ä»‹ç»ï¼Œé€šè¿‡@SpringBootApplication(exclude = PageHelperAutoConfiguration.class)ï¼Œä½†æ˜¯åˆ†é¡µä¼šå¤±æ•ˆï¼Œç„¶åè¿˜æœ‰è¯´å¤šäº†ä¸¤æ¬¡è‡ªå®šä¹‰é…ç½®ã€‚ä½†æ˜¯åªè¿›è¡Œäº†ä¸€æ¬¡é…ç½®ã€‚ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚ æŸ¥çœ‹æºç å¾—çŸ¥å¦‚ä¸‹ï¼š åŸå› ï¼šä¹Ÿå°±æ˜¯è¯´æŸ¥è¯¢æ–¹æ³•åä¸èƒ½åç¼€_COUNTï¼Œå¦åˆ™æŠ¥å¼‚å¸¸ã€‚\né”™è¯¯æ–¹å¼2ï¼š äºæ˜¯ä¹æ”¹äº†è°ƒç”¨æ–¹æ³•åï¼š /** * è¿™é‡Œçš„getUserList_COUNT SQLæ¨¡æ¿æ˜¯ï¼š * SELECT count(*) FROM (getUserList SQLè¯­å¥) table_count * è¿”å›å€¼ç±»å‹ï¼šLong */ // false è¡¨ç¤ºä¸ä½¿ç”¨ç»Ÿè®¡æ€»æ•°ï¼Œè‡ªå®šä¹‰ç»Ÿè®¡æ•°é‡ PageHelper.startPage(1, 10, false).doCount(() -\u0026gt; stopShipMapper.getUserListTotal(params)); // paramsè¿™é‡ŒæŒ‡çš„æ˜¯è‡ªå®šä¹‰çš„å‚æ•°å¯¹è±¡ï¼Œå¯æœ‰å¯æ— ï¼Œä¸šåŠ¡éœ€æ±‚è€Œå·² List\u0026lt;User\u0026gt; userList = stopShipMapper.getUserList(params); PageInfo\u0026lt;User\u0026gt; info = new PageInfo\u0026lt;\u0026gt;(userList); é”™è¯¯ï¼šè°¢å¤©è°¢åœ°ï¼Œcountç»Ÿè®¡æ­£å¸¸ï¼Œä½†æ˜¯æŸ¥è¯¢è¯­å¥åé¢æ²¡æœ‰åç¼€limitï¼Œåˆ†é¡µå¤±æ•ˆã€‚ åŸå› ï¼šPageHelperåˆ†é¡µæœ‰æ•ˆçš„SQLä¸ºPageHelper.startPageåç´§è·Ÿç€çš„ä¸€æ¡SQLã€‚ä¸Šè¿°ä»£ç ç´§è·Ÿç€çš„SQLæ˜¯countï¼Œå¹²æ‰°äº†åˆ†é¡µæŸ¥è¯¢ã€‚\né”™è¯¯æ–¹å¼3ï¼š ç„¶åè¿›ä¸€æ­¥ä¿®æ”¹ï¼Œå¾—åˆ°å¦‚ä¸‹ä»£ç  /** * è¿™é‡Œçš„getUserList_COUNT SQLæ¨¡æ¿æ˜¯ï¼š * SELECT count(*) FROM (getUserList SQLè¯­å¥) table_count * è¿”å›å€¼ç±»å‹ï¼šLong */ // false è¡¨ç¤ºä¸ä½¿ç”¨ç»Ÿè®¡æ€»æ•°ï¼Œè‡ªå®šä¹‰ç»Ÿè®¡æ•°é‡ PageHelper.startPage(1, 10, false); // paramsè¿™é‡ŒæŒ‡çš„æ˜¯è‡ªå®šä¹‰çš„å‚æ•°å¯¹è±¡ï¼Œå¯æœ‰å¯æ— ï¼Œä¸šåŠ¡éœ€æ±‚è€Œå·² List\u0026lt;User\u0026gt; userList = stopShipMapper.getUserList(params); PageHelper.count(() -\u0026gt; stopShipMapper.getUserListTotal(params)) PageInfo\u0026lt;User\u0026gt; info = new PageInfo\u0026lt;\u0026gt;(userList); é”™è¯¯ï¼šç„¶ååˆé”™å•¦ï¼ŒæŠ¥é”™è¯´ä»€ä¹ˆè¦æ±‚return long å®é™… return nullã€‚ çŒœæµ‹åŸå› ï¼šå¯èƒ½ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„åˆ†é¡µå¯¹è±¡ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡åªç»Ÿè®¡äº†æ€»æ•°ï¼Œæ²¡æœ‰æ£€æµ‹åˆ°æ²¡æœ‰åˆ†é¡µæŸ¥è¯¢\né”™è¯¯æ–¹å¼4ï¼š æ¥ä¸‹æ¥å†æ”¹ï¼Œå¾—åˆ°å¦‚ä¸‹ä»£ç  /** * è¿™é‡Œçš„getUserListTotal SQLæ¨¡æ¿æ˜¯ï¼š * SELECT count(*) FROM (getUserList SQLè¯­å¥) table_count * è¿”å›å€¼ç±»å‹ï¼šLong */ // false è¡¨ç¤ºä¸ä½¿ç”¨ç»Ÿè®¡æ€»æ•°ï¼Œè‡ªå®šä¹‰ç»Ÿè®¡æ•°é‡ // false è¡¨ç¤ºä¸ä½¿ç”¨ç»Ÿè®¡æ€»æ•° Page page = PageHelper.startPage(1, 10, false); // paramsè¿™é‡ŒæŒ‡çš„æ˜¯è‡ªå®šä¹‰çš„å‚æ•°å¯¹è±¡ï¼Œå¯æœ‰å¯æ— ï¼Œä¸šåŠ¡éœ€æ±‚è€Œå·² List\u0026lt;User\u0026gt; userList = stopShipMapper.getUserList(params); // è‡ªå®šä¹‰ç»Ÿè®¡æ•°é‡ page.doCount(()-\u0026gt; stopShipMapper.getUserListTotal(params)); PageInfo\u0026lt;User\u0026gt; info = new PageInfo\u0026lt;\u0026gt;(userList); é”™è¯¯ï¼šåˆ†é¡µæ•°æ®æ­£å¸¸å•¦ï¼Œä½†æ˜¯ç»Ÿè®¡countåˆæˆäº†-1ã€‚ åŸå› ï¼šdoCountæ˜¯ä¸€ä¸ªå›è°ƒè‡ªå®šä¹‰å¤„ç†å‡½æ•°ï¼Œå¹¶æ²¡æœ‰å¯¹pageåšå¤„ç†ï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚\né”™è¯¯æ–¹å¼5ï¼š /** * è¿™é‡Œçš„getUserListTotal SQLæ¨¡æ¿æ˜¯ï¼š * SELECT count(*) FROM (getUserList SQLè¯­å¥) table_count * è¿”å›å€¼ç±»å‹ï¼šLong */ // false è¡¨ç¤ºä¸ä½¿ç”¨ç»Ÿè®¡æ€»æ•°ï¼Œè‡ªå®šä¹‰ç»Ÿè®¡æ•°é‡ // false è¡¨ç¤ºä¸ä½¿ç”¨ç»Ÿè®¡æ€»æ•° Page page = PageHelper.startPage(1, 10, false); // paramsè¿™é‡ŒæŒ‡çš„æ˜¯è‡ªå®šä¹‰çš„å‚æ•°å¯¹è±¡ï¼Œå¯æœ‰å¯æ— ï¼Œä¸šåŠ¡éœ€æ±‚è€Œå·² List\u0026lt;User\u0026gt; userList = stopShipMapper.getUserList(params); // è‡ªå®šä¹‰ç»Ÿè®¡æ•°é‡ page.doCount(() -\u0026gt; page.setTotal(stopShipMapper.getUserListTotal(params))); PageInfo\u0026lt;User\u0026gt; info = new PageInfo\u0026lt;\u0026gt;(userList); ç»è¿‡éªŒè¯ï¼Œæœ€åä¸€ç§æ–¹å¼ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œæ­¤æ—¶æ—¢å¯ä»¥åˆ†é¡µï¼Œä¹Ÿå¯ä»¥ç»Ÿè®¡æ•°é‡ï¼Œä½†æ˜¯åˆ†é¡µçš„ç»“æœè¿˜æ˜¯æœ€å°å•å…ƒã€‚å»ºè®®ä½¿ç”¨æ–¹å¼2ï¼ŒSQLä½¿ç”¨å­æŸ¥è¯¢æ¥å…ˆåˆ†é¡µåå…³è”æ•°æ® ","date":"2022-10-12T10:43:38+08:00","permalink":"https://zg-dd.github.io/blog/mybatis-pagehelper-pagination/","title":"MyBatis PageHelper å¤šè¡¨å…³è”åˆ†é¡µè§£å†³æ–¹æ¡ˆ - è‡ªå®šä¹‰countæŸ¥è¯¢"},{"content":"ä¸€ã€LambdaQueryWrapperï¼Ÿ\rLambdaQueryWrapperæ˜¯Mybatis-Plusæ’ä»¶çš„å¯¹è±¡ï¼Œå®ç°äº†ä½¿ç”¨lambdaå½¢å¼æ„é€ æŸ¥è¯¢æ¥å£ã€‚ æœ€åˆæ¥è§¦è¿™ä¸ªçš„æ—¶å€™ï¼Œç¬¬ä¸€æ„Ÿè§‰å°±æ˜¯ï¼Œå¤ªæ–¹ä¾¿äº†ï¼Œå› é¿å…æ˜¯ç”¨å¤§é‡çš„å­—ç¬¦ä¸²ï¼Œå¯¹æ—¥åçš„ç»´æŠ¤æœ‰ç€å¾ˆé‡è¦çš„ä½œç”¨ã€‚\näºŒã€ç±»å::GETæ–¹æ³•\råœ¨LambdaQueryWrapperæ„é€ è¯­å¥çš„æ–¹æ³•ä¸­ä½¿ç”¨äº†å¤§é‡çš„è¿™ç§æ–¹å¼ä½œä¸ºæŸ¥è¯¢æ•°æ®åº“çš„å­—æ®µåã€‚è¿™ç§æ–¹å¼è¿˜å¯æŒ‡å®šå…·ä½“çš„ç±»ã€‚\nç±»å::GETæ–¹æ³•ï¼Œè¿™æ˜¯lambdaçš„è°ƒç”¨Getæ–¹æ³•ï¼Œç®€åŒ–æ“ä½œçš„ï¼Œä¾‹ï¼š\nList\u0026lt;String\u0026gt; list = new ArrayLiast(); list.add(\u0026#34;Hello\u0026#34;); //åŒ–ç®€å‰ list.forEach(item -\u0026gt; System.out.println(item)); //åŒ–ç®€å list.forEach(System.out::println); å…·ä½“ä½¿ç”¨å¯è‡ªè¡Œç™¾åº¦ï¼Œ:: å®ç°æ˜¯å…¶å®ä½¿ç”¨çš„æ˜¯Function\u0026lt;T, R\u0026gt;æ¥å£ï¼Œè¯¥æ¥å£å£°æ˜@FunctionalInterfaceï¼Œå³è¿™æ˜¯å‡½æ•°å¼æ¥å£ã€‚\näºŒã€å¦‚ä½•ç»“åˆä½¿ç”¨ï¼Ÿ\rLambdaQueryWrapper æŸ¥è¯¢éœ€è¦çš„æ˜¯å­—æ®µåï¼Œè€Œ::å¾—åˆ°çš„æ˜¯æ‰§è¡Œgetæ–¹æ³•ã€‚é‚£ä¹ˆmybatis-plusåˆ°åº•æ˜¯æ€ä¹ˆå°†getæ–¹æ³•è½¬æ¢ä¸ºå­—æ®µçš„å‘¢ã€‚å¹¶ä¸æ˜¯æ‰§è¡Œå‘¢ï¼Ÿ IDEAè°ƒè¯•æ–¹æ³•å¯çŸ¥å¦‚ä¸‹ï¼š ç±»å::GETæ–¹æ³•å®é™…ç±»å‹æ˜¯Function\u0026lt;T,R\u0026gt;ï¼Œè€Œmybatis-plusä½¿ç”¨æ–°çš„æ¥å£SFunction\u0026lt;T,R\u0026gt;å°†Functionåºåˆ—åŒ–åï¼Œè¯¥Functionæ¥å£ä¼šåœ¨è¿è¡Œæ—¶æ·»åŠ writeReplaceæ–¹æ³•ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰æ‰§è¡Œæ–¹æ³•çš„ç±»åã€æ–¹æ³•åç­‰ä¿¡æ¯ã€‚ç„¶åé€šè¿‡æ–¹æ³•åè§£æå‡ºå­—æ®µåã€‚\nä¸‰ã€ç¤ºä¾‹ä»£ç \r@FunctionalInterface public interface SFunction\u0026lt;T,R\u0026gt; extends Function\u0026lt;T,R\u0026gt;, Serializable { } public class User { private String username; private String password; // getã€setç•¥ } public class Builder\u0026lt;T\u0026gt; { private T target; public Builder(Class\u0026lt;T\u0026gt; tClass) { try { target = tClass.newInstance(); } catch (InstantiationException e) { e.printStackTrace(); } catch (IllegalAccessException e) { e.printStackTrace(); } } public static \u0026lt;T\u0026gt; Builder\u0026lt;T\u0026gt; builder(Class\u0026lt;T\u0026gt; tClass) { return new Builder(tClass); } public \u0026lt;T,R\u0026gt; String getFunName(SFunction\u0026lt;T, R\u0026gt; sFunction) { try { // ç›´æ¥è°ƒç”¨writeReplace Method methods = sFunction.getClass().getDeclaredMethod(\u0026#34;writeReplace\u0026#34;); methods.setAccessible(true); //åå°„è°ƒç”¨ Object sl = methods.invoke(sFunction); SerializedLambda serializedLambda = (SerializedLambda) sl; // è·å–ç±» String implClass = serializedLambda.getImplClass(); Class\u0026lt;?\u0026gt; aClass = Class.forName(implClass.replace(\u0026#34;/\u0026#34;, \u0026#34;.\u0026#34;)); // è·å–æ–¹æ³•å String methodName = serializedLambda.getImplMethodName(); return methodName; } catch (NoSuchMethodException e) { e.printStackTrace(); } catch (IllegalAccessException e) { e.printStackTrace(); } catch (InvocationTargetException e) { e.printStackTrace(); } catch (ClassNotFoundException e) { e.printStackTrace(); } // è·å–å€¼ return null; } } public class Main { public static void main(String[] args) { Builder\u0026lt;User\u0026gt; builder = Builder.builder(User.class); String name = builder.getFunName(User::getUsername); System.out.println(name); } } è¿è¡Œç»“æœï¼š\ngetUsername æ€»ç»“\ré€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œè½»è€Œæ˜“ä¸¾å¯è·å–åˆ°æ–¹æ³•çš„åæˆ–å­—æ®µåæˆ–è€…å…¶ä»–ä¿¡æ¯ã€‚ä¸Šé¢çš„ä»£ç åœ¨ä¸šåŠ¡éœ€æ±‚æ–¹é¢æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ã€‚ä½†æ˜¯åœ¨æ„é€ æ¡ä»¶æƒ…å†µä¸‹ï¼Œç»“åˆè®¾è®¡æ¨¡å¼ï¼Œæœ‰å¾ˆé†’ç›®çš„ä½œç”¨ï¼Œèƒ½å¤Ÿç»™ç¼–ç¨‹å¸¦æ¥ä¾¿åˆ©.\n","date":"2022-09-19T15:24:42+08:00","permalink":"https://zg-dd.github.io/blog/mybatis-lambda/","title":"MyBatis-Plus LambdaQueryWrapper - å‡½æ•°å¼ç¼–ç¨‹å®è·µ"},{"content":"axiosè§£å†³åŒæ­¥é—®é¢˜çš„æ–¹å¼\rè‡³ä»Šæˆ‘èƒ½æƒ³åˆ°çš„è§£å†³åŒæ­¥/å¼‚æ­¥é—®é¢˜çš„ä¸‰ç§æ–¹å¼å¦‚ä¸‹ï¼š\né€šè¿‡å‡½æ•°å›è°ƒè§£å†³åŒæ­¥å¼‚æ­¥ã€‚è¿™ç§æ–¹å¼ä»£ç ä¹¦å†™å±‚å±‚åµŒå¥—ä¸ç›´è§‚ã€‚ async/awaitå…³é”®å­—ï¼Œè¿™ä¸¤ä¸ªå…³é”®å­—æ­é…ä½¿ç”¨å®Œç¾è§£å†³åŒæ­¥/å¼‚æ­¥é—®é¢˜ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å¹¶ä¸èƒ½è¯´æ˜¯è§£å†³äº†åŒæ­¥é—®é¢˜ï¼Œè€Œæ˜¯è¯´å°†å¼‚æ­¥åŠŸèƒ½å»¶ç»­åˆ°äº†è°ƒç”¨è€…ï¼Œå³çˆ¶æ–¹æ³•ã€‚å½“ç„¶è¿™ç§æ–¹å¼åœ¨è°ƒç”¨æ–¹æœ¬èº«å°±æ˜¯å¼‚æ­¥å‡½æ•°çš„æƒ…å†µä¸‹æœ‰æ•ˆã€‚ åˆ©ç”¨å¼•ç”¨å˜é‡çš„æ–¹å¼è§£å†³åŒæ­¥å¼‚æ­¥é—®é¢˜ã€‚è¿™ç§æ–¹å¼å®Œç¾è§£å†³äº†ç¬¬2ç§æ–¹å¼å­˜åœ¨çš„é—®é¢˜ï¼Œè°ƒç”¨æ–¹å¯ä»¥æ˜¯åŒæ­¥æ–¹æ³•ã€‚ä½†æ˜¯è¯¥ç§æ–¹å¼ä¸èƒ½è§£å†³åŸºæœ¬ç±»å‹ï¼Œå› ä¸ºåŸºæœ¬ç±»å‹ä¸æ˜¯ä½¿ç”¨å¼•ç”¨å˜é‡çš„ã€‚å¯é€šè¿‡å°†åŸºæœ¬ç±»å‹åŒ…è£…åœ¨å¯¹è±¡ä¸­ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ä»¥ä¸Šä¸‰ç§æ–¹å¼å„æœ‰åˆ©å¼Šï¼Œå…·ä½“æƒ…å†µä½¿ç”¨å…·ä½“æ–¹å¼ã€‚ä¸‹é¢é€šè¿‡ç¤ºä¾‹æ¨¡æ‹Ÿä¸€ä¸‹ä¸Šè¿°ä¸‰ç§æ–¹å¼ã€‚\nå›è°ƒè§£å†³\næ­£å¸¸æƒ…å†µä¸‹ï¼š\n// æ¨¡æ‹Ÿå¼‚æ­¥å‘æ•°æ® function req(str) { return new Promise((resolve, reject) =\u0026gt; { resolve(str) }) } // è¯·æ±‚æ–¹æ³• function update(data) { req(data).then(result =\u0026gt; { str = result; // ä»£ç æ›´æ–°ååŒºåŸŸ console.log(\u0026#34;ç»“æœ3:\u0026#34; + str); // ä»£ç 1 }); console.log(\u0026#34;ç»“æœ1:\u0026#34; + str); // ä»£ç 2 } let str = \u0026#34;ä½ å¥½\u0026#34;; // ä»£ç 3 update(\u0026#34;hello\u0026#34;); // ä»£ç 4 console.log(\u0026#34;ç»“æœ2:\u0026#34; + str); // ä»£ç 5 ç»“æœï¼š åˆ†æï¼šä»£ç 3,ä¹‹åï¼Œæ‰§è¡Œä»£ç 4ï¼Œå…¶ä¸­å¹¶ä¸ä¼šç«‹åˆ»æ‰§è¡Œä»£ç 1ï¼Œè€Œæ˜¯æ‰§è¡Œæ–¹æ³•å†…éƒ¨çš„ä»£ç 2å’Œä¹‹åè·³å‡ºä»£ç 5ã€‚å› ä¸ºreq(data).then()æ˜¯å¼‚æ­¥çš„ï¼Œç­‰å¼‚æ­¥è¯·æ±‚ç»“æŸåä¹‹è¡Œä»£ç 1ï¼Œå› æ­¤å†™åœ¨ä»£ç 1åŒºåŸŸèƒ½å¤Ÿè§£å†³å®é™…é—®é¢˜ï¼Œå°‘é‡å›è°ƒï¼Œè¿™ä¸ªæ–¹å¼å¾ˆæ–¹ä¾¿ï¼Œå¤šæ¬¡å›è°ƒæ—¶ï¼Œé™ä½äº†ä»£ç çš„å¯è¯»æ€§ã€‚\nasync/awaitå…³é”®å­—\n// æ¨¡æ‹Ÿå¼‚æ­¥å‘æ•°æ® function req(str) { return new Promise((resolve, reject) =\u0026gt; { resolve(str) }) } // è¯·æ±‚æ–¹æ³•,é€šè¿‡å£°æ˜async/await,å¯ç­‰å¾…å¼‚æ­¥å®Œæˆä¹‹åå†æ‰§è¡Œ async function update(data) { await req(data).then(result =\u0026gt; { str = result; console.log(\u0026#34;ç»“æœ2:\u0026#34; + str); // ä»£ç 1 }); // ä»£ç æ›´æ–°ååŒºåŸŸ console.log(\u0026#34;ç»“æœ3:\u0026#34; + str); // ä»£ç 2 } let str = \u0026#34;ä½ å¥½\u0026#34;; // ä»£ç 3 update(\u0026#34;hello\u0026#34;); // ä»£ç 4 console.log(\u0026#34;ç»“æœ1:\u0026#34; + str); // ä»£ç 5 ç»“æœï¼š æ­¥éª¤ï¼šç¬¬ä¸€æ­¥å°†çˆ¶çº§æ–¹æ³•ä¹Ÿå°±æ˜¯updateï¼Œå£°æ˜ä¸ºå¼‚æ­¥æ–¹æ³•ï¼ˆasyncï¼‰ï¼Œç„¶åå†éœ€è¦ç­‰å¾…åŒæ­¥çš„åœ°æ–¹æ ‡æ³¨ä¸ºawaitï¼Œè¿™æ ·å³å¯ç­‰å¾…req(data).then()è¯·æ±‚æ‰§è¡ŒæˆåŠŸä¹‹åï¼Œå†æ‰§è¡Œä¸‹é¢ä»£ç ã€‚æ³¨æ„ï¼šasyncå¿…ä¸å¯å°‘ï¼Œå¦åˆ™æŠ¥é”™ã€‚ åˆ†æï¼šä»£ç æ‰§è¡Œå®Œ3æ—¶ï¼Œå› ä¸ºä»£ç 4å£°æ˜ä¸ºå¼‚æ­¥äº†ï¼Œæ•…å…ˆæ‰§è¡Œäº†ä»£ç 5ï¼Œæ‰§è¡Œè¯·æ±‚æ—¶ï¼Œå‘ç°è¯·æ±‚ä¸ºç­‰å¾…ï¼Œæ•…ç­‰thenæ‰§è¡Œç»“æŸåï¼Œå³æ‰§è¡Œäº†ä»£ç 1ï¼Œæœ€åæ‰§è¡Œäº†ä»£ç 2ã€‚æ‰€ä»¥ä»£ç 2åŒºåŸŸèƒ½å¤Ÿè§£å†³å®é™…é—®é¢˜ã€‚è™½ç„¶è¿™æ ·æ˜¯è§£å†³äº†updateæ–¹æ³•å†…éƒ¨çš„åŒæ­¥ä»£ç é—®é¢˜ï¼Œä½†æ˜¯å˜ç›¸çš„å°†å¼‚æ­¥é—®é¢˜å‘ä¸Šæ‹‹äº†ã€‚updateæ–¹æ³•ä¸ºå¼‚æ­¥äº†ã€‚\nåˆ©ç”¨å¼•ç”¨å˜é‡çš„æ–¹å¼è§£å†³åŒæ­¥å¼‚æ­¥é—®é¢˜ ä¸‹é¢ä½¿ç”¨æ–°çš„ç¤ºä¾‹ï¼Œå› ä¸ºå­—ç¬¦ä¸²ä¸æ˜¯ä½¿ç”¨å¼•ç”¨çš„æ–¹å¼ï¼Œéœ€è¦å°†å­—ç¬¦ä¸²åŒ…è£¹åœ¨å¯¹è±¡ä¸­æ‰èµ·ä½œç”¨ã€‚å…ˆçœ‹æ­£å¸¸çš„ç¤ºä¾‹ï¼š\n// æ¨¡æ‹Ÿå¼‚æ­¥å‘æ•°æ® function req(obj) { return new Promise((resolve, reject) =\u0026gt; { resolve(obj) }) } // è¯·æ±‚æ–¹æ³•,é€šè¿‡å£°æ˜async/await,å¯ç­‰å¾…å¼‚æ­¥å®Œæˆä¹‹åå†æ‰§è¡Œ function update(data) { req(data).then(result =\u0026gt; { obj = result; console.log(\u0026#34;ç»“æœ3:\u0026#34;,obj); // ä»£ç 1 }); console.log(\u0026#34;ç»“æœ1:\u0026#34;,obj); // ä»£ç 2 } let obj = { msg: \u0026#34;ä½ å¥½\u0026#34; }; // ä»£ç 3 update({ msg: \u0026#34;hello\u0026#34; }); // ä»£ç 4 console.log(\u0026#34;ç»“æœ2:\u0026#34;,obj); // ä»£ç 5 ç»“æœï¼š åˆ†æï¼šä¸ç”¨å¤šè¯´ï¼Œä»£ç æ‰§è¡Œé¡ºåºä¸ºï¼šä»£ç 3ã€4ã€2ã€5ã€1ã€‚æ‰§è¡Œä»£ç 2å’Œ5æ—¶ï¼Œobjå…¶å®æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œå› æ­¤è¿™ä¸¤ä¸ªç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ï¼Œèµ‹å€¼ä½¿ç”¨obj = resultï¼Œç»“æœ2ä¹‹å‰å°†objå¼•ç”¨åˆ°äº†æ–°çš„å¯¹è±¡ï¼Œå› æ­¤æ‰§è¡Œç»“æœ2æœ€åå’Œä¹‹å‰ä¸ä¸€æ ·ã€‚ é—®é¢˜ï¼šæ€ä¹ˆæ ·æ‰èƒ½å°†ç»“æœ1å’Œç»“æœ2çš„å€¼å’Œç»“æœ3æ˜¯ä¸€æ ·çš„å‘¢ï¼Ÿ æ–¹æ¡ˆï¼šè¿™æ˜¯èµ‹å€¼çš„é—®é¢˜ï¼Œå› æ­¤obj = resultçš„æ„æ€æ˜¯å°†objæŒ‡å‘äº†æ–°çš„å¼•ç”¨å¯¹è±¡ï¼Œä¹‹å‰çš„ä¸¢å¼ƒã€‚æ‰€ä»¥åœ¨èµ‹å€¼çš„æ—¶å€™ï¼Œä¸è¦ä¸¢å¼ƒä¹‹å‰çš„å¯¹è±¡ï¼Œåªæ˜¯åšä¿®æ”¹å¯¹è±¡å†…éƒ¨å±æ€§çš„å€¼ï¼Œé‚£ä¹ˆä¸ç®¡å†å“ªé‡Œå¼•ç”¨éƒ½æ˜¯ä¸€æ ·çš„å€¼äº†ã€‚\n// æ¨¡æ‹Ÿå¼‚æ­¥å‘æ•°æ® function req(obj) { return new Promise((resolve, reject) =\u0026gt; { resolve(obj) }) } // è¯·æ±‚æ–¹æ³•,é€šè¿‡å£°æ˜async/await,å¯ç­‰å¾…å¼‚æ­¥å®Œæˆä¹‹åå†æ‰§è¡Œ function update(data) { req(data).then(result =\u0026gt; { // åªèµ‹å€¼å±æ€§çš„å€¼ï¼Œä¸æ”¹å˜å¼•ç”¨åœ°å€ obj.msg = result.msg; console.log(\u0026#34;ç»“æœ3:\u0026#34;,obj); // ä»£ç 1 }); console.log(\u0026#34;ç»“æœ1:\u0026#34;,obj); // ä»£ç 2 } let obj = { msg: \u0026#34;ä½ å¥½\u0026#34; }; // ä»£ç 3 update({ msg: \u0026#34;hello\u0026#34; }); // ä»£ç 4 console.log(\u0026#34;ç»“æœ2:\u0026#34;,obj); // ä»£ç 5 ç»“æœï¼š åˆ†æï¼šå¦‚ç»“æœæ‰€ç¤ºï¼Œæœ€åçš„æ•°æ®ä¸ºå®æ—¶çš„æ•°æ®ï¼Œä½†æ˜¯ä¸Šé¢çš„æ‰“å°æ•°æ®æ˜¯ä»£ç æ‰§è¡Œæ—¶çš„å€¼ï¼Œè€Œæˆ‘ä»¬å¹³æ—¶è°ƒç”¨è·å–å€¼æ—¶ï¼Œéƒ½æ˜¯ä½¿ç”¨å¼•ç”¨æ¥è·å–å˜é‡çš„å®æ—¶æ•°æ®ã€‚è¿™ç§æ–¹å¼æ²¡æœ‰æ”¹å˜ä»£ç æ‰§è¡Œçš„é¡ºåºï¼Œä¹Ÿæ²¡æœ‰æ”¹å˜å¼‚æ­¥å’ŒåŒæ­¥çš„æ–¹å¼ï¼Œåªæ˜¯æ”¹å˜äº†èµ‹å€¼æ–¹å¼ã€‚è¿™ç§æ–¹å¼åœ¨çˆ¶æ–¹æ³•ä¸èƒ½ä¸ºå¼‚æ­¥æ–¹æ³•æ—¶ï¼Œå¾ˆæœ‰æ•ˆã€‚å†æ¬¡å¼ºè°ƒï¼Œå¦‚æœä¸ºåŸºæœ¬ç±»å‹ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„çš„åº”ç”¨ä¸‹æ‰æœ‰æ•ˆã€‚\n","date":"2022-07-15T17:07:31+08:00","permalink":"https://zg-dd.github.io/blog/axios-sync-solutions/","title":"axiosåŒæ­¥é—®é¢˜ - ä¸‰ç§è§£å†³æ–¹æ¡ˆè¯¦è§£"},{"content":"æ­£åˆ™è¡¨è¾¾å¼éƒ¨åˆ†ç†è§£\r[] ä½¿ç”¨[]è¡¨ç¤ºåŒ¹é…[]ä¸­æ‹¬å·ä¸­çš„ä¸€ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚[abc]ï¼Œè¡¨ç¤ºåŒ¹é…a,b,cçš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ä¸­abcdabcdbdï¼Œä¼šåŒ¹é…åˆ°a,b,c,a,b,c,bï¼Œæœ¬æ„æ˜¯åªè¦å‡ºç°ä¸€ä¸ªå­—ç¬¦å°±ä¼šåŒ¹é…ï¼Œä¸ä¼šåˆå¹¶åˆ°ä¸€èµ·ã€‚ è€Œ[abc]+ï¼Œä»£è¡¨çš„æ˜¯åŒ¹é…abcä¸€æ¬¡æˆ–å‡ºç°å¤šæ¬¡ï¼Œabcdabcdbdè¿™ä¸ªä¾‹å­ä¸­ä¼šåŒ¹é…åˆ°abc,abc,bï¼Œä¹Ÿå°±è¯´åŒ¹é…çš„æ˜¯a,b,cä¸­çš„ä»»ä½•å­—ç¬¦ï¼Œå‡ºç°ä¸€æ¬¡æˆ–å¤šæ¬¡éƒ½åŒ¹é…ï¼Œå¦‚æœæ˜¯è¿ç»­å‡ºç°çš„ä¼šå½“åšä¸€ä¸ªå­—ç¬¦ä¸²åŒ¹é…åˆ°ã€‚ \\ \\è¡¨ç¤ºè½¬ç§»ç¬¦å·ï¼Œå¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦æœ‰\\n(æ¢è¡Œ)ã€\\t(æ°´å¹³åˆ¶è¡¨ç¬¦ï¼Œä¸€ä¸ªTabé”®)ã€\\r(å›è½¦)ã€\\b(é€€æ ¼)ã€\\f(æ¢é¡µç¬¦)ã€\\n(æ¢è¡Œç¬¦)ã€\\v(å‚ç›´åˆ¶è¡¨ç¬¦)ã€\\\u0026rsquo;(ä»£è¡¨ \u0026rsquo; )ã€\\\u0026quot;(ä»£è¡¨ \u0026ldquo;)ã€\\\\(ä»£è¡¨ \\)ç­‰ç­‰ã€‚æ­£åˆ™è¡¨è¾¾å¼ä¸­è¿˜æœ‰è¡¨ç¤ºçš„å¾ˆå¤šç¬¦å·ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€ä¸¾ä¾‹äº†ï¼Œä¸‹é¢çš„å›¾ç‰‡ä¸­ç»™å‡ºäº†æ‰€æœ‰ç¬¦å·ã€‚ è¿™é‡Œè¦å¼ºè°ƒçš„æ˜¯ï¼š å†™æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œ\\bã€\\fã€\\nã€\\tã€\\rã€\\\u0026rsquo; è¿™äº›éƒ½å¯ä»¥ç›´æ¥å†™ï¼Œä¾‹å¦‚regex=\u0026quot;\\n\u0026rdquo;;å®ƒå°±è¡¨ç¤ºåŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè€Œregex=\u0026quot;\\\\n\u0026quot;ï¼›ä¹Ÿè¡¨ç¤ºä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè¿™ä¸¤ç§å†™æ³•éƒ½å¯ä»¥ï¼Œä½†æ˜¯å¯¹äºä¸€äº›ç¬¦å·å°±ä¸èƒ½è¿™æ ·å†™äº†ï¼Œä¾‹å¦‚ï¼š\\wã€\\Wã€\\Bã€\\Sã€\\sç­‰ç­‰è¿™äº›è¡¨ç¤ºå«ä¹‰å°±ä¸èƒ½è¿™æ ·å†™äº†ï¼Œå¿…é¡»å†™æˆregex=\u0026quot;\\\\w\u0026quot;,æ‰èƒ½ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚å¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œå†å¤åˆ¶è¿™äº›è½¬ä¹‰å­—ç¬¦æ—¶ï¼Œä¼šå°†\\è‡ªåŠ¨å†™æˆ\\\\ï¼Œæ‰€ä»¥åœ¨å†™æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨åˆ°å¸¦æœ‰\\ç¬¦å·çš„ï¼Œæˆ‘å»ºè®®ä½¿ç”¨\\\\è¡¨ç¤ºã€‚ æ³¨æ„ï¼š å¹¶ä¸æ˜¯è¯´æ‰€æœ‰çš„è½¬ä¹‰å­—ç¬¦éƒ½è¦å†™æˆ\\\\ï¼Œä¾‹å¦‚ï¼šåŒ¹é… \u0026quot; å­—ç¬¦ï¼Œä¸èƒ½å†™æˆregex=\u0026quot;\\\\\u0026quot;\u0026quot;ï¼Œç³»ç»Ÿä¼šå°† \u0026quot; è½¬ä¹‰ä¸ºæœ¬èº« \u0026quot; å«ä¹‰ï¼Œé‚£ä¹ˆå†javaä¸­ä¸Šè¿°è¿™å¥è¯å°±ä¼šå¤šå‡ºä¸€ä¸ª \u0026quot; ã€‚æ‰€ä»¥åº”è¯¥å†™æˆregex=\u0026quot;\\\\\\\u0026quot;\u0026quot;ï¼Œå†™æˆregex=\u0026quot;\\\u0026quot;\u0026quot;ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ å¦‚æœè¦åŒ¹é…çš„æ˜¯ \\ çš„è¯ï¼Œjavaä¸­çš„è¡¨ç¤ºä¸ºregex= \u0026quot; \\\\\\\\ \u0026ldquo;ï¼Œä¸ºå››ä¸ª \\ ï¼Œå…¶ä¸­ä¸¤ä¸ªçš„å«ä¹‰è¡¨ç¤ºè½¬ä¹‰å­—ç¬¦ï¼Œå‰ä¸¤ä¸ªä»£è¡¨è½¬ä¹‰ç¬¦å· \\ ï¼Œåä¸¤ä¸ªä»£è¡¨å¦å¤–ä¸€ä¸ªç¬¦å· \\ ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ª \\ å†å°†ç¬¬äºŒä¸ª \\ è½¬ä¹‰ä¸ºæœ¬èº«å­—ç¬¦ (è¿™æ˜¯æˆ‘è‡ªå·±çš„ç†è§£ï¼Œä¹Ÿè®¸ä¸æ­£ç¡®ï¼Œä½†æ˜¯è¡¨ç¤ºæ–¹å¼æ˜¯å¯¹çš„)ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¦‚æœè¦åŒ¹é…\\\\,å†™æ³•ä¸ºregex=\u0026rdquo; \\\\\\\\\\\\\\\\ \u0026ldquo; | è¿™ä¸ªç¬¦å·åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºæˆ–çš„æ„æ€ï¼Œå¯¹äºæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„x|yï¼Œè¡¨ç¤ºåŒ¹é…xæˆ–è€…yï¼Œè¿™é‡Œçš„ | è¿ç®—çš„ä¼˜å…ˆçº§è¦é«˜äºx,yï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºregex = \u0026ldquo;[a][b]|[c][d]\u0026rdquo;ï¼Œæ¥è¯´ï¼Œå®ƒåŒ¹é…çš„æ˜¯å‡ºç°abæˆ–è€…å‡ºç°cdçš„å­—ç¬¦ä¸²ï¼Œä¸æ˜¯åŒ¹é…a(bæˆ–è€…c)dè¿™æ ·çš„å­—ç¬¦ä¸²ã€‚ ?\u0026lt;=å’Œ?= è¿™ä¸¤ä¸ªç¬¦å·å¾ˆé‡è¦ï¼Œè¿™ç®—æ˜¯ä¸ªç»„åˆç¬¦å·å§ï¼ŒåŒ¹é…è¯¥æŸç¬¦å·ä½†ä¸åŒ…å«æ­¤ç¬¦å·ï¼Œä¸¾ä¸ªä¾‹å­å°±èƒ½æ˜ç™½äº†ï¼Œæ¯”å¦‚è¯´è¦æˆªå–åŒå¼•å·ï¼ˆ\u0026rdquo; \u0026ldquo;ï¼‰ä¸­è¯´çš„è¯ï¼Œæ¯”å¦‚String str = \u0026ldquo;he says,\\\u0026ldquo;Hello,Java!\\\u0026rdquo; \u0026ldquo;ï¼›è¯´å‡ºçš„è¯ä¸­é€šå¸¸ä½¿ç”¨\u0026quot;\u0026ldquo;å·æ‹¬èµ·æ¥ï¼Œç°åœ¨éœ€è¦åŒ¹é…è¯´è¯çš„å†…å®¹ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥è¡¨ç¤ºä¸ºregex = \u0026ldquo;(?\u0026lt;=\\\u0026rdquo;)[^\\\u0026rdquo;]+(?=\\\u0026rdquo;)\u0026quot;;è¿™å…¶ä¸­çš„æ„æ€æ˜¯ï¼š(?\u0026lt;=\\\u0026quot;)ä»£è¡¨é¦–å…ˆåŒ¹é… \u0026quot; ï¼Œä½†æ˜¯ä¸åŒ…å« \u0026quot; ï¼Œ[^\\\u0026rdquo;]+ä»£è¡¨å…¶æ¬¡åŒ¹é…ä¸€æ¬¡æˆ–è€…å¤šæ¬¡åŒ¹é…ä¸æ˜¯ \u0026quot; çš„å­—ç¬¦ï¼Œ(?=\\\u0026quot;)ä»£è¡¨å†æ¬¡åŒ¹é… \u0026quot; ï¼Œä½†æ˜¯ä¸åŒ…å« \u0026quot; ã€‚è¿™æ ·å­å°±èƒ½æˆªå–ä¸­é—´çš„å¥å­äº†ã€‚è¿™ä¸¤ä¸ªç¬¦å·ä¸€èˆ¬é…åˆä½¿ç”¨ï¼Œè¡¨ç¤ºä¸åŒ…å«åŒ¹é…å­—ç¬¦ï¼Œä¸€ä¸ªåœ¨å‰ï¼Œä¸€ä¸ªåœ¨å æ³¨ï¼šä»¥ä¸Šæ‰€æœ‰çš„å•å¼•å·åŒå¼•å·éƒ½æ˜¯è‹±æ–‡ï¼Œç”±äºè½¬ä¹‰çš„é—®é¢˜ï¼Œè®¸å¤šç¬¦å·å˜æˆäº†ä¸­æ–‡ï¼Œçœ‹æœ¬åšå®¢çš„æ—¶å€™éœ€è¦æ³¨æ„ æš‚æ—¶å­¦åˆ°çš„ç”¨åˆ°çš„å°±åªæœ‰è¿™äº›ï¼Œåè¾¹å¦‚æœå†æ³¨æ„åˆ°æ–°çš„ç‚¹ï¼Œä¹‹åå†è¡¥å……ã€‚\næ­£åˆ™è¡¨è¾¾å¼è¡¨\r","date":"2020-04-27T18:00:00+08:00","permalink":"https://zg-dd.github.io/stu/regular/","title":"æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€å…¥é—¨ï¼šå¸¸ç”¨ç¬¦å·è§£æ([]ã€\\ã€|ã€(?\u003c=))"}]